<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Solutions</title>
  <style>
html {
color: #1a1a1a;
background-color: #fdfdfd;
}
body {
margin: 0 auto;
max-width: 36em;
padding-left: 50px;
padding-right: 50px;
padding-top: 50px;
padding-bottom: 50px;
hyphens: auto;
overflow-wrap: break-word;
text-rendering: optimizeLegibility;
font-kerning: normal;
}
@media (max-width: 600px) {
body {
font-size: 0.9em;
padding: 12px;
}
h1 {
font-size: 1.8em;
}
}
@media print {
html {
background-color: white;
}
body {
background-color: transparent;
color: black;
font-size: 12pt;
}
p, h2, h3 {
orphans: 3;
widows: 3;
}
h2, h3, h4 {
page-break-after: avoid;
}
}
p {
margin: 1em 0;
}
a {
color: #1a1a1a;
}
a:visited {
color: #1a1a1a;
}
img {
max-width: 100%;
}
svg {
height: auto;
max-width: 100%;
}
h1, h2, h3, h4, h5, h6 {
margin-top: 1.4em;
}
h5, h6 {
font-size: 1em;
font-style: italic;
}
h6 {
font-weight: normal;
}
ol, ul {
padding-left: 1.7em;
margin-top: 1em;
}
li > ol, li > ul {
margin-top: 0;
}
blockquote {
margin: 1em 0 1em 1.7em;
padding-left: 1em;
border-left: 2px solid #e6e6e6;
color: #606060;
}
code {
font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
font-size: 85%;
margin: 0;
hyphens: manual;
}
pre {
margin: 1em 0;
overflow: auto;
}
pre code {
padding: 0;
overflow: visible;
overflow-wrap: normal;
}
.sourceCode {
background-color: transparent;
overflow: visible;
}
hr {
background-color: #1a1a1a;
border: none;
height: 1px;
margin: 1em 0;
}
table {
margin: 1em 0;
border-collapse: collapse;
width: 100%;
overflow-x: auto;
display: block;
font-variant-numeric: lining-nums tabular-nums;
}
table caption {
margin-bottom: 0.75em;
}
tbody {
margin-top: 0.5em;
border-top: 1px solid #1a1a1a;
border-bottom: 1px solid #1a1a1a;
}
th {
border-top: 1px solid #1a1a1a;
padding: 0.25em 0.5em 0.25em 0.5em;
}
td {
padding: 0.125em 0.5em 0.25em 0.5em;
}
header {
margin-bottom: 4em;
text-align: center;
}
#TOC li {
list-style: none;
}
#TOC ul {
padding-left: 1.3em;
}
#TOC > ul {
padding-left: 0;
}
#TOC a:not(:hover) {
text-decoration: none;
}
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}

ul.task-list[class]{list-style: none;}
ul.task-list li input[type="checkbox"] {
font-size: inherit;
width: 0.8em;
margin: 0 0.8em 0.2em -1.6em;
vertical-align: middle;
}
.display.math{display: block; text-align: center; margin: 0.5rem auto;}

pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
</head>
<body>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#livre-des-solutions" id="toc-livre-des-solutions"><span class="toc-section-number">1</span> Livre des Solutions</a>
<ul>
<li><a href="#a.-solutions-hdl-portes-logiques" id="toc-a.-solutions-hdl-portes-logiques"><span class="toc-section-number">1.1</span> A. Solutions HDL (Portes
Logiques)</a></li>
<li><a href="#b.-solutions-assembleur-a32" id="toc-b.-solutions-assembleur-a32"><span class="toc-section-number">1.2</span> B. Solutions Assembleur
A32</a></li>
<li><a href="#c.-solutions-c32" id="toc-c.-solutions-c32"><span class="toc-section-number">1.3</span> C. Solutions C32</a></li>
<li><a href="#d.-solutions-construction-du-compilateur" id="toc-d.-solutions-construction-du-compilateur"><span class="toc-section-number">1.4</span> D. Solutions Construction du
Compilateur</a></li>
<li><a href="#e.-solutions-systeme-dexploitation" id="toc-e.-solutions-systeme-dexploitation"><span class="toc-section-number">1.5</span> E. Solutions Systeme
dâ€™Exploitation</a></li>
</ul></li>
</ul>
</nav>
<h1 data-number="1" id="livre-des-solutions"><span class="header-section-number">1</span> Livre des Solutions</h1>
<p>Ce document contient les solutions completes de tous les exercices du
simulateur web Codex.</p>
<p><strong>Note:</strong> Ces solutions sont fournies pour reference
apres avoir tente les exercices.</p>
<hr />
<h2 data-number="1.1" id="a.-solutions-hdl-portes-logiques"><span class="header-section-number">1.1</span> A. Solutions HDL (Portes
Logiques)</h2>
<h3 data-number="1.1.1" id="inv"><span class="header-section-number">1.1.1</span> Inv</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Inverter (NOT gate)</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Inv(a) = Nand(a, a)</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Inv</span> <span class="kw">is</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Inv</span> <span class="kw">is</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">nand2</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">nand2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> a<span class="ot">,</span> y <span class="ot">=&gt;</span> y);</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.2" id="and2"><span class="header-section-number">1.1.2</span> And2</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- AND gate</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- And2(a,b) = Inv(Nand(a,b))</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">And2</span> <span class="kw">is</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">And2</span> <span class="kw">is</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">nand2</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Inv</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> t <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">nand2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> b<span class="ot">,</span> y <span class="ot">=&gt;</span> t);</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> t<span class="ot">,</span> y <span class="ot">=&gt;</span> y);</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.3" id="or2"><span class="header-section-number">1.1.3</span> Or2</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- OR gate</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Or2(a,b) = Nand(Inv(a), Inv(b))</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Or2</span> <span class="kw">is</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Or2</span> <span class="kw">is</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">nand2</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Inv</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> na<span class="ot">,</span> nb <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> y <span class="ot">=&gt;</span> na);</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> b<span class="ot">,</span> y <span class="ot">=&gt;</span> nb);</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">nand2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> na<span class="ot">,</span> b <span class="ot">=&gt;</span> nb<span class="ot">,</span> y <span class="ot">=&gt;</span> y);</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.4" id="xor2"><span class="header-section-number">1.1.4</span> Xor2</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- XOR gate</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Xor2(a,b) = Or2(And2(a, Inv(b)), And2(Inv(a), b))</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Xor2</span> <span class="kw">is</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Xor2</span> <span class="kw">is</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Inv</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">And2</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Or2</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> na<span class="ot">,</span> nb<span class="ot">,</span> t1<span class="ot">,</span> t2 <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> y <span class="ot">=&gt;</span> na);</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> b<span class="ot">,</span> y <span class="ot">=&gt;</span> nb);</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> nb<span class="ot">,</span> y <span class="ot">=&gt;</span> t1);</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u3</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> na<span class="ot">,</span> b <span class="ot">=&gt;</span> b<span class="ot">,</span> y <span class="ot">=&gt;</span> t2);</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u4</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> t1<span class="ot">,</span> b <span class="ot">=&gt;</span> t2<span class="ot">,</span> y <span class="ot">=&gt;</span> y);</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.5" id="mux"><span class="header-section-number">1.1.5</span> Mux</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 2-way Multiplexer</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- if sel=0 then y=a else y=b</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Mux</span> <span class="kw">is</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    a   <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    b   <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    sel <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    y   <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Mux</span> <span class="kw">is</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Inv</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">And2</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Or2</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> nsel<span class="ot">,</span> t1<span class="ot">,</span> t2 <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> nsel);</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> nsel<span class="ot">,</span> y <span class="ot">=&gt;</span> t1);</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> b<span class="ot">,</span> b <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> t2);</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u3</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> t1<span class="ot">,</span> b <span class="ot">=&gt;</span> t2<span class="ot">,</span> y <span class="ot">=&gt;</span> y);</span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.6" id="dmux"><span class="header-section-number">1.1.6</span> DMux</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Demultiplexer</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- if sel=0 then {a,b}={x,0} else {a,b}={0,x}</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">DMux</span> <span class="kw">is</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    x   <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    sel <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    a   <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    b   <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">DMux</span> <span class="kw">is</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Inv</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">And2</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> nsel <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> nsel);</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> x<span class="ot">,</span> b <span class="ot">=&gt;</span> nsel<span class="ot">,</span> y <span class="ot">=&gt;</span> a);</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> x<span class="ot">,</span> b <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> b);</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.7" id="inv16"><span class="header-section-number">1.1.7</span> Inv16</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 16-bit Inverter</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Inv16</span> <span class="kw">is</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Inv16</span> <span class="kw">is</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Inv</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">0</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">0</span>));</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">1</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">1</span>));</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">2</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">2</span>));</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u3</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">3</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">3</span>));</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u4</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">4</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">4</span>));</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u5</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">5</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">5</span>));</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u6</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">6</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">6</span>));</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u7</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">7</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">7</span>));</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u8</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">8</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">8</span>));</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u9</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">9</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">9</span>));</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u10</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">10</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">10</span>));</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u11</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">11</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">11</span>));</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u12</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">12</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">12</span>));</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u13</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">13</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">13</span>));</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u14</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">14</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">14</span>));</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u15</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">15</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">15</span>));</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.8" id="and16"><span class="header-section-number">1.1.8</span> And16</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 16-bit AND</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">And16</span> <span class="kw">is</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    b <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">And16</span> <span class="kw">is</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">And2</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">0</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">0</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">0</span>));</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">1</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">1</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">1</span>));</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">2</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">2</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">2</span>));</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u3</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">3</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">3</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">3</span>));</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u4</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">4</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">4</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">4</span>));</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u5</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">5</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">5</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">5</span>));</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u6</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">6</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">6</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">6</span>));</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u7</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">7</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">7</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">7</span>));</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u8</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">8</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">8</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">8</span>));</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u9</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">9</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">9</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">9</span>));</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u10</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">10</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">10</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">10</span>));</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u11</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">11</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">11</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">11</span>));</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u12</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">12</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">12</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">12</span>));</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u13</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">13</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">13</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">13</span>));</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u14</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">14</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">14</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">14</span>));</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u15</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">15</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">15</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">15</span>));</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.9" id="or16"><span class="header-section-number">1.1.9</span> Or16</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 16-bit OR</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Or16</span> <span class="kw">is</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    b <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Or16</span> <span class="kw">is</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Or2</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">0</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">0</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">0</span>));</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">1</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">1</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">1</span>));</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">2</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">2</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">2</span>));</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u3</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">3</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">3</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">3</span>));</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u4</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">4</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">4</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">4</span>));</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u5</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">5</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">5</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">5</span>));</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u6</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">6</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">6</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">6</span>));</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u7</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">7</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">7</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">7</span>));</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u8</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">8</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">8</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">8</span>));</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u9</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">9</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">9</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">9</span>));</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u10</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">10</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">10</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">10</span>));</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u11</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">11</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">11</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">11</span>));</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u12</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">12</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">12</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">12</span>));</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u13</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">13</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">13</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">13</span>));</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u14</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">14</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">14</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">14</span>));</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u15</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">15</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">15</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">15</span>));</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.10" id="mux16"><span class="header-section-number">1.1.10</span> Mux16</h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 16-bit 2-way Multiplexer</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Mux16</span> <span class="kw">is</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    a   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    b   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    sel <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    y   <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Mux16</span> <span class="kw">is</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Mux</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; sel <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">0</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">0</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">0</span>));</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">1</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">1</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">1</span>));</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">2</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">2</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">2</span>));</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u3</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">3</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">3</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">3</span>));</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u4</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">4</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">4</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">4</span>));</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u5</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">5</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">5</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">5</span>));</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u6</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">6</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">6</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">6</span>));</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u7</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">7</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">7</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">7</span>));</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u8</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">8</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">8</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">8</span>));</span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u9</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">9</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">9</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">9</span>));</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u10</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">10</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">10</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">10</span>));</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u11</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">11</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">11</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">11</span>));</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u12</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">12</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">12</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">12</span>));</span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u13</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">13</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">13</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">13</span>));</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u14</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">14</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">14</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">14</span>));</span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u15</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">15</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">15</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">15</span>));</span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.11" id="or8way"><span class="header-section-number">1.1.11</span> Or8Way</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 8-way OR</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Or8Way</span> <span class="kw">is</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">7</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Or8Way</span> <span class="kw">is</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Or2</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> t1<span class="ot">,</span> t2<span class="ot">,</span> t3<span class="ot">,</span> t4<span class="ot">,</span> t5<span class="ot">,</span> t6 <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">0</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> a(<span class="dv">1</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> t1);</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">2</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> a(<span class="dv">3</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> t2);</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">4</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> a(<span class="dv">5</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> t3);</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u3</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">6</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> a(<span class="dv">7</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> t4);</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u4</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> t1<span class="ot">,</span> b <span class="ot">=&gt;</span> t2<span class="ot">,</span> y <span class="ot">=&gt;</span> t5);</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u5</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> t3<span class="ot">,</span> b <span class="ot">=&gt;</span> t4<span class="ot">,</span> y <span class="ot">=&gt;</span> t6);</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u6</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> t5<span class="ot">,</span> b <span class="ot">=&gt;</span> t6<span class="ot">,</span> y <span class="ot">=&gt;</span> y);</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.12" id="mux4way16"><span class="header-section-number">1.1.12</span> Mux4Way16</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 4-way 16-bit Multiplexer</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Mux4Way16</span> <span class="kw">is</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    a   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    b   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    c   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    d   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    sel <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    y   <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Mux4Way16</span> <span class="kw">is</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Mux16</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); b <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); sel <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> ab<span class="ot">,</span> cd <span class="ot">:</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">Mux16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> b<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel(<span class="dv">0</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> ab);</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">Mux16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> c<span class="ot">,</span> b <span class="ot">=&gt;</span> d<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel(<span class="dv">0</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> cd);</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">Mux16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> ab<span class="ot">,</span> b <span class="ot">=&gt;</span> cd<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel(<span class="dv">1</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y);</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.13" id="mux8way16"><span class="header-section-number">1.1.13</span> Mux8Way16</h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 8-way 16-bit Multiplexer</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Mux8Way16</span> <span class="kw">is</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    a   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    b   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    c   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    d   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    e   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    f   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    g   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    h   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    sel <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    y   <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Mux8Way16</span> <span class="kw">is</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Mux4Way16</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b<span class="ot">,</span>c<span class="ot">,</span>d <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); sel <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>); y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Mux16</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); b <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); sel <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> lo<span class="ot">,</span> hi <span class="ot">:</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">Mux4Way16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> b<span class="ot">,</span> c <span class="ot">=&gt;</span> c<span class="ot">,</span> d <span class="ot">=&gt;</span> d<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> lo);</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">Mux4Way16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> e<span class="ot">,</span> b <span class="ot">=&gt;</span> f<span class="ot">,</span> c <span class="ot">=&gt;</span> g<span class="ot">,</span> d <span class="ot">=&gt;</span> h<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> hi);</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">Mux16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> lo<span class="ot">,</span> b <span class="ot">=&gt;</span> hi<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel(<span class="dv">2</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y);</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.14" id="dmux4way"><span class="header-section-number">1.1.14</span> DMux4Way</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 4-way Demultiplexer</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">DMux4Way</span> <span class="kw">is</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    x   <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    sel <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    a   <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    b   <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    c   <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    d   <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">DMux4Way</span> <span class="kw">is</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">DMux</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(x <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; sel <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; a <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> lo<span class="ot">,</span> hi <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">DMux</span> <span class="kw">port map </span>(x <span class="ot">=&gt;</span> x<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel(<span class="dv">1</span>)<span class="ot">,</span> a <span class="ot">=&gt;</span> lo<span class="ot">,</span> b <span class="ot">=&gt;</span> hi);</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">DMux</span> <span class="kw">port map </span>(x <span class="ot">=&gt;</span> lo<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel(<span class="dv">0</span>)<span class="ot">,</span> a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> b);</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">DMux</span> <span class="kw">port map </span>(x <span class="ot">=&gt;</span> hi<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel(<span class="dv">0</span>)<span class="ot">,</span> a <span class="ot">=&gt;</span> c<span class="ot">,</span> b <span class="ot">=&gt;</span> d);</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.15" id="dmux8way"><span class="header-section-number">1.1.15</span> DMux8Way</h3>
<div class="sourceCode" id="cb15"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 8-way Demultiplexer</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">DMux8Way</span> <span class="kw">is</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    x   <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    sel <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    a<span class="ot">,</span> b<span class="ot">,</span> c<span class="ot">,</span> d<span class="ot">,</span> e<span class="ot">,</span> f<span class="ot">,</span> g<span class="ot">,</span> h <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">DMux8Way</span> <span class="kw">is</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">DMux</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(x <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; sel <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; a <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">DMux4Way</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(x <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; sel <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>); a<span class="ot">,</span>b<span class="ot">,</span>c<span class="ot">,</span>d <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> lo<span class="ot">,</span> hi <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">DMux</span> <span class="kw">port map </span>(x <span class="ot">=&gt;</span> x<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel(<span class="dv">2</span>)<span class="ot">,</span> a <span class="ot">=&gt;</span> lo<span class="ot">,</span> b <span class="ot">=&gt;</span> hi);</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">DMux4Way</span> <span class="kw">port map </span>(x <span class="ot">=&gt;</span> lo<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>)<span class="ot">,</span> a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> b<span class="ot">,</span> c <span class="ot">=&gt;</span> c<span class="ot">,</span> d <span class="ot">=&gt;</span> d);</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">DMux4Way</span> <span class="kw">port map </span>(x <span class="ot">=&gt;</span> hi<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>)<span class="ot">,</span> a <span class="ot">=&gt;</span> e<span class="ot">,</span> b <span class="ot">=&gt;</span> f<span class="ot">,</span> c <span class="ot">=&gt;</span> g<span class="ot">,</span> d <span class="ot">=&gt;</span> h);</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.16" id="halfadder"><span class="header-section-number">1.1.16</span> HalfAdder</h3>
<div class="sourceCode" id="cb16"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Half Adder</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">HalfAdder</span> <span class="kw">is</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    a     <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    b     <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    sum   <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    carry <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">HalfAdder</span> <span class="kw">is</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Xor2</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">And2</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">Xor2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> b<span class="ot">,</span> y <span class="ot">=&gt;</span> sum);</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> b<span class="ot">,</span> y <span class="ot">=&gt;</span> carry);</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.17" id="fulladder"><span class="header-section-number">1.1.17</span> FullAdder</h3>
<div class="sourceCode" id="cb17"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Full Adder</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">FullAdder</span> <span class="kw">is</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    a     <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    b     <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    cin   <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    sum   <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    cout  <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">FullAdder</span> <span class="kw">is</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">HalfAdder</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; sum <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>; carry <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Or2</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> s1<span class="ot">,</span> c1<span class="ot">,</span> c2 <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">HalfAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> b<span class="ot">,</span> sum <span class="ot">=&gt;</span> s1<span class="ot">,</span> carry <span class="ot">=&gt;</span> c1);</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">HalfAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> s1<span class="ot">,</span> b <span class="ot">=&gt;</span> cin<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum<span class="ot">,</span> carry <span class="ot">=&gt;</span> c2);</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> c1<span class="ot">,</span> b <span class="ot">=&gt;</span> c2<span class="ot">,</span> y <span class="ot">=&gt;</span> cout);</span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.18" id="add16"><span class="header-section-number">1.1.18</span> Add16</h3>
<div class="sourceCode" id="cb18"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 16-bit Adder</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Add16</span> <span class="kw">is</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    a    <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    b    <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    cin  <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    sum  <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    cout <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Add16</span> <span class="kw">is</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">FullAdder</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b<span class="ot">,</span>cin <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; sum<span class="ot">,</span>cout <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> c <span class="ot">:</span> bits(<span class="dv">16</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">0</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">0</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> cin<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">0</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">1</span>));</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">1</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">1</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">1</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">1</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">2</span>));</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">2</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">2</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">2</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">2</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">3</span>));</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u3</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">3</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">3</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">3</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">3</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">4</span>));</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u4</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">4</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">4</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">4</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">4</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">5</span>));</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u5</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">5</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">5</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">5</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">5</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">6</span>));</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u6</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">6</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">6</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">6</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">6</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">7</span>));</span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u7</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">7</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">7</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">7</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">7</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">8</span>));</span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u8</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">8</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">8</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">8</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">8</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">9</span>));</span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u9</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">9</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">9</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">9</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">9</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">10</span>));</span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u10</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">10</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">10</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">10</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">10</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">11</span>));</span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u11</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">11</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">11</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">11</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">11</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">12</span>));</span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u12</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">12</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">12</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">12</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">12</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">13</span>));</span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u13</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">13</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">13</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">13</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">13</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">14</span>));</span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u14</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">14</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">14</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">14</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">14</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">15</span>));</span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u15</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">15</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">15</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">15</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">15</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> cout);</span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.19" id="inc16"><span class="header-section-number">1.1.19</span> Inc16</h3>
<div class="sourceCode" id="cb19"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 16-bit Incrementer</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Inc16</span> <span class="kw">is</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Inc16</span> <span class="kw">is</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Add16</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); cin <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; sum <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); cout <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> zero16 <span class="ot">:</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> unused_cout <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>  zero16 <span class="ot">&lt;=</span> X<span class="st">&quot;0000&quot;</span>;</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">Add16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> zero16<span class="ot">,</span> cin <span class="ot">=&gt;</span> <span class="bn">&#39;1&#39;</span><span class="ot">,</span> sum <span class="ot">=&gt;</span> y<span class="ot">,</span> cout <span class="ot">=&gt;</span> unused_cout);</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.20" id="sub16"><span class="header-section-number">1.1.20</span> Sub16</h3>
<div class="sourceCode" id="cb20"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 16-bit Subtractor</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Sub16</span> <span class="kw">is</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    a    <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    b    <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    diff <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Sub16</span> <span class="kw">is</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Add16</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); cin <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; sum <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); cout <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Inv16</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> nb <span class="ot">:</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> unused_cout <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">Inv16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> b<span class="ot">,</span> y <span class="ot">=&gt;</span> nb);</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">Add16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> nb<span class="ot">,</span> cin <span class="ot">=&gt;</span> <span class="bn">&#39;1&#39;</span><span class="ot">,</span> sum <span class="ot">=&gt;</span> diff<span class="ot">,</span> cout <span class="ot">=&gt;</span> unused_cout);</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.21" id="alu"><span class="header-section-number">1.1.21</span> ALU</h3>
<div class="sourceCode" id="cb21"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 16-bit ALU</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- op: 0=AND, 1=OR, 2=ADD, 3=SUB</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">ALU</span> <span class="kw">is</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    a    <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    b    <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    op   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    y    <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    zero <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>    neg  <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">ALU</span> <span class="kw">is</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Add16</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); cin <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; sum <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); cout <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">And16</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Or16</span></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Inv16</span></span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Mux4Way16</span></span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b<span class="ot">,</span>c<span class="ot">,</span>d <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); sel <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>); y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Or8Way</span></span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">7</span> <span class="ot">downto</span> <span class="dv">0</span>); y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> r_and<span class="ot">,</span> r_or<span class="ot">,</span> r_add<span class="ot">,</span> r_sub<span class="ot">,</span> nb<span class="ot">,</span> result <span class="ot">:</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> unused_cout1<span class="ot">,</span> unused_cout2 <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> or_lo<span class="ot">,</span> or_hi <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Compute all operations</span></span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_and</span><span class="ot">:</span> <span class="fu">And16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> b<span class="ot">,</span> y <span class="ot">=&gt;</span> r_and);</span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_or</span><span class="ot">:</span> <span class="fu">Or16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> b<span class="ot">,</span> y <span class="ot">=&gt;</span> r_or);</span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_add</span><span class="ot">:</span> <span class="fu">Add16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> b<span class="ot">,</span> cin <span class="ot">=&gt;</span> <span class="bn">&#39;0&#39;</span><span class="ot">,</span> sum <span class="ot">=&gt;</span> r_add<span class="ot">,</span> cout <span class="ot">=&gt;</span> unused_cout1);</span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- SUB: a - b = a + (~b) + 1</span></span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_inv</span><span class="ot">:</span> <span class="fu">Inv16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> b<span class="ot">,</span> y <span class="ot">=&gt;</span> nb);</span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_sub</span><span class="ot">:</span> <span class="fu">Add16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> nb<span class="ot">,</span> cin <span class="ot">=&gt;</span> <span class="bn">&#39;1&#39;</span><span class="ot">,</span> sum <span class="ot">=&gt;</span> r_sub<span class="ot">,</span> cout <span class="ot">=&gt;</span> unused_cout2);</span>
<span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Select result based on op</span></span>
<span id="cb21-48"><a href="#cb21-48" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_mux</span><span class="ot">:</span> <span class="fu">Mux4Way16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> r_and<span class="ot">,</span> b <span class="ot">=&gt;</span> r_or<span class="ot">,</span> c <span class="ot">=&gt;</span> r_add<span class="ot">,</span> d <span class="ot">=&gt;</span> r_sub<span class="ot">,</span> sel <span class="ot">=&gt;</span> op<span class="ot">,</span> y <span class="ot">=&gt;</span> result);</span>
<span id="cb21-49"><a href="#cb21-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-50"><a href="#cb21-50" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Output result</span></span>
<span id="cb21-51"><a href="#cb21-51" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;=</span> result;</span>
<span id="cb21-52"><a href="#cb21-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-53"><a href="#cb21-53" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Zero flag: result == 0</span></span>
<span id="cb21-54"><a href="#cb21-54" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_or_lo</span><span class="ot">:</span> <span class="fu">Or8Way</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> result(<span class="dv">7</span> <span class="ot">downto</span> <span class="dv">0</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> or_lo);</span>
<span id="cb21-55"><a href="#cb21-55" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_or_hi</span><span class="ot">:</span> <span class="fu">Or8Way</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> result(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">8</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> or_hi);</span>
<span id="cb21-56"><a href="#cb21-56" aria-hidden="true" tabindex="-1"></a>  zero <span class="ot">&lt;=</span> <span class="kw">not</span> (or_lo <span class="kw">or</span> or_hi);</span>
<span id="cb21-57"><a href="#cb21-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-58"><a href="#cb21-58" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Negative flag: MSB of result</span></span>
<span id="cb21-59"><a href="#cb21-59" aria-hidden="true" tabindex="-1"></a>  neg <span class="ot">&lt;=</span> result(<span class="dv">15</span>);</span>
<span id="cb21-60"><a href="#cb21-60" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.22" id="dff1"><span class="header-section-number">1.1.22</span> DFF1</h3>
<div class="sourceCode" id="cb22"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- D Flip-Flop</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Uses the built-in dff primitive</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">DFF1</span> <span class="kw">is</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    clk <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    d   <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    q   <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">DFF1</span> <span class="kw">is</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">dff</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(clk <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; d <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; q <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">dff</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d<span class="ot">,</span> q <span class="ot">=&gt;</span> q);</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.23" id="bitreg"><span class="header-section-number">1.1.23</span> BitReg</h3>
<div class="sourceCode" id="cb23"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 1-bit Register</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">BitReg</span> <span class="kw">is</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    clk  <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    d    <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    load <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    q    <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">BitReg</span> <span class="kw">is</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">dff</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(clk <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; d <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; q <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Mux</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; sel <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> mux_out<span class="ot">,</span> q_int <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_mux</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> q_int<span class="ot">,</span> b <span class="ot">=&gt;</span> d<span class="ot">,</span> sel <span class="ot">=&gt;</span> load<span class="ot">,</span> y <span class="ot">=&gt;</span> mux_out);</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_dff</span><span class="ot">:</span> <span class="fu">dff</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> mux_out<span class="ot">,</span> q <span class="ot">=&gt;</span> q_int);</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>  q <span class="ot">&lt;=</span> q_int;</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.24" id="register16"><span class="header-section-number">1.1.24</span> Register16</h3>
<div class="sourceCode" id="cb24"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 16-bit Register</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Register16</span> <span class="kw">is</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    clk  <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    d    <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    load <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    q    <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Register16</span> <span class="kw">is</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">BitReg</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(clk <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; d <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; load <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; q <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">0</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">0</span>));</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">1</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">1</span>));</span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">2</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">2</span>));</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u3</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">3</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">3</span>));</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u4</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">4</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">4</span>));</span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u5</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">5</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">5</span>));</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u6</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">6</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">6</span>));</span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u7</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">7</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">7</span>));</span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u8</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">8</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">8</span>));</span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u9</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">9</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">9</span>));</span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u10</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">10</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">10</span>));</span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u11</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">11</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">11</span>));</span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u12</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">12</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">12</span>));</span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u13</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">13</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">13</span>));</span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u14</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">14</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">14</span>));</span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u15</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">15</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">15</span>));</span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.25" id="pc"><span class="header-section-number">1.1.25</span> PC</h3>
<div class="sourceCode" id="cb25"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Program Counter</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">PC</span> <span class="kw">is</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    clk   <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    d     <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    inc   <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    load  <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    reset <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    q     <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">PC</span> <span class="kw">is</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Register16</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(clk <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; d <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); load <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; q <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Inc16</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Mux16</span></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); sel <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> q_int<span class="ot">,</span> inc_out<span class="ot">,</span> mux1_out<span class="ot">,</span> mux2_out<span class="ot">,</span> mux3_out <span class="ot">:</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> zero16 <span class="ot">:</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> do_load <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>  zero16 <span class="ot">&lt;=</span> X<span class="st">&quot;0000&quot;</span>;</span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Increment current value</span></span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_inc</span><span class="ot">:</span> <span class="fu">Inc16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> q_int<span class="ot">,</span> y <span class="ot">=&gt;</span> inc_out);</span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Priority: reset &gt; load &gt; inc</span></span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- First mux: inc or hold</span></span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_mux1</span><span class="ot">:</span> <span class="fu">Mux16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> q_int<span class="ot">,</span> b <span class="ot">=&gt;</span> inc_out<span class="ot">,</span> sel <span class="ot">=&gt;</span> inc<span class="ot">,</span> y <span class="ot">=&gt;</span> mux1_out);</span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Second mux: load overrides</span></span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_mux2</span><span class="ot">:</span> <span class="fu">Mux16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> mux1_out<span class="ot">,</span> b <span class="ot">=&gt;</span> d<span class="ot">,</span> sel <span class="ot">=&gt;</span> load<span class="ot">,</span> y <span class="ot">=&gt;</span> mux2_out);</span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Third mux: reset overrides all</span></span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_mux3</span><span class="ot">:</span> <span class="fu">Mux16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> mux2_out<span class="ot">,</span> b <span class="ot">=&gt;</span> zero16<span class="ot">,</span> sel <span class="ot">=&gt;</span> reset<span class="ot">,</span> y <span class="ot">=&gt;</span> mux3_out);</span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-40"><a href="#cb25-40" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Always load the register</span></span>
<span id="cb25-41"><a href="#cb25-41" aria-hidden="true" tabindex="-1"></a>  do_load <span class="ot">&lt;=</span> inc <span class="kw">or</span> load <span class="kw">or</span> reset;</span>
<span id="cb25-42"><a href="#cb25-42" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_reg</span><span class="ot">:</span> <span class="fu">Register16</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> mux3_out<span class="ot">,</span> load <span class="ot">=&gt;</span> do_load<span class="ot">,</span> q <span class="ot">=&gt;</span> q_int);</span>
<span id="cb25-43"><a href="#cb25-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-44"><a href="#cb25-44" aria-hidden="true" tabindex="-1"></a>  q <span class="ot">&lt;=</span> q_int;</span>
<span id="cb25-45"><a href="#cb25-45" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.26" id="ram8"><span class="header-section-number">1.1.26</span> RAM8</h3>
<div class="sourceCode" id="cb26"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 8-word RAM</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">RAM8</span> <span class="kw">is</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    clk  <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    din  <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    addr <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    we   <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    dout <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">RAM8</span> <span class="kw">is</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Register16</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(clk <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; d <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); load <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; q <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">DMux8Way</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(x <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; sel <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>); a<span class="ot">,</span>b<span class="ot">,</span>c<span class="ot">,</span>d<span class="ot">,</span>e<span class="ot">,</span>f<span class="ot">,</span>g<span class="ot">,</span>h <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Mux8Way16</span></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b<span class="ot">,</span>c<span class="ot">,</span>d<span class="ot">,</span>e<span class="ot">,</span>f<span class="ot">,</span>g<span class="ot">,</span>h <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); sel <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>); y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> load0<span class="ot">,</span>load1<span class="ot">,</span>load2<span class="ot">,</span>load3<span class="ot">,</span>load4<span class="ot">,</span>load5<span class="ot">,</span>load6<span class="ot">,</span>load7 <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> r0<span class="ot">,</span>r1<span class="ot">,</span>r2<span class="ot">,</span>r3<span class="ot">,</span>r4<span class="ot">,</span>r5<span class="ot">,</span>r6<span class="ot">,</span>r7 <span class="ot">:</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_dmux</span><span class="ot">:</span> <span class="fu">DMux8Way</span> <span class="kw">port map </span>(x <span class="ot">=&gt;</span> we<span class="ot">,</span> sel <span class="ot">=&gt;</span> addr<span class="ot">,</span> a <span class="ot">=&gt;</span> load0<span class="ot">,</span> b <span class="ot">=&gt;</span> load1<span class="ot">,</span> c <span class="ot">=&gt;</span> load2<span class="ot">,</span> d <span class="ot">=&gt;</span> load3<span class="ot">,</span> e <span class="ot">=&gt;</span> load4<span class="ot">,</span> f <span class="ot">=&gt;</span> load5<span class="ot">,</span> g <span class="ot">=&gt;</span> load6<span class="ot">,</span> h <span class="ot">=&gt;</span> load7);</span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_r0</span><span class="ot">:</span> <span class="fu">Register16</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> din<span class="ot">,</span> load <span class="ot">=&gt;</span> load0<span class="ot">,</span> q <span class="ot">=&gt;</span> r0);</span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_r1</span><span class="ot">:</span> <span class="fu">Register16</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> din<span class="ot">,</span> load <span class="ot">=&gt;</span> load1<span class="ot">,</span> q <span class="ot">=&gt;</span> r1);</span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_r2</span><span class="ot">:</span> <span class="fu">Register16</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> din<span class="ot">,</span> load <span class="ot">=&gt;</span> load2<span class="ot">,</span> q <span class="ot">=&gt;</span> r2);</span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_r3</span><span class="ot">:</span> <span class="fu">Register16</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> din<span class="ot">,</span> load <span class="ot">=&gt;</span> load3<span class="ot">,</span> q <span class="ot">=&gt;</span> r3);</span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_r4</span><span class="ot">:</span> <span class="fu">Register16</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> din<span class="ot">,</span> load <span class="ot">=&gt;</span> load4<span class="ot">,</span> q <span class="ot">=&gt;</span> r4);</span>
<span id="cb26-32"><a href="#cb26-32" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_r5</span><span class="ot">:</span> <span class="fu">Register16</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> din<span class="ot">,</span> load <span class="ot">=&gt;</span> load5<span class="ot">,</span> q <span class="ot">=&gt;</span> r5);</span>
<span id="cb26-33"><a href="#cb26-33" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_r6</span><span class="ot">:</span> <span class="fu">Register16</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> din<span class="ot">,</span> load <span class="ot">=&gt;</span> load6<span class="ot">,</span> q <span class="ot">=&gt;</span> r6);</span>
<span id="cb26-34"><a href="#cb26-34" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_r7</span><span class="ot">:</span> <span class="fu">Register16</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> din<span class="ot">,</span> load <span class="ot">=&gt;</span> load7<span class="ot">,</span> q <span class="ot">=&gt;</span> r7);</span>
<span id="cb26-35"><a href="#cb26-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-36"><a href="#cb26-36" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_mux</span><span class="ot">:</span> <span class="fu">Mux8Way16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> r0<span class="ot">,</span> b <span class="ot">=&gt;</span> r1<span class="ot">,</span> c <span class="ot">=&gt;</span> r2<span class="ot">,</span> d <span class="ot">=&gt;</span> r3<span class="ot">,</span> e <span class="ot">=&gt;</span> r4<span class="ot">,</span> f <span class="ot">=&gt;</span> r5<span class="ot">,</span> g <span class="ot">=&gt;</span> r6<span class="ot">,</span> h <span class="ot">=&gt;</span> r7<span class="ot">,</span> sel <span class="ot">=&gt;</span> addr<span class="ot">,</span> y <span class="ot">=&gt;</span> dout);</span>
<span id="cb26-37"><a href="#cb26-37" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.27" id="ram64"><span class="header-section-number">1.1.27</span> RAM64</h3>
<div class="sourceCode" id="cb27"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 64-word RAM</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">RAM64</span> <span class="kw">is</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    clk  <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    din  <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    addr <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">5</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>    we   <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    dout <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">RAM64</span> <span class="kw">is</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">RAM8</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(clk <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; din <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); addr <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>); we <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; dout <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">DMux8Way</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(x <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; sel <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>); a<span class="ot">,</span>b<span class="ot">,</span>c<span class="ot">,</span>d<span class="ot">,</span>e<span class="ot">,</span>f<span class="ot">,</span>g<span class="ot">,</span>h <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Mux8Way16</span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b<span class="ot">,</span>c<span class="ot">,</span>d<span class="ot">,</span>e<span class="ot">,</span>f<span class="ot">,</span>g<span class="ot">,</span>h <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); sel <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>); y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> we0<span class="ot">,</span>we1<span class="ot">,</span>we2<span class="ot">,</span>we3<span class="ot">,</span>we4<span class="ot">,</span>we5<span class="ot">,</span>we6<span class="ot">,</span>we7 <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> r0<span class="ot">,</span>r1<span class="ot">,</span>r2<span class="ot">,</span>r3<span class="ot">,</span>r4<span class="ot">,</span>r5<span class="ot">,</span>r6<span class="ot">,</span>r7 <span class="ot">:</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_dmux</span><span class="ot">:</span> <span class="fu">DMux8Way</span> <span class="kw">port map </span>(x <span class="ot">=&gt;</span> we<span class="ot">,</span> sel <span class="ot">=&gt;</span> addr(<span class="dv">5</span> <span class="ot">downto</span> <span class="dv">3</span>)<span class="ot">,</span> a <span class="ot">=&gt;</span> we0<span class="ot">,</span> b <span class="ot">=&gt;</span> we1<span class="ot">,</span> c <span class="ot">=&gt;</span> we2<span class="ot">,</span> d <span class="ot">=&gt;</span> we3<span class="ot">,</span> e <span class="ot">=&gt;</span> we4<span class="ot">,</span> f <span class="ot">=&gt;</span> we5<span class="ot">,</span> g <span class="ot">=&gt;</span> we6<span class="ot">,</span> h <span class="ot">=&gt;</span> we7);</span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_ram0</span><span class="ot">:</span> <span class="fu">RAM8</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> din <span class="ot">=&gt;</span> din<span class="ot">,</span> addr <span class="ot">=&gt;</span> addr(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>)<span class="ot">,</span> we <span class="ot">=&gt;</span> we0<span class="ot">,</span> dout <span class="ot">=&gt;</span> r0);</span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_ram1</span><span class="ot">:</span> <span class="fu">RAM8</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> din <span class="ot">=&gt;</span> din<span class="ot">,</span> addr <span class="ot">=&gt;</span> addr(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>)<span class="ot">,</span> we <span class="ot">=&gt;</span> we1<span class="ot">,</span> dout <span class="ot">=&gt;</span> r1);</span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_ram2</span><span class="ot">:</span> <span class="fu">RAM8</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> din <span class="ot">=&gt;</span> din<span class="ot">,</span> addr <span class="ot">=&gt;</span> addr(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>)<span class="ot">,</span> we <span class="ot">=&gt;</span> we2<span class="ot">,</span> dout <span class="ot">=&gt;</span> r2);</span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_ram3</span><span class="ot">:</span> <span class="fu">RAM8</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> din <span class="ot">=&gt;</span> din<span class="ot">,</span> addr <span class="ot">=&gt;</span> addr(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>)<span class="ot">,</span> we <span class="ot">=&gt;</span> we3<span class="ot">,</span> dout <span class="ot">=&gt;</span> r3);</span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_ram4</span><span class="ot">:</span> <span class="fu">RAM8</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> din <span class="ot">=&gt;</span> din<span class="ot">,</span> addr <span class="ot">=&gt;</span> addr(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>)<span class="ot">,</span> we <span class="ot">=&gt;</span> we4<span class="ot">,</span> dout <span class="ot">=&gt;</span> r4);</span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_ram5</span><span class="ot">:</span> <span class="fu">RAM8</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> din <span class="ot">=&gt;</span> din<span class="ot">,</span> addr <span class="ot">=&gt;</span> addr(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>)<span class="ot">,</span> we <span class="ot">=&gt;</span> we5<span class="ot">,</span> dout <span class="ot">=&gt;</span> r5);</span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_ram6</span><span class="ot">:</span> <span class="fu">RAM8</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> din <span class="ot">=&gt;</span> din<span class="ot">,</span> addr <span class="ot">=&gt;</span> addr(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>)<span class="ot">,</span> we <span class="ot">=&gt;</span> we6<span class="ot">,</span> dout <span class="ot">=&gt;</span> r6);</span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_ram7</span><span class="ot">:</span> <span class="fu">RAM8</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> din <span class="ot">=&gt;</span> din<span class="ot">,</span> addr <span class="ot">=&gt;</span> addr(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>)<span class="ot">,</span> we <span class="ot">=&gt;</span> we7<span class="ot">,</span> dout <span class="ot">=&gt;</span> r7);</span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_mux</span><span class="ot">:</span> <span class="fu">Mux8Way16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> r0<span class="ot">,</span> b <span class="ot">=&gt;</span> r1<span class="ot">,</span> c <span class="ot">=&gt;</span> r2<span class="ot">,</span> d <span class="ot">=&gt;</span> r3<span class="ot">,</span> e <span class="ot">=&gt;</span> r4<span class="ot">,</span> f <span class="ot">=&gt;</span> r5<span class="ot">,</span> g <span class="ot">=&gt;</span> r6<span class="ot">,</span> h <span class="ot">=&gt;</span> r7<span class="ot">,</span> sel <span class="ot">=&gt;</span> addr(<span class="dv">5</span> <span class="ot">downto</span> <span class="dv">3</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> dout);</span>
<span id="cb27-37"><a href="#cb27-37" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.28" id="regfile"><span class="header-section-number">1.1.28</span> RegFile</h3>
<div class="sourceCode" id="cb28"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 16-Register File using RAM primitive</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">RegFile</span> <span class="kw">is</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    clk   <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    we    <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    waddr <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    wdata <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    raddr1<span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    raddr2<span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>    rdata1<span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>    rdata2<span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">RegFile</span> <span class="kw">is</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">ram</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(clk <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; we <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; addr <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>         din <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); dout <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Use two RAM instances for dual read ports</span></span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_ram1</span><span class="ot">:</span> <span class="fu">ram</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> we <span class="ot">=&gt;</span> we<span class="ot">,</span> addr <span class="ot">=&gt;</span> waddr<span class="ot">,</span> din <span class="ot">=&gt;</span> wdata<span class="ot">,</span> dout <span class="ot">=&gt;</span> rdata1);</span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_ram2</span><span class="ot">:</span> <span class="fu">ram</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> we <span class="ot">=&gt;</span> we<span class="ot">,</span> addr <span class="ot">=&gt;</span> waddr<span class="ot">,</span> din <span class="ot">=&gt;</span> wdata<span class="ot">,</span> dout <span class="ot">=&gt;</span> rdata2);</span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Note: Simplified - real implementation would need proper read port addressing</span></span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.29" id="decoder"><span class="header-section-number">1.1.29</span> Decoder</h3>
<div class="sourceCode" id="cb29"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Instruction Decoder</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Decodes opcode into control signals</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Opcodes: 0000=ALU, 0100=LOAD, 0101=STORE, 1000=BRANCH</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Decoder</span> <span class="kw">is</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    opcode    <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    alu_op    <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>    reg_write <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>    mem_read  <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>    mem_write <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>    branch    <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Decoder</span> <span class="kw">is</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Inv</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">And2</span></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span> b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> not_op3<span class="ot">,</span> not_op2<span class="ot">,</span> not_op1<span class="ot">,</span> not_op0 <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> is_alu<span class="ot">,</span> is_load<span class="ot">,</span> is_store<span class="ot">,</span> is_branch <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Invert opcode bits</span></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>  <span class="dv">inv3</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> opcode(<span class="dv">3</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> not_op3);</span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">inv2</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> opcode(<span class="dv">2</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> not_op2);</span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>  <span class="dv">inv1</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> opcode(<span class="dv">1</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> not_op1);</span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>  <span class="dv">inv0</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> opcode(<span class="dv">0</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> not_op0);</span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Decode: ALU = 0000</span></span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a>  <span class="dv">alu_a</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> not_op3<span class="ot">,</span> b <span class="ot">=&gt;</span> not_op2<span class="ot">,</span> y <span class="ot">=&gt;</span> is_alu);</span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Decode: LOAD = 0100</span></span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a>  <span class="dv">ld_a</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> not_op3<span class="ot">,</span> b <span class="ot">=&gt;</span> opcode(<span class="dv">2</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> is_load);</span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Decode: STORE = 0101</span></span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a>  <span class="dv">st_a</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> is_load<span class="ot">,</span> b <span class="ot">=&gt;</span> opcode(<span class="dv">0</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> is_store);</span>
<span id="cb29-40"><a href="#cb29-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-41"><a href="#cb29-41" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Decode: BRANCH = 1xxx</span></span>
<span id="cb29-42"><a href="#cb29-42" aria-hidden="true" tabindex="-1"></a>  <span class="dv">br_a</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> not_op3<span class="ot">,</span> y <span class="ot">=&gt;</span> is_branch);</span>
<span id="cb29-43"><a href="#cb29-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-44"><a href="#cb29-44" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Control signals - pass through lower opcode bits for ALU operation</span></span>
<span id="cb29-45"><a href="#cb29-45" aria-hidden="true" tabindex="-1"></a>  alu_op <span class="ot">&lt;=</span> opcode(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb29-46"><a href="#cb29-46" aria-hidden="true" tabindex="-1"></a>  reg_write <span class="ot">&lt;=</span> is_alu;</span>
<span id="cb29-47"><a href="#cb29-47" aria-hidden="true" tabindex="-1"></a>  mem_read <span class="ot">&lt;=</span> is_load;</span>
<span id="cb29-48"><a href="#cb29-48" aria-hidden="true" tabindex="-1"></a>  mem_write <span class="ot">&lt;=</span> is_store;</span>
<span id="cb29-49"><a href="#cb29-49" aria-hidden="true" tabindex="-1"></a>  branch <span class="ot">&lt;=</span> is_branch;</span>
<span id="cb29-50"><a href="#cb29-50" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.30" id="condcheck"><span class="header-section-number">1.1.30</span> CondCheck</h3>
<div class="sourceCode" id="cb30"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Condition Checker</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Checks ALU flags against condition code</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- cond: 0000=EQ (zero), 0001=NE (!zero), 0010=LT (neg), 0011=GE (!neg)</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">CondCheck</span> <span class="kw">is</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    cond <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    zero <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    neg  <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    carry<span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>    ovf  <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>    take <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">CondCheck</span> <span class="kw">is</span></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Inv</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Mux</span></span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span> b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; sel <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> not_zero<span class="ot">,</span> not_neg <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> eq_result<span class="ot">,</span> ne_result<span class="ot">,</span> lt_result<span class="ot">,</span> ge_result <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> sel0<span class="ot">,</span> sel1 <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Invert flags for NE and GE conditions</span></span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">inv_z</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> zero<span class="ot">,</span> y <span class="ot">=&gt;</span> not_zero);</span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true" tabindex="-1"></a>  <span class="dv">inv_n</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> neg<span class="ot">,</span> y <span class="ot">=&gt;</span> not_neg);</span>
<span id="cb30-30"><a href="#cb30-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-31"><a href="#cb30-31" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Condition results</span></span>
<span id="cb30-32"><a href="#cb30-32" aria-hidden="true" tabindex="-1"></a>  eq_result <span class="ot">&lt;=</span> zero;       <span class="co">-- EQ: zero=1</span></span>
<span id="cb30-33"><a href="#cb30-33" aria-hidden="true" tabindex="-1"></a>  ne_result <span class="ot">&lt;=</span> not_zero;   <span class="co">-- NE: zero=0</span></span>
<span id="cb30-34"><a href="#cb30-34" aria-hidden="true" tabindex="-1"></a>  lt_result <span class="ot">&lt;=</span> neg;        <span class="co">-- LT: neg=1</span></span>
<span id="cb30-35"><a href="#cb30-35" aria-hidden="true" tabindex="-1"></a>  ge_result <span class="ot">&lt;=</span> not_neg;    <span class="co">-- GE: neg=0</span></span>
<span id="cb30-36"><a href="#cb30-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-37"><a href="#cb30-37" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- 4-way mux using cond(1:0)</span></span>
<span id="cb30-38"><a href="#cb30-38" aria-hidden="true" tabindex="-1"></a>  <span class="dv">mux0</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> eq_result<span class="ot">,</span> b <span class="ot">=&gt;</span> ne_result<span class="ot">,</span> sel <span class="ot">=&gt;</span> cond(<span class="dv">0</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> sel0);</span>
<span id="cb30-39"><a href="#cb30-39" aria-hidden="true" tabindex="-1"></a>  <span class="dv">mux1</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> lt_result<span class="ot">,</span> b <span class="ot">=&gt;</span> ge_result<span class="ot">,</span> sel <span class="ot">=&gt;</span> cond(<span class="dv">0</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> sel1);</span>
<span id="cb30-40"><a href="#cb30-40" aria-hidden="true" tabindex="-1"></a>  <span class="dv">mux2</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> sel0<span class="ot">,</span> b <span class="ot">=&gt;</span> sel1<span class="ot">,</span> sel <span class="ot">=&gt;</span> cond(<span class="dv">1</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> take);</span>
<span id="cb30-41"><a href="#cb30-41" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.31" id="control"><span class="header-section-number">1.1.31</span> Control</h3>
<div class="sourceCode" id="cb31"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Control Unit</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Generates all control signals</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Control</span> <span class="kw">is</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    clk       <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    opcode    <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>    cond      <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>    zero      <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>    neg       <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>    alu_op    <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>    reg_write <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>    mem_read  <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>    mem_write <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>    pc_src    <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Control</span> <span class="kw">is</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Decoder</span></span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(opcode <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>); alu_op <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>         reg_write<span class="ot">,</span> mem_read<span class="ot">,</span> mem_write<span class="ot">,</span> branch <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">CondCheck</span></span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(cond <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>); zero<span class="ot">,</span>neg<span class="ot">,</span>carry<span class="ot">,</span>ovf <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; take <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">And2</span></span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span> b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> branch_sig<span class="ot">,</span> cond_take <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Decoder generates base control signals</span></span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_dec</span><span class="ot">:</span> <span class="fu">Decoder</span> <span class="kw">port map </span>(</span>
<span id="cb31-34"><a href="#cb31-34" aria-hidden="true" tabindex="-1"></a>    opcode <span class="ot">=&gt;</span> opcode<span class="ot">,</span></span>
<span id="cb31-35"><a href="#cb31-35" aria-hidden="true" tabindex="-1"></a>    alu_op <span class="ot">=&gt;</span> alu_op<span class="ot">,</span></span>
<span id="cb31-36"><a href="#cb31-36" aria-hidden="true" tabindex="-1"></a>    reg_write <span class="ot">=&gt;</span> reg_write<span class="ot">,</span></span>
<span id="cb31-37"><a href="#cb31-37" aria-hidden="true" tabindex="-1"></a>    mem_read <span class="ot">=&gt;</span> mem_read<span class="ot">,</span></span>
<span id="cb31-38"><a href="#cb31-38" aria-hidden="true" tabindex="-1"></a>    mem_write <span class="ot">=&gt;</span> mem_write<span class="ot">,</span></span>
<span id="cb31-39"><a href="#cb31-39" aria-hidden="true" tabindex="-1"></a>    branch <span class="ot">=&gt;</span> branch_sig</span>
<span id="cb31-40"><a href="#cb31-40" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb31-41"><a href="#cb31-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-42"><a href="#cb31-42" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- CondCheck evaluates branch condition</span></span>
<span id="cb31-43"><a href="#cb31-43" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_cond</span><span class="ot">:</span> <span class="fu">CondCheck</span> <span class="kw">port map </span>(</span>
<span id="cb31-44"><a href="#cb31-44" aria-hidden="true" tabindex="-1"></a>    cond <span class="ot">=&gt;</span> cond<span class="ot">,</span></span>
<span id="cb31-45"><a href="#cb31-45" aria-hidden="true" tabindex="-1"></a>    zero <span class="ot">=&gt;</span> zero<span class="ot">,</span></span>
<span id="cb31-46"><a href="#cb31-46" aria-hidden="true" tabindex="-1"></a>    neg <span class="ot">=&gt;</span> neg<span class="ot">,</span></span>
<span id="cb31-47"><a href="#cb31-47" aria-hidden="true" tabindex="-1"></a>    carry <span class="ot">=&gt;</span> <span class="bn">&#39;0&#39;</span><span class="ot">,</span></span>
<span id="cb31-48"><a href="#cb31-48" aria-hidden="true" tabindex="-1"></a>    ovf <span class="ot">=&gt;</span> <span class="bn">&#39;0&#39;</span><span class="ot">,</span></span>
<span id="cb31-49"><a href="#cb31-49" aria-hidden="true" tabindex="-1"></a>    take <span class="ot">=&gt;</span> cond_take</span>
<span id="cb31-50"><a href="#cb31-50" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb31-51"><a href="#cb31-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-52"><a href="#cb31-52" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- pc_src = branch AND condition_met</span></span>
<span id="cb31-53"><a href="#cb31-53" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_and</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> branch_sig<span class="ot">,</span> b <span class="ot">=&gt;</span> cond_take<span class="ot">,</span> y <span class="ot">=&gt;</span> pc_src);</span>
<span id="cb31-54"><a href="#cb31-54" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.32" id="cpu"><span class="header-section-number">1.1.32</span> CPU</h3>
<div class="sourceCode" id="cb32"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- A32-Lite CPU</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Simple 16-bit RISC processor</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Instruction format: [15:12]=opcode, [11:8]=rd, [7:4]=rs1, [3:0]=rs2/imm</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">CPU</span> <span class="kw">is</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    clk     <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    reset   <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>    instr   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>    mem_in  <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>    mem_out <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>    mem_addr<span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>    mem_we  <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>    pc_out  <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">CPU</span> <span class="kw">is</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">RegFile</span></span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(clk<span class="ot">,</span>we <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; waddr<span class="ot">,</span>raddr1<span class="ot">,</span>raddr2 <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>         wdata <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); rdata1<span class="ot">,</span>rdata2 <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">ALU</span></span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); op <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>         y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); zero<span class="ot">,</span>neg <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">PC</span></span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(clk <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; d <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); inc<span class="ot">,</span>load<span class="ot">,</span>reset <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; q <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Control</span></span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(clk <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; opcode<span class="ot">,</span>cond <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>); zero<span class="ot">,</span>neg <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a>         alu_op <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>); reg_write<span class="ot">,</span>mem_read<span class="ot">,</span>mem_write<span class="ot">,</span>pc_src <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb32-34"><a href="#cb32-34" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Mux16</span></span>
<span id="cb32-35"><a href="#cb32-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); sel <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb32-36"><a href="#cb32-36" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb32-37"><a href="#cb32-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-38"><a href="#cb32-38" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Instruction decode</span></span>
<span id="cb32-39"><a href="#cb32-39" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> opcode<span class="ot">,</span> rd<span class="ot">,</span> rs1<span class="ot">,</span> rs2 <span class="ot">:</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb32-40"><a href="#cb32-40" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Control signals</span></span>
<span id="cb32-41"><a href="#cb32-41" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> alu_op <span class="ot">:</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb32-42"><a href="#cb32-42" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> reg_write<span class="ot">,</span> mem_rd<span class="ot">,</span> mem_wr<span class="ot">,</span> pc_src <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb32-43"><a href="#cb32-43" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Datapath signals</span></span>
<span id="cb32-44"><a href="#cb32-44" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> pc_val<span class="ot">,</span> branch_target <span class="ot">:</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb32-45"><a href="#cb32-45" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> reg_data1<span class="ot">,</span> reg_data2<span class="ot">,</span> alu_result <span class="ot">:</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb32-46"><a href="#cb32-46" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> write_data <span class="ot">:</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb32-47"><a href="#cb32-47" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> zero_flag<span class="ot">,</span> neg_flag <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb32-48"><a href="#cb32-48" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> not_reset <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb32-49"><a href="#cb32-49" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Inv</span></span>
<span id="cb32-50"><a href="#cb32-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb32-51"><a href="#cb32-51" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb32-52"><a href="#cb32-52" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb32-53"><a href="#cb32-53" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Instruction decode using slices</span></span>
<span id="cb32-54"><a href="#cb32-54" aria-hidden="true" tabindex="-1"></a>  opcode <span class="ot">&lt;=</span> instr(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">12</span>);</span>
<span id="cb32-55"><a href="#cb32-55" aria-hidden="true" tabindex="-1"></a>  rd <span class="ot">&lt;=</span> instr(<span class="dv">11</span> <span class="ot">downto</span> <span class="dv">8</span>);</span>
<span id="cb32-56"><a href="#cb32-56" aria-hidden="true" tabindex="-1"></a>  rs1 <span class="ot">&lt;=</span> instr(<span class="dv">7</span> <span class="ot">downto</span> <span class="dv">4</span>);</span>
<span id="cb32-57"><a href="#cb32-57" aria-hidden="true" tabindex="-1"></a>  rs2 <span class="ot">&lt;=</span> instr(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb32-58"><a href="#cb32-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-59"><a href="#cb32-59" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Control unit</span></span>
<span id="cb32-60"><a href="#cb32-60" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_ctrl</span><span class="ot">:</span> <span class="fu">Control</span> <span class="kw">port map </span>(</span>
<span id="cb32-61"><a href="#cb32-61" aria-hidden="true" tabindex="-1"></a>    clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> opcode <span class="ot">=&gt;</span> opcode<span class="ot">,</span> cond <span class="ot">=&gt;</span> rs2<span class="ot">,</span></span>
<span id="cb32-62"><a href="#cb32-62" aria-hidden="true" tabindex="-1"></a>    zero <span class="ot">=&gt;</span> zero_flag<span class="ot">,</span> neg <span class="ot">=&gt;</span> neg_flag<span class="ot">,</span></span>
<span id="cb32-63"><a href="#cb32-63" aria-hidden="true" tabindex="-1"></a>    alu_op <span class="ot">=&gt;</span> alu_op<span class="ot">,</span> reg_write <span class="ot">=&gt;</span> reg_write<span class="ot">,</span></span>
<span id="cb32-64"><a href="#cb32-64" aria-hidden="true" tabindex="-1"></a>    mem_read <span class="ot">=&gt;</span> mem_rd<span class="ot">,</span> mem_write <span class="ot">=&gt;</span> mem_wr<span class="ot">,</span> pc_src <span class="ot">=&gt;</span> pc_src</span>
<span id="cb32-65"><a href="#cb32-65" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb32-66"><a href="#cb32-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-67"><a href="#cb32-67" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Register file</span></span>
<span id="cb32-68"><a href="#cb32-68" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_regs</span><span class="ot">:</span> <span class="fu">RegFile</span> <span class="kw">port map </span>(</span>
<span id="cb32-69"><a href="#cb32-69" aria-hidden="true" tabindex="-1"></a>    clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> we <span class="ot">=&gt;</span> reg_write<span class="ot">,</span></span>
<span id="cb32-70"><a href="#cb32-70" aria-hidden="true" tabindex="-1"></a>    waddr <span class="ot">=&gt;</span> rd<span class="ot">,</span> raddr1 <span class="ot">=&gt;</span> rs1<span class="ot">,</span> raddr2 <span class="ot">=&gt;</span> rs2<span class="ot">,</span></span>
<span id="cb32-71"><a href="#cb32-71" aria-hidden="true" tabindex="-1"></a>    wdata <span class="ot">=&gt;</span> write_data<span class="ot">,</span> rdata1 <span class="ot">=&gt;</span> reg_data1<span class="ot">,</span> rdata2 <span class="ot">=&gt;</span> reg_data2</span>
<span id="cb32-72"><a href="#cb32-72" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb32-73"><a href="#cb32-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-74"><a href="#cb32-74" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- ALU</span></span>
<span id="cb32-75"><a href="#cb32-75" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_alu</span><span class="ot">:</span> <span class="fu">ALU</span> <span class="kw">port map </span>(</span>
<span id="cb32-76"><a href="#cb32-76" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">=&gt;</span> reg_data1<span class="ot">,</span> b <span class="ot">=&gt;</span> reg_data2<span class="ot">,</span> op <span class="ot">=&gt;</span> alu_op<span class="ot">,</span></span>
<span id="cb32-77"><a href="#cb32-77" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">=&gt;</span> alu_result<span class="ot">,</span> zero <span class="ot">=&gt;</span> zero_flag<span class="ot">,</span> neg <span class="ot">=&gt;</span> neg_flag</span>
<span id="cb32-78"><a href="#cb32-78" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb32-79"><a href="#cb32-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-80"><a href="#cb32-80" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Write back mux (ALU result or memory)</span></span>
<span id="cb32-81"><a href="#cb32-81" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_wb_mux</span><span class="ot">:</span> <span class="fu">Mux16</span> <span class="kw">port map </span>(</span>
<span id="cb32-82"><a href="#cb32-82" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">=&gt;</span> alu_result<span class="ot">,</span> b <span class="ot">=&gt;</span> mem_in<span class="ot">,</span> sel <span class="ot">=&gt;</span> mem_rd<span class="ot">,</span> y <span class="ot">=&gt;</span> write_data</span>
<span id="cb32-83"><a href="#cb32-83" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb32-84"><a href="#cb32-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-85"><a href="#cb32-85" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Program counter</span></span>
<span id="cb32-86"><a href="#cb32-86" aria-hidden="true" tabindex="-1"></a>  <span class="dv">inv_reset</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> reset<span class="ot">,</span> y <span class="ot">=&gt;</span> not_reset);</span>
<span id="cb32-87"><a href="#cb32-87" aria-hidden="true" tabindex="-1"></a>  branch_target <span class="ot">&lt;=</span> reg_data1;</span>
<span id="cb32-88"><a href="#cb32-88" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_pc</span><span class="ot">:</span> <span class="fu">PC</span> <span class="kw">port map </span>(</span>
<span id="cb32-89"><a href="#cb32-89" aria-hidden="true" tabindex="-1"></a>    clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> branch_target<span class="ot">,</span></span>
<span id="cb32-90"><a href="#cb32-90" aria-hidden="true" tabindex="-1"></a>    inc <span class="ot">=&gt;</span> not_reset<span class="ot">,</span> load <span class="ot">=&gt;</span> pc_src<span class="ot">,</span> reset <span class="ot">=&gt;</span> reset<span class="ot">,</span> q <span class="ot">=&gt;</span> pc_val</span>
<span id="cb32-91"><a href="#cb32-91" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb32-92"><a href="#cb32-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-93"><a href="#cb32-93" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Outputs</span></span>
<span id="cb32-94"><a href="#cb32-94" aria-hidden="true" tabindex="-1"></a>  pc_out <span class="ot">&lt;=</span> pc_val;</span>
<span id="cb32-95"><a href="#cb32-95" aria-hidden="true" tabindex="-1"></a>  mem_addr <span class="ot">&lt;=</span> alu_result;</span>
<span id="cb32-96"><a href="#cb32-96" aria-hidden="true" tabindex="-1"></a>  mem_out <span class="ot">&lt;=</span> reg_data2;</span>
<span id="cb32-97"><a href="#cb32-97" aria-hidden="true" tabindex="-1"></a>  mem_we <span class="ot">&lt;=</span> mem_wr;</span>
<span id="cb32-98"><a href="#cb32-98" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h2 data-number="1.2" id="b.-solutions-assembleur-a32"><span class="header-section-number">1.2</span> B. Solutions Assembleur
A32</h2>
<h3 data-number="1.2.1" id="hello-world"><span class="header-section-number">1.2.1</span> Hello World</h3>
<div class="sourceCode" id="cb33"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Hello World - Solution</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">42</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.2" id="addition"><span class="header-section-number">1.2.2</span> Addition</h3>
<div class="sourceCode" id="cb34"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Addition - Solution</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">15</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">27</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.3" id="soustraction"><span class="header-section-number">1.2.3</span> Soustraction</h3>
<div class="sourceCode" id="cb35"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Soustraction - Solution</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">100</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">SUB</span> R0<span class="op">,</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">58</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.4" id="logique"><span class="header-section-number">1.2.4</span> Logique</h3>
<div class="sourceCode" id="cb36"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Logique - Solution</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="bn">0xFF</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0x0F</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">AND</span> R0<span class="op">,</span> R1<span class="op">,</span> R2</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.5" id="doubler"><span class="header-section-number">1.2.5</span> Doubler</h3>
<div class="sourceCode" id="cb37"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Doubler - Solution</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">21</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> R0   <span class="co">; R0 = R0 + R0 = 2 * R0</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.6" id="conditions"><span class="header-section-number">1.2.6</span> Conditions</h3>
<div class="sourceCode" id="cb38"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Conditions - Solution</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">25</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">17</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R1<span class="op">,</span> R2</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>GT <span class="op">.</span>r1_bigger</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> R2</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>    B <span class="op">.</span>done</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a><span class="fu">.r1_bigger:</span></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> R1</span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a><span class="fu">.done:</span></span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.7" id="valeur-absolue"><span class="header-section-number">1.2.7</span> Valeur Absolue</h3>
<div class="sourceCode" id="cb39"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Valeur Absolue - Solution</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">SUB</span> R1<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">42</span>  <span class="co">; R1 = -42</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>GE <span class="op">.</span>positive</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">; NÃ©gatif: R0 = 0 - R1</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">SUB</span> R0<span class="op">,</span> R0<span class="op">,</span> R1</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>    B <span class="op">.</span>done</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a><span class="fu">.positive:</span></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> R1</span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a><span class="fu">.done:</span></span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.8" id="boucles"><span class="header-section-number">1.2.8</span> Boucles</h3>
<div class="sourceCode" id="cb40"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Boucles - Solution</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>      <span class="co">; somme = 0</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">1</span>      <span class="co">; compteur = 1</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="fu">.loop:</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> R1  <span class="co">; somme += compteur</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R1<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">1</span>  <span class="co">; compteur++</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">10</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>LE <span class="op">.</span>loop</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.9" id="multiplication"><span class="header-section-number">1.2.9</span> Multiplication</h3>
<div class="sourceCode" id="cb41"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Multiplication - Solution</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>      <span class="co">; rÃ©sultat = 0</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">6</span>      <span class="co">; multiplicande</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">7</span>      <span class="co">; compteur (multiplicateur)</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="fu">.loop:</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> R1  <span class="co">; rÃ©sultat += multiplicande</span></span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">SUB</span> R2<span class="op">,</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">1</span>  <span class="co">; compteur--</span></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>GT <span class="op">.</span>loop</span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.10" id="fibonacci"><span class="header-section-number">1.2.10</span> Fibonacci</h3>
<div class="sourceCode" id="cb42"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Fibonacci - Solution</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">1</span>      <span class="co">; F(1) = 1</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">1</span>      <span class="co">; F(2) = 1</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">2</span>      <span class="co">; compteur = 2</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a><span class="fu">.loop:</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R3<span class="op">,</span> R0<span class="op">,</span> R1  <span class="co">; R3 = F(n-2) + F(n-1)</span></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> R1      <span class="co">; F(n-2) = ancien F(n-1)</span></span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> R3      <span class="co">; F(n-1) = nouveau F(n)</span></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R2<span class="op">,</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">1</span>  <span class="co">; compteur++</span></span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">10</span></span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>LT <span class="op">.</span>loop</span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> R1      <span class="co">; rÃ©sultat dans R0</span></span>
<span id="cb42-19"><a href="#cb42-19" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.11" id="tableaux"><span class="header-section-number">1.2.11</span> Tableaux</h3>
<div class="sourceCode" id="cb43"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Tableaux - Solution</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>.<span class="bu">data</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="fu">data:</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">10</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">20</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">30</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">40</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">50</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>          <span class="co">; somme = 0</span></span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span>data       <span class="co">; adresse du tableau</span></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">5</span>          <span class="co">; compteur = 5</span></span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-18"><a href="#cb43-18" aria-hidden="true" tabindex="-1"></a><span class="fu">.loop:</span></span>
<span id="cb43-19"><a href="#cb43-19" aria-hidden="true" tabindex="-1"></a>    LDR R3<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span>        <span class="co">; charge Ã©lÃ©ment</span></span>
<span id="cb43-20"><a href="#cb43-20" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> R3      <span class="co">; somme += Ã©lÃ©ment</span></span>
<span id="cb43-21"><a href="#cb43-21" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R1<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">4</span>      <span class="co">; adresse suivante</span></span>
<span id="cb43-22"><a href="#cb43-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">SUB</span> R2<span class="op">,</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">1</span>      <span class="co">; compteur--</span></span>
<span id="cb43-23"><a href="#cb43-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb43-24"><a href="#cb43-24" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>GT <span class="op">.</span>loop</span>
<span id="cb43-25"><a href="#cb43-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-26"><a href="#cb43-26" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.12" id="maximum-tableau"><span class="header-section-number">1.2.12</span> Maximum Tableau</h3>
<div class="sourceCode" id="cb44"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Maximum Tableau - Solution</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>.<span class="bu">data</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="fu">data:</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">12</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">45</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">7</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">89</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">23</span></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span>data       <span class="co">; adresse du tableau</span></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>    LDR R0<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span>        <span class="co">; max = premier Ã©lÃ©ment</span></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R1<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">4</span>      <span class="co">; passer au suivant</span></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">4</span>          <span class="co">; compteur = 4 (reste)</span></span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a><span class="fu">.loop:</span></span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a>    LDR R3<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span>        <span class="co">; charge Ã©lÃ©ment</span></span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R3<span class="op">,</span> R0          <span class="co">; compare avec max</span></span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>LE <span class="op">.</span>skip</span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> R3          <span class="co">; nouveau max</span></span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true" tabindex="-1"></a><span class="fu">.skip:</span></span>
<span id="cb44-26"><a href="#cb44-26" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R1<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">4</span>      <span class="co">; adresse suivante</span></span>
<span id="cb44-27"><a href="#cb44-27" aria-hidden="true" tabindex="-1"></a>    <span class="bu">SUB</span> R2<span class="op">,</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">1</span>      <span class="co">; compteur--</span></span>
<span id="cb44-28"><a href="#cb44-28" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb44-29"><a href="#cb44-29" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>GT <span class="op">.</span>loop</span>
<span id="cb44-30"><a href="#cb44-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-31"><a href="#cb44-31" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.13" id="mÃ©moire"><span class="header-section-number">1.2.13</span> MÃ©moire</h3>
<div class="sourceCode" id="cb45"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co">; MÃ©moire - Solution</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>.<span class="bu">data</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="fu">data:</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">0</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">0</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">10</span></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">20</span></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Sauvegarder</span></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>    LDR R4<span class="op">,</span> <span class="op">=</span>data</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">STR</span> R1<span class="op">,</span> <span class="op">[</span>R4<span class="op">]</span>        <span class="co">; data[0] = R1</span></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R4<span class="op">,</span> R4<span class="op">,</span> <span class="op">#</span><span class="dv">4</span></span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">STR</span> R2<span class="op">,</span> <span class="op">[</span>R4<span class="op">]</span>        <span class="co">; data[1] = R2</span></span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Effacer</span></span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Recharger</span></span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a>    LDR R4<span class="op">,</span> <span class="op">=</span>data</span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">[</span>R4<span class="op">]</span>        <span class="co">; R1 = data[0]</span></span>
<span id="cb45-27"><a href="#cb45-27" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R4<span class="op">,</span> R4<span class="op">,</span> <span class="op">#</span><span class="dv">4</span></span>
<span id="cb45-28"><a href="#cb45-28" aria-hidden="true" tabindex="-1"></a>    LDR R2<span class="op">,</span> <span class="op">[</span>R4<span class="op">]</span>        <span class="co">; R2 = data[1]</span></span>
<span id="cb45-29"><a href="#cb45-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-30"><a href="#cb45-30" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Calculer</span></span>
<span id="cb45-31"><a href="#cb45-31" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R1<span class="op">,</span> R2</span>
<span id="cb45-32"><a href="#cb45-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-33"><a href="#cb45-33" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.14" id="fonctions"><span class="header-section-number">1.2.14</span> Fonctions</h3>
<div class="sourceCode" id="cb46"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Fonctions - Solution</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">21</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>    BL double</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>    HALT</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a><span class="fu">double:</span></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> R0  <span class="co">; R0 = R0 + R0 = 2 * R0</span></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> PC<span class="op">,</span> LR      <span class="co">; retour</span></span></code></pre></div>
<hr />
<h3 data-number="1.2.15" id="fonction-add3"><span class="header-section-number">1.2.15</span> Fonction Add3</h3>
<div class="sourceCode" id="cb47"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Fonction Add3 - Solution</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">10</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">15</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">17</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>    BL add3</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>    HALT</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a><span class="fu">add3:</span></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> R1</span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> R2</span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> PC<span class="op">,</span> LR</span></code></pre></div>
<hr />
<h3 data-number="1.2.16" id="Ã©crire-caractÃ¨re"><span class="header-section-number">1.2.16</span> Ã‰crire CaractÃ¨re</h3>
<div class="sourceCode" id="cb48"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Ã‰crire CaractÃ¨re - Solution</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">65</span>         <span class="co">; &#39;A&#39; = 65</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span><span class="bn">0xFFFF0000</span> <span class="co">; adresse PUTC</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>    STRB R0<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span>       <span class="co">; Ã©crire le caractÃ¨re</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.17" id="hello-string"><span class="header-section-number">1.2.17</span> Hello String</h3>
<div class="sourceCode" id="cb49"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Hello String - Solution</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span><span class="bn">0xFFFF0000</span> <span class="co">; adresse PUTC</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>          <span class="co">; compteur</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">72</span>         <span class="co">; &#39;H&#39;</span></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>    STRB R2<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">1</span></span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">105</span>        <span class="co">; &#39;i&#39;</span></span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>    STRB R2<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span></span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">1</span></span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.18" id="print-loop"><span class="header-section-number">1.2.18</span> Print Loop</h3>
<div class="sourceCode" id="cb50"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Print Loop - Solution</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span><span class="bn">0xFFFF0000</span> <span class="co">; adresse PUTC</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>          <span class="co">; compteur</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">65</span>         <span class="co">; caractÃ¨re courant = &#39;A&#39;</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a><span class="fu">.loop:</span></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>    STRB R2<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span>       <span class="co">; Ã©crire caractÃ¨re</span></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">1</span>      <span class="co">; compteur++</span></span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R2<span class="op">,</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">1</span>      <span class="co">; caractÃ¨re suivant</span></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">69</span>         <span class="co">; &#39;E&#39; = 69</span></span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>LT <span class="op">.</span>loop</span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.19" id="pixel"><span class="header-section-number">1.2.19</span> Pixel</h3>
<div class="sourceCode" id="cb51"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Pixel - Solution</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span><span class="bn">0x00400000</span> <span class="co">; adresse Ã©cran</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="bn">0x80</span>       <span class="co">; bit 7 = pixel 0</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>    STRB R0<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span>       <span class="co">; Ã©crire le byte</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.20" id="ligne-horizontale"><span class="header-section-number">1.2.20</span> Ligne Horizontale</h3>
<div class="sourceCode" id="cb52"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Ligne Horizontale - Solution</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span><span class="bn">0x00400000</span> <span class="co">; adresse Ã©cran</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="bn">0xFF</span>       <span class="co">; 8 pixels allumÃ©s</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>    STRB R0<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span>       <span class="co">; Ã©crire le byte</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.21" id="ligne-verticale"><span class="header-section-number">1.2.21</span> Ligne Verticale</h3>
<div class="sourceCode" id="cb53"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Ligne Verticale - Solution</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span><span class="bn">0x00400000</span> <span class="co">; adresse Ã©cran</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0x80</span>       <span class="co">; bit du pixel (colonne 0)</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>          <span class="co">; compteur</span></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a><span class="fu">.loop:</span></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>    STRB R2<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span>       <span class="co">; dessiner pixel</span></span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R1<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">40</span>     <span class="co">; ligne suivante (320/8 = 40)</span></span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">1</span>      <span class="co">; compteur++</span></span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">8</span></span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>LT <span class="op">.</span>loop</span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.22" id="rectangle"><span class="header-section-number">1.2.22</span> Rectangle</h3>
<div class="sourceCode" id="cb54"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Rectangle - Solution</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span><span class="bn">0x00400000</span> <span class="co">; adresse Ã©cran</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0xFF</span>       <span class="co">; ligne de 8 pixels</span></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>          <span class="co">; compteur de lignes</span></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a><span class="fu">.loop:</span></span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>    STRB R2<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span>       <span class="co">; dessiner ligne</span></span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R1<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">40</span>     <span class="co">; ligne suivante</span></span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">1</span>      <span class="co">; compteur++</span></span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">8</span></span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>LT <span class="op">.</span>loop</span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.23" id="damier"><span class="header-section-number">1.2.23</span> Damier</h3>
<div class="sourceCode" id="cb55"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Damier - Solution</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span><span class="bn">0x00400000</span> <span class="co">; adresse Ã©cran</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0xAA</span>       <span class="co">; motif courant</span></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>          <span class="co">; compteur de lignes</span></span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a><span class="fu">.loop:</span></span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>    STRB R2<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span>       <span class="co">; colonne 0</span></span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R4<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">1</span></span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>    EOR R5<span class="op">,</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0xFF</span>   <span class="co">; inverser pour colonne 1</span></span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a>    STRB R5<span class="op">,</span> <span class="op">[</span>R4<span class="op">]</span>       <span class="co">; colonne 1</span></span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R1<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">40</span>     <span class="co">; ligne suivante</span></span>
<span id="cb55-17"><a href="#cb55-17" aria-hidden="true" tabindex="-1"></a>    EOR R2<span class="op">,</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0xFF</span>   <span class="co">; alterner le motif</span></span>
<span id="cb55-18"><a href="#cb55-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">1</span></span>
<span id="cb55-19"><a href="#cb55-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">8</span></span>
<span id="cb55-20"><a href="#cb55-20" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>LT <span class="op">.</span>loop</span>
<span id="cb55-21"><a href="#cb55-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-22"><a href="#cb55-22" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.24" id="lire-un-caractÃ¨re"><span class="header-section-number">1.2.24</span> Lire un CaractÃ¨re</h3>
<div class="sourceCode" id="cb56"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Lire un CaractÃ¨re - Solution</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span><span class="bn">0x00402600</span> <span class="co">; adresse KEYBOARD (temps rÃ©el)</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>    LDR R4<span class="op">,</span> <span class="op">=</span><span class="bn">0xFFFF0000</span> <span class="co">; adresse PUTC</span></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Attendre une touche</span></span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a><span class="fu">.wait:</span></span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a>    LDR R2<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span>        <span class="co">; lire clavier</span></span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>EQ <span class="op">.</span>wait          <span class="co">; boucler si pas de touche</span></span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-15"><a href="#cb56-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Convertir ASCII â†’ nombre</span></span>
<span id="cb56-16"><a href="#cb56-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">SUB</span> R0<span class="op">,</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0x30</span>   <span class="co">; R0 = chiffre (0-9)</span></span>
<span id="cb56-17"><a href="#cb56-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-18"><a href="#cb56-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Afficher le chiffre tapÃ© (Ã©cho)</span></span>
<span id="cb56-19"><a href="#cb56-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">STR</span> R2<span class="op">,</span> <span class="op">[</span>R4<span class="op">]</span>        <span class="co">; afficher le caractÃ¨re</span></span>
<span id="cb56-20"><a href="#cb56-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-21"><a href="#cb56-21" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.25" id="lire-un-nombre-Ã -2-chiffres"><span class="header-section-number">1.2.25</span> Lire un Nombre Ã  2
Chiffres</h3>
<div class="sourceCode" id="cb57"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Lire un Nombre Ã  2 Chiffres - Solution</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>    LDR R5<span class="op">,</span> <span class="op">=</span><span class="bn">0x00402600</span> <span class="co">; adresse KEYBOARD (temps rÃ©el)</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>    LDR R6<span class="op">,</span> <span class="op">=</span><span class="bn">0xFFFF0000</span> <span class="co">; adresse PUTC</span></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Attendre premier chiffre</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a><span class="fu">.wait1:</span></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">[</span>R5<span class="op">]</span></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>EQ <span class="op">.</span>wait1</span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Ã‰cho du premier chiffre</span></span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">STR</span> R1<span class="op">,</span> <span class="op">[</span>R6<span class="op">]</span></span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Convertir en nombre</span></span>
<span id="cb57-19"><a href="#cb57-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">SUB</span> R1<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="bn">0x30</span>   <span class="co">; R1 = premier chiffre</span></span>
<span id="cb57-20"><a href="#cb57-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-21"><a href="#cb57-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Multiplier par 10: x â†’ 2x â†’ 4x â†’ 5x â†’ 10x</span></span>
<span id="cb57-22"><a href="#cb57-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R2<span class="op">,</span> R1<span class="op">,</span> R1      <span class="co">; R2 = 2x</span></span>
<span id="cb57-23"><a href="#cb57-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R2<span class="op">,</span> R2<span class="op">,</span> R2      <span class="co">; R2 = 4x</span></span>
<span id="cb57-24"><a href="#cb57-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R2<span class="op">,</span> R2<span class="op">,</span> R1      <span class="co">; R2 = 5x</span></span>
<span id="cb57-25"><a href="#cb57-25" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R1<span class="op">,</span> R2<span class="op">,</span> R2      <span class="co">; R1 = 10x</span></span>
<span id="cb57-26"><a href="#cb57-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-27"><a href="#cb57-27" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Attendre relÃ¢che de la touche</span></span>
<span id="cb57-28"><a href="#cb57-28" aria-hidden="true" tabindex="-1"></a><span class="fu">.release1:</span></span>
<span id="cb57-29"><a href="#cb57-29" aria-hidden="true" tabindex="-1"></a>    LDR R2<span class="op">,</span> <span class="op">[</span>R5<span class="op">]</span></span>
<span id="cb57-30"><a href="#cb57-30" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb57-31"><a href="#cb57-31" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>NE <span class="op">.</span>release1</span>
<span id="cb57-32"><a href="#cb57-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-33"><a href="#cb57-33" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Attendre deuxiÃ¨me chiffre</span></span>
<span id="cb57-34"><a href="#cb57-34" aria-hidden="true" tabindex="-1"></a><span class="fu">.wait2:</span></span>
<span id="cb57-35"><a href="#cb57-35" aria-hidden="true" tabindex="-1"></a>    LDR R2<span class="op">,</span> <span class="op">[</span>R5<span class="op">]</span></span>
<span id="cb57-36"><a href="#cb57-36" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb57-37"><a href="#cb57-37" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>EQ <span class="op">.</span>wait2</span>
<span id="cb57-38"><a href="#cb57-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-39"><a href="#cb57-39" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Ã‰cho du deuxiÃ¨me chiffre</span></span>
<span id="cb57-40"><a href="#cb57-40" aria-hidden="true" tabindex="-1"></a>    <span class="bu">STR</span> R2<span class="op">,</span> <span class="op">[</span>R6<span class="op">]</span></span>
<span id="cb57-41"><a href="#cb57-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-42"><a href="#cb57-42" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Convertir et ajouter</span></span>
<span id="cb57-43"><a href="#cb57-43" aria-hidden="true" tabindex="-1"></a>    <span class="bu">SUB</span> R2<span class="op">,</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0x30</span>   <span class="co">; R2 = deuxiÃ¨me chiffre</span></span>
<span id="cb57-44"><a href="#cb57-44" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R1<span class="op">,</span> R2      <span class="co">; R0 = nombre complet</span></span>
<span id="cb57-45"><a href="#cb57-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-46"><a href="#cb57-46" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.26" id="deviner-le-nombre"><span class="header-section-number">1.2.26</span> Deviner le Nombre</h3>
<div class="sourceCode" id="cb58"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Deviner le Nombre - Solution</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R7<span class="op">,</span> <span class="op">#</span><span class="dv">55</span>         <span class="co">; nombre secret: &#39;7&#39; en ASCII (0x37)</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>    LDR R5<span class="op">,</span> <span class="op">=</span><span class="bn">0x00402600</span> <span class="co">; KEYBOARD</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>    LDR R6<span class="op">,</span> <span class="op">=</span><span class="bn">0xFFFF0000</span> <span class="co">; PUTC</span></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R4<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>          <span class="co">; derniÃ¨re touche vue</span></span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a><span class="fu">.game_loop:</span></span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Lire clavier</span></span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a>    LDR R0<span class="op">,</span> <span class="op">[</span>R5<span class="op">]</span></span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Ignorer si pas de touche ou mÃªme touche que avant</span></span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb58-17"><a href="#cb58-17" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>EQ <span class="op">.</span>game_loop</span>
<span id="cb58-18"><a href="#cb58-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R0<span class="op">,</span> R4</span>
<span id="cb58-19"><a href="#cb58-19" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>EQ <span class="op">.</span>game_loop</span>
<span id="cb58-20"><a href="#cb58-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-21"><a href="#cb58-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Nouvelle touche dÃ©tectÃ©e</span></span>
<span id="cb58-22"><a href="#cb58-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R4<span class="op">,</span> R0          <span class="co">; sauvegarder</span></span>
<span id="cb58-23"><a href="#cb58-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-24"><a href="#cb58-24" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Ã‰cho de la touche</span></span>
<span id="cb58-25"><a href="#cb58-25" aria-hidden="true" tabindex="-1"></a>    <span class="bu">STR</span> R0<span class="op">,</span> <span class="op">[</span>R6<span class="op">]</span></span>
<span id="cb58-26"><a href="#cb58-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-27"><a href="#cb58-27" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Comparer au secret</span></span>
<span id="cb58-28"><a href="#cb58-28" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R0<span class="op">,</span> R7</span>
<span id="cb58-29"><a href="#cb58-29" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>EQ <span class="op">.</span>win</span>
<span id="cb58-30"><a href="#cb58-30" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>LT <span class="op">.</span>too_small</span>
<span id="cb58-31"><a href="#cb58-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-32"><a href="#cb58-32" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Trop grand -&gt; afficher &#39;-&#39;</span></span>
<span id="cb58-33"><a href="#cb58-33" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">45</span>         <span class="co">; &#39;-&#39;</span></span>
<span id="cb58-34"><a href="#cb58-34" aria-hidden="true" tabindex="-1"></a>    <span class="bu">STR</span> R1<span class="op">,</span> <span class="op">[</span>R6<span class="op">]</span></span>
<span id="cb58-35"><a href="#cb58-35" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">10</span>         <span class="co">; newline</span></span>
<span id="cb58-36"><a href="#cb58-36" aria-hidden="true" tabindex="-1"></a>    <span class="bu">STR</span> R1<span class="op">,</span> <span class="op">[</span>R6<span class="op">]</span></span>
<span id="cb58-37"><a href="#cb58-37" aria-hidden="true" tabindex="-1"></a>    B <span class="op">.</span>wait_release</span>
<span id="cb58-38"><a href="#cb58-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-39"><a href="#cb58-39" aria-hidden="true" tabindex="-1"></a><span class="fu">.too_small:</span></span>
<span id="cb58-40"><a href="#cb58-40" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Trop petit -&gt; afficher &#39;+&#39;</span></span>
<span id="cb58-41"><a href="#cb58-41" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">43</span>         <span class="co">; &#39;+&#39;</span></span>
<span id="cb58-42"><a href="#cb58-42" aria-hidden="true" tabindex="-1"></a>    <span class="bu">STR</span> R1<span class="op">,</span> <span class="op">[</span>R6<span class="op">]</span></span>
<span id="cb58-43"><a href="#cb58-43" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">10</span>         <span class="co">; newline</span></span>
<span id="cb58-44"><a href="#cb58-44" aria-hidden="true" tabindex="-1"></a>    <span class="bu">STR</span> R1<span class="op">,</span> <span class="op">[</span>R6<span class="op">]</span></span>
<span id="cb58-45"><a href="#cb58-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-46"><a href="#cb58-46" aria-hidden="true" tabindex="-1"></a><span class="fu">.wait_release:</span></span>
<span id="cb58-47"><a href="#cb58-47" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Attendre relÃ¢che (R4 != 0, donc on attend que R0 change)</span></span>
<span id="cb58-48"><a href="#cb58-48" aria-hidden="true" tabindex="-1"></a>    LDR R0<span class="op">,</span> <span class="op">[</span>R5<span class="op">]</span></span>
<span id="cb58-49"><a href="#cb58-49" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R0<span class="op">,</span> R4</span>
<span id="cb58-50"><a href="#cb58-50" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>EQ <span class="op">.</span>wait_release</span>
<span id="cb58-51"><a href="#cb58-51" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R4<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>          <span class="co">; reset</span></span>
<span id="cb58-52"><a href="#cb58-52" aria-hidden="true" tabindex="-1"></a>    B <span class="op">.</span>game_loop</span>
<span id="cb58-53"><a href="#cb58-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-54"><a href="#cb58-54" aria-hidden="true" tabindex="-1"></a><span class="fu">.win:</span></span>
<span id="cb58-55"><a href="#cb58-55" aria-hidden="true" tabindex="-1"></a>    <span class="co">; GagnÃ©! Afficher &#39;*&#39;</span></span>
<span id="cb58-56"><a href="#cb58-56" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">42</span>         <span class="co">; &#39;*&#39;</span></span>
<span id="cb58-57"><a href="#cb58-57" aria-hidden="true" tabindex="-1"></a>    <span class="bu">STR</span> R1<span class="op">,</span> <span class="op">[</span>R6<span class="op">]</span></span>
<span id="cb58-58"><a href="#cb58-58" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">10</span></span>
<span id="cb58-59"><a href="#cb58-59" aria-hidden="true" tabindex="-1"></a>    <span class="bu">STR</span> R1<span class="op">,</span> <span class="op">[</span>R6<span class="op">]</span></span>
<span id="cb58-60"><a href="#cb58-60" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">7</span>          <span class="co">; rÃ©sultat dans R0</span></span>
<span id="cb58-61"><a href="#cb58-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-62"><a href="#cb58-62" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.27" id="dÃ©gradÃ©-dithering"><span class="header-section-number">1.2.27</span> DÃ©gradÃ© (Dithering)</h3>
<div class="sourceCode" id="cb59"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co">; DÃ©gradÃ© (Dithering) - Solution</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span><span class="bn">0x00400000</span> <span class="co">; adresse Ã©cran</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>          <span class="co">; compteur lignes</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a><span class="fu">.line_loop:</span></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Ã‰crire les 5 motifs de dÃ©gradÃ©</span></span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0x00</span>       <span class="co">; noir</span></span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a>    STRB R2<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span></span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0x11</span>       <span class="co">; 12.5% blanc</span></span>
<span id="cb59-15"><a href="#cb59-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R3<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">1</span></span>
<span id="cb59-16"><a href="#cb59-16" aria-hidden="true" tabindex="-1"></a>    STRB R2<span class="op">,</span> <span class="op">[</span>R3<span class="op">]</span></span>
<span id="cb59-17"><a href="#cb59-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-18"><a href="#cb59-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0x55</span>       <span class="co">; 50% blanc</span></span>
<span id="cb59-19"><a href="#cb59-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R3<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">2</span></span>
<span id="cb59-20"><a href="#cb59-20" aria-hidden="true" tabindex="-1"></a>    STRB R2<span class="op">,</span> <span class="op">[</span>R3<span class="op">]</span></span>
<span id="cb59-21"><a href="#cb59-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-22"><a href="#cb59-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0xBB</span>       <span class="co">; 75% blanc</span></span>
<span id="cb59-23"><a href="#cb59-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R3<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">3</span></span>
<span id="cb59-24"><a href="#cb59-24" aria-hidden="true" tabindex="-1"></a>    STRB R2<span class="op">,</span> <span class="op">[</span>R3<span class="op">]</span></span>
<span id="cb59-25"><a href="#cb59-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-26"><a href="#cb59-26" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0xFF</span>       <span class="co">; blanc</span></span>
<span id="cb59-27"><a href="#cb59-27" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R3<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">4</span></span>
<span id="cb59-28"><a href="#cb59-28" aria-hidden="true" tabindex="-1"></a>    STRB R2<span class="op">,</span> <span class="op">[</span>R3<span class="op">]</span></span>
<span id="cb59-29"><a href="#cb59-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-30"><a href="#cb59-30" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Ligne suivante</span></span>
<span id="cb59-31"><a href="#cb59-31" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R1<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">40</span>     <span class="co">; 40 bytes par ligne</span></span>
<span id="cb59-32"><a href="#cb59-32" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">1</span></span>
<span id="cb59-33"><a href="#cb59-33" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">240</span></span>
<span id="cb59-34"><a href="#cb59-34" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>LT <span class="op">.</span>line_loop</span>
<span id="cb59-35"><a href="#cb59-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-36"><a href="#cb59-36" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.28" id="dÃ©gradÃ©-plein-Ã©cran"><span class="header-section-number">1.2.28</span> DÃ©gradÃ© Plein Ã‰cran</h3>
<div class="sourceCode" id="cb60"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co">; DÃ©gradÃ© Plein Ã‰cran - Solution</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="co">; 8 bandes avec motifs croissants</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span><span class="bn">0x00400000</span> <span class="co">; adresse Ã©cran</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>          <span class="co">; compteur bandes</span></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0x00</span>       <span class="co">; motif initial (noir)</span></span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a><span class="fu">next_band:</span></span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>    LDR R3<span class="op">,</span> <span class="op">=</span><span class="dv">1200</span>       <span class="co">; 30 lignes * 40 bytes</span></span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a><span class="fu">fill_band:</span></span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a>    STRB R2<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span></span>
<span id="cb60-16"><a href="#cb60-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R1<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">1</span></span>
<span id="cb60-17"><a href="#cb60-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">SUB</span> R3<span class="op">,</span> R3<span class="op">,</span> <span class="op">#</span><span class="dv">1</span></span>
<span id="cb60-18"><a href="#cb60-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R3<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb60-19"><a href="#cb60-19" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>GT fill_band</span>
<span id="cb60-20"><a href="#cb60-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-21"><a href="#cb60-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Passer au motif suivant (approximation)</span></span>
<span id="cb60-22"><a href="#cb60-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">; 0x00 -&gt; 0x11 -&gt; 0x22 -&gt; 0x33 -&gt; ...</span></span>
<span id="cb60-23"><a href="#cb60-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R2<span class="op">,</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0x11</span></span>
<span id="cb60-24"><a href="#cb60-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">1</span></span>
<span id="cb60-25"><a href="#cb60-25" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">8</span></span>
<span id="cb60-26"><a href="#cb60-26" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>LT next_band</span>
<span id="cb60-27"><a href="#cb60-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-28"><a href="#cb60-28" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.29" id="recherche-dichotomique"><span class="header-section-number">1.2.29</span> Recherche Dichotomique</h3>
<div class="sourceCode" id="cb61"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Recherche Dichotomique - Solution</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R5<span class="op">,</span> <span class="op">#</span><span class="dv">42</span>         <span class="co">; nombre secret</span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>          <span class="co">; low</span></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">100</span>        <span class="co">; high</span></span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>          <span class="co">; compteur d&#39;essais</span></span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a><span class="fu">.loop:</span></span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">1</span>      <span class="co">; compteur++</span></span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">; mid = (low + high) / 2</span></span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R3<span class="op">,</span> R1<span class="op">,</span> R2</span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R4<span class="op">,</span> R3</span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Division par 2 avec shift (simulÃ© par soustraction successive)</span></span>
<span id="cb61-18"><a href="#cb61-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R3<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb61-19"><a href="#cb61-19" aria-hidden="true" tabindex="-1"></a><span class="fu">.div2:</span></span>
<span id="cb61-20"><a href="#cb61-20" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R4<span class="op">,</span> <span class="op">#</span><span class="dv">2</span></span>
<span id="cb61-21"><a href="#cb61-21" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>LT <span class="op">.</span>div_done</span>
<span id="cb61-22"><a href="#cb61-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">SUB</span> R4<span class="op">,</span> R4<span class="op">,</span> <span class="op">#</span><span class="dv">2</span></span>
<span id="cb61-23"><a href="#cb61-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R3<span class="op">,</span> R3<span class="op">,</span> <span class="op">#</span><span class="dv">1</span></span>
<span id="cb61-24"><a href="#cb61-24" aria-hidden="true" tabindex="-1"></a>    B <span class="op">.</span>div2</span>
<span id="cb61-25"><a href="#cb61-25" aria-hidden="true" tabindex="-1"></a><span class="fu">.div_done:</span></span>
<span id="cb61-26"><a href="#cb61-26" aria-hidden="true" tabindex="-1"></a>    <span class="co">; R3 = mid</span></span>
<span id="cb61-27"><a href="#cb61-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-28"><a href="#cb61-28" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R3<span class="op">,</span> R5</span>
<span id="cb61-29"><a href="#cb61-29" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>EQ <span class="op">.</span>found</span>
<span id="cb61-30"><a href="#cb61-30" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>LT <span class="op">.</span>too_low</span>
<span id="cb61-31"><a href="#cb61-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-32"><a href="#cb61-32" aria-hidden="true" tabindex="-1"></a>    <span class="co">; mid &gt; secret: high = mid - 1</span></span>
<span id="cb61-33"><a href="#cb61-33" aria-hidden="true" tabindex="-1"></a>    <span class="bu">SUB</span> R2<span class="op">,</span> R3<span class="op">,</span> <span class="op">#</span><span class="dv">1</span></span>
<span id="cb61-34"><a href="#cb61-34" aria-hidden="true" tabindex="-1"></a>    B <span class="op">.</span>loop</span>
<span id="cb61-35"><a href="#cb61-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-36"><a href="#cb61-36" aria-hidden="true" tabindex="-1"></a><span class="fu">.too_low:</span></span>
<span id="cb61-37"><a href="#cb61-37" aria-hidden="true" tabindex="-1"></a>    <span class="co">; mid &lt; secret: low = mid + 1</span></span>
<span id="cb61-38"><a href="#cb61-38" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R1<span class="op">,</span> R3<span class="op">,</span> <span class="op">#</span><span class="dv">1</span></span>
<span id="cb61-39"><a href="#cb61-39" aria-hidden="true" tabindex="-1"></a>    B <span class="op">.</span>loop</span>
<span id="cb61-40"><a href="#cb61-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-41"><a href="#cb61-41" aria-hidden="true" tabindex="-1"></a><span class="fu">.found:</span></span>
<span id="cb61-42"><a href="#cb61-42" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h2 data-number="1.3" id="c.-solutions-c32"><span class="header-section-number">1.3</span> C. Solutions C32</h2>
<h3 data-number="1.3.1" id="variables"><span class="header-section-number">1.3.1</span> Variables</h3>
<div class="sourceCode" id="cb62"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Variables - Solution</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> y <span class="op">=</span> <span class="dv">32</span><span class="op">;</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result <span class="op">=</span> x <span class="op">+</span> y<span class="op">;</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.2" id="expressions"><span class="header-section-number">1.3.2</span> Expressions</h3>
<div class="sourceCode" id="cb63"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Expressions - Solution</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result <span class="op">=</span> <span class="op">(</span><span class="dv">5</span> <span class="op">+</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="dv">10</span> <span class="op">-</span> <span class="dv">4</span><span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.3" id="modulo"><span class="header-section-number">1.3.3</span> Modulo</h3>
<div class="sourceCode" id="cb64"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Modulo - Solution</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result <span class="op">=</span> <span class="op">(</span><span class="dv">100</span> <span class="op">%</span> <span class="dv">7</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="dv">45</span> <span class="op">%</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.4" id="incrÃ©mentation"><span class="header-section-number">1.3.4</span> IncrÃ©mentation</h3>
<div class="sourceCode" id="cb65"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co">// IncrÃ©mentation - Solution</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> x <span class="op">+</span> <span class="dv">3</span><span class="op">;</span>   <span class="co">// x = 8</span></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> x <span class="op">*</span> <span class="dv">2</span><span class="op">;</span>   <span class="co">// x = 16</span></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> x <span class="op">-</span> <span class="dv">1</span><span class="op">;</span>   <span class="co">// x = 15</span></span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-10"><a href="#cb65-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x<span class="op">;</span></span>
<span id="cb65-11"><a href="#cb65-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.5" id="conditions-1"><span class="header-section-number">1.3.5</span> Conditions</h3>
<div class="sourceCode" id="cb66"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Conditions - Solution</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a <span class="op">=</span> <span class="dv">25</span><span class="op">;</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> b <span class="op">=</span> <span class="dv">17</span><span class="op">;</span></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> max<span class="op">;</span></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>a <span class="op">&gt;</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>        max <span class="op">=</span> a<span class="op">;</span></span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a>        max <span class="op">=</span> b<span class="op">;</span></span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-14"><a href="#cb66-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> max<span class="op">;</span></span>
<span id="cb66-15"><a href="#cb66-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.6" id="else-if"><span class="header-section-number">1.3.6</span> Else-If</h3>
<div class="sourceCode" id="cb67"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Else-If - Solution</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">75</span><span class="op">;</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> grade<span class="op">;</span></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="dv">90</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>        grade <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="dv">80</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a>        grade <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="dv">70</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a>        grade <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="dv">60</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a>        grade <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb67-15"><a href="#cb67-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb67-16"><a href="#cb67-16" aria-hidden="true" tabindex="-1"></a>        grade <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb67-17"><a href="#cb67-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb67-18"><a href="#cb67-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-19"><a href="#cb67-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> grade<span class="op">;</span></span>
<span id="cb67-20"><a href="#cb67-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.7" id="opÃ©rateurs-logiques"><span class="header-section-number">1.3.7</span> OpÃ©rateurs Logiques</h3>
<div class="sourceCode" id="cb68"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co">// OpÃ©rateurs Logiques - Solution</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">15</span><span class="op">;</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result<span class="op">;</span></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>x <span class="op">&gt;=</span> <span class="dv">10</span> <span class="op">&amp;&amp;</span> x <span class="op">&lt;=</span> <span class="dv">20</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb68-14"><a href="#cb68-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.8" id="maximum-de-3"><span class="header-section-number">1.3.8</span> Maximum de 3</h3>
<div class="sourceCode" id="cb69"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Maximum de 3 - Solution</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a <span class="op">=</span> <span class="dv">15</span><span class="op">;</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> b <span class="op">=</span> <span class="dv">42</span><span class="op">;</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> c <span class="op">=</span> <span class="dv">27</span><span class="op">;</span></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> max<span class="op">;</span></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>a <span class="op">&gt;=</span> b <span class="op">&amp;&amp;</span> a <span class="op">&gt;=</span> c<span class="op">)</span> <span class="op">{</span></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>        max <span class="op">=</span> a<span class="op">;</span></span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>b <span class="op">&gt;=</span> c<span class="op">)</span> <span class="op">{</span></span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a>        max <span class="op">=</span> b<span class="op">;</span></span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true" tabindex="-1"></a>        max <span class="op">=</span> c<span class="op">;</span></span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb69-16"><a href="#cb69-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-17"><a href="#cb69-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> max<span class="op">;</span></span>
<span id="cb69-18"><a href="#cb69-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.9" id="boucle-for"><span class="header-section-number">1.3.9</span> Boucle For</h3>
<div class="sourceCode" id="cb70"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Boucle For - Solution</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">10</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">=</span> sum <span class="op">+</span> i<span class="op">;</span></span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum<span class="op">;</span></span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.10" id="boucle-while"><span class="header-section-number">1.3.10</span> Boucle While</h3>
<div class="sourceCode" id="cb71"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Boucle While - Solution</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="dv">12345</span><span class="op">;</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>        count <span class="op">=</span> count <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>        n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> count<span class="op">;</span></span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.11" id="boucles-imbriquÃ©es"><span class="header-section-number">1.3.11</span> Boucles ImbriquÃ©es</h3>
<div class="sourceCode" id="cb72"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Boucles ImbriquÃ©es - Solution</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">3</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">&lt;=</span> <span class="dv">4</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>            sum <span class="op">=</span> sum <span class="op">+</span> i <span class="op">*</span> j<span class="op">;</span></span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb72-10"><a href="#cb72-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb72-11"><a href="#cb72-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-12"><a href="#cb72-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum<span class="op">;</span></span>
<span id="cb72-13"><a href="#cb72-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.12" id="multiplication-1"><span class="header-section-number">1.3.12</span> Multiplication</h3>
<div class="sourceCode" id="cb73"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Multiplication - Solution</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a <span class="op">=</span> <span class="dv">7</span><span class="op">;</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> b <span class="op">=</span> <span class="dv">8</span><span class="op">;</span></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> b<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> result <span class="op">+</span> a<span class="op">;</span></span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.13" id="fonctions-1"><span class="header-section-number">1.3.13</span> Fonctions</h3>
<div class="sourceCode" id="cb74"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Fonctions - Solution</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> square<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> n <span class="op">*</span> n<span class="op">;</span></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> square<span class="op">(</span><span class="dv">7</span><span class="op">);</span></span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.14" id="paramÃ¨tres-multiples"><span class="header-section-number">1.3.14</span> ParamÃ¨tres Multiples</h3>
<div class="sourceCode" id="cb75"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co">// ParamÃ¨tres Multiples - Solution</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> add3<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">,</span> <span class="dt">int</span> c<span class="op">)</span> <span class="op">{</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">+</span> b <span class="op">+</span> c<span class="op">;</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> add3<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">12</span><span class="op">);</span></span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.15" id="valeur-absolue-1"><span class="header-section-number">1.3.15</span> Valeur Absolue</h3>
<div class="sourceCode" id="cb76"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Valeur Absolue - Solution</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> abs<span class="op">(</span><span class="dt">int</span> x<span class="op">)</span> <span class="op">{</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>x <span class="op">&lt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">-</span>x<span class="op">;</span></span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x<span class="op">;</span></span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> abs<span class="op">(-</span><span class="dv">15</span><span class="op">)</span> <span class="op">+</span> abs<span class="op">(</span><span class="dv">10</span><span class="op">);</span></span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.16" id="min-et-max"><span class="header-section-number">1.3.16</span> Min et Max</h3>
<div class="sourceCode" id="cb77"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Min et Max - Solution</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> min<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>a <span class="op">&lt;</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> a<span class="op">;</span></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> b<span class="op">;</span></span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-10"><a href="#cb77-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> max<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb77-11"><a href="#cb77-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>a <span class="op">&gt;</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb77-12"><a href="#cb77-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> a<span class="op">;</span></span>
<span id="cb77-13"><a href="#cb77-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb77-14"><a href="#cb77-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> b<span class="op">;</span></span>
<span id="cb77-15"><a href="#cb77-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb77-16"><a href="#cb77-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-17"><a href="#cb77-17" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb77-18"><a href="#cb77-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> max<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">25</span><span class="op">)</span> <span class="op">-</span> min<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">25</span><span class="op">);</span></span>
<span id="cb77-19"><a href="#cb77-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.17" id="tableaux-1"><span class="header-section-number">1.3.17</span> Tableaux</h3>
<div class="sourceCode" id="cb78"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Tableaux - Solution</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[</span><span class="dv">5</span><span class="op">];</span></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">7</span><span class="op">;</span></span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="dv">9</span><span class="op">;</span></span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">4</span><span class="op">]</span> <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb78-10"><a href="#cb78-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-11"><a href="#cb78-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb78-12"><a href="#cb78-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-13"><a href="#cb78-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb78-14"><a href="#cb78-14" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">=</span> sum <span class="op">+</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb78-15"><a href="#cb78-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb78-16"><a href="#cb78-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-17"><a href="#cb78-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum<span class="op">;</span></span>
<span id="cb78-18"><a href="#cb78-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.18" id="maximum-tableau-1"><span class="header-section-number">1.3.18</span> Maximum Tableau</h3>
<div class="sourceCode" id="cb79"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Maximum Tableau - Solution</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[</span><span class="dv">6</span><span class="op">];</span></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">12</span><span class="op">;</span></span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">45</span><span class="op">;</span></span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">7</span><span class="op">;</span></span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="dv">23</span><span class="op">;</span></span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">4</span><span class="op">]</span> <span class="op">=</span> <span class="dv">56</span><span class="op">;</span></span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="dv">34</span><span class="op">;</span></span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-12"><a href="#cb79-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> max <span class="op">=</span> arr<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb79-13"><a href="#cb79-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-14"><a href="#cb79-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">6</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb79-15"><a href="#cb79-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> max<span class="op">)</span> <span class="op">{</span></span>
<span id="cb79-16"><a href="#cb79-16" aria-hidden="true" tabindex="-1"></a>            max <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb79-17"><a href="#cb79-17" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb79-18"><a href="#cb79-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb79-19"><a href="#cb79-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-20"><a href="#cb79-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> max<span class="op">;</span></span>
<span id="cb79-21"><a href="#cb79-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.19" id="compter-Ã©lÃ©ments"><span class="header-section-number">1.3.19</span> Compter Ã‰lÃ©ments</h3>
<div class="sourceCode" id="cb80"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Compter Ã‰lÃ©ments - Solution</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[</span><span class="dv">8</span><span class="op">];</span></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">8</span><span class="op">;</span></span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="dv">7</span><span class="op">;</span></span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">4</span><span class="op">]</span> <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="dv">9</span><span class="op">;</span></span>
<span id="cb80-11"><a href="#cb80-11" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">6</span><span class="op">]</span> <span class="op">=</span> <span class="dv">6</span><span class="op">;</span></span>
<span id="cb80-12"><a href="#cb80-12" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">7</span><span class="op">]</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb80-13"><a href="#cb80-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-14"><a href="#cb80-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb80-15"><a href="#cb80-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-16"><a href="#cb80-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">8</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb80-17"><a href="#cb80-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb80-18"><a href="#cb80-18" aria-hidden="true" tabindex="-1"></a>            count <span class="op">=</span> count <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb80-19"><a href="#cb80-19" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb80-20"><a href="#cb80-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb80-21"><a href="#cb80-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-22"><a href="#cb80-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> count<span class="op">;</span></span>
<span id="cb80-23"><a href="#cb80-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.20" id="pointeurs"><span class="header-section-number">1.3.20</span> Pointeurs</h3>
<div class="sourceCode" id="cb81"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Pointeurs - Solution</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>p <span class="op">=</span> <span class="op">&amp;</span>x<span class="op">;</span></span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>p <span class="op">=</span> <span class="dv">42</span><span class="op">;</span></span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x<span class="op">;</span></span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.21" id="swap"><span class="header-section-number">1.3.21</span> Swap</h3>
<div class="sourceCode" id="cb82"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Swap - Solution</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> temp <span class="op">=</span> <span class="op">*</span>a<span class="op">;</span></span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>b<span class="op">;</span></span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-9"><a href="#cb82-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb82-10"><a href="#cb82-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb82-11"><a href="#cb82-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> y <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb82-12"><a href="#cb82-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-13"><a href="#cb82-13" aria-hidden="true" tabindex="-1"></a>    swap<span class="op">(&amp;</span>x<span class="op">,</span> <span class="op">&amp;</span>y<span class="op">);</span></span>
<span id="cb82-14"><a href="#cb82-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-15"><a href="#cb82-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x<span class="op">;</span></span>
<span id="cb82-16"><a href="#cb82-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.22" id="pointeurs-et-tableaux"><span class="header-section-number">1.3.22</span> Pointeurs et Tableaux</h3>
<div class="sourceCode" id="cb83"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Pointeurs et Tableaux - Solution</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[</span><span class="dv">4</span><span class="op">];</span></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">15</span><span class="op">;</span></span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb83-11"><a href="#cb83-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>p <span class="op">=</span> arr<span class="op">;</span></span>
<span id="cb83-12"><a href="#cb83-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-13"><a href="#cb83-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb83-14"><a href="#cb83-14" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">=</span> sum <span class="op">+</span> <span class="op">*(</span>p <span class="op">+</span> i<span class="op">);</span></span>
<span id="cb83-15"><a href="#cb83-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb83-16"><a href="#cb83-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-17"><a href="#cb83-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum<span class="op">;</span></span>
<span id="cb83-18"><a href="#cb83-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.23" id="opÃ©rations-binaires"><span class="header-section-number">1.3.23</span> OpÃ©rations Binaires</h3>
<div class="sourceCode" id="cb84"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co">// OpÃ©rations Binaires - Solution</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> y <span class="op">=</span> <span class="dv">12</span><span class="op">;</span></span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result <span class="op">=</span> <span class="op">(</span>x <span class="op">&amp;</span> y<span class="op">)</span> <span class="op">|</span> <span class="op">(</span>x <span class="op">^</span> y<span class="op">);</span></span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.24" id="puissance-de-2"><span class="header-section-number">1.3.24</span> Puissance de 2</h3>
<div class="sourceCode" id="cb85"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Puissance de 2 - Solution</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_pow2<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&lt;=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">(</span>n <span class="op">&amp;</span> <span class="op">(</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">))</span> <span class="op">==</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-10"><a href="#cb85-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb85-11"><a href="#cb85-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> is_pow2<span class="op">(</span><span class="dv">16</span><span class="op">)</span> <span class="op">+</span> is_pow2<span class="op">(</span><span class="dv">15</span><span class="op">)</span> <span class="op">+</span> is_pow2<span class="op">(</span><span class="dv">32</span><span class="op">);</span></span>
<span id="cb85-12"><a href="#cb85-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.25" id="factorielle"><span class="header-section-number">1.3.25</span> Factorielle</h3>
<div class="sourceCode" id="cb86"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Factorielle - Solution</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> fact<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&lt;=</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> n <span class="op">*</span> fact<span class="op">(</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-10"><a href="#cb86-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb86-11"><a href="#cb86-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> fact<span class="op">(</span><span class="dv">5</span><span class="op">);</span></span>
<span id="cb86-12"><a href="#cb86-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.26" id="fibonacci-1"><span class="header-section-number">1.3.26</span> Fibonacci</h3>
<div class="sourceCode" id="cb87"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Fibonacci - Solution</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> fib<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&lt;=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> fib<span class="op">(</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> fib<span class="op">(</span>n <span class="op">-</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb87-11"><a href="#cb87-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb87-12"><a href="#cb87-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-13"><a href="#cb87-13" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb87-14"><a href="#cb87-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> fib<span class="op">(</span><span class="dv">10</span><span class="op">);</span></span>
<span id="cb87-15"><a href="#cb87-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.27" id="somme-rÃ©cursive"><span class="header-section-number">1.3.27</span> Somme RÃ©cursive</h3>
<div class="sourceCode" id="cb88"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Somme RÃ©cursive - Solution</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> sum<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&lt;=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> n <span class="op">+</span> sum<span class="op">(</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-10"><a href="#cb88-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb88-11"><a href="#cb88-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum<span class="op">(</span><span class="dv">10</span><span class="op">);</span></span>
<span id="cb88-12"><a href="#cb88-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.28" id="pgcd-euclide"><span class="header-section-number">1.3.28</span> PGCD (Euclide)</h3>
<div class="sourceCode" id="cb89"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co">// PGCD (Euclide) - Solution</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> gcd<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>b <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> a<span class="op">;</span></span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> gcd<span class="op">(</span>b<span class="op">,</span> a <span class="op">%</span> b<span class="op">);</span></span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb89-11"><a href="#cb89-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> gcd<span class="op">(</span><span class="dv">48</span><span class="op">,</span> <span class="dv">18</span><span class="op">);</span></span>
<span id="cb89-12"><a href="#cb89-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.29" id="puissance"><span class="header-section-number">1.3.29</span> Puissance</h3>
<div class="sourceCode" id="cb90"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Puissance - Solution</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> power<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> power<span class="op">(</span>x <span class="op">*</span> x<span class="op">,</span> n <span class="op">/</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb90-10"><a href="#cb90-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">*</span> power<span class="op">(</span>x<span class="op">,</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb90-11"><a href="#cb90-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb90-12"><a href="#cb90-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-13"><a href="#cb90-13" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb90-14"><a href="#cb90-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> power<span class="op">(</span><span class="dv">2</span><span class="op">,</span> <span class="dv">10</span><span class="op">);</span></span>
<span id="cb90-15"><a href="#cb90-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.30" id="test-primalitÃ©"><span class="header-section-number">1.3.30</span> Test PrimalitÃ©</h3>
<div class="sourceCode" id="cb91"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Test PrimalitÃ© - Solution</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_prime<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&lt;</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> i <span class="op">*</span> i <span class="op">&lt;=</span> n<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>n <span class="op">%</span> i <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-9"><a href="#cb91-9" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb91-10"><a href="#cb91-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb91-11"><a href="#cb91-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb91-12"><a href="#cb91-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb91-13"><a href="#cb91-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb91-14"><a href="#cb91-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-15"><a href="#cb91-15" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb91-16"><a href="#cb91-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb91-17"><a href="#cb91-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> n <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> n <span class="op">&lt;=</span> <span class="dv">20</span><span class="op">;</span> n <span class="op">=</span> n <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-18"><a href="#cb91-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>is_prime<span class="op">(</span>n<span class="op">))</span> <span class="op">{</span></span>
<span id="cb91-19"><a href="#cb91-19" aria-hidden="true" tabindex="-1"></a>            count <span class="op">=</span> count <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb91-20"><a href="#cb91-20" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb91-21"><a href="#cb91-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb91-22"><a href="#cb91-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> count<span class="op">;</span></span>
<span id="cb91-23"><a href="#cb91-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.31" id="tri-Ã -bulles"><span class="header-section-number">1.3.31</span> Tri Ã  Bulles</h3>
<div class="sourceCode" id="cb92"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Tri Ã  Bulles - Solution</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[</span><span class="dv">5</span><span class="op">];</span></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">64</span><span class="op">;</span></span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">34</span><span class="op">;</span></span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">25</span><span class="op">;</span></span>
<span id="cb92-8"><a href="#cb92-8" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="dv">12</span><span class="op">;</span></span>
<span id="cb92-9"><a href="#cb92-9" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">4</span><span class="op">]</span> <span class="op">=</span> <span class="dv">22</span><span class="op">;</span></span>
<span id="cb92-10"><a href="#cb92-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-11"><a href="#cb92-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb92-12"><a href="#cb92-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">4</span> <span class="op">-</span> i<span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb92-13"><a href="#cb92-13" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>j<span class="op">]</span> <span class="op">&gt;</span> arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">])</span> <span class="op">{</span></span>
<span id="cb92-14"><a href="#cb92-14" aria-hidden="true" tabindex="-1"></a>                <span class="dt">int</span> temp <span class="op">=</span> arr<span class="op">[</span>j<span class="op">];</span></span>
<span id="cb92-15"><a href="#cb92-15" aria-hidden="true" tabindex="-1"></a>                arr<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb92-16"><a href="#cb92-16" aria-hidden="true" tabindex="-1"></a>                arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb92-17"><a href="#cb92-17" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb92-18"><a href="#cb92-18" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb92-19"><a href="#cb92-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb92-20"><a href="#cb92-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-21"><a href="#cb92-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> arr<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb92-22"><a href="#cb92-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.32" id="recherche-binaire"><span class="header-section-number">1.3.32</span> Recherche Binaire</h3>
<div class="sourceCode" id="cb93"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Recherche Binaire - Solution</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> binary_search<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>arr<span class="op">,</span> <span class="dt">int</span> size<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> left <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> right <span class="op">=</span> size <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>left <span class="op">&lt;=</span> right<span class="op">)</span> <span class="op">{</span></span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> mid <span class="op">=</span> <span class="op">(</span>left <span class="op">+</span> right<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb93-9"><a href="#cb93-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">==</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb93-10"><a href="#cb93-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> mid<span class="op">;</span></span>
<span id="cb93-11"><a href="#cb93-11" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb93-12"><a href="#cb93-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">&lt;</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb93-13"><a href="#cb93-13" aria-hidden="true" tabindex="-1"></a>            left <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb93-14"><a href="#cb93-14" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb93-15"><a href="#cb93-15" aria-hidden="true" tabindex="-1"></a>            right <span class="op">=</span> mid <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb93-16"><a href="#cb93-16" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb93-17"><a href="#cb93-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb93-18"><a href="#cb93-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-19"><a href="#cb93-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb93-20"><a href="#cb93-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb93-21"><a href="#cb93-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-22"><a href="#cb93-22" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb93-23"><a href="#cb93-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[</span><span class="dv">10</span><span class="op">];</span></span>
<span id="cb93-24"><a href="#cb93-24" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb93-25"><a href="#cb93-25" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb93-26"><a href="#cb93-26" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">8</span><span class="op">;</span></span>
<span id="cb93-27"><a href="#cb93-27" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="dv">12</span><span class="op">;</span></span>
<span id="cb93-28"><a href="#cb93-28" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">4</span><span class="op">]</span> <span class="op">=</span> <span class="dv">16</span><span class="op">;</span></span>
<span id="cb93-29"><a href="#cb93-29" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="dv">23</span><span class="op">;</span></span>
<span id="cb93-30"><a href="#cb93-30" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">6</span><span class="op">]</span> <span class="op">=</span> <span class="dv">38</span><span class="op">;</span></span>
<span id="cb93-31"><a href="#cb93-31" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">7</span><span class="op">]</span> <span class="op">=</span> <span class="dv">56</span><span class="op">;</span></span>
<span id="cb93-32"><a href="#cb93-32" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">8</span><span class="op">]</span> <span class="op">=</span> <span class="dv">72</span><span class="op">;</span></span>
<span id="cb93-33"><a href="#cb93-33" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">9</span><span class="op">]</span> <span class="op">=</span> <span class="dv">91</span><span class="op">;</span></span>
<span id="cb93-34"><a href="#cb93-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-35"><a href="#cb93-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> binary_search<span class="op">(</span>arr<span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">23</span><span class="op">);</span></span>
<span id="cb93-36"><a href="#cb93-36" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.33" id="inverser-tableau"><span class="header-section-number">1.3.33</span> Inverser Tableau</h3>
<div class="sourceCode" id="cb94"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Inverser Tableau - Solution</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[</span><span class="dv">5</span><span class="op">];</span></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">4</span><span class="op">]</span> <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> left <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb94-12"><a href="#cb94-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> right <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb94-13"><a href="#cb94-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>left <span class="op">&lt;</span> right<span class="op">)</span> <span class="op">{</span></span>
<span id="cb94-14"><a href="#cb94-14" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> temp <span class="op">=</span> arr<span class="op">[</span>left<span class="op">];</span></span>
<span id="cb94-15"><a href="#cb94-15" aria-hidden="true" tabindex="-1"></a>        arr<span class="op">[</span>left<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>right<span class="op">];</span></span>
<span id="cb94-16"><a href="#cb94-16" aria-hidden="true" tabindex="-1"></a>        arr<span class="op">[</span>right<span class="op">]</span> <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb94-17"><a href="#cb94-17" aria-hidden="true" tabindex="-1"></a>        left <span class="op">=</span> left <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb94-18"><a href="#cb94-18" aria-hidden="true" tabindex="-1"></a>        right <span class="op">=</span> right <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb94-19"><a href="#cb94-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb94-20"><a href="#cb94-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-21"><a href="#cb94-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb94-22"><a href="#cb94-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb94-23"><a href="#cb94-23" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">=</span> sum <span class="op">+</span> arr<span class="op">[</span>i<span class="op">]</span> <span class="op">*</span> <span class="op">(</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb94-24"><a href="#cb94-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb94-25"><a href="#cb94-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum<span class="op">;</span></span>
<span id="cb94-26"><a href="#cb94-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.34" id="somme-des-chiffres"><span class="header-section-number">1.3.34</span> Somme des Chiffres</h3>
<div class="sourceCode" id="cb95"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Somme des Chiffres - Solution</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> digit_sum<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">=</span> sum <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span></span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a>        n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb95-9"><a href="#cb95-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum<span class="op">;</span></span>
<span id="cb95-10"><a href="#cb95-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb95-11"><a href="#cb95-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-12"><a href="#cb95-12" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb95-13"><a href="#cb95-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> digit_sum<span class="op">(</span><span class="dv">12345</span><span class="op">);</span></span>
<span id="cb95-14"><a href="#cb95-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.35" id="nombre-palindrome"><span class="header-section-number">1.3.35</span> Nombre Palindrome</h3>
<div class="sourceCode" id="cb96"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Nombre Palindrome - Solution</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_palindrome<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> original <span class="op">=</span> n<span class="op">;</span></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> reversed <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a>        reversed <span class="op">=</span> reversed <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span></span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a>        n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb96-10"><a href="#cb96-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb96-11"><a href="#cb96-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-12"><a href="#cb96-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>reversed <span class="op">==</span> original<span class="op">)</span> <span class="op">{</span></span>
<span id="cb96-13"><a href="#cb96-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb96-14"><a href="#cb96-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb96-15"><a href="#cb96-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb96-16"><a href="#cb96-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb96-17"><a href="#cb96-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-18"><a href="#cb96-18" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb96-19"><a href="#cb96-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> is_palindrome<span class="op">(</span><span class="dv">12321</span><span class="op">)</span> <span class="op">+</span> is_palindrome<span class="op">(</span><span class="dv">1221</span><span class="op">)</span> <span class="op">+</span> is_palindrome<span class="op">(</span><span class="dv">123</span><span class="op">);</span></span>
<span id="cb96-20"><a href="#cb96-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.36" id="Ã©crire-un-caractÃ¨re"><span class="header-section-number">1.3.36</span> Ã‰crire un CaractÃ¨re</h3>
<div class="sourceCode" id="cb97"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Ã‰crire un CaractÃ¨re - Solution</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> putchar<span class="op">(</span><span class="dt">int</span> c<span class="op">)</span> <span class="op">{</span></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>port <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0xFFFF0000</span><span class="op">;</span></span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>port <span class="op">=</span> c<span class="op">;</span></span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a>    putchar<span class="op">(</span><span class="dv">65</span><span class="op">);</span>  <span class="co">// Affiche &#39;A&#39;</span></span>
<span id="cb97-10"><a href="#cb97-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">65</span><span class="op">;</span></span>
<span id="cb97-11"><a href="#cb97-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.37" id="afficher-une-chaÃ®ne"><span class="header-section-number">1.3.37</span> Afficher une ChaÃ®ne</h3>
<div class="sourceCode" id="cb98"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Afficher une ChaÃ®ne - Solution</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> putchar<span class="op">(</span><span class="dt">int</span> c<span class="op">)</span> <span class="op">{</span></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>port <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0xFFFF0000</span><span class="op">;</span></span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>port <span class="op">=</span> c<span class="op">;</span></span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb98-7"><a href="#cb98-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-8"><a href="#cb98-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> print<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb98-9"><a href="#cb98-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb98-10"><a href="#cb98-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(*</span>s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb98-11"><a href="#cb98-11" aria-hidden="true" tabindex="-1"></a>        putchar<span class="op">(*</span>s<span class="op">);</span></span>
<span id="cb98-12"><a href="#cb98-12" aria-hidden="true" tabindex="-1"></a>        s <span class="op">=</span> s <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb98-13"><a href="#cb98-13" aria-hidden="true" tabindex="-1"></a>        count <span class="op">=</span> count <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb98-14"><a href="#cb98-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb98-15"><a href="#cb98-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> count<span class="op">;</span></span>
<span id="cb98-16"><a href="#cb98-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb98-17"><a href="#cb98-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-18"><a href="#cb98-18" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb98-19"><a href="#cb98-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> print<span class="op">(</span><span class="st">&quot;HI&quot;</span><span class="op">);</span></span>
<span id="cb98-20"><a href="#cb98-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.38" id="afficher-un-nombre"><span class="header-section-number">1.3.38</span> Afficher un Nombre</h3>
<div class="sourceCode" id="cb99"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Afficher un Nombre - Solution</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> putchar<span class="op">(</span><span class="dt">int</span> c<span class="op">)</span> <span class="op">{</span></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>port <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0xFFFF0000</span><span class="op">;</span></span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>port <span class="op">=</span> c<span class="op">;</span></span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb99-7"><a href="#cb99-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-8"><a href="#cb99-8" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_int<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb99-9"><a href="#cb99-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">12</span><span class="op">];</span></span>
<span id="cb99-10"><a href="#cb99-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb99-11"><a href="#cb99-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-12"><a href="#cb99-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb99-13"><a href="#cb99-13" aria-hidden="true" tabindex="-1"></a>        putchar<span class="op">(</span><span class="dv">48</span><span class="op">);</span></span>
<span id="cb99-14"><a href="#cb99-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb99-15"><a href="#cb99-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb99-16"><a href="#cb99-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-17"><a href="#cb99-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb99-18"><a href="#cb99-18" aria-hidden="true" tabindex="-1"></a>        buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">48</span> <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span></span>
<span id="cb99-19"><a href="#cb99-19" aria-hidden="true" tabindex="-1"></a>        n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb99-20"><a href="#cb99-20" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb99-21"><a href="#cb99-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb99-22"><a href="#cb99-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-23"><a href="#cb99-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb99-24"><a href="#cb99-24" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb99-25"><a href="#cb99-25" aria-hidden="true" tabindex="-1"></a>        putchar<span class="op">(</span>buf<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb99-26"><a href="#cb99-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb99-27"><a href="#cb99-27" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb99-28"><a href="#cb99-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-29"><a href="#cb99-29" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb99-30"><a href="#cb99-30" aria-hidden="true" tabindex="-1"></a>    print_int<span class="op">(</span><span class="dv">42</span><span class="op">);</span></span>
<span id="cb99-31"><a href="#cb99-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">42</span><span class="op">;</span></span>
<span id="cb99-32"><a href="#cb99-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.39" id="dessiner-un-pixel"><span class="header-section-number">1.3.39</span> Dessiner un Pixel</h3>
<div class="sourceCode" id="cb100"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessiner un Pixel - Solution</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>screen <span class="op">=</span> <span class="op">(</span><span class="dt">char</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>screen <span class="op">=</span> <span class="bn">0x80</span><span class="op">;</span>  <span class="co">// 0b10000000 - allume le pixel 0</span></span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">128</span><span class="op">;</span></span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.40" id="ligne-horizontale-1"><span class="header-section-number">1.3.40</span> Ligne Horizontale</h3>
<div class="sourceCode" id="cb101"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Ligne Horizontale - Solution</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>screen <span class="op">=</span> <span class="op">(</span><span class="dt">char</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a>    screen<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="bn">0xFF</span><span class="op">;</span>  <span class="co">// 8 premiers pixels</span></span>
<span id="cb101-7"><a href="#cb101-7" aria-hidden="true" tabindex="-1"></a>    screen<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="bn">0xFF</span><span class="op">;</span>  <span class="co">// 8 pixels suivants</span></span>
<span id="cb101-8"><a href="#cb101-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-9"><a href="#cb101-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">16</span><span class="op">;</span></span>
<span id="cb101-10"><a href="#cb101-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.41" id="dessiner-un-rectangle"><span class="header-section-number">1.3.41</span> Dessiner un Rectangle</h3>
<div class="sourceCode" id="cb102"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessiner un Rectangle - Solution</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>screen <span class="op">=</span> <span class="op">(</span><span class="dt">char</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> y <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> y <span class="op">&lt;</span> <span class="dv">8</span><span class="op">;</span> y <span class="op">=</span> y <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a>        screen<span class="op">[</span>y <span class="op">*</span> <span class="dv">40</span><span class="op">]</span> <span class="op">=</span> <span class="bn">0xFF</span><span class="op">;</span>  <span class="co">// 40 bytes par ligne</span></span>
<span id="cb102-8"><a href="#cb102-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb102-9"><a href="#cb102-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-10"><a href="#cb102-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">64</span><span class="op">;</span></span>
<span id="cb102-11"><a href="#cb102-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.42" id="crible-d"><span class="header-section-number">1.3.42</span> Crible d<br />
</h3>
<div class="sourceCode" id="cb103"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Crible d&#39;Ã‰ratosthÃ¨ne - Solution</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> is_prime<span class="op">[</span><span class="dv">51</span><span class="op">];</span></span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> j<span class="op">;</span></span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count<span class="op">;</span></span>
<span id="cb103-8"><a href="#cb103-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-9"><a href="#cb103-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">50</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb103-10"><a href="#cb103-10" aria-hidden="true" tabindex="-1"></a>        is_prime<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb103-11"><a href="#cb103-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb103-12"><a href="#cb103-12" aria-hidden="true" tabindex="-1"></a>    is_prime<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb103-13"><a href="#cb103-13" aria-hidden="true" tabindex="-1"></a>    is_prime<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb103-14"><a href="#cb103-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-15"><a href="#cb103-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> i <span class="op">*</span> i <span class="op">&lt;=</span> <span class="dv">50</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb103-16"><a href="#cb103-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>is_prime<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span></span>
<span id="cb103-17"><a href="#cb103-17" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> i <span class="op">*</span> i<span class="op">;</span> j <span class="op">&lt;=</span> <span class="dv">50</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb103-18"><a href="#cb103-18" aria-hidden="true" tabindex="-1"></a>                is_prime<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb103-19"><a href="#cb103-19" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb103-20"><a href="#cb103-20" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb103-21"><a href="#cb103-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb103-22"><a href="#cb103-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-23"><a href="#cb103-23" aria-hidden="true" tabindex="-1"></a>    count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb103-24"><a href="#cb103-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">50</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb103-25"><a href="#cb103-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>is_prime<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span></span>
<span id="cb103-26"><a href="#cb103-26" aria-hidden="true" tabindex="-1"></a>            count <span class="op">=</span> count <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb103-27"><a href="#cb103-27" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb103-28"><a href="#cb103-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb103-29"><a href="#cb103-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> count<span class="op">;</span></span>
<span id="cb103-30"><a href="#cb103-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.43" id="suite-de-collatz"><span class="header-section-number">1.3.43</span> Suite de Collatz</h3>
<div class="sourceCode" id="cb104"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Suite de Collatz - Solution</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> collatz_length<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count<span class="op">;</span></span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>    count <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">!=</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a>            n <span class="op">=</span> n <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb104-10"><a href="#cb104-10" aria-hidden="true" tabindex="-1"></a>            n <span class="op">=</span> <span class="dv">3</span> <span class="op">*</span> n <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb104-11"><a href="#cb104-11" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb104-12"><a href="#cb104-12" aria-hidden="true" tabindex="-1"></a>        count <span class="op">=</span> count <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb104-13"><a href="#cb104-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb104-14"><a href="#cb104-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> count<span class="op">;</span></span>
<span id="cb104-15"><a href="#cb104-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb104-16"><a href="#cb104-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-17"><a href="#cb104-17" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb104-18"><a href="#cb104-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> collatz_length<span class="op">(</span><span class="dv">27</span><span class="op">);</span>  <span class="co">// attendu: 112</span></span>
<span id="cb104-19"><a href="#cb104-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.44" id="projet-final"><span class="header-section-number">1.3.44</span> Projet Final</h3>
<div class="sourceCode" id="cb105"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Projet Final - Solution</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> sum_divisors<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>n <span class="op">%</span> i <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb105-7"><a href="#cb105-7" aria-hidden="true" tabindex="-1"></a>            sum <span class="op">=</span> sum <span class="op">+</span> i<span class="op">;</span></span>
<span id="cb105-8"><a href="#cb105-8" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb105-9"><a href="#cb105-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb105-10"><a href="#cb105-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum<span class="op">;</span></span>
<span id="cb105-11"><a href="#cb105-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb105-12"><a href="#cb105-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-13"><a href="#cb105-13" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb105-14"><a href="#cb105-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum_divisors<span class="op">(</span><span class="dv">28</span><span class="op">);</span></span>
<span id="cb105-15"><a href="#cb105-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h2 data-number="1.4" id="d.-solutions-construction-du-compilateur"><span class="header-section-number">1.4</span> D. Solutions Construction du
Compilateur</h2>
<h3 data-number="1.4.1" id="reconnaÃ®tre-un-chiffre"><span class="header-section-number">1.4.1</span> 1.1 ReconnaÃ®tre un
Chiffre</h3>
<div class="sourceCode" id="cb106"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_digit<span class="op">(</span><span class="dt">char</span> c<span class="op">)</span> <span class="op">{</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> c <span class="op">&gt;=</span> <span class="ch">&#39;0&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;9&#39;</span><span class="op">;</span></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>is_digit<span class="op">(</span><span class="ch">&#39;0&#39;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb106-8"><a href="#cb106-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>is_digit<span class="op">(</span><span class="ch">&#39;5&#39;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb106-9"><a href="#cb106-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>is_digit<span class="op">(</span><span class="ch">&#39;9&#39;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb106-10"><a href="#cb106-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>is_digit<span class="op">(</span><span class="ch">&#39;a&#39;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb106-11"><a href="#cb106-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>is_digit<span class="op">(</span><span class="ch">&#39; &#39;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb106-12"><a href="#cb106-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb106-13"><a href="#cb106-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.2" id="lire-un-nombre"><span class="header-section-number">1.4.2</span> 1.2 Lire un Nombre</h3>
<div class="sourceCode" id="cb107"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_digit<span class="op">(</span><span class="dt">char</span> c<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> c <span class="op">&gt;=</span> <span class="ch">&#39;0&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;9&#39;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_number<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">,</span> <span class="dt">int</span><span class="op">*</span> pos<span class="op">)</span> <span class="op">{</span></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>is_digit<span class="op">(</span>s<span class="op">[*</span>pos<span class="op">]))</span> <span class="op">{</span></span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> result <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> <span class="op">(</span>s<span class="op">[*</span>pos<span class="op">]</span> <span class="op">-</span> <span class="ch">&#39;0&#39;</span><span class="op">);</span></span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>pos <span class="op">=</span> <span class="op">*</span>pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb107-9"><a href="#cb107-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb107-10"><a href="#cb107-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb107-11"><a href="#cb107-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-12"><a href="#cb107-12" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb107-13"><a href="#cb107-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb107-14"><a href="#cb107-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> p<span class="op">;</span></span>
<span id="cb107-15"><a href="#cb107-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-16"><a href="#cb107-16" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb107-17"><a href="#cb107-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>parse_number<span class="op">(</span><span class="st">&quot;42&quot;</span><span class="op">,</span> <span class="op">&amp;</span>p<span class="op">)</span> <span class="op">==</span> <span class="dv">42</span> <span class="op">&amp;&amp;</span> p <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb107-18"><a href="#cb107-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-19"><a href="#cb107-19" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb107-20"><a href="#cb107-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>parse_number<span class="op">(</span><span class="st">&quot;123+45&quot;</span><span class="op">,</span> <span class="op">&amp;</span>p<span class="op">)</span> <span class="op">==</span> <span class="dv">123</span> <span class="op">&amp;&amp;</span> p <span class="op">==</span> <span class="dv">3</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb107-21"><a href="#cb107-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-22"><a href="#cb107-22" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb107-23"><a href="#cb107-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>parse_number<span class="op">(</span><span class="st">&quot;123+45&quot;</span><span class="op">,</span> <span class="op">&amp;</span>p<span class="op">)</span> <span class="op">==</span> <span class="dv">45</span> <span class="op">&amp;&amp;</span> p <span class="op">==</span> <span class="dv">6</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb107-24"><a href="#cb107-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-25"><a href="#cb107-25" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb107-26"><a href="#cb107-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>parse_number<span class="op">(</span><span class="st">&quot;7&quot;</span><span class="op">,</span> <span class="op">&amp;</span>p<span class="op">)</span> <span class="op">==</span> <span class="dv">7</span> <span class="op">&amp;&amp;</span> p <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb107-27"><a href="#cb107-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-28"><a href="#cb107-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb107-29"><a href="#cb107-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.3" id="identifier-les-tokens"><span class="header-section-number">1.4.3</span> 1.3 Identifier les
Tokens</h3>
<div class="sourceCode" id="cb108"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_digit<span class="op">(</span><span class="dt">char</span> c<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> c <span class="op">&gt;=</span> <span class="ch">&#39;0&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;9&#39;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> next_token<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">,</span> <span class="dt">int</span><span class="op">*</span> pos<span class="op">)</span> <span class="op">{</span></span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[*</span>pos<span class="op">]</span> <span class="op">==</span> <span class="ch">&#39; &#39;</span><span class="op">)</span> <span class="op">*</span>pos <span class="op">=</span> <span class="op">*</span>pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> c <span class="op">=</span> s<span class="op">[*</span>pos<span class="op">];</span></span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb108-8"><a href="#cb108-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-9"><a href="#cb108-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>is_digit<span class="op">(</span>c<span class="op">))</span> <span class="op">{</span></span>
<span id="cb108-10"><a href="#cb108-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>is_digit<span class="op">(</span>s<span class="op">[*</span>pos<span class="op">]))</span> <span class="op">*</span>pos <span class="op">=</span> <span class="op">*</span>pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb108-11"><a href="#cb108-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb108-12"><a href="#cb108-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb108-13"><a href="#cb108-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-14"><a href="#cb108-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>pos <span class="op">=</span> <span class="op">*</span>pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb108-15"><a href="#cb108-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">==</span> <span class="ch">&#39;+&#39;</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb108-16"><a href="#cb108-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">==</span> <span class="ch">&#39;-&#39;</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb108-17"><a href="#cb108-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">==</span> <span class="ch">&#39;*&#39;</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb108-18"><a href="#cb108-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">==</span> <span class="ch">&#39;/&#39;</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb108-19"><a href="#cb108-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">==</span> <span class="ch">&#39;(&#39;</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">6</span><span class="op">;</span></span>
<span id="cb108-20"><a href="#cb108-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">==</span> <span class="ch">&#39;)&#39;</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">7</span><span class="op">;</span></span>
<span id="cb108-21"><a href="#cb108-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-22"><a href="#cb108-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb108-23"><a href="#cb108-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb108-24"><a href="#cb108-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-25"><a href="#cb108-25" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb108-26"><a href="#cb108-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb108-27"><a href="#cb108-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> p<span class="op">;</span></span>
<span id="cb108-28"><a href="#cb108-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-29"><a href="#cb108-29" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb108-30"><a href="#cb108-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>next_token<span class="op">(</span><span class="st">&quot;42&quot;</span><span class="op">,</span> <span class="op">&amp;</span>p<span class="op">)</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb108-31"><a href="#cb108-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-32"><a href="#cb108-32" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb108-33"><a href="#cb108-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>next_token<span class="op">(</span><span class="st">&quot;+&quot;</span><span class="op">,</span> <span class="op">&amp;</span>p<span class="op">)</span> <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb108-34"><a href="#cb108-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-35"><a href="#cb108-35" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb108-36"><a href="#cb108-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>next_token<span class="op">(</span><span class="st">&quot;3 + 5&quot;</span><span class="op">,</span> <span class="op">&amp;</span>p<span class="op">)</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb108-37"><a href="#cb108-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>next_token<span class="op">(</span><span class="st">&quot;3 + 5&quot;</span><span class="op">,</span> <span class="op">&amp;</span>p<span class="op">)</span> <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb108-38"><a href="#cb108-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>next_token<span class="op">(</span><span class="st">&quot;3 + 5&quot;</span><span class="op">,</span> <span class="op">&amp;</span>p<span class="op">)</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb108-39"><a href="#cb108-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>next_token<span class="op">(</span><span class="st">&quot;3 + 5&quot;</span><span class="op">,</span> <span class="op">&amp;</span>p<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb108-40"><a href="#cb108-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-41"><a href="#cb108-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb108-42"><a href="#cb108-42" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.4" id="Ã©valuer-a-b"><span class="header-section-number">1.4.4</span> 2.1 Ã‰valuer a + b</h3>
<div class="sourceCode" id="cb109"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_digit<span class="op">(</span><span class="dt">char</span> c<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> c <span class="op">&gt;=</span> <span class="ch">&#39;0&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;9&#39;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">,</span> <span class="dt">int</span><span class="op">*</span> p<span class="op">)</span> <span class="op">{</span></span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[*</span>p<span class="op">]</span> <span class="op">==</span> <span class="ch">&#39; &#39;</span><span class="op">)</span> <span class="op">*</span>p <span class="op">=</span> <span class="op">*</span>p <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> v <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>is_digit<span class="op">(</span>s<span class="op">[*</span>p<span class="op">]))</span> <span class="op">{</span></span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a>        v <span class="op">=</span> v <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> <span class="op">(</span>s<span class="op">[*</span>p<span class="op">]</span> <span class="op">-</span> <span class="ch">&#39;0&#39;</span><span class="op">);</span></span>
<span id="cb109-8"><a href="#cb109-8" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>p <span class="op">=</span> <span class="op">*</span>p <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb109-9"><a href="#cb109-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb109-10"><a href="#cb109-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> v<span class="op">;</span></span>
<span id="cb109-11"><a href="#cb109-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb109-12"><a href="#cb109-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-13"><a href="#cb109-13" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> eval_simple<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb109-14"><a href="#cb109-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> pos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb109-15"><a href="#cb109-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a <span class="op">=</span> parse_num<span class="op">(</span>s<span class="op">,</span> <span class="op">&amp;</span>pos<span class="op">);</span></span>
<span id="cb109-16"><a href="#cb109-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-17"><a href="#cb109-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>pos<span class="op">]</span> <span class="op">==</span> <span class="ch">&#39; &#39;</span><span class="op">)</span> pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb109-18"><a href="#cb109-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> op <span class="op">=</span> s<span class="op">[</span>pos<span class="op">];</span></span>
<span id="cb109-19"><a href="#cb109-19" aria-hidden="true" tabindex="-1"></a>    pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb109-20"><a href="#cb109-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-21"><a href="#cb109-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> b <span class="op">=</span> parse_num<span class="op">(</span>s<span class="op">,</span> <span class="op">&amp;</span>pos<span class="op">);</span></span>
<span id="cb109-22"><a href="#cb109-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-23"><a href="#cb109-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;+&#39;</span><span class="op">)</span> <span class="cf">return</span> a <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb109-24"><a href="#cb109-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;-&#39;</span><span class="op">)</span> <span class="cf">return</span> a <span class="op">-</span> b<span class="op">;</span></span>
<span id="cb109-25"><a href="#cb109-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;*&#39;</span><span class="op">)</span> <span class="cf">return</span> a <span class="op">*</span> b<span class="op">;</span></span>
<span id="cb109-26"><a href="#cb109-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;/&#39;</span><span class="op">)</span> <span class="cf">return</span> a <span class="op">/</span> b<span class="op">;</span></span>
<span id="cb109-27"><a href="#cb109-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb109-28"><a href="#cb109-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb109-29"><a href="#cb109-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-30"><a href="#cb109-30" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb109-31"><a href="#cb109-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb109-32"><a href="#cb109-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval_simple<span class="op">(</span><span class="st">&quot;3 + 5&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">8</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb109-33"><a href="#cb109-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval_simple<span class="op">(</span><span class="st">&quot;10 - 4&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">6</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb109-34"><a href="#cb109-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval_simple<span class="op">(</span><span class="st">&quot;6 * 7&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">42</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb109-35"><a href="#cb109-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval_simple<span class="op">(</span><span class="st">&quot;20 / 4&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">5</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb109-36"><a href="#cb109-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb109-37"><a href="#cb109-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.5" id="Ã©valuer-a-b-c"><span class="header-section-number">1.4.5</span> 2.2 Ã‰valuer a + b + c</h3>
<div class="sourceCode" id="cb110"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_digit<span class="op">(</span><span class="dt">char</span> c<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> c <span class="op">&gt;=</span> <span class="ch">&#39;0&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;9&#39;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">,</span> <span class="dt">int</span><span class="op">*</span> p<span class="op">)</span> <span class="op">{</span></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[*</span>p<span class="op">]</span> <span class="op">==</span> <span class="ch">&#39; &#39;</span><span class="op">)</span> <span class="op">*</span>p <span class="op">=</span> <span class="op">*</span>p <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> v <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>is_digit<span class="op">(</span>s<span class="op">[*</span>p<span class="op">]))</span> <span class="op">{</span> v <span class="op">=</span> v <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> <span class="op">(</span>s<span class="op">[*</span>p<span class="op">]</span> <span class="op">-</span> <span class="ch">&#39;0&#39;</span><span class="op">);</span> <span class="op">*</span>p <span class="op">=</span> <span class="op">*</span>p <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> v<span class="op">;</span></span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb110-9"><a href="#cb110-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-10"><a href="#cb110-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_op<span class="op">(</span><span class="dt">char</span> c<span class="op">)</span> <span class="op">{</span></span>
<span id="cb110-11"><a href="#cb110-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> c <span class="op">==</span> <span class="ch">&#39;+&#39;</span> <span class="op">||</span> c <span class="op">==</span> <span class="ch">&#39;-&#39;</span> <span class="op">||</span> c <span class="op">==</span> <span class="ch">&#39;*&#39;</span> <span class="op">||</span> c <span class="op">==</span> <span class="ch">&#39;/&#39;</span><span class="op">;</span></span>
<span id="cb110-12"><a href="#cb110-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb110-13"><a href="#cb110-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-14"><a href="#cb110-14" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> eval_chain<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb110-15"><a href="#cb110-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> pos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb110-16"><a href="#cb110-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result <span class="op">=</span> parse_num<span class="op">(</span>s<span class="op">,</span> <span class="op">&amp;</span>pos<span class="op">);</span></span>
<span id="cb110-17"><a href="#cb110-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-18"><a href="#cb110-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb110-19"><a href="#cb110-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>pos<span class="op">]</span> <span class="op">==</span> <span class="ch">&#39; &#39;</span><span class="op">)</span> pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb110-20"><a href="#cb110-20" aria-hidden="true" tabindex="-1"></a>        <span class="dt">char</span> op <span class="op">=</span> s<span class="op">[</span>pos<span class="op">];</span></span>
<span id="cb110-21"><a href="#cb110-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(!</span>is_op<span class="op">(</span>op<span class="op">))</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb110-22"><a href="#cb110-22" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb110-23"><a href="#cb110-23" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> b <span class="op">=</span> parse_num<span class="op">(</span>s<span class="op">,</span> <span class="op">&amp;</span>pos<span class="op">);</span></span>
<span id="cb110-24"><a href="#cb110-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-25"><a href="#cb110-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;+&#39;</span><span class="op">)</span> result <span class="op">=</span> result <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb110-26"><a href="#cb110-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;-&#39;</span><span class="op">)</span> result <span class="op">=</span> result <span class="op">-</span> b<span class="op">;</span></span>
<span id="cb110-27"><a href="#cb110-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;*&#39;</span><span class="op">)</span> result <span class="op">=</span> result <span class="op">*</span> b<span class="op">;</span></span>
<span id="cb110-28"><a href="#cb110-28" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;/&#39;</span><span class="op">)</span> result <span class="op">=</span> result <span class="op">/</span> b<span class="op">;</span></span>
<span id="cb110-29"><a href="#cb110-29" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb110-30"><a href="#cb110-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-31"><a href="#cb110-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb110-32"><a href="#cb110-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb110-33"><a href="#cb110-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-34"><a href="#cb110-34" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb110-35"><a href="#cb110-35" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb110-36"><a href="#cb110-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval_chain<span class="op">(</span><span class="st">&quot;5&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">5</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb110-37"><a href="#cb110-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval_chain<span class="op">(</span><span class="st">&quot;3 + 5&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">8</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb110-38"><a href="#cb110-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval_chain<span class="op">(</span><span class="st">&quot;1 + 2 + 3&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">6</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb110-39"><a href="#cb110-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval_chain<span class="op">(</span><span class="st">&quot;10 - 2 - 3&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">5</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb110-40"><a href="#cb110-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval_chain<span class="op">(</span><span class="st">&quot;2 * 3 * 4&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">24</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb110-41"><a href="#cb110-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb110-42"><a href="#cb110-42" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.6" id="respecter-la-prÃ©cÃ©dence"><span class="header-section-number">1.4.6</span> 2.3 Respecter la
PrÃ©cÃ©dence</h3>
<div class="sourceCode" id="cb111"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_digit<span class="op">(</span><span class="dt">char</span> c<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> c <span class="op">&gt;=</span> <span class="ch">&#39;0&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;9&#39;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> input<span class="op">;</span></span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> pos<span class="op">;</span></span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> skip<span class="op">()</span> <span class="op">{</span> <span class="cf">while</span> <span class="op">(</span>input<span class="op">[</span>pos<span class="op">]</span> <span class="op">==</span> <span class="ch">&#39; &#39;</span><span class="op">)</span> pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-7"><a href="#cb111-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_num<span class="op">()</span> <span class="op">{</span></span>
<span id="cb111-8"><a href="#cb111-8" aria-hidden="true" tabindex="-1"></a>    skip<span class="op">();</span></span>
<span id="cb111-9"><a href="#cb111-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> v <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb111-10"><a href="#cb111-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>is_digit<span class="op">(</span>input<span class="op">[</span>pos<span class="op">]))</span> <span class="op">{</span> v <span class="op">=</span> v <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> <span class="op">(</span>input<span class="op">[</span>pos<span class="op">]</span> <span class="op">-</span> <span class="ch">&#39;0&#39;</span><span class="op">);</span> pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb111-11"><a href="#cb111-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> v<span class="op">;</span></span>
<span id="cb111-12"><a href="#cb111-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb111-13"><a href="#cb111-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-14"><a href="#cb111-14" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_factor<span class="op">()</span> <span class="op">{</span></span>
<span id="cb111-15"><a href="#cb111-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> parse_num<span class="op">();</span></span>
<span id="cb111-16"><a href="#cb111-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb111-17"><a href="#cb111-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-18"><a href="#cb111-18" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_term<span class="op">()</span> <span class="op">{</span></span>
<span id="cb111-19"><a href="#cb111-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> left <span class="op">=</span> parse_factor<span class="op">();</span></span>
<span id="cb111-20"><a href="#cb111-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb111-21"><a href="#cb111-21" aria-hidden="true" tabindex="-1"></a>        skip<span class="op">();</span></span>
<span id="cb111-22"><a href="#cb111-22" aria-hidden="true" tabindex="-1"></a>        <span class="dt">char</span> op <span class="op">=</span> input<span class="op">[</span>pos<span class="op">];</span></span>
<span id="cb111-23"><a href="#cb111-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op <span class="op">!=</span> <span class="ch">&#39;*&#39;</span> <span class="op">&amp;&amp;</span> op <span class="op">!=</span> <span class="ch">&#39;/&#39;</span><span class="op">)</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb111-24"><a href="#cb111-24" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb111-25"><a href="#cb111-25" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> right <span class="op">=</span> parse_factor<span class="op">();</span></span>
<span id="cb111-26"><a href="#cb111-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;*&#39;</span><span class="op">)</span> left <span class="op">=</span> left <span class="op">*</span> right<span class="op">;</span></span>
<span id="cb111-27"><a href="#cb111-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> left <span class="op">=</span> left <span class="op">/</span> right<span class="op">;</span></span>
<span id="cb111-28"><a href="#cb111-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb111-29"><a href="#cb111-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> left<span class="op">;</span></span>
<span id="cb111-30"><a href="#cb111-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb111-31"><a href="#cb111-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-32"><a href="#cb111-32" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_expr<span class="op">()</span> <span class="op">{</span></span>
<span id="cb111-33"><a href="#cb111-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> left <span class="op">=</span> parse_term<span class="op">();</span></span>
<span id="cb111-34"><a href="#cb111-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb111-35"><a href="#cb111-35" aria-hidden="true" tabindex="-1"></a>        skip<span class="op">();</span></span>
<span id="cb111-36"><a href="#cb111-36" aria-hidden="true" tabindex="-1"></a>        <span class="dt">char</span> op <span class="op">=</span> input<span class="op">[</span>pos<span class="op">];</span></span>
<span id="cb111-37"><a href="#cb111-37" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op <span class="op">!=</span> <span class="ch">&#39;+&#39;</span> <span class="op">&amp;&amp;</span> op <span class="op">!=</span> <span class="ch">&#39;-&#39;</span><span class="op">)</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb111-38"><a href="#cb111-38" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb111-39"><a href="#cb111-39" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> right <span class="op">=</span> parse_term<span class="op">();</span></span>
<span id="cb111-40"><a href="#cb111-40" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;+&#39;</span><span class="op">)</span> left <span class="op">=</span> left <span class="op">+</span> right<span class="op">;</span></span>
<span id="cb111-41"><a href="#cb111-41" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> left <span class="op">=</span> left <span class="op">-</span> right<span class="op">;</span></span>
<span id="cb111-42"><a href="#cb111-42" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb111-43"><a href="#cb111-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> left<span class="op">;</span></span>
<span id="cb111-44"><a href="#cb111-44" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb111-45"><a href="#cb111-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-46"><a href="#cb111-46" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> eval<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb111-47"><a href="#cb111-47" aria-hidden="true" tabindex="-1"></a>    input <span class="op">=</span> s<span class="op">;</span></span>
<span id="cb111-48"><a href="#cb111-48" aria-hidden="true" tabindex="-1"></a>    pos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb111-49"><a href="#cb111-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> parse_expr<span class="op">();</span></span>
<span id="cb111-50"><a href="#cb111-50" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb111-51"><a href="#cb111-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-52"><a href="#cb111-52" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb111-53"><a href="#cb111-53" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb111-54"><a href="#cb111-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval<span class="op">(</span><span class="st">&quot;42&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">42</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb111-55"><a href="#cb111-55" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval<span class="op">(</span><span class="st">&quot;3 + 5&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">8</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb111-56"><a href="#cb111-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval<span class="op">(</span><span class="st">&quot;3 * 4&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">12</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb111-57"><a href="#cb111-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval<span class="op">(</span><span class="st">&quot;2 + 3 * 4&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">14</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb111-58"><a href="#cb111-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval<span class="op">(</span><span class="st">&quot;2 * 3 + 4&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">10</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb111-59"><a href="#cb111-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval<span class="op">(</span><span class="st">&quot;10 - 2 * 3&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">4</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb111-60"><a href="#cb111-60" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb111-61"><a href="#cb111-61" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.7" id="gÃ©rer-les-parenthÃ¨ses"><span class="header-section-number">1.4.7</span> 2.4 GÃ©rer les
ParenthÃ¨ses</h3>
<div class="sourceCode" id="cb112"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_digit<span class="op">(</span><span class="dt">char</span> c<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> c <span class="op">&gt;=</span> <span class="ch">&#39;0&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;9&#39;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> input<span class="op">;</span></span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> pos<span class="op">;</span></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> skip<span class="op">()</span> <span class="op">{</span> <span class="cf">while</span> <span class="op">(</span>input<span class="op">[</span>pos<span class="op">]</span> <span class="op">==</span> <span class="ch">&#39; &#39;</span><span class="op">)</span> pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_expr<span class="op">();</span></span>
<span id="cb112-8"><a href="#cb112-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-9"><a href="#cb112-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_num<span class="op">()</span> <span class="op">{</span></span>
<span id="cb112-10"><a href="#cb112-10" aria-hidden="true" tabindex="-1"></a>    skip<span class="op">();</span></span>
<span id="cb112-11"><a href="#cb112-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> v <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb112-12"><a href="#cb112-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>is_digit<span class="op">(</span>input<span class="op">[</span>pos<span class="op">]))</span> <span class="op">{</span> v <span class="op">=</span> v <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> <span class="op">(</span>input<span class="op">[</span>pos<span class="op">]</span> <span class="op">-</span> <span class="ch">&#39;0&#39;</span><span class="op">);</span> pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb112-13"><a href="#cb112-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> v<span class="op">;</span></span>
<span id="cb112-14"><a href="#cb112-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb112-15"><a href="#cb112-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-16"><a href="#cb112-16" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_factor<span class="op">()</span> <span class="op">{</span></span>
<span id="cb112-17"><a href="#cb112-17" aria-hidden="true" tabindex="-1"></a>    skip<span class="op">();</span></span>
<span id="cb112-18"><a href="#cb112-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>input<span class="op">[</span>pos<span class="op">]</span> <span class="op">==</span> <span class="ch">&#39;(&#39;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb112-19"><a href="#cb112-19" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb112-20"><a href="#cb112-20" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> v <span class="op">=</span> parse_expr<span class="op">();</span></span>
<span id="cb112-21"><a href="#cb112-21" aria-hidden="true" tabindex="-1"></a>        skip<span class="op">();</span></span>
<span id="cb112-22"><a href="#cb112-22" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span>  <span class="co">// &#39;)&#39;</span></span>
<span id="cb112-23"><a href="#cb112-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> v<span class="op">;</span></span>
<span id="cb112-24"><a href="#cb112-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb112-25"><a href="#cb112-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> parse_num<span class="op">();</span></span>
<span id="cb112-26"><a href="#cb112-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb112-27"><a href="#cb112-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-28"><a href="#cb112-28" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_term<span class="op">()</span> <span class="op">{</span></span>
<span id="cb112-29"><a href="#cb112-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> left <span class="op">=</span> parse_factor<span class="op">();</span></span>
<span id="cb112-30"><a href="#cb112-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb112-31"><a href="#cb112-31" aria-hidden="true" tabindex="-1"></a>        skip<span class="op">();</span></span>
<span id="cb112-32"><a href="#cb112-32" aria-hidden="true" tabindex="-1"></a>        <span class="dt">char</span> op <span class="op">=</span> input<span class="op">[</span>pos<span class="op">];</span></span>
<span id="cb112-33"><a href="#cb112-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op <span class="op">!=</span> <span class="ch">&#39;*&#39;</span> <span class="op">&amp;&amp;</span> op <span class="op">!=</span> <span class="ch">&#39;/&#39;</span><span class="op">)</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb112-34"><a href="#cb112-34" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb112-35"><a href="#cb112-35" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> right <span class="op">=</span> parse_factor<span class="op">();</span></span>
<span id="cb112-36"><a href="#cb112-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;*&#39;</span><span class="op">)</span> left <span class="op">=</span> left <span class="op">*</span> right<span class="op">;</span></span>
<span id="cb112-37"><a href="#cb112-37" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> left <span class="op">=</span> left <span class="op">/</span> right<span class="op">;</span></span>
<span id="cb112-38"><a href="#cb112-38" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb112-39"><a href="#cb112-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> left<span class="op">;</span></span>
<span id="cb112-40"><a href="#cb112-40" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb112-41"><a href="#cb112-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-42"><a href="#cb112-42" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_expr<span class="op">()</span> <span class="op">{</span></span>
<span id="cb112-43"><a href="#cb112-43" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> left <span class="op">=</span> parse_term<span class="op">();</span></span>
<span id="cb112-44"><a href="#cb112-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb112-45"><a href="#cb112-45" aria-hidden="true" tabindex="-1"></a>        skip<span class="op">();</span></span>
<span id="cb112-46"><a href="#cb112-46" aria-hidden="true" tabindex="-1"></a>        <span class="dt">char</span> op <span class="op">=</span> input<span class="op">[</span>pos<span class="op">];</span></span>
<span id="cb112-47"><a href="#cb112-47" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op <span class="op">!=</span> <span class="ch">&#39;+&#39;</span> <span class="op">&amp;&amp;</span> op <span class="op">!=</span> <span class="ch">&#39;-&#39;</span><span class="op">)</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb112-48"><a href="#cb112-48" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb112-49"><a href="#cb112-49" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> right <span class="op">=</span> parse_term<span class="op">();</span></span>
<span id="cb112-50"><a href="#cb112-50" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;+&#39;</span><span class="op">)</span> left <span class="op">=</span> left <span class="op">+</span> right<span class="op">;</span></span>
<span id="cb112-51"><a href="#cb112-51" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> left <span class="op">=</span> left <span class="op">-</span> right<span class="op">;</span></span>
<span id="cb112-52"><a href="#cb112-52" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb112-53"><a href="#cb112-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> left<span class="op">;</span></span>
<span id="cb112-54"><a href="#cb112-54" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb112-55"><a href="#cb112-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-56"><a href="#cb112-56" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> eval<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> input <span class="op">=</span> s<span class="op">;</span> pos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">return</span> parse_expr<span class="op">();</span> <span class="op">}</span></span>
<span id="cb112-57"><a href="#cb112-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-58"><a href="#cb112-58" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb112-59"><a href="#cb112-59" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb112-60"><a href="#cb112-60" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval<span class="op">(</span><span class="st">&quot;(5)&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">5</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb112-61"><a href="#cb112-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval<span class="op">(</span><span class="st">&quot;(2 + 3)&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">5</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb112-62"><a href="#cb112-62" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval<span class="op">(</span><span class="st">&quot;(2 + 3) * 4&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">20</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb112-63"><a href="#cb112-63" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval<span class="op">(</span><span class="st">&quot;2 * (3 + 4)&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">14</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb112-64"><a href="#cb112-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval<span class="op">(</span><span class="st">&quot;(1 + 2) * (3 + 4)&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">21</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb112-65"><a href="#cb112-65" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval<span class="op">(</span><span class="st">&quot;((2))&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb112-66"><a href="#cb112-66" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb112-67"><a href="#cb112-67" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.8" id="Ã©mettre-mov"><span class="header-section-number">1.4.8</span> 3.1 Ã‰mettre MOV</h3>
<div class="sourceCode" id="cb113"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> strlen<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>i<span class="op">])</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="cf">return</span> i<span class="op">;</span> <span class="op">}</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> strlen<span class="op">(</span>buf<span class="op">);</span></span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>j<span class="op">])</span> <span class="op">{</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> s<span class="op">[</span>j<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb113-9"><a href="#cb113-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-10"><a href="#cb113-10" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb113-11"><a href="#cb113-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tmp<span class="op">[</span><span class="dv">12</span><span class="op">];</span></span>
<span id="cb113-12"><a href="#cb113-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb113-13"><a href="#cb113-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;0&#39;</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb113-14"><a href="#cb113-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb113-15"><a href="#cb113-15" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> rev<span class="op">[</span><span class="dv">12</span><span class="op">];</span> <span class="dt">int</span> r <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb113-16"><a href="#cb113-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> rev<span class="op">[</span>r<span class="op">]</span> <span class="op">=</span> n <span class="op">%</span> <span class="dv">10</span><span class="op">;</span> r <span class="op">=</span> r <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb113-17"><a href="#cb113-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>r <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> r <span class="op">=</span> r <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;0&#39;</span> <span class="op">+</span> rev<span class="op">[</span>r<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb113-18"><a href="#cb113-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb113-19"><a href="#cb113-19" aria-hidden="true" tabindex="-1"></a>    tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb113-20"><a href="#cb113-20" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> tmp<span class="op">);</span></span>
<span id="cb113-21"><a href="#cb113-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb113-22"><a href="#cb113-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-23"><a href="#cb113-23" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_mov<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">,</span> <span class="dt">int</span> val<span class="op">)</span> <span class="op">{</span></span>
<span id="cb113-24"><a href="#cb113-24" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R&quot;</span><span class="op">);</span></span>
<span id="cb113-25"><a href="#cb113-25" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span></span>
<span id="cb113-26"><a href="#cb113-26" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, #&quot;</span><span class="op">);</span></span>
<span id="cb113-27"><a href="#cb113-27" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> val<span class="op">);</span></span>
<span id="cb113-28"><a href="#cb113-28" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb113-29"><a href="#cb113-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb113-30"><a href="#cb113-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-31"><a href="#cb113-31" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> check<span class="op">(</span><span class="dt">char</span><span class="op">*</span> a<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb113-32"><a href="#cb113-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb113-33"><a href="#cb113-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">&amp;&amp;</span> b<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span> <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> b<span class="op">[</span>i<span class="op">])</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb113-34"><a href="#cb113-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a<span class="op">[</span>i<span class="op">]</span> <span class="op">==</span> b<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb113-35"><a href="#cb113-35" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb113-36"><a href="#cb113-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-37"><a href="#cb113-37" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb113-38"><a href="#cb113-38" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb113-39"><a href="#cb113-39" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb113-40"><a href="#cb113-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-41"><a href="#cb113-41" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb113-42"><a href="#cb113-42" aria-hidden="true" tabindex="-1"></a>    emit_mov<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">42</span><span class="op">);</span></span>
<span id="cb113-43"><a href="#cb113-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R0, #42</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb113-44"><a href="#cb113-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-45"><a href="#cb113-45" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb113-46"><a href="#cb113-46" aria-hidden="true" tabindex="-1"></a>    emit_mov<span class="op">(</span>buf<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb113-47"><a href="#cb113-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R1, #5</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb113-48"><a href="#cb113-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-49"><a href="#cb113-49" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb113-50"><a href="#cb113-50" aria-hidden="true" tabindex="-1"></a>    emit_mov<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb113-51"><a href="#cb113-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R0, #0</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb113-52"><a href="#cb113-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-53"><a href="#cb113-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb113-54"><a href="#cb113-54" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.9" id="Ã©mettre-addsubmul"><span class="header-section-number">1.4.9</span> 3.2 Ã‰mettre ADD/SUB/MUL</h3>
<div class="sourceCode" id="cb114"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> strlen<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>i<span class="op">])</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="cf">return</span> i<span class="op">;</span> <span class="op">}</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> strlen<span class="op">(</span>buf<span class="op">);</span> <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>j<span class="op">])</span> <span class="op">{</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> s<span class="op">[</span>j<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb114-7"><a href="#cb114-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb114-8"><a href="#cb114-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;0&quot;</span><span class="op">);</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb114-9"><a href="#cb114-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tmp<span class="op">[</span><span class="dv">12</span><span class="op">];</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">11</span><span class="op">;</span> tmp<span class="op">[</span><span class="dv">11</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb114-10"><a href="#cb114-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> i <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;0&#39;</span> <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span> n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb114-11"><a href="#cb114-11" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> tmp <span class="op">+</span> i<span class="op">);</span></span>
<span id="cb114-12"><a href="#cb114-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb114-13"><a href="#cb114-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-14"><a href="#cb114-14" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_op<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span> op<span class="op">,</span> <span class="dt">int</span> rd<span class="op">,</span> <span class="dt">int</span> rn<span class="op">,</span> <span class="dt">int</span> rm<span class="op">)</span> <span class="op">{</span></span>
<span id="cb114-15"><a href="#cb114-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;+&#39;</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;ADD R&quot;</span><span class="op">);</span></span>
<span id="cb114-16"><a href="#cb114-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;-&#39;</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;SUB R&quot;</span><span class="op">);</span></span>
<span id="cb114-17"><a href="#cb114-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;*&#39;</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MUL R&quot;</span><span class="op">);</span></span>
<span id="cb114-18"><a href="#cb114-18" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> rd<span class="op">);</span></span>
<span id="cb114-19"><a href="#cb114-19" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, R&quot;</span><span class="op">);</span></span>
<span id="cb114-20"><a href="#cb114-20" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> rn<span class="op">);</span></span>
<span id="cb114-21"><a href="#cb114-21" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, R&quot;</span><span class="op">);</span></span>
<span id="cb114-22"><a href="#cb114-22" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> rm<span class="op">);</span></span>
<span id="cb114-23"><a href="#cb114-23" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb114-24"><a href="#cb114-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb114-25"><a href="#cb114-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-26"><a href="#cb114-26" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> check<span class="op">(</span><span class="dt">char</span><span class="op">*</span> a<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb114-27"><a href="#cb114-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb114-28"><a href="#cb114-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">&amp;&amp;</span> b<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span> <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> b<span class="op">[</span>i<span class="op">])</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb114-29"><a href="#cb114-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a<span class="op">[</span>i<span class="op">]</span> <span class="op">==</span> b<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb114-30"><a href="#cb114-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb114-31"><a href="#cb114-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-32"><a href="#cb114-32" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb114-33"><a href="#cb114-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb114-34"><a href="#cb114-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb114-35"><a href="#cb114-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-36"><a href="#cb114-36" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb114-37"><a href="#cb114-37" aria-hidden="true" tabindex="-1"></a>    emit_op<span class="op">(</span>buf<span class="op">,</span> <span class="ch">&#39;+&#39;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb114-38"><a href="#cb114-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;ADD R0, R1, R2</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb114-39"><a href="#cb114-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-40"><a href="#cb114-40" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb114-41"><a href="#cb114-41" aria-hidden="true" tabindex="-1"></a>    emit_op<span class="op">(</span>buf<span class="op">,</span> <span class="ch">&#39;-&#39;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb114-42"><a href="#cb114-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;SUB R0, R0, R1</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb114-43"><a href="#cb114-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-44"><a href="#cb114-44" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb114-45"><a href="#cb114-45" aria-hidden="true" tabindex="-1"></a>    emit_op<span class="op">(</span>buf<span class="op">,</span> <span class="ch">&#39;*&#39;</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb114-46"><a href="#cb114-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MUL R2, R3, R4</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb114-47"><a href="#cb114-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-48"><a href="#cb114-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb114-49"><a href="#cb114-49" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.10" id="Ã©mettre-pushpop"><span class="header-section-number">1.4.10</span> 3.3 Ã‰mettre PUSH/POP</h3>
<div class="sourceCode" id="cb115"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> strlen<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>i<span class="op">])</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="cf">return</span> i<span class="op">;</span> <span class="op">}</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> strlen<span class="op">(</span>buf<span class="op">);</span> <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>j<span class="op">])</span> <span class="op">{</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> s<span class="op">[</span>j<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb115-7"><a href="#cb115-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb115-8"><a href="#cb115-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;0&quot;</span><span class="op">);</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb115-9"><a href="#cb115-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tmp<span class="op">[</span><span class="dv">12</span><span class="op">];</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">11</span><span class="op">;</span> tmp<span class="op">[</span><span class="dv">11</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb115-10"><a href="#cb115-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> i <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;0&#39;</span> <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span> n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb115-11"><a href="#cb115-11" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> tmp <span class="op">+</span> i<span class="op">);</span></span>
<span id="cb115-12"><a href="#cb115-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb115-13"><a href="#cb115-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-14"><a href="#cb115-14" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_push<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">)</span> <span class="op">{</span></span>
<span id="cb115-15"><a href="#cb115-15" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;STR R&quot;</span><span class="op">);</span></span>
<span id="cb115-16"><a href="#cb115-16" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span></span>
<span id="cb115-17"><a href="#cb115-17" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, [SP, #-4]!</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb115-18"><a href="#cb115-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb115-19"><a href="#cb115-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-20"><a href="#cb115-20" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_pop<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">)</span> <span class="op">{</span></span>
<span id="cb115-21"><a href="#cb115-21" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;LDR R&quot;</span><span class="op">);</span></span>
<span id="cb115-22"><a href="#cb115-22" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span></span>
<span id="cb115-23"><a href="#cb115-23" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, [SP], #4</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb115-24"><a href="#cb115-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb115-25"><a href="#cb115-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-26"><a href="#cb115-26" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> check<span class="op">(</span><span class="dt">char</span><span class="op">*</span> a<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb115-27"><a href="#cb115-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb115-28"><a href="#cb115-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">&amp;&amp;</span> b<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span> <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> b<span class="op">[</span>i<span class="op">])</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb115-29"><a href="#cb115-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a<span class="op">[</span>i<span class="op">]</span> <span class="op">==</span> b<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb115-30"><a href="#cb115-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb115-31"><a href="#cb115-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-32"><a href="#cb115-32" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb115-33"><a href="#cb115-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb115-34"><a href="#cb115-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb115-35"><a href="#cb115-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-36"><a href="#cb115-36" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb115-37"><a href="#cb115-37" aria-hidden="true" tabindex="-1"></a>    emit_push<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb115-38"><a href="#cb115-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;STR R0, [SP, #-4]!</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb115-39"><a href="#cb115-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-40"><a href="#cb115-40" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb115-41"><a href="#cb115-41" aria-hidden="true" tabindex="-1"></a>    emit_pop<span class="op">(</span>buf<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb115-42"><a href="#cb115-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;LDR R1, [SP], #4</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb115-43"><a href="#cb115-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-44"><a href="#cb115-44" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb115-45"><a href="#cb115-45" aria-hidden="true" tabindex="-1"></a>    emit_push<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb115-46"><a href="#cb115-46" aria-hidden="true" tabindex="-1"></a>    emit_pop<span class="op">(</span>buf<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb115-47"><a href="#cb115-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;STR R0, [SP, #-4]!</span><span class="sc">\\</span><span class="st">nLDR R1, [SP], #4</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb115-48"><a href="#cb115-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-49"><a href="#cb115-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb115-50"><a href="#cb115-50" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.11" id="compiler-une-constante"><span class="header-section-number">1.4.11</span> 4.1 Compiler une
Constante</h3>
<div class="sourceCode" id="cb116"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> strlen<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>i<span class="op">])</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="cf">return</span> i<span class="op">;</span> <span class="op">}</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> strlen<span class="op">(</span>buf<span class="op">);</span> <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>j<span class="op">])</span> <span class="op">{</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> s<span class="op">[</span>j<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb116-6"><a href="#cb116-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb116-7"><a href="#cb116-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb116-8"><a href="#cb116-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;0&quot;</span><span class="op">);</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb116-9"><a href="#cb116-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tmp<span class="op">[</span><span class="dv">12</span><span class="op">];</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">11</span><span class="op">;</span> tmp<span class="op">[</span><span class="dv">11</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb116-10"><a href="#cb116-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> i <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;0&#39;</span> <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span> n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb116-11"><a href="#cb116-11" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> tmp <span class="op">+</span> i<span class="op">);</span></span>
<span id="cb116-12"><a href="#cb116-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb116-13"><a href="#cb116-13" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_mov<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">,</span> <span class="dt">int</span> val<span class="op">)</span> <span class="op">{</span></span>
<span id="cb116-14"><a href="#cb116-14" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span></span>
<span id="cb116-15"><a href="#cb116-15" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, #&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> val<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb116-16"><a href="#cb116-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb116-17"><a href="#cb116-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-18"><a href="#cb116-18" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_digit<span class="op">(</span><span class="dt">char</span> c<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> c <span class="op">&gt;=</span> <span class="ch">&#39;0&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;9&#39;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb116-19"><a href="#cb116-19" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> input<span class="op">;</span></span>
<span id="cb116-20"><a href="#cb116-20" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> pos<span class="op">;</span></span>
<span id="cb116-21"><a href="#cb116-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-22"><a href="#cb116-22" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_num<span class="op">()</span> <span class="op">{</span></span>
<span id="cb116-23"><a href="#cb116-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> v <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb116-24"><a href="#cb116-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>is_digit<span class="op">(</span>input<span class="op">[</span>pos<span class="op">]))</span> <span class="op">{</span> v <span class="op">=</span> v <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> <span class="op">(</span>input<span class="op">[</span>pos<span class="op">]</span> <span class="op">-</span> <span class="ch">&#39;0&#39;</span><span class="op">);</span> pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb116-25"><a href="#cb116-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> v<span class="op">;</span></span>
<span id="cb116-26"><a href="#cb116-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb116-27"><a href="#cb116-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-28"><a href="#cb116-28" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> codegen_const<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">)</span> <span class="op">{</span></span>
<span id="cb116-29"><a href="#cb116-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> parse_num<span class="op">();</span></span>
<span id="cb116-30"><a href="#cb116-30" aria-hidden="true" tabindex="-1"></a>    emit_mov<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> n<span class="op">);</span></span>
<span id="cb116-31"><a href="#cb116-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb116-32"><a href="#cb116-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-33"><a href="#cb116-33" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> check<span class="op">(</span><span class="dt">char</span><span class="op">*</span> a<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb116-34"><a href="#cb116-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb116-35"><a href="#cb116-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">&amp;&amp;</span> b<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span> <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> b<span class="op">[</span>i<span class="op">])</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb116-36"><a href="#cb116-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a<span class="op">[</span>i<span class="op">]</span> <span class="op">==</span> b<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb116-37"><a href="#cb116-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb116-38"><a href="#cb116-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-39"><a href="#cb116-39" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb116-40"><a href="#cb116-40" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb116-41"><a href="#cb116-41" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb116-42"><a href="#cb116-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-43"><a href="#cb116-43" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> input <span class="op">=</span> <span class="st">&quot;42&quot;</span><span class="op">;</span> pos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb116-44"><a href="#cb116-44" aria-hidden="true" tabindex="-1"></a>    codegen_const<span class="op">(</span>buf<span class="op">);</span></span>
<span id="cb116-45"><a href="#cb116-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R0, #42</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb116-46"><a href="#cb116-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-47"><a href="#cb116-47" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> input <span class="op">=</span> <span class="st">&quot;5&quot;</span><span class="op">;</span> pos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb116-48"><a href="#cb116-48" aria-hidden="true" tabindex="-1"></a>    codegen_const<span class="op">(</span>buf<span class="op">);</span></span>
<span id="cb116-49"><a href="#cb116-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R0, #5</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb116-50"><a href="#cb116-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-51"><a href="#cb116-51" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> input <span class="op">=</span> <span class="st">&quot;123&quot;</span><span class="op">;</span> pos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb116-52"><a href="#cb116-52" aria-hidden="true" tabindex="-1"></a>    codegen_const<span class="op">(</span>buf<span class="op">);</span></span>
<span id="cb116-53"><a href="#cb116-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R0, #123</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb116-54"><a href="#cb116-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-55"><a href="#cb116-55" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb116-56"><a href="#cb116-56" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.12" id="compiler-a-b"><span class="header-section-number">1.4.12</span> 4.2 Compiler a + b</h3>
<div class="sourceCode" id="cb117"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> strlen<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>i<span class="op">])</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="cf">return</span> i<span class="op">;</span> <span class="op">}</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> strlen<span class="op">(</span>buf<span class="op">);</span> <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>j<span class="op">])</span> <span class="op">{</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> s<span class="op">[</span>j<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb117-6"><a href="#cb117-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb117-7"><a href="#cb117-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;0&quot;</span><span class="op">);</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb117-8"><a href="#cb117-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tmp<span class="op">[</span><span class="dv">12</span><span class="op">];</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">11</span><span class="op">;</span> tmp<span class="op">[</span><span class="dv">11</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb117-9"><a href="#cb117-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> i <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;0&#39;</span> <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span> n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb117-10"><a href="#cb117-10" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> tmp <span class="op">+</span> i<span class="op">);</span></span>
<span id="cb117-11"><a href="#cb117-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb117-12"><a href="#cb117-12" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_mov<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">,</span> <span class="dt">int</span> val<span class="op">)</span> <span class="op">{</span></span>
<span id="cb117-13"><a href="#cb117-13" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span></span>
<span id="cb117-14"><a href="#cb117-14" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, #&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> val<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb117-15"><a href="#cb117-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb117-16"><a href="#cb117-16" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_push<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">)</span> <span class="op">{</span></span>
<span id="cb117-17"><a href="#cb117-17" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;STR R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, [SP, #-4]!</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb117-18"><a href="#cb117-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb117-19"><a href="#cb117-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_pop<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">)</span> <span class="op">{</span></span>
<span id="cb117-20"><a href="#cb117-20" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;LDR R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, [SP], #4</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb117-21"><a href="#cb117-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb117-22"><a href="#cb117-22" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_op<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span> op<span class="op">,</span> <span class="dt">int</span> rd<span class="op">,</span> <span class="dt">int</span> rn<span class="op">,</span> <span class="dt">int</span> rm<span class="op">)</span> <span class="op">{</span></span>
<span id="cb117-23"><a href="#cb117-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;+&#39;</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;ADD R&quot;</span><span class="op">);</span></span>
<span id="cb117-24"><a href="#cb117-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;-&#39;</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;SUB R&quot;</span><span class="op">);</span></span>
<span id="cb117-25"><a href="#cb117-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;*&#39;</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MUL R&quot;</span><span class="op">);</span></span>
<span id="cb117-26"><a href="#cb117-26" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> rd<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> rn<span class="op">);</span></span>
<span id="cb117-27"><a href="#cb117-27" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> rm<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb117-28"><a href="#cb117-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb117-29"><a href="#cb117-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-30"><a href="#cb117-30" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_digit<span class="op">(</span><span class="dt">char</span> c<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> c <span class="op">&gt;=</span> <span class="ch">&#39;0&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;9&#39;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb117-31"><a href="#cb117-31" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> input<span class="op">;</span></span>
<span id="cb117-32"><a href="#cb117-32" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> pos<span class="op">;</span></span>
<span id="cb117-33"><a href="#cb117-33" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> skip<span class="op">()</span> <span class="op">{</span> <span class="cf">while</span> <span class="op">(</span>input<span class="op">[</span>pos<span class="op">]</span> <span class="op">==</span> <span class="ch">&#39; &#39;</span><span class="op">)</span> pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb117-34"><a href="#cb117-34" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_num<span class="op">()</span> <span class="op">{</span></span>
<span id="cb117-35"><a href="#cb117-35" aria-hidden="true" tabindex="-1"></a>    skip<span class="op">();</span></span>
<span id="cb117-36"><a href="#cb117-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> v <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb117-37"><a href="#cb117-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>is_digit<span class="op">(</span>input<span class="op">[</span>pos<span class="op">]))</span> <span class="op">{</span> v <span class="op">=</span> v <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> <span class="op">(</span>input<span class="op">[</span>pos<span class="op">]</span> <span class="op">-</span> <span class="ch">&#39;0&#39;</span><span class="op">);</span> pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb117-38"><a href="#cb117-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> v<span class="op">;</span></span>
<span id="cb117-39"><a href="#cb117-39" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb117-40"><a href="#cb117-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-41"><a href="#cb117-41" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> codegen_binop<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">)</span> <span class="op">{</span></span>
<span id="cb117-42"><a href="#cb117-42" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a <span class="op">=</span> parse_num<span class="op">();</span></span>
<span id="cb117-43"><a href="#cb117-43" aria-hidden="true" tabindex="-1"></a>    emit_mov<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> a<span class="op">);</span></span>
<span id="cb117-44"><a href="#cb117-44" aria-hidden="true" tabindex="-1"></a>    emit_push<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb117-45"><a href="#cb117-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-46"><a href="#cb117-46" aria-hidden="true" tabindex="-1"></a>    skip<span class="op">();</span></span>
<span id="cb117-47"><a href="#cb117-47" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> op <span class="op">=</span> input<span class="op">[</span>pos<span class="op">];</span></span>
<span id="cb117-48"><a href="#cb117-48" aria-hidden="true" tabindex="-1"></a>    pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb117-49"><a href="#cb117-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-50"><a href="#cb117-50" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> b <span class="op">=</span> parse_num<span class="op">();</span></span>
<span id="cb117-51"><a href="#cb117-51" aria-hidden="true" tabindex="-1"></a>    emit_mov<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> b<span class="op">);</span></span>
<span id="cb117-52"><a href="#cb117-52" aria-hidden="true" tabindex="-1"></a>    emit_pop<span class="op">(</span>buf<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb117-53"><a href="#cb117-53" aria-hidden="true" tabindex="-1"></a>    emit_op<span class="op">(</span>buf<span class="op">,</span> op<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb117-54"><a href="#cb117-54" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb117-55"><a href="#cb117-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-56"><a href="#cb117-56" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> contains<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> sub<span class="op">)</span> <span class="op">{</span></span>
<span id="cb117-57"><a href="#cb117-57" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb117-58"><a href="#cb117-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>buf<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span></span>
<span id="cb117-59"><a href="#cb117-59" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb117-60"><a href="#cb117-60" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">&amp;&amp;</span> buf<span class="op">[</span>i<span class="op">+</span>j<span class="op">]</span> <span class="op">==</span> sub<span class="op">[</span>j<span class="op">])</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb117-61"><a href="#cb117-61" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb117-62"><a href="#cb117-62" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb117-63"><a href="#cb117-63" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb117-64"><a href="#cb117-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb117-65"><a href="#cb117-65" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb117-66"><a href="#cb117-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-67"><a href="#cb117-67" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb117-68"><a href="#cb117-68" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">200</span><span class="op">];</span></span>
<span id="cb117-69"><a href="#cb117-69" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb117-70"><a href="#cb117-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-71"><a href="#cb117-71" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> input <span class="op">=</span> <span class="st">&quot;3 + 5&quot;</span><span class="op">;</span> pos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb117-72"><a href="#cb117-72" aria-hidden="true" tabindex="-1"></a>    codegen_binop<span class="op">(</span>buf<span class="op">);</span></span>
<span id="cb117-73"><a href="#cb117-73" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R0, #3&quot;</span><span class="op">)</span> <span class="op">&amp;&amp;</span> contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R0, #5&quot;</span><span class="op">)</span> <span class="op">&amp;&amp;</span></span>
<span id="cb117-74"><a href="#cb117-74" aria-hidden="true" tabindex="-1"></a>        contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;ADD R0&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb117-75"><a href="#cb117-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-76"><a href="#cb117-76" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> input <span class="op">=</span> <span class="st">&quot;10 - 4&quot;</span><span class="op">;</span> pos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb117-77"><a href="#cb117-77" aria-hidden="true" tabindex="-1"></a>    codegen_binop<span class="op">(</span>buf<span class="op">);</span></span>
<span id="cb117-78"><a href="#cb117-78" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R0, #10&quot;</span><span class="op">)</span> <span class="op">&amp;&amp;</span> contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;SUB R0&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb117-79"><a href="#cb117-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-80"><a href="#cb117-80" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> input <span class="op">=</span> <span class="st">&quot;6 * 7&quot;</span><span class="op">;</span> pos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb117-81"><a href="#cb117-81" aria-hidden="true" tabindex="-1"></a>    codegen_binop<span class="op">(</span>buf<span class="op">);</span></span>
<span id="cb117-82"><a href="#cb117-82" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MUL R0&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb117-83"><a href="#cb117-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-84"><a href="#cb117-84" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb117-85"><a href="#cb117-85" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.13" id="compiler-expressions-complÃ¨tes"><span class="header-section-number">1.4.13</span> 4.3 Compiler Expressions
ComplÃ¨tes</h3>
<div class="sourceCode" id="cb118"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> strlen<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>i<span class="op">])</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="cf">return</span> i<span class="op">;</span> <span class="op">}</span></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> strlen<span class="op">(</span>buf<span class="op">);</span> <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>j<span class="op">])</span> <span class="op">{</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> s<span class="op">[</span>j<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb118-6"><a href="#cb118-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb118-7"><a href="#cb118-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;0&quot;</span><span class="op">);</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb118-8"><a href="#cb118-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tmp<span class="op">[</span><span class="dv">12</span><span class="op">];</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">11</span><span class="op">;</span> tmp<span class="op">[</span><span class="dv">11</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb118-9"><a href="#cb118-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> i <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;0&#39;</span> <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span> n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb118-10"><a href="#cb118-10" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> tmp <span class="op">+</span> i<span class="op">);</span></span>
<span id="cb118-11"><a href="#cb118-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb118-12"><a href="#cb118-12" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_mov<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">,</span> <span class="dt">int</span> val<span class="op">)</span> <span class="op">{</span></span>
<span id="cb118-13"><a href="#cb118-13" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span></span>
<span id="cb118-14"><a href="#cb118-14" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, #&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> val<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb118-15"><a href="#cb118-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb118-16"><a href="#cb118-16" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_push<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">)</span> <span class="op">{</span></span>
<span id="cb118-17"><a href="#cb118-17" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;STR R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, [SP, #-4]!</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb118-18"><a href="#cb118-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb118-19"><a href="#cb118-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_pop<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">)</span> <span class="op">{</span></span>
<span id="cb118-20"><a href="#cb118-20" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;LDR R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, [SP], #4</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb118-21"><a href="#cb118-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb118-22"><a href="#cb118-22" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_op<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span> op<span class="op">,</span> <span class="dt">int</span> rd<span class="op">,</span> <span class="dt">int</span> rn<span class="op">,</span> <span class="dt">int</span> rm<span class="op">)</span> <span class="op">{</span></span>
<span id="cb118-23"><a href="#cb118-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;+&#39;</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;ADD R&quot;</span><span class="op">);</span></span>
<span id="cb118-24"><a href="#cb118-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;-&#39;</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;SUB R&quot;</span><span class="op">);</span></span>
<span id="cb118-25"><a href="#cb118-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;*&#39;</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MUL R&quot;</span><span class="op">);</span></span>
<span id="cb118-26"><a href="#cb118-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;/&#39;</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;SDIV R&quot;</span><span class="op">);</span></span>
<span id="cb118-27"><a href="#cb118-27" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> rd<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> rn<span class="op">);</span></span>
<span id="cb118-28"><a href="#cb118-28" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> rm<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb118-29"><a href="#cb118-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb118-30"><a href="#cb118-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-31"><a href="#cb118-31" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_digit<span class="op">(</span><span class="dt">char</span> c<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> c <span class="op">&gt;=</span> <span class="ch">&#39;0&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;9&#39;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb118-32"><a href="#cb118-32" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> input<span class="op">;</span></span>
<span id="cb118-33"><a href="#cb118-33" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> pos<span class="op">;</span></span>
<span id="cb118-34"><a href="#cb118-34" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> out<span class="op">;</span></span>
<span id="cb118-35"><a href="#cb118-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-36"><a href="#cb118-36" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> skip<span class="op">()</span> <span class="op">{</span> <span class="cf">while</span> <span class="op">(</span>input<span class="op">[</span>pos<span class="op">]</span> <span class="op">==</span> <span class="ch">&#39; &#39;</span><span class="op">)</span> pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb118-37"><a href="#cb118-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-38"><a href="#cb118-38" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> codegen_expr<span class="op">();</span></span>
<span id="cb118-39"><a href="#cb118-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-40"><a href="#cb118-40" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> codegen_factor<span class="op">()</span> <span class="op">{</span></span>
<span id="cb118-41"><a href="#cb118-41" aria-hidden="true" tabindex="-1"></a>    skip<span class="op">();</span></span>
<span id="cb118-42"><a href="#cb118-42" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> v <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb118-43"><a href="#cb118-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>is_digit<span class="op">(</span>input<span class="op">[</span>pos<span class="op">]))</span> <span class="op">{</span> v <span class="op">=</span> v <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> <span class="op">(</span>input<span class="op">[</span>pos<span class="op">]</span> <span class="op">-</span> <span class="ch">&#39;0&#39;</span><span class="op">);</span> pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb118-44"><a href="#cb118-44" aria-hidden="true" tabindex="-1"></a>    emit_mov<span class="op">(</span>out<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> v<span class="op">);</span></span>
<span id="cb118-45"><a href="#cb118-45" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb118-46"><a href="#cb118-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-47"><a href="#cb118-47" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> codegen_term<span class="op">()</span> <span class="op">{</span></span>
<span id="cb118-48"><a href="#cb118-48" aria-hidden="true" tabindex="-1"></a>    codegen_factor<span class="op">();</span></span>
<span id="cb118-49"><a href="#cb118-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb118-50"><a href="#cb118-50" aria-hidden="true" tabindex="-1"></a>        skip<span class="op">();</span></span>
<span id="cb118-51"><a href="#cb118-51" aria-hidden="true" tabindex="-1"></a>        <span class="dt">char</span> op <span class="op">=</span> input<span class="op">[</span>pos<span class="op">];</span></span>
<span id="cb118-52"><a href="#cb118-52" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op <span class="op">!=</span> <span class="ch">&#39;*&#39;</span> <span class="op">&amp;&amp;</span> op <span class="op">!=</span> <span class="ch">&#39;/&#39;</span><span class="op">)</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb118-53"><a href="#cb118-53" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb118-54"><a href="#cb118-54" aria-hidden="true" tabindex="-1"></a>        emit_push<span class="op">(</span>out<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb118-55"><a href="#cb118-55" aria-hidden="true" tabindex="-1"></a>        codegen_factor<span class="op">();</span></span>
<span id="cb118-56"><a href="#cb118-56" aria-hidden="true" tabindex="-1"></a>        emit_pop<span class="op">(</span>out<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb118-57"><a href="#cb118-57" aria-hidden="true" tabindex="-1"></a>        emit_op<span class="op">(</span>out<span class="op">,</span> op<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb118-58"><a href="#cb118-58" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb118-59"><a href="#cb118-59" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb118-60"><a href="#cb118-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-61"><a href="#cb118-61" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> codegen_expr<span class="op">()</span> <span class="op">{</span></span>
<span id="cb118-62"><a href="#cb118-62" aria-hidden="true" tabindex="-1"></a>    codegen_term<span class="op">();</span></span>
<span id="cb118-63"><a href="#cb118-63" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb118-64"><a href="#cb118-64" aria-hidden="true" tabindex="-1"></a>        skip<span class="op">();</span></span>
<span id="cb118-65"><a href="#cb118-65" aria-hidden="true" tabindex="-1"></a>        <span class="dt">char</span> op <span class="op">=</span> input<span class="op">[</span>pos<span class="op">];</span></span>
<span id="cb118-66"><a href="#cb118-66" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op <span class="op">!=</span> <span class="ch">&#39;+&#39;</span> <span class="op">&amp;&amp;</span> op <span class="op">!=</span> <span class="ch">&#39;-&#39;</span><span class="op">)</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb118-67"><a href="#cb118-67" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb118-68"><a href="#cb118-68" aria-hidden="true" tabindex="-1"></a>        emit_push<span class="op">(</span>out<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb118-69"><a href="#cb118-69" aria-hidden="true" tabindex="-1"></a>        codegen_term<span class="op">();</span></span>
<span id="cb118-70"><a href="#cb118-70" aria-hidden="true" tabindex="-1"></a>        emit_pop<span class="op">(</span>out<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb118-71"><a href="#cb118-71" aria-hidden="true" tabindex="-1"></a>        emit_op<span class="op">(</span>out<span class="op">,</span> op<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb118-72"><a href="#cb118-72" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb118-73"><a href="#cb118-73" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb118-74"><a href="#cb118-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-75"><a href="#cb118-75" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> compile<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> src<span class="op">)</span> <span class="op">{</span></span>
<span id="cb118-76"><a href="#cb118-76" aria-hidden="true" tabindex="-1"></a>    out <span class="op">=</span> buf<span class="op">;</span></span>
<span id="cb118-77"><a href="#cb118-77" aria-hidden="true" tabindex="-1"></a>    input <span class="op">=</span> src<span class="op">;</span></span>
<span id="cb118-78"><a href="#cb118-78" aria-hidden="true" tabindex="-1"></a>    pos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb118-79"><a href="#cb118-79" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb118-80"><a href="#cb118-80" aria-hidden="true" tabindex="-1"></a>    codegen_expr<span class="op">();</span></span>
<span id="cb118-81"><a href="#cb118-81" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb118-82"><a href="#cb118-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-83"><a href="#cb118-83" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> contains<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> sub<span class="op">)</span> <span class="op">{</span></span>
<span id="cb118-84"><a href="#cb118-84" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb118-85"><a href="#cb118-85" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>buf<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span></span>
<span id="cb118-86"><a href="#cb118-86" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">&amp;&amp;</span> buf<span class="op">[</span>i<span class="op">+</span>j<span class="op">]</span> <span class="op">==</span> sub<span class="op">[</span>j<span class="op">])</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb118-87"><a href="#cb118-87" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb118-88"><a href="#cb118-88" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb118-89"><a href="#cb118-89" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb118-90"><a href="#cb118-90" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb118-91"><a href="#cb118-91" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb118-92"><a href="#cb118-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-93"><a href="#cb118-93" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> count<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> sub<span class="op">)</span> <span class="op">{</span></span>
<span id="cb118-94"><a href="#cb118-94" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> c <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb118-95"><a href="#cb118-95" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>buf<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span></span>
<span id="cb118-96"><a href="#cb118-96" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">&amp;&amp;</span> buf<span class="op">[</span>i<span class="op">+</span>j<span class="op">]</span> <span class="op">==</span> sub<span class="op">[</span>j<span class="op">])</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb118-97"><a href="#cb118-97" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> c <span class="op">=</span> c <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb118-98"><a href="#cb118-98" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb118-99"><a href="#cb118-99" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb118-100"><a href="#cb118-100" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> c<span class="op">;</span></span>
<span id="cb118-101"><a href="#cb118-101" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb118-102"><a href="#cb118-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-103"><a href="#cb118-103" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb118-104"><a href="#cb118-104" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">500</span><span class="op">];</span></span>
<span id="cb118-105"><a href="#cb118-105" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb118-106"><a href="#cb118-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-107"><a href="#cb118-107" aria-hidden="true" tabindex="-1"></a>    compile<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;42&quot;</span><span class="op">);</span></span>
<span id="cb118-108"><a href="#cb118-108" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R0, #42&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb118-109"><a href="#cb118-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-110"><a href="#cb118-110" aria-hidden="true" tabindex="-1"></a>    compile<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;3 + 5&quot;</span><span class="op">);</span></span>
<span id="cb118-111"><a href="#cb118-111" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;ADD R0&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb118-112"><a href="#cb118-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-113"><a href="#cb118-113" aria-hidden="true" tabindex="-1"></a>    compile<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;2 + 3 * 4&quot;</span><span class="op">);</span></span>
<span id="cb118-114"><a href="#cb118-114" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MUL R0&quot;</span><span class="op">)</span> <span class="op">&amp;&amp;</span> contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;ADD R0&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb118-115"><a href="#cb118-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-116"><a href="#cb118-116" aria-hidden="true" tabindex="-1"></a>    compile<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;1 + 2 + 3&quot;</span><span class="op">);</span></span>
<span id="cb118-117"><a href="#cb118-117" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>count<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;ADD R0&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb118-118"><a href="#cb118-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-119"><a href="#cb118-119" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb118-120"><a href="#cb118-120" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.14" id="gÃ©nÃ©rer-des-labels"><span class="header-section-number">1.4.14</span> 5.1 GÃ©nÃ©rer des Labels</h3>
<div class="sourceCode" id="cb119"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> strlen<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>i<span class="op">])</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="cf">return</span> i<span class="op">;</span> <span class="op">}</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> strlen<span class="op">(</span>buf<span class="op">);</span> <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>j<span class="op">])</span> <span class="op">{</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> s<span class="op">[</span>j<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb119-6"><a href="#cb119-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb119-7"><a href="#cb119-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;0&quot;</span><span class="op">);</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb119-8"><a href="#cb119-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tmp<span class="op">[</span><span class="dv">12</span><span class="op">];</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">11</span><span class="op">;</span> tmp<span class="op">[</span><span class="dv">11</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb119-9"><a href="#cb119-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> i <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;0&#39;</span> <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span> n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb119-10"><a href="#cb119-10" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> tmp <span class="op">+</span> i<span class="op">);</span></span>
<span id="cb119-11"><a href="#cb119-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb119-12"><a href="#cb119-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-13"><a href="#cb119-13" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_label<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> prefix<span class="op">,</span> <span class="dt">int</span> num<span class="op">)</span> <span class="op">{</span></span>
<span id="cb119-14"><a href="#cb119-14" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;.L&quot;</span><span class="op">);</span></span>
<span id="cb119-15"><a href="#cb119-15" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> prefix<span class="op">);</span></span>
<span id="cb119-16"><a href="#cb119-16" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;_&quot;</span><span class="op">);</span></span>
<span id="cb119-17"><a href="#cb119-17" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> num<span class="op">);</span></span>
<span id="cb119-18"><a href="#cb119-18" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;:</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb119-19"><a href="#cb119-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb119-20"><a href="#cb119-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-21"><a href="#cb119-21" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_branch<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> cond<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> prefix<span class="op">,</span> <span class="dt">int</span> num<span class="op">)</span> <span class="op">{</span></span>
<span id="cb119-22"><a href="#cb119-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>cond <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;B .L&quot;</span><span class="op">);</span></span>
<span id="cb119-23"><a href="#cb119-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>cond <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BEQ .L&quot;</span><span class="op">);</span></span>
<span id="cb119-24"><a href="#cb119-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>cond <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BNE .L&quot;</span><span class="op">);</span></span>
<span id="cb119-25"><a href="#cb119-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>cond <span class="op">==</span> <span class="dv">3</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BLT .L&quot;</span><span class="op">);</span></span>
<span id="cb119-26"><a href="#cb119-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>cond <span class="op">==</span> <span class="dv">4</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BGE .L&quot;</span><span class="op">);</span></span>
<span id="cb119-27"><a href="#cb119-27" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> prefix<span class="op">);</span></span>
<span id="cb119-28"><a href="#cb119-28" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;_&quot;</span><span class="op">);</span></span>
<span id="cb119-29"><a href="#cb119-29" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> num<span class="op">);</span></span>
<span id="cb119-30"><a href="#cb119-30" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb119-31"><a href="#cb119-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb119-32"><a href="#cb119-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-33"><a href="#cb119-33" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> check<span class="op">(</span><span class="dt">char</span><span class="op">*</span> a<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb119-34"><a href="#cb119-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb119-35"><a href="#cb119-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">&amp;&amp;</span> b<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span> <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> b<span class="op">[</span>i<span class="op">])</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb119-36"><a href="#cb119-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a<span class="op">[</span>i<span class="op">]</span> <span class="op">==</span> b<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb119-37"><a href="#cb119-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb119-38"><a href="#cb119-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-39"><a href="#cb119-39" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb119-40"><a href="#cb119-40" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb119-41"><a href="#cb119-41" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb119-42"><a href="#cb119-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-43"><a href="#cb119-43" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb119-44"><a href="#cb119-44" aria-hidden="true" tabindex="-1"></a>    emit_label<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;if&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb119-45"><a href="#cb119-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;.Lif_1:</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb119-46"><a href="#cb119-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-47"><a href="#cb119-47" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb119-48"><a href="#cb119-48" aria-hidden="true" tabindex="-1"></a>    emit_branch<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="st">&quot;end&quot;</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb119-49"><a href="#cb119-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;B .Lend_2</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb119-50"><a href="#cb119-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-51"><a href="#cb119-51" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb119-52"><a href="#cb119-52" aria-hidden="true" tabindex="-1"></a>    emit_branch<span class="op">(</span>buf<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="st">&quot;else&quot;</span><span class="op">,</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb119-53"><a href="#cb119-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BEQ .Lelse_3</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb119-54"><a href="#cb119-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-55"><a href="#cb119-55" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb119-56"><a href="#cb119-56" aria-hidden="true" tabindex="-1"></a>    emit_branch<span class="op">(</span>buf<span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="st">&quot;loop&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb119-57"><a href="#cb119-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BLT .Lloop_0</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb119-58"><a href="#cb119-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-59"><a href="#cb119-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb119-60"><a href="#cb119-60" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.15" id="gÃ©nÃ©rer-comparaisons"><span class="header-section-number">1.4.15</span> 5.2 GÃ©nÃ©rer
Comparaisons</h3>
<div class="sourceCode" id="cb120"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> strlen<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>i<span class="op">])</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="cf">return</span> i<span class="op">;</span> <span class="op">}</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> strlen<span class="op">(</span>buf<span class="op">);</span> <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>j<span class="op">])</span> <span class="op">{</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> s<span class="op">[</span>j<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb120-6"><a href="#cb120-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb120-7"><a href="#cb120-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;0&quot;</span><span class="op">);</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb120-8"><a href="#cb120-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tmp<span class="op">[</span><span class="dv">12</span><span class="op">];</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">11</span><span class="op">;</span> tmp<span class="op">[</span><span class="dv">11</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb120-9"><a href="#cb120-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> i <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;0&#39;</span> <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span> n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb120-10"><a href="#cb120-10" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> tmp <span class="op">+</span> i<span class="op">);</span></span>
<span id="cb120-11"><a href="#cb120-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb120-12"><a href="#cb120-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-13"><a href="#cb120-13" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_cmp<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> rn<span class="op">,</span> <span class="dt">int</span> rm<span class="op">)</span> <span class="op">{</span></span>
<span id="cb120-14"><a href="#cb120-14" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;CMP R&quot;</span><span class="op">);</span></span>
<span id="cb120-15"><a href="#cb120-15" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> rn<span class="op">);</span></span>
<span id="cb120-16"><a href="#cb120-16" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, R&quot;</span><span class="op">);</span></span>
<span id="cb120-17"><a href="#cb120-17" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> rm<span class="op">);</span></span>
<span id="cb120-18"><a href="#cb120-18" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb120-19"><a href="#cb120-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb120-20"><a href="#cb120-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-21"><a href="#cb120-21" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> get_branch_cond<span class="op">(</span><span class="dt">char</span> op<span class="op">)</span> <span class="op">{</span></span>
<span id="cb120-22"><a href="#cb120-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;&lt;&#39;</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">4</span><span class="op">;</span>  <span class="co">// BGE</span></span>
<span id="cb120-23"><a href="#cb120-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;&gt;&#39;</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">3</span><span class="op">;</span>  <span class="co">// BLT (simplifiÃ©, &gt;= aussi)</span></span>
<span id="cb120-24"><a href="#cb120-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;=&#39;</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">2</span><span class="op">;</span>  <span class="co">// BNE</span></span>
<span id="cb120-25"><a href="#cb120-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;!&#39;</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span>  <span class="co">// BEQ</span></span>
<span id="cb120-26"><a href="#cb120-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb120-27"><a href="#cb120-27" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb120-28"><a href="#cb120-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-29"><a href="#cb120-29" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> check<span class="op">(</span><span class="dt">char</span><span class="op">*</span> a<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb120-30"><a href="#cb120-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb120-31"><a href="#cb120-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">&amp;&amp;</span> b<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span> <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> b<span class="op">[</span>i<span class="op">])</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb120-32"><a href="#cb120-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a<span class="op">[</span>i<span class="op">]</span> <span class="op">==</span> b<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb120-33"><a href="#cb120-33" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb120-34"><a href="#cb120-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-35"><a href="#cb120-35" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb120-36"><a href="#cb120-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb120-37"><a href="#cb120-37" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb120-38"><a href="#cb120-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-39"><a href="#cb120-39" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb120-40"><a href="#cb120-40" aria-hidden="true" tabindex="-1"></a>    emit_cmp<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb120-41"><a href="#cb120-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;CMP R0, R1</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb120-42"><a href="#cb120-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-43"><a href="#cb120-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>get_branch_cond<span class="op">(</span><span class="ch">&#39;&lt;&#39;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">4</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb120-44"><a href="#cb120-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>get_branch_cond<span class="op">(</span><span class="ch">&#39;=&#39;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb120-45"><a href="#cb120-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>get_branch_cond<span class="op">(</span><span class="ch">&#39;!&#39;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb120-46"><a href="#cb120-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>get_branch_cond<span class="op">(</span><span class="ch">&#39;&gt;&#39;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">3</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb120-47"><a href="#cb120-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-48"><a href="#cb120-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb120-49"><a href="#cb120-49" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.16" id="compiler-ifelse"><span class="header-section-number">1.4.16</span> 5.3 Compiler if/else</h3>
<div class="sourceCode" id="cb121"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> strlen<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>i<span class="op">])</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="cf">return</span> i<span class="op">;</span> <span class="op">}</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> strlen<span class="op">(</span>buf<span class="op">);</span> <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>j<span class="op">])</span> <span class="op">{</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> s<span class="op">[</span>j<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;0&quot;</span><span class="op">);</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb121-8"><a href="#cb121-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tmp<span class="op">[</span><span class="dv">12</span><span class="op">];</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">11</span><span class="op">;</span> tmp<span class="op">[</span><span class="dv">11</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb121-9"><a href="#cb121-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> i <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;0&#39;</span> <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span> n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb121-10"><a href="#cb121-10" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> tmp <span class="op">+</span> i<span class="op">);</span></span>
<span id="cb121-11"><a href="#cb121-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb121-12"><a href="#cb121-12" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_cmp<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> rn<span class="op">,</span> <span class="dt">int</span> rm<span class="op">)</span> <span class="op">{</span></span>
<span id="cb121-13"><a href="#cb121-13" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;CMP R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> rn<span class="op">);</span></span>
<span id="cb121-14"><a href="#cb121-14" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> rm<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb121-15"><a href="#cb121-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb121-16"><a href="#cb121-16" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_label<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> prefix<span class="op">,</span> <span class="dt">int</span> num<span class="op">)</span> <span class="op">{</span></span>
<span id="cb121-17"><a href="#cb121-17" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;.L&quot;</span><span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> prefix<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;_&quot;</span><span class="op">);</span></span>
<span id="cb121-18"><a href="#cb121-18" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> num<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;:</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb121-19"><a href="#cb121-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb121-20"><a href="#cb121-20" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_branch<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> cond<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> prefix<span class="op">,</span> <span class="dt">int</span> num<span class="op">)</span> <span class="op">{</span></span>
<span id="cb121-21"><a href="#cb121-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>cond <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;B .L&quot;</span><span class="op">);</span></span>
<span id="cb121-22"><a href="#cb121-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>cond <span class="op">==</span> <span class="dv">4</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BGE .L&quot;</span><span class="op">);</span></span>
<span id="cb121-23"><a href="#cb121-23" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> prefix<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;_&quot;</span><span class="op">);</span></span>
<span id="cb121-24"><a href="#cb121-24" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> num<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb121-25"><a href="#cb121-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb121-26"><a href="#cb121-26" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_mov<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">,</span> <span class="dt">int</span> val<span class="op">)</span> <span class="op">{</span></span>
<span id="cb121-27"><a href="#cb121-27" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span></span>
<span id="cb121-28"><a href="#cb121-28" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, #&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> val<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb121-29"><a href="#cb121-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb121-30"><a href="#cb121-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-31"><a href="#cb121-31" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> codegen_if<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb121-32"><a href="#cb121-32" aria-hidden="true" tabindex="-1"></a>    emit_cmp<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb121-33"><a href="#cb121-33" aria-hidden="true" tabindex="-1"></a>    emit_branch<span class="op">(</span>buf<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="st">&quot;else&quot;</span><span class="op">,</span> n<span class="op">);</span></span>
<span id="cb121-34"><a href="#cb121-34" aria-hidden="true" tabindex="-1"></a>    emit_mov<span class="op">(</span>buf<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb121-35"><a href="#cb121-35" aria-hidden="true" tabindex="-1"></a>    emit_branch<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="st">&quot;end&quot;</span><span class="op">,</span> n<span class="op">);</span></span>
<span id="cb121-36"><a href="#cb121-36" aria-hidden="true" tabindex="-1"></a>    emit_label<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;else&quot;</span><span class="op">,</span> n<span class="op">);</span></span>
<span id="cb121-37"><a href="#cb121-37" aria-hidden="true" tabindex="-1"></a>    emit_mov<span class="op">(</span>buf<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb121-38"><a href="#cb121-38" aria-hidden="true" tabindex="-1"></a>    emit_label<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;end&quot;</span><span class="op">,</span> n<span class="op">);</span></span>
<span id="cb121-39"><a href="#cb121-39" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb121-40"><a href="#cb121-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-41"><a href="#cb121-41" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> contains<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> sub<span class="op">)</span> <span class="op">{</span></span>
<span id="cb121-42"><a href="#cb121-42" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb121-43"><a href="#cb121-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>buf<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span></span>
<span id="cb121-44"><a href="#cb121-44" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">&amp;&amp;</span> buf<span class="op">[</span>i<span class="op">+</span>j<span class="op">]</span> <span class="op">==</span> sub<span class="op">[</span>j<span class="op">])</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb121-45"><a href="#cb121-45" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb121-46"><a href="#cb121-46" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb121-47"><a href="#cb121-47" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb121-48"><a href="#cb121-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb121-49"><a href="#cb121-49" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb121-50"><a href="#cb121-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-51"><a href="#cb121-51" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb121-52"><a href="#cb121-52" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">300</span><span class="op">];</span></span>
<span id="cb121-53"><a href="#cb121-53" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb121-54"><a href="#cb121-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-55"><a href="#cb121-55" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb121-56"><a href="#cb121-56" aria-hidden="true" tabindex="-1"></a>    codegen_if<span class="op">(</span>buf<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb121-57"><a href="#cb121-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-58"><a href="#cb121-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;CMP R0, R1&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb121-59"><a href="#cb121-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BGE .Lelse_1&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb121-60"><a href="#cb121-60" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;B .Lend_1&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb121-61"><a href="#cb121-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;.Lelse_1:&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb121-62"><a href="#cb121-62" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;.Lend_1:&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb121-63"><a href="#cb121-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-64"><a href="#cb121-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb121-65"><a href="#cb121-65" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.17" id="compiler-while"><span class="header-section-number">1.4.17</span> 5.4 Compiler while</h3>
<div class="sourceCode" id="cb122"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> strlen<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>i<span class="op">])</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="cf">return</span> i<span class="op">;</span> <span class="op">}</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> strlen<span class="op">(</span>buf<span class="op">);</span> <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>j<span class="op">])</span> <span class="op">{</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> s<span class="op">[</span>j<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb122-6"><a href="#cb122-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb122-7"><a href="#cb122-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;0&quot;</span><span class="op">);</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb122-8"><a href="#cb122-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tmp<span class="op">[</span><span class="dv">12</span><span class="op">];</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">11</span><span class="op">;</span> tmp<span class="op">[</span><span class="dv">11</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb122-9"><a href="#cb122-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> i <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;0&#39;</span> <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span> n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb122-10"><a href="#cb122-10" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> tmp <span class="op">+</span> i<span class="op">);</span></span>
<span id="cb122-11"><a href="#cb122-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb122-12"><a href="#cb122-12" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_cmp<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> rn<span class="op">,</span> <span class="dt">int</span> rm<span class="op">)</span> <span class="op">{</span></span>
<span id="cb122-13"><a href="#cb122-13" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;CMP R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> rn<span class="op">);</span></span>
<span id="cb122-14"><a href="#cb122-14" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> rm<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb122-15"><a href="#cb122-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb122-16"><a href="#cb122-16" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_label<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> prefix<span class="op">,</span> <span class="dt">int</span> num<span class="op">)</span> <span class="op">{</span></span>
<span id="cb122-17"><a href="#cb122-17" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;.L&quot;</span><span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> prefix<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;_&quot;</span><span class="op">);</span></span>
<span id="cb122-18"><a href="#cb122-18" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> num<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;:</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb122-19"><a href="#cb122-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb122-20"><a href="#cb122-20" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_branch<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> cond<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> prefix<span class="op">,</span> <span class="dt">int</span> num<span class="op">)</span> <span class="op">{</span></span>
<span id="cb122-21"><a href="#cb122-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>cond <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;B .L&quot;</span><span class="op">);</span></span>
<span id="cb122-22"><a href="#cb122-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>cond <span class="op">==</span> <span class="dv">4</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BGE .L&quot;</span><span class="op">);</span></span>
<span id="cb122-23"><a href="#cb122-23" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> prefix<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;_&quot;</span><span class="op">);</span></span>
<span id="cb122-24"><a href="#cb122-24" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> num<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb122-25"><a href="#cb122-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb122-26"><a href="#cb122-26" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_add_imm<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> rd<span class="op">,</span> <span class="dt">int</span> rn<span class="op">,</span> <span class="dt">int</span> imm<span class="op">)</span> <span class="op">{</span></span>
<span id="cb122-27"><a href="#cb122-27" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;ADD R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> rd<span class="op">);</span></span>
<span id="cb122-28"><a href="#cb122-28" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> rn<span class="op">);</span></span>
<span id="cb122-29"><a href="#cb122-29" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, #&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> imm<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb122-30"><a href="#cb122-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb122-31"><a href="#cb122-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-32"><a href="#cb122-32" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> codegen_while<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb122-33"><a href="#cb122-33" aria-hidden="true" tabindex="-1"></a>    emit_label<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;while&quot;</span><span class="op">,</span> n<span class="op">);</span></span>
<span id="cb122-34"><a href="#cb122-34" aria-hidden="true" tabindex="-1"></a>    emit_cmp<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb122-35"><a href="#cb122-35" aria-hidden="true" tabindex="-1"></a>    emit_branch<span class="op">(</span>buf<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="st">&quot;end&quot;</span><span class="op">,</span> n<span class="op">);</span></span>
<span id="cb122-36"><a href="#cb122-36" aria-hidden="true" tabindex="-1"></a>    emit_add_imm<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb122-37"><a href="#cb122-37" aria-hidden="true" tabindex="-1"></a>    emit_branch<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="st">&quot;while&quot;</span><span class="op">,</span> n<span class="op">);</span></span>
<span id="cb122-38"><a href="#cb122-38" aria-hidden="true" tabindex="-1"></a>    emit_label<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;end&quot;</span><span class="op">,</span> n<span class="op">);</span></span>
<span id="cb122-39"><a href="#cb122-39" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb122-40"><a href="#cb122-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-41"><a href="#cb122-41" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> contains<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> sub<span class="op">)</span> <span class="op">{</span></span>
<span id="cb122-42"><a href="#cb122-42" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb122-43"><a href="#cb122-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>buf<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span></span>
<span id="cb122-44"><a href="#cb122-44" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">&amp;&amp;</span> buf<span class="op">[</span>i<span class="op">+</span>j<span class="op">]</span> <span class="op">==</span> sub<span class="op">[</span>j<span class="op">])</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb122-45"><a href="#cb122-45" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb122-46"><a href="#cb122-46" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb122-47"><a href="#cb122-47" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb122-48"><a href="#cb122-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb122-49"><a href="#cb122-49" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb122-50"><a href="#cb122-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-51"><a href="#cb122-51" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb122-52"><a href="#cb122-52" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">300</span><span class="op">];</span></span>
<span id="cb122-53"><a href="#cb122-53" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb122-54"><a href="#cb122-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-55"><a href="#cb122-55" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb122-56"><a href="#cb122-56" aria-hidden="true" tabindex="-1"></a>    codegen_while<span class="op">(</span>buf<span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb122-57"><a href="#cb122-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-58"><a href="#cb122-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;.Lwhile_2:&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb122-59"><a href="#cb122-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;CMP R0, R1&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb122-60"><a href="#cb122-60" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BGE .Lend_2&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb122-61"><a href="#cb122-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;B .Lwhile_2&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb122-62"><a href="#cb122-62" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;.Lend_2:&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb122-63"><a href="#cb122-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-64"><a href="#cb122-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb122-65"><a href="#cb122-65" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.18" id="prologue-et-Ã©pilogue"><span class="header-section-number">1.4.18</span> 6.1 Prologue et
Ã‰pilogue</h3>
<div class="sourceCode" id="cb123"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> strlen<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>i<span class="op">])</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="cf">return</span> i<span class="op">;</span> <span class="op">}</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> strlen<span class="op">(</span>buf<span class="op">);</span> <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>j<span class="op">])</span> <span class="op">{</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> s<span class="op">[</span>j<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb123-6"><a href="#cb123-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-7"><a href="#cb123-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_prologue<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> name<span class="op">)</span> <span class="op">{</span></span>
<span id="cb123-8"><a href="#cb123-8" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> name<span class="op">);</span></span>
<span id="cb123-9"><a href="#cb123-9" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;:</span><span class="sc">\\</span><span class="st">n    STR LR, [SP, #-4]!</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb123-10"><a href="#cb123-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb123-11"><a href="#cb123-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-12"><a href="#cb123-12" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_epilogue<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">)</span> <span class="op">{</span></span>
<span id="cb123-13"><a href="#cb123-13" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;    LDR LR, [SP], #4</span><span class="sc">\\</span><span class="st">n    BX LR</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb123-14"><a href="#cb123-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb123-15"><a href="#cb123-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-16"><a href="#cb123-16" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> contains<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> sub<span class="op">)</span> <span class="op">{</span></span>
<span id="cb123-17"><a href="#cb123-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb123-18"><a href="#cb123-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>buf<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span></span>
<span id="cb123-19"><a href="#cb123-19" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">&amp;&amp;</span> buf<span class="op">[</span>i<span class="op">+</span>j<span class="op">]</span> <span class="op">==</span> sub<span class="op">[</span>j<span class="op">])</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb123-20"><a href="#cb123-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb123-21"><a href="#cb123-21" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb123-22"><a href="#cb123-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb123-23"><a href="#cb123-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb123-24"><a href="#cb123-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb123-25"><a href="#cb123-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-26"><a href="#cb123-26" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb123-27"><a href="#cb123-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">200</span><span class="op">];</span></span>
<span id="cb123-28"><a href="#cb123-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb123-29"><a href="#cb123-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-30"><a href="#cb123-30" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb123-31"><a href="#cb123-31" aria-hidden="true" tabindex="-1"></a>    emit_prologue<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;add&quot;</span><span class="op">);</span></span>
<span id="cb123-32"><a href="#cb123-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;add:&quot;</span><span class="op">)</span> <span class="op">&amp;&amp;</span> contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;STR LR&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb123-33"><a href="#cb123-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-34"><a href="#cb123-34" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb123-35"><a href="#cb123-35" aria-hidden="true" tabindex="-1"></a>    emit_epilogue<span class="op">(</span>buf<span class="op">);</span></span>
<span id="cb123-36"><a href="#cb123-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;LDR LR&quot;</span><span class="op">)</span> <span class="op">&amp;&amp;</span> contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BX LR&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb123-37"><a href="#cb123-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-38"><a href="#cb123-38" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb123-39"><a href="#cb123-39" aria-hidden="true" tabindex="-1"></a>    emit_prologue<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;main&quot;</span><span class="op">);</span></span>
<span id="cb123-40"><a href="#cb123-40" aria-hidden="true" tabindex="-1"></a>    emit_epilogue<span class="op">(</span>buf<span class="op">);</span></span>
<span id="cb123-41"><a href="#cb123-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;main:&quot;</span><span class="op">)</span> <span class="op">&amp;&amp;</span> contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BX LR&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb123-42"><a href="#cb123-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-43"><a href="#cb123-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb123-44"><a href="#cb123-44" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.19" id="appels-de-fonction"><span class="header-section-number">1.4.19</span> 6.2 Appels de Fonction</h3>
<div class="sourceCode" id="cb124"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> strlen<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>i<span class="op">])</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="cf">return</span> i<span class="op">;</span> <span class="op">}</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> strlen<span class="op">(</span>buf<span class="op">);</span> <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>j<span class="op">])</span> <span class="op">{</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> s<span class="op">[</span>j<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb124-5"><a href="#cb124-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb124-6"><a href="#cb124-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb124-7"><a href="#cb124-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;0&quot;</span><span class="op">);</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb124-8"><a href="#cb124-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tmp<span class="op">[</span><span class="dv">12</span><span class="op">];</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">11</span><span class="op">;</span> tmp<span class="op">[</span><span class="dv">11</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb124-9"><a href="#cb124-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> i <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;0&#39;</span> <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span> n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb124-10"><a href="#cb124-10" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> tmp <span class="op">+</span> i<span class="op">);</span></span>
<span id="cb124-11"><a href="#cb124-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb124-12"><a href="#cb124-12" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_mov<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">,</span> <span class="dt">int</span> val<span class="op">)</span> <span class="op">{</span></span>
<span id="cb124-13"><a href="#cb124-13" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span></span>
<span id="cb124-14"><a href="#cb124-14" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, #&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> val<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb124-15"><a href="#cb124-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb124-16"><a href="#cb124-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-17"><a href="#cb124-17" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_call<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> name<span class="op">)</span> <span class="op">{</span></span>
<span id="cb124-18"><a href="#cb124-18" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BL &quot;</span><span class="op">);</span></span>
<span id="cb124-19"><a href="#cb124-19" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> name<span class="op">);</span></span>
<span id="cb124-20"><a href="#cb124-20" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb124-21"><a href="#cb124-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb124-22"><a href="#cb124-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-23"><a href="#cb124-23" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> contains<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> sub<span class="op">)</span> <span class="op">{</span></span>
<span id="cb124-24"><a href="#cb124-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb124-25"><a href="#cb124-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>buf<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span></span>
<span id="cb124-26"><a href="#cb124-26" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">&amp;&amp;</span> buf<span class="op">[</span>i<span class="op">+</span>j<span class="op">]</span> <span class="op">==</span> sub<span class="op">[</span>j<span class="op">])</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb124-27"><a href="#cb124-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb124-28"><a href="#cb124-28" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb124-29"><a href="#cb124-29" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb124-30"><a href="#cb124-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb124-31"><a href="#cb124-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb124-32"><a href="#cb124-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-33"><a href="#cb124-33" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb124-34"><a href="#cb124-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">200</span><span class="op">];</span></span>
<span id="cb124-35"><a href="#cb124-35" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb124-36"><a href="#cb124-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-37"><a href="#cb124-37" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb124-38"><a href="#cb124-38" aria-hidden="true" tabindex="-1"></a>    emit_call<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;putchar&quot;</span><span class="op">);</span></span>
<span id="cb124-39"><a href="#cb124-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BL putchar&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb124-40"><a href="#cb124-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-41"><a href="#cb124-41" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb124-42"><a href="#cb124-42" aria-hidden="true" tabindex="-1"></a>    emit_mov<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">65</span><span class="op">);</span></span>
<span id="cb124-43"><a href="#cb124-43" aria-hidden="true" tabindex="-1"></a>    emit_call<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;putchar&quot;</span><span class="op">);</span></span>
<span id="cb124-44"><a href="#cb124-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R0, #65&quot;</span><span class="op">)</span> <span class="op">&amp;&amp;</span> contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BL putchar&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb124-45"><a href="#cb124-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-46"><a href="#cb124-46" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb124-47"><a href="#cb124-47" aria-hidden="true" tabindex="-1"></a>    emit_mov<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb124-48"><a href="#cb124-48" aria-hidden="true" tabindex="-1"></a>    emit_mov<span class="op">(</span>buf<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb124-49"><a href="#cb124-49" aria-hidden="true" tabindex="-1"></a>    emit_call<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;add&quot;</span><span class="op">);</span></span>
<span id="cb124-50"><a href="#cb124-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R0, #3&quot;</span><span class="op">)</span> <span class="op">&amp;&amp;</span> contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R1, #5&quot;</span><span class="op">)</span> <span class="op">&amp;&amp;</span></span>
<span id="cb124-51"><a href="#cb124-51" aria-hidden="true" tabindex="-1"></a>        contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BL add&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb124-52"><a href="#cb124-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-53"><a href="#cb124-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb124-54"><a href="#cb124-54" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.20" id="mini-compilateur-complet"><span class="header-section-number">1.4.20</span> 7.1 Mini-Compilateur
Complet</h3>
<div class="sourceCode" id="cb125"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="co">// === UTILITAIRES ===</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> strlen<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>i<span class="op">])</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="cf">return</span> i<span class="op">;</span> <span class="op">}</span></span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> strlen<span class="op">(</span>buf<span class="op">);</span> <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>j<span class="op">])</span> <span class="op">{</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> s<span class="op">[</span>j<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb125-7"><a href="#cb125-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb125-8"><a href="#cb125-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;0&quot;</span><span class="op">);</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb125-9"><a href="#cb125-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tmp<span class="op">[</span><span class="dv">12</span><span class="op">];</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">11</span><span class="op">;</span> tmp<span class="op">[</span><span class="dv">11</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb125-10"><a href="#cb125-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> i <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;0&#39;</span> <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span> n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb125-11"><a href="#cb125-11" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> tmp <span class="op">+</span> i<span class="op">);</span></span>
<span id="cb125-12"><a href="#cb125-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb125-13"><a href="#cb125-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-14"><a href="#cb125-14" aria-hidden="true" tabindex="-1"></a><span class="co">// === Ã‰METTEURS ===</span></span>
<span id="cb125-15"><a href="#cb125-15" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_mov<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">,</span> <span class="dt">int</span> val<span class="op">)</span> <span class="op">{</span></span>
<span id="cb125-16"><a href="#cb125-16" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span></span>
<span id="cb125-17"><a href="#cb125-17" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, #&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> val<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb125-18"><a href="#cb125-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb125-19"><a href="#cb125-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_push<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">)</span> <span class="op">{</span></span>
<span id="cb125-20"><a href="#cb125-20" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;STR R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, [SP, #-4]!</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb125-21"><a href="#cb125-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb125-22"><a href="#cb125-22" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_pop<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">)</span> <span class="op">{</span></span>
<span id="cb125-23"><a href="#cb125-23" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;LDR R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, [SP], #4</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb125-24"><a href="#cb125-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb125-25"><a href="#cb125-25" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_op<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span> op<span class="op">,</span> <span class="dt">int</span> rd<span class="op">,</span> <span class="dt">int</span> rn<span class="op">,</span> <span class="dt">int</span> rm<span class="op">)</span> <span class="op">{</span></span>
<span id="cb125-26"><a href="#cb125-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;+&#39;</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;ADD R&quot;</span><span class="op">);</span></span>
<span id="cb125-27"><a href="#cb125-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;-&#39;</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;SUB R&quot;</span><span class="op">);</span></span>
<span id="cb125-28"><a href="#cb125-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;*&#39;</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MUL R&quot;</span><span class="op">);</span></span>
<span id="cb125-29"><a href="#cb125-29" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> rd<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> rn<span class="op">);</span></span>
<span id="cb125-30"><a href="#cb125-30" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> rm<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb125-31"><a href="#cb125-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb125-32"><a href="#cb125-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-33"><a href="#cb125-33" aria-hidden="true" tabindex="-1"></a><span class="co">// === PARSER + CODEGEN ===</span></span>
<span id="cb125-34"><a href="#cb125-34" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_digit<span class="op">(</span><span class="dt">char</span> c<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> c <span class="op">&gt;=</span> <span class="ch">&#39;0&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;9&#39;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb125-35"><a href="#cb125-35" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> input<span class="op">;</span></span>
<span id="cb125-36"><a href="#cb125-36" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> pos<span class="op">;</span></span>
<span id="cb125-37"><a href="#cb125-37" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> out<span class="op">;</span></span>
<span id="cb125-38"><a href="#cb125-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-39"><a href="#cb125-39" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> skip<span class="op">()</span> <span class="op">{</span> <span class="cf">while</span> <span class="op">(</span>input<span class="op">[</span>pos<span class="op">]</span> <span class="op">==</span> <span class="ch">&#39; &#39;</span><span class="op">)</span> pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb125-40"><a href="#cb125-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-41"><a href="#cb125-41" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> codegen_expr<span class="op">();</span></span>
<span id="cb125-42"><a href="#cb125-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-43"><a href="#cb125-43" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> codegen_factor<span class="op">()</span> <span class="op">{</span></span>
<span id="cb125-44"><a href="#cb125-44" aria-hidden="true" tabindex="-1"></a>    skip<span class="op">();</span></span>
<span id="cb125-45"><a href="#cb125-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>input<span class="op">[</span>pos<span class="op">]</span> <span class="op">==</span> <span class="ch">&#39;(&#39;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb125-46"><a href="#cb125-46" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb125-47"><a href="#cb125-47" aria-hidden="true" tabindex="-1"></a>        codegen_expr<span class="op">();</span></span>
<span id="cb125-48"><a href="#cb125-48" aria-hidden="true" tabindex="-1"></a>        skip<span class="op">();</span></span>
<span id="cb125-49"><a href="#cb125-49" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span>  <span class="co">// &#39;)&#39;</span></span>
<span id="cb125-50"><a href="#cb125-50" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb125-51"><a href="#cb125-51" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> v <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb125-52"><a href="#cb125-52" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>is_digit<span class="op">(</span>input<span class="op">[</span>pos<span class="op">]))</span> <span class="op">{</span></span>
<span id="cb125-53"><a href="#cb125-53" aria-hidden="true" tabindex="-1"></a>            v <span class="op">=</span> v <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> <span class="op">(</span>input<span class="op">[</span>pos<span class="op">]</span> <span class="op">-</span> <span class="ch">&#39;0&#39;</span><span class="op">);</span></span>
<span id="cb125-54"><a href="#cb125-54" aria-hidden="true" tabindex="-1"></a>            pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb125-55"><a href="#cb125-55" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb125-56"><a href="#cb125-56" aria-hidden="true" tabindex="-1"></a>        emit_mov<span class="op">(</span>out<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> v<span class="op">);</span></span>
<span id="cb125-57"><a href="#cb125-57" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb125-58"><a href="#cb125-58" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb125-59"><a href="#cb125-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-60"><a href="#cb125-60" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> codegen_term<span class="op">()</span> <span class="op">{</span></span>
<span id="cb125-61"><a href="#cb125-61" aria-hidden="true" tabindex="-1"></a>    codegen_factor<span class="op">();</span></span>
<span id="cb125-62"><a href="#cb125-62" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb125-63"><a href="#cb125-63" aria-hidden="true" tabindex="-1"></a>        skip<span class="op">();</span></span>
<span id="cb125-64"><a href="#cb125-64" aria-hidden="true" tabindex="-1"></a>        <span class="dt">char</span> op <span class="op">=</span> input<span class="op">[</span>pos<span class="op">];</span></span>
<span id="cb125-65"><a href="#cb125-65" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op <span class="op">!=</span> <span class="ch">&#39;*&#39;</span> <span class="op">&amp;&amp;</span> op <span class="op">!=</span> <span class="ch">&#39;/&#39;</span><span class="op">)</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb125-66"><a href="#cb125-66" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb125-67"><a href="#cb125-67" aria-hidden="true" tabindex="-1"></a>        emit_push<span class="op">(</span>out<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb125-68"><a href="#cb125-68" aria-hidden="true" tabindex="-1"></a>        codegen_factor<span class="op">();</span></span>
<span id="cb125-69"><a href="#cb125-69" aria-hidden="true" tabindex="-1"></a>        emit_pop<span class="op">(</span>out<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb125-70"><a href="#cb125-70" aria-hidden="true" tabindex="-1"></a>        emit_op<span class="op">(</span>out<span class="op">,</span> op<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb125-71"><a href="#cb125-71" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb125-72"><a href="#cb125-72" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb125-73"><a href="#cb125-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-74"><a href="#cb125-74" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> codegen_expr<span class="op">()</span> <span class="op">{</span></span>
<span id="cb125-75"><a href="#cb125-75" aria-hidden="true" tabindex="-1"></a>    codegen_term<span class="op">();</span></span>
<span id="cb125-76"><a href="#cb125-76" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb125-77"><a href="#cb125-77" aria-hidden="true" tabindex="-1"></a>        skip<span class="op">();</span></span>
<span id="cb125-78"><a href="#cb125-78" aria-hidden="true" tabindex="-1"></a>        <span class="dt">char</span> op <span class="op">=</span> input<span class="op">[</span>pos<span class="op">];</span></span>
<span id="cb125-79"><a href="#cb125-79" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op <span class="op">!=</span> <span class="ch">&#39;+&#39;</span> <span class="op">&amp;&amp;</span> op <span class="op">!=</span> <span class="ch">&#39;-&#39;</span><span class="op">)</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb125-80"><a href="#cb125-80" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb125-81"><a href="#cb125-81" aria-hidden="true" tabindex="-1"></a>        emit_push<span class="op">(</span>out<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb125-82"><a href="#cb125-82" aria-hidden="true" tabindex="-1"></a>        codegen_term<span class="op">();</span></span>
<span id="cb125-83"><a href="#cb125-83" aria-hidden="true" tabindex="-1"></a>        emit_pop<span class="op">(</span>out<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb125-84"><a href="#cb125-84" aria-hidden="true" tabindex="-1"></a>        emit_op<span class="op">(</span>out<span class="op">,</span> op<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb125-85"><a href="#cb125-85" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb125-86"><a href="#cb125-86" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb125-87"><a href="#cb125-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-88"><a href="#cb125-88" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> compile<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> src<span class="op">)</span> <span class="op">{</span></span>
<span id="cb125-89"><a href="#cb125-89" aria-hidden="true" tabindex="-1"></a>    out <span class="op">=</span> buf<span class="op">;</span> input <span class="op">=</span> src<span class="op">;</span> pos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb125-90"><a href="#cb125-90" aria-hidden="true" tabindex="-1"></a>    codegen_expr<span class="op">();</span></span>
<span id="cb125-91"><a href="#cb125-91" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb125-92"><a href="#cb125-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-93"><a href="#cb125-93" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> contains<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> sub<span class="op">)</span> <span class="op">{</span></span>
<span id="cb125-94"><a href="#cb125-94" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb125-95"><a href="#cb125-95" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>buf<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span></span>
<span id="cb125-96"><a href="#cb125-96" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">&amp;&amp;</span> buf<span class="op">[</span>i<span class="op">+</span>j<span class="op">]</span> <span class="op">==</span> sub<span class="op">[</span>j<span class="op">])</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb125-97"><a href="#cb125-97" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb125-98"><a href="#cb125-98" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb125-99"><a href="#cb125-99" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb125-100"><a href="#cb125-100" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb125-101"><a href="#cb125-101" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb125-102"><a href="#cb125-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-103"><a href="#cb125-103" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> count<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> sub<span class="op">)</span> <span class="op">{</span></span>
<span id="cb125-104"><a href="#cb125-104" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> c <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb125-105"><a href="#cb125-105" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>buf<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span></span>
<span id="cb125-106"><a href="#cb125-106" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">&amp;&amp;</span> buf<span class="op">[</span>i<span class="op">+</span>j<span class="op">]</span> <span class="op">==</span> sub<span class="op">[</span>j<span class="op">])</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb125-107"><a href="#cb125-107" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> c <span class="op">=</span> c <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb125-108"><a href="#cb125-108" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb125-109"><a href="#cb125-109" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb125-110"><a href="#cb125-110" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> c<span class="op">;</span></span>
<span id="cb125-111"><a href="#cb125-111" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb125-112"><a href="#cb125-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-113"><a href="#cb125-113" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb125-114"><a href="#cb125-114" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">500</span><span class="op">];</span></span>
<span id="cb125-115"><a href="#cb125-115" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb125-116"><a href="#cb125-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-117"><a href="#cb125-117" aria-hidden="true" tabindex="-1"></a>    compile<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;42&quot;</span><span class="op">);</span></span>
<span id="cb125-118"><a href="#cb125-118" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R0, #42&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb125-119"><a href="#cb125-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-120"><a href="#cb125-120" aria-hidden="true" tabindex="-1"></a>    compile<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;(5)&quot;</span><span class="op">);</span></span>
<span id="cb125-121"><a href="#cb125-121" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R0, #5&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb125-122"><a href="#cb125-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-123"><a href="#cb125-123" aria-hidden="true" tabindex="-1"></a>    compile<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;2 + 3 * 4&quot;</span><span class="op">);</span></span>
<span id="cb125-124"><a href="#cb125-124" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MUL&quot;</span><span class="op">)</span> <span class="op">&amp;&amp;</span> contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;ADD&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb125-125"><a href="#cb125-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-126"><a href="#cb125-126" aria-hidden="true" tabindex="-1"></a>    compile<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;(2 + 3) * 4&quot;</span><span class="op">);</span></span>
<span id="cb125-127"><a href="#cb125-127" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>count<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;ADD&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> count<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MUL&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb125-128"><a href="#cb125-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-129"><a href="#cb125-129" aria-hidden="true" tabindex="-1"></a>    compile<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;(1 + 2) * (3 + 4)&quot;</span><span class="op">);</span></span>
<span id="cb125-130"><a href="#cb125-130" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>count<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;ADD&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">2</span> <span class="op">&amp;&amp;</span> count<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MUL&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb125-131"><a href="#cb125-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-132"><a href="#cb125-132" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb125-133"><a href="#cb125-133" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h2 data-number="1.5" id="e.-solutions-systeme-dexploitation"><span class="header-section-number">1.5</span> E. Solutions Systeme
dâ€™Exploitation</h2>
<h3 data-number="1.5.1" id="bootstrap"><span class="header-section-number">1.5.1</span> Bootstrap</h3>
<div class="sourceCode" id="cb126"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Bootstrap - Solution</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> bss_start <span class="op">=</span> <span class="bn">0x00402800</span><span class="op">;</span></span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> bss_end <span class="op">=</span> <span class="bn">0x00403000</span><span class="op">;</span></span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-6"><a href="#cb126-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb126-7"><a href="#cb126-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">42</span><span class="op">;</span></span>
<span id="cb126-8"><a href="#cb126-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb126-9"><a href="#cb126-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-10"><a href="#cb126-10" aria-hidden="true" tabindex="-1"></a><span class="co">// Note: En vrai, _start serait en ASM</span></span>
<span id="cb126-11"><a href="#cb126-11" aria-hidden="true" tabindex="-1"></a><span class="co">// Ici on simule le concept</span></span>
<span id="cb126-12"><a href="#cb126-12" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> _start<span class="op">()</span> <span class="op">{</span></span>
<span id="cb126-13"><a href="#cb126-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> ptr<span class="op">;</span></span>
<span id="cb126-14"><a href="#cb126-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result<span class="op">;</span></span>
<span id="cb126-15"><a href="#cb126-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-16"><a href="#cb126-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Effacer BSS (simulation)</span></span>
<span id="cb126-17"><a href="#cb126-17" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> bss_start<span class="op">;</span></span>
<span id="cb126-18"><a href="#cb126-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>ptr <span class="op">&lt;</span> bss_end<span class="op">)</span> <span class="op">{</span></span>
<span id="cb126-19"><a href="#cb126-19" aria-hidden="true" tabindex="-1"></a>        <span class="co">// En vrai: *((int*)ptr) = 0;</span></span>
<span id="cb126-20"><a href="#cb126-20" aria-hidden="true" tabindex="-1"></a>        ptr <span class="op">=</span> ptr <span class="op">+</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb126-21"><a href="#cb126-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb126-22"><a href="#cb126-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-23"><a href="#cb126-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Appeler main</span></span>
<span id="cb126-24"><a href="#cb126-24" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> main<span class="op">();</span></span>
<span id="cb126-25"><a href="#cb126-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-26"><a href="#cb126-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb126-27"><a href="#cb126-27" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.2" id="bump-allocator"><span class="header-section-number">1.5.2</span> Bump Allocator</h3>
<div class="sourceCode" id="cb127"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Bump Allocator - Solution</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> heap_start <span class="op">=</span> <span class="bn">0x00403000</span><span class="op">;</span></span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> heap_end <span class="op">=</span> <span class="bn">0x00410000</span><span class="op">;</span></span>
<span id="cb127-5"><a href="#cb127-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> next_free <span class="op">=</span> <span class="bn">0x00403000</span><span class="op">;</span></span>
<span id="cb127-6"><a href="#cb127-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-7"><a href="#cb127-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> bump_alloc<span class="op">(</span><span class="dt">int</span> size<span class="op">)</span> <span class="op">{</span></span>
<span id="cb127-8"><a href="#cb127-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> addr<span class="op">;</span></span>
<span id="cb127-9"><a href="#cb127-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-10"><a href="#cb127-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// VÃ©rifier qu&#39;il reste de la place</span></span>
<span id="cb127-11"><a href="#cb127-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>next_free <span class="op">+</span> size <span class="op">&gt;</span> heap_end<span class="op">)</span> <span class="op">{</span></span>
<span id="cb127-12"><a href="#cb127-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb127-13"><a href="#cb127-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb127-14"><a href="#cb127-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-15"><a href="#cb127-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Sauvegarder l&#39;adresse actuelle</span></span>
<span id="cb127-16"><a href="#cb127-16" aria-hidden="true" tabindex="-1"></a>    addr <span class="op">=</span> next_free<span class="op">;</span></span>
<span id="cb127-17"><a href="#cb127-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-18"><a href="#cb127-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Avancer le pointeur</span></span>
<span id="cb127-19"><a href="#cb127-19" aria-hidden="true" tabindex="-1"></a>    next_free <span class="op">=</span> next_free <span class="op">+</span> size<span class="op">;</span></span>
<span id="cb127-20"><a href="#cb127-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-21"><a href="#cb127-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> addr<span class="op">;</span></span>
<span id="cb127-22"><a href="#cb127-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb127-23"><a href="#cb127-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-24"><a href="#cb127-24" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb127-25"><a href="#cb127-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> ptr1<span class="op">;</span></span>
<span id="cb127-26"><a href="#cb127-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> ptr2<span class="op">;</span></span>
<span id="cb127-27"><a href="#cb127-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-28"><a href="#cb127-28" aria-hidden="true" tabindex="-1"></a>    ptr1 <span class="op">=</span> bump_alloc<span class="op">(</span><span class="dv">100</span><span class="op">);</span></span>
<span id="cb127-29"><a href="#cb127-29" aria-hidden="true" tabindex="-1"></a>    ptr2 <span class="op">=</span> bump_alloc<span class="op">(</span><span class="dv">200</span><span class="op">);</span></span>
<span id="cb127-30"><a href="#cb127-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-31"><a href="#cb127-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> ptr2 <span class="op">-</span> ptr1<span class="op">;</span></span>
<span id="cb127-32"><a href="#cb127-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.3" id="free-list"><span class="header-section-number">1.5.3</span> Free List</h3>
<div class="sourceCode" id="cb128"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Free List - Solution simplifiÃ©e</span></span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Note: Version conceptuelle, pas de vrais pointeurs</span></span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> heap_start <span class="op">=</span> <span class="bn">0x00403000</span><span class="op">;</span></span>
<span id="cb128-5"><a href="#cb128-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> heap_size <span class="op">=</span> <span class="bn">0x1000</span><span class="op">;</span></span>
<span id="cb128-6"><a href="#cb128-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> alloc1 <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb128-7"><a href="#cb128-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> alloc2 <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb128-8"><a href="#cb128-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> freed1 <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb128-9"><a href="#cb128-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-10"><a href="#cb128-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> my_malloc<span class="op">(</span><span class="dt">int</span> size<span class="op">)</span> <span class="op">{</span></span>
<span id="cb128-11"><a href="#cb128-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>alloc1 <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb128-12"><a href="#cb128-12" aria-hidden="true" tabindex="-1"></a>        alloc1 <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb128-13"><a href="#cb128-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> heap_start <span class="op">+</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb128-14"><a href="#cb128-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb128-15"><a href="#cb128-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>alloc2 <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb128-16"><a href="#cb128-16" aria-hidden="true" tabindex="-1"></a>        alloc2 <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb128-17"><a href="#cb128-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> heap_start <span class="op">+</span> <span class="dv">200</span><span class="op">;</span></span>
<span id="cb128-18"><a href="#cb128-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb128-19"><a href="#cb128-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>freed1 <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb128-20"><a href="#cb128-20" aria-hidden="true" tabindex="-1"></a>        freed1 <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb128-21"><a href="#cb128-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> heap_start <span class="op">+</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb128-22"><a href="#cb128-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb128-23"><a href="#cb128-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb128-24"><a href="#cb128-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb128-25"><a href="#cb128-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-26"><a href="#cb128-26" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> my_free<span class="op">(</span><span class="dt">int</span> ptr<span class="op">)</span> <span class="op">{</span></span>
<span id="cb128-27"><a href="#cb128-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>ptr <span class="op">==</span> heap_start <span class="op">+</span> <span class="dv">100</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb128-28"><a href="#cb128-28" aria-hidden="true" tabindex="-1"></a>        freed1 <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb128-29"><a href="#cb128-29" aria-hidden="true" tabindex="-1"></a>        alloc1 <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb128-30"><a href="#cb128-30" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb128-31"><a href="#cb128-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb128-32"><a href="#cb128-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-33"><a href="#cb128-33" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb128-34"><a href="#cb128-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> p1<span class="op">;</span></span>
<span id="cb128-35"><a href="#cb128-35" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> p2<span class="op">;</span></span>
<span id="cb128-36"><a href="#cb128-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> p3<span class="op">;</span></span>
<span id="cb128-37"><a href="#cb128-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-38"><a href="#cb128-38" aria-hidden="true" tabindex="-1"></a>    p1 <span class="op">=</span> my_malloc<span class="op">(</span><span class="dv">50</span><span class="op">);</span></span>
<span id="cb128-39"><a href="#cb128-39" aria-hidden="true" tabindex="-1"></a>    p2 <span class="op">=</span> my_malloc<span class="op">(</span><span class="dv">50</span><span class="op">);</span></span>
<span id="cb128-40"><a href="#cb128-40" aria-hidden="true" tabindex="-1"></a>    my_free<span class="op">(</span>p1<span class="op">);</span></span>
<span id="cb128-41"><a href="#cb128-41" aria-hidden="true" tabindex="-1"></a>    p3 <span class="op">=</span> my_malloc<span class="op">(</span><span class="dv">30</span><span class="op">);</span></span>
<span id="cb128-42"><a href="#cb128-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-43"><a href="#cb128-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>p3 <span class="op">==</span> p1<span class="op">)</span> <span class="op">{</span></span>
<span id="cb128-44"><a href="#cb128-44" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb128-45"><a href="#cb128-45" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb128-46"><a href="#cb128-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb128-47"><a href="#cb128-47" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.4" id="driver-Ã©cran"><span class="header-section-number">1.5.4</span> Driver Ã‰cran</h3>
<div class="sourceCode" id="cb129"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Driver Ã‰cran - Solution (optimisÃ©)</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>SCREEN <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessiner une ligne horizontale (optimisÃ©: un seul calcul de row)</span></span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> hline<span class="op">(</span><span class="dt">int</span> x1<span class="op">,</span> <span class="dt">int</span> x2<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb129-7"><a href="#cb129-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> row_base<span class="op">;</span></span>
<span id="cb129-8"><a href="#cb129-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x<span class="op">;</span></span>
<span id="cb129-9"><a href="#cb129-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> byte_idx<span class="op">;</span></span>
<span id="cb129-10"><a href="#cb129-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb129-11"><a href="#cb129-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb129-12"><a href="#cb129-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> val<span class="op">;</span></span>
<span id="cb129-13"><a href="#cb129-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-14"><a href="#cb129-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">// y * 10 calculÃ© une seule fois</span></span>
<span id="cb129-15"><a href="#cb129-15" aria-hidden="true" tabindex="-1"></a>    row_base <span class="op">=</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">);</span>  <span class="co">// y*8 + y*2 = y*10</span></span>
<span id="cb129-16"><a href="#cb129-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-17"><a href="#cb129-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>x <span class="op">=</span> x1<span class="op">;</span> x <span class="op">&lt;=</span> x2<span class="op">;</span> x <span class="op">=</span> x <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb129-18"><a href="#cb129-18" aria-hidden="true" tabindex="-1"></a>        ptr <span class="op">=</span> SCREEN <span class="op">+</span> row_base <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb129-19"><a href="#cb129-19" aria-hidden="true" tabindex="-1"></a>        byte_idx <span class="op">=</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb129-20"><a href="#cb129-20" aria-hidden="true" tabindex="-1"></a>        bit_pos <span class="op">=</span> byte_idx <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb129-21"><a href="#cb129-21" aria-hidden="true" tabindex="-1"></a>        val <span class="op">=</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb129-22"><a href="#cb129-22" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>ptr <span class="op">=</span> val <span class="op">|</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">);</span></span>
<span id="cb129-23"><a href="#cb129-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb129-24"><a href="#cb129-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb129-25"><a href="#cb129-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-26"><a href="#cb129-26" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessiner une ligne verticale</span></span>
<span id="cb129-27"><a href="#cb129-27" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> vline<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y1<span class="op">,</span> <span class="dt">int</span> y2<span class="op">)</span> <span class="op">{</span></span>
<span id="cb129-28"><a href="#cb129-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> y<span class="op">;</span></span>
<span id="cb129-29"><a href="#cb129-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> row_base<span class="op">;</span></span>
<span id="cb129-30"><a href="#cb129-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> byte_idx<span class="op">;</span></span>
<span id="cb129-31"><a href="#cb129-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb129-32"><a href="#cb129-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb129-33"><a href="#cb129-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> val<span class="op">;</span></span>
<span id="cb129-34"><a href="#cb129-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> mask<span class="op">;</span></span>
<span id="cb129-35"><a href="#cb129-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-36"><a href="#cb129-36" aria-hidden="true" tabindex="-1"></a>    byte_idx <span class="op">=</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb129-37"><a href="#cb129-37" aria-hidden="true" tabindex="-1"></a>    bit_pos <span class="op">=</span> byte_idx <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb129-38"><a href="#cb129-38" aria-hidden="true" tabindex="-1"></a>    mask <span class="op">=</span> <span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">;</span></span>
<span id="cb129-39"><a href="#cb129-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-40"><a href="#cb129-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>y <span class="op">=</span> y1<span class="op">;</span> y <span class="op">&lt;=</span> y2<span class="op">;</span> y <span class="op">=</span> y <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb129-41"><a href="#cb129-41" aria-hidden="true" tabindex="-1"></a>        row_base <span class="op">=</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb129-42"><a href="#cb129-42" aria-hidden="true" tabindex="-1"></a>        ptr <span class="op">=</span> SCREEN <span class="op">+</span> row_base <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb129-43"><a href="#cb129-43" aria-hidden="true" tabindex="-1"></a>        val <span class="op">=</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb129-44"><a href="#cb129-44" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>ptr <span class="op">=</span> val <span class="op">|</span> mask<span class="op">;</span></span>
<span id="cb129-45"><a href="#cb129-45" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb129-46"><a href="#cb129-46" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb129-47"><a href="#cb129-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-48"><a href="#cb129-48" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb129-49"><a href="#cb129-49" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Dessiner les 4 coins</span></span>
<span id="cb129-50"><a href="#cb129-50" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb129-51"><a href="#cb129-51" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN<span class="op">;</span></span>
<span id="cb129-52"><a href="#cb129-52" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="bn">0xE0E0E0</span><span class="op">;</span>           <span class="co">// Coin haut-gauche (3x3)</span></span>
<span id="cb129-53"><a href="#cb129-53" aria-hidden="true" tabindex="-1"></a>    <span class="op">*(</span>ptr <span class="op">+</span> <span class="dv">10</span><span class="op">)</span> <span class="op">=</span> <span class="bn">0xE0E0E0</span><span class="op">;</span></span>
<span id="cb129-54"><a href="#cb129-54" aria-hidden="true" tabindex="-1"></a>    <span class="op">*(</span>ptr <span class="op">+</span> <span class="dv">20</span><span class="op">)</span> <span class="op">=</span> <span class="bn">0xE0E0E0</span><span class="op">;</span></span>
<span id="cb129-55"><a href="#cb129-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-56"><a href="#cb129-56" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="dv">9</span><span class="op">;</span></span>
<span id="cb129-57"><a href="#cb129-57" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="bn">0x07070700</span><span class="op">;</span>         <span class="co">// Coin haut-droit</span></span>
<span id="cb129-58"><a href="#cb129-58" aria-hidden="true" tabindex="-1"></a>    <span class="op">*(</span>ptr <span class="op">+</span> <span class="dv">10</span><span class="op">)</span> <span class="op">=</span> <span class="bn">0x07070700</span><span class="op">;</span></span>
<span id="cb129-59"><a href="#cb129-59" aria-hidden="true" tabindex="-1"></a>    <span class="op">*(</span>ptr <span class="op">+</span> <span class="dv">20</span><span class="op">)</span> <span class="op">=</span> <span class="bn">0x07070700</span><span class="op">;</span></span>
<span id="cb129-60"><a href="#cb129-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-61"><a href="#cb129-61" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="dv">2370</span><span class="op">;</span>       <span class="co">// Ligne 237</span></span>
<span id="cb129-62"><a href="#cb129-62" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="bn">0xE0E0E0</span><span class="op">;</span>           <span class="co">// Coin bas-gauche</span></span>
<span id="cb129-63"><a href="#cb129-63" aria-hidden="true" tabindex="-1"></a>    <span class="op">*(</span>ptr <span class="op">+</span> <span class="dv">10</span><span class="op">)</span> <span class="op">=</span> <span class="bn">0xE0E0E0</span><span class="op">;</span></span>
<span id="cb129-64"><a href="#cb129-64" aria-hidden="true" tabindex="-1"></a>    <span class="op">*(</span>ptr <span class="op">+</span> <span class="dv">20</span><span class="op">)</span> <span class="op">=</span> <span class="bn">0xE0E0E0</span><span class="op">;</span></span>
<span id="cb129-65"><a href="#cb129-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-66"><a href="#cb129-66" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="dv">2379</span><span class="op">;</span></span>
<span id="cb129-67"><a href="#cb129-67" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="bn">0x07070700</span><span class="op">;</span>         <span class="co">// Coin bas-droit</span></span>
<span id="cb129-68"><a href="#cb129-68" aria-hidden="true" tabindex="-1"></a>    <span class="op">*(</span>ptr <span class="op">+</span> <span class="dv">10</span><span class="op">)</span> <span class="op">=</span> <span class="bn">0x07070700</span><span class="op">;</span></span>
<span id="cb129-69"><a href="#cb129-69" aria-hidden="true" tabindex="-1"></a>    <span class="op">*(</span>ptr <span class="op">+</span> <span class="dv">20</span><span class="op">)</span> <span class="op">=</span> <span class="bn">0x07070700</span><span class="op">;</span></span>
<span id="cb129-70"><a href="#cb129-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-71"><a href="#cb129-71" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Croix au centre</span></span>
<span id="cb129-72"><a href="#cb129-72" aria-hidden="true" tabindex="-1"></a>    hline<span class="op">(</span><span class="dv">120</span><span class="op">,</span> <span class="dv">200</span><span class="op">,</span> <span class="dv">120</span><span class="op">);</span>      <span class="co">// Ligne horizontale</span></span>
<span id="cb129-73"><a href="#cb129-73" aria-hidden="true" tabindex="-1"></a>    vline<span class="op">(</span><span class="dv">160</span><span class="op">,</span> <span class="dv">80</span><span class="op">,</span> <span class="dv">160</span><span class="op">);</span>       <span class="co">// Ligne verticale</span></span>
<span id="cb129-74"><a href="#cb129-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-75"><a href="#cb129-75" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb129-76"><a href="#cb129-76" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.5" id="police-bitmap"><span class="header-section-number">1.5.5</span> Police Bitmap</h3>
<div class="sourceCode" id="cb130"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Police Bitmap - Solution (affichage rÃ©el)</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a><span class="co">//</span></span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a><span class="co">// Table des caractÃ¨res ASCII 8x8 (hex: ligne0-ligne7)</span></span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a><span class="co">// ====================================================</span></span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39; &#39; (32): 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00</span></span>
<span id="cb130-6"><a href="#cb130-6" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;!&#39; (33): 0x18,0x18,0x18,0x18,0x18,0x00,0x18,0x00</span></span>
<span id="cb130-7"><a href="#cb130-7" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;&quot;&#39; (34): 0x6C,0x6C,0x00,0x00,0x00,0x00,0x00,0x00</span></span>
<span id="cb130-8"><a href="#cb130-8" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;#&#39; (35): 0x24,0x7E,0x24,0x24,0x7E,0x24,0x00,0x00</span></span>
<span id="cb130-9"><a href="#cb130-9" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;$&#39; (36): 0x18,0x3E,0x58,0x3C,0x1A,0x7C,0x18,0x00</span></span>
<span id="cb130-10"><a href="#cb130-10" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;%&#39; (37): 0x62,0x64,0x08,0x10,0x26,0x46,0x00,0x00</span></span>
<span id="cb130-11"><a href="#cb130-11" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;&amp;&#39; (38): 0x30,0x48,0x30,0x56,0x88,0x76,0x00,0x00</span></span>
<span id="cb130-12"><a href="#cb130-12" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;&#39;&#39; (39): 0x18,0x18,0x30,0x00,0x00,0x00,0x00,0x00</span></span>
<span id="cb130-13"><a href="#cb130-13" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;(&#39; (40): 0x0C,0x18,0x30,0x30,0x30,0x18,0x0C,0x00</span></span>
<span id="cb130-14"><a href="#cb130-14" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;)&#39; (41): 0x30,0x18,0x0C,0x0C,0x0C,0x18,0x30,0x00</span></span>
<span id="cb130-15"><a href="#cb130-15" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;*&#39; (42): 0x00,0x24,0x18,0x7E,0x18,0x24,0x00,0x00</span></span>
<span id="cb130-16"><a href="#cb130-16" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;+&#39; (43): 0x00,0x18,0x18,0x7E,0x18,0x18,0x00,0x00</span></span>
<span id="cb130-17"><a href="#cb130-17" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;,&#39; (44): 0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x30</span></span>
<span id="cb130-18"><a href="#cb130-18" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;-&#39; (45): 0x00,0x00,0x00,0x7E,0x00,0x00,0x00,0x00</span></span>
<span id="cb130-19"><a href="#cb130-19" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;.&#39; (46): 0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x00</span></span>
<span id="cb130-20"><a href="#cb130-20" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;/&#39; (47): 0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x00</span></span>
<span id="cb130-21"><a href="#cb130-21" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;0&#39; (48): 0x3C,0x46,0x4A,0x52,0x62,0x3C,0x00,0x00</span></span>
<span id="cb130-22"><a href="#cb130-22" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;1&#39; (49): 0x18,0x38,0x18,0x18,0x18,0x3C,0x00,0x00</span></span>
<span id="cb130-23"><a href="#cb130-23" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;2&#39; (50): 0x3C,0x42,0x02,0x1C,0x20,0x7E,0x00,0x00</span></span>
<span id="cb130-24"><a href="#cb130-24" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;3&#39; (51): 0x3C,0x42,0x0C,0x02,0x42,0x3C,0x00,0x00</span></span>
<span id="cb130-25"><a href="#cb130-25" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;4&#39; (52): 0x04,0x0C,0x14,0x24,0x7E,0x04,0x00,0x00</span></span>
<span id="cb130-26"><a href="#cb130-26" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;5&#39; (53): 0x7E,0x40,0x7C,0x02,0x42,0x3C,0x00,0x00</span></span>
<span id="cb130-27"><a href="#cb130-27" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;6&#39; (54): 0x1C,0x20,0x7C,0x42,0x42,0x3C,0x00,0x00</span></span>
<span id="cb130-28"><a href="#cb130-28" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;7&#39; (55): 0x7E,0x02,0x04,0x08,0x10,0x10,0x00,0x00</span></span>
<span id="cb130-29"><a href="#cb130-29" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;8&#39; (56): 0x3C,0x42,0x3C,0x42,0x42,0x3C,0x00,0x00</span></span>
<span id="cb130-30"><a href="#cb130-30" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;9&#39; (57): 0x3C,0x42,0x42,0x3E,0x04,0x38,0x00,0x00</span></span>
<span id="cb130-31"><a href="#cb130-31" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;:&#39; (58): 0x00,0x18,0x18,0x00,0x18,0x18,0x00,0x00</span></span>
<span id="cb130-32"><a href="#cb130-32" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;;&#39; (59): 0x00,0x18,0x18,0x00,0x18,0x18,0x30,0x00</span></span>
<span id="cb130-33"><a href="#cb130-33" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;&lt;&#39; (60): 0x06,0x18,0x60,0x60,0x18,0x06,0x00,0x00</span></span>
<span id="cb130-34"><a href="#cb130-34" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;=&#39; (61): 0x00,0x00,0x7E,0x00,0x7E,0x00,0x00,0x00</span></span>
<span id="cb130-35"><a href="#cb130-35" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;&gt;&#39; (62): 0x60,0x18,0x06,0x06,0x18,0x60,0x00,0x00</span></span>
<span id="cb130-36"><a href="#cb130-36" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;?&#39; (63): 0x3C,0x42,0x04,0x08,0x00,0x08,0x00,0x00</span></span>
<span id="cb130-37"><a href="#cb130-37" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;@&#39; (64): 0x3C,0x42,0x5E,0x5E,0x40,0x3C,0x00,0x00</span></span>
<span id="cb130-38"><a href="#cb130-38" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;A&#39; (65): 0x18,0x24,0x42,0x7E,0x42,0x42,0x42,0x00</span></span>
<span id="cb130-39"><a href="#cb130-39" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;B&#39; (66): 0x7C,0x42,0x7C,0x42,0x42,0x7C,0x00,0x00</span></span>
<span id="cb130-40"><a href="#cb130-40" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;C&#39; (67): 0x3C,0x42,0x40,0x40,0x42,0x3C,0x00,0x00</span></span>
<span id="cb130-41"><a href="#cb130-41" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;D&#39; (68): 0x78,0x44,0x42,0x42,0x44,0x78,0x00,0x00</span></span>
<span id="cb130-42"><a href="#cb130-42" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;E&#39; (69): 0x7E,0x40,0x7C,0x40,0x40,0x7E,0x00,0x00</span></span>
<span id="cb130-43"><a href="#cb130-43" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;F&#39; (70): 0x7E,0x40,0x7C,0x40,0x40,0x40,0x00,0x00</span></span>
<span id="cb130-44"><a href="#cb130-44" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;G&#39; (71): 0x3C,0x42,0x40,0x4E,0x42,0x3C,0x00,0x00</span></span>
<span id="cb130-45"><a href="#cb130-45" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;H&#39; (72): 0x42,0x42,0x7E,0x42,0x42,0x42,0x00,0x00</span></span>
<span id="cb130-46"><a href="#cb130-46" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;I&#39; (73): 0x3E,0x08,0x08,0x08,0x08,0x3E,0x00,0x00</span></span>
<span id="cb130-47"><a href="#cb130-47" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;J&#39; (74): 0x1E,0x04,0x04,0x04,0x44,0x38,0x00,0x00</span></span>
<span id="cb130-48"><a href="#cb130-48" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;K&#39; (75): 0x42,0x44,0x78,0x48,0x44,0x42,0x00,0x00</span></span>
<span id="cb130-49"><a href="#cb130-49" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;L&#39; (76): 0x40,0x40,0x40,0x40,0x40,0x7E,0x00,0x00</span></span>
<span id="cb130-50"><a href="#cb130-50" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;M&#39; (77): 0x42,0x66,0x5A,0x42,0x42,0x42,0x00,0x00</span></span>
<span id="cb130-51"><a href="#cb130-51" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;N&#39; (78): 0x42,0x62,0x52,0x4A,0x46,0x42,0x00,0x00</span></span>
<span id="cb130-52"><a href="#cb130-52" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;O&#39; (79): 0x3C,0x42,0x42,0x42,0x42,0x3C,0x00,0x00</span></span>
<span id="cb130-53"><a href="#cb130-53" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;P&#39; (80): 0x7C,0x42,0x7C,0x40,0x40,0x40,0x00,0x00</span></span>
<span id="cb130-54"><a href="#cb130-54" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;Q&#39; (81): 0x3C,0x42,0x42,0x4A,0x44,0x3A,0x00,0x00</span></span>
<span id="cb130-55"><a href="#cb130-55" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;R&#39; (82): 0x7C,0x42,0x7C,0x48,0x44,0x42,0x00,0x00</span></span>
<span id="cb130-56"><a href="#cb130-56" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;S&#39; (83): 0x3C,0x40,0x3C,0x02,0x42,0x3C,0x00,0x00</span></span>
<span id="cb130-57"><a href="#cb130-57" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;T&#39; (84): 0x7E,0x18,0x18,0x18,0x18,0x18,0x00,0x00</span></span>
<span id="cb130-58"><a href="#cb130-58" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;U&#39; (85): 0x42,0x42,0x42,0x42,0x42,0x3C,0x00,0x00</span></span>
<span id="cb130-59"><a href="#cb130-59" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;V&#39; (86): 0x42,0x42,0x42,0x42,0x24,0x18,0x00,0x00</span></span>
<span id="cb130-60"><a href="#cb130-60" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;W&#39; (87): 0x42,0x42,0x42,0x5A,0x66,0x42,0x00,0x00</span></span>
<span id="cb130-61"><a href="#cb130-61" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;X&#39; (88): 0x42,0x24,0x18,0x18,0x24,0x42,0x00,0x00</span></span>
<span id="cb130-62"><a href="#cb130-62" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;Y&#39; (89): 0x42,0x42,0x24,0x18,0x18,0x18,0x00,0x00</span></span>
<span id="cb130-63"><a href="#cb130-63" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;Z&#39; (90): 0x7E,0x04,0x08,0x10,0x20,0x7E,0x00,0x00</span></span>
<span id="cb130-64"><a href="#cb130-64" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;[&#39; (91): 0x3C,0x30,0x30,0x30,0x30,0x3C,0x00,0x00</span></span>
<span id="cb130-65"><a href="#cb130-65" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;\\&#39; (92): 0x80,0x40,0x20,0x10,0x08,0x04,0x02,0x00</span></span>
<span id="cb130-66"><a href="#cb130-66" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;]&#39; (93): 0x3C,0x0C,0x0C,0x0C,0x0C,0x3C,0x00,0x00</span></span>
<span id="cb130-67"><a href="#cb130-67" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;^&#39; (94): 0x18,0x24,0x00,0x00,0x00,0x00,0x00,0x00</span></span>
<span id="cb130-68"><a href="#cb130-68" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;_&#39; (95): 0x00,0x00,0x00,0x00,0x00,0x00,0x7E,0x00</span></span>
<span id="cb130-69"><a href="#cb130-69" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;a&#39; (97): 0x00,0x3C,0x02,0x3E,0x42,0x3E,0x00,0x00</span></span>
<span id="cb130-70"><a href="#cb130-70" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;b&#39; (98): 0x40,0x40,0x7C,0x42,0x42,0x7C,0x00,0x00</span></span>
<span id="cb130-71"><a href="#cb130-71" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;c&#39; (99): 0x00,0x3C,0x40,0x40,0x40,0x3C,0x00,0x00</span></span>
<span id="cb130-72"><a href="#cb130-72" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;d&#39;(100): 0x02,0x02,0x3E,0x42,0x42,0x3E,0x00,0x00</span></span>
<span id="cb130-73"><a href="#cb130-73" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;e&#39;(101): 0x00,0x3C,0x42,0x7E,0x40,0x3C,0x00,0x00</span></span>
<span id="cb130-74"><a href="#cb130-74" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;f&#39;(102): 0x0C,0x10,0x3C,0x10,0x10,0x10,0x00,0x00</span></span>
<span id="cb130-75"><a href="#cb130-75" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;g&#39;(103): 0x00,0x3E,0x42,0x3E,0x02,0x3C,0x00,0x00</span></span>
<span id="cb130-76"><a href="#cb130-76" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;h&#39;(104): 0x40,0x40,0x7C,0x42,0x42,0x42,0x00,0x00</span></span>
<span id="cb130-77"><a href="#cb130-77" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;i&#39;(105): 0x18,0x00,0x38,0x18,0x18,0x3C,0x00,0x00</span></span>
<span id="cb130-78"><a href="#cb130-78" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;j&#39;(106): 0x04,0x00,0x04,0x04,0x04,0x44,0x38,0x00</span></span>
<span id="cb130-79"><a href="#cb130-79" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;k&#39;(107): 0x40,0x44,0x48,0x70,0x48,0x44,0x00,0x00</span></span>
<span id="cb130-80"><a href="#cb130-80" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;l&#39;(108): 0x38,0x18,0x18,0x18,0x18,0x3C,0x00,0x00</span></span>
<span id="cb130-81"><a href="#cb130-81" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;m&#39;(109): 0x00,0x76,0x5A,0x5A,0x42,0x42,0x00,0x00</span></span>
<span id="cb130-82"><a href="#cb130-82" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;n&#39;(110): 0x00,0x7C,0x42,0x42,0x42,0x42,0x00,0x00</span></span>
<span id="cb130-83"><a href="#cb130-83" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;o&#39;(111): 0x00,0x3C,0x42,0x42,0x42,0x3C,0x00,0x00</span></span>
<span id="cb130-84"><a href="#cb130-84" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;p&#39;(112): 0x00,0x7C,0x42,0x7C,0x40,0x40,0x00,0x00</span></span>
<span id="cb130-85"><a href="#cb130-85" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;q&#39;(113): 0x00,0x3E,0x42,0x3E,0x02,0x02,0x00,0x00</span></span>
<span id="cb130-86"><a href="#cb130-86" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;r&#39;(114): 0x00,0x5C,0x60,0x40,0x40,0x40,0x00,0x00</span></span>
<span id="cb130-87"><a href="#cb130-87" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;s&#39;(115): 0x00,0x3E,0x40,0x3C,0x02,0x7C,0x00,0x00</span></span>
<span id="cb130-88"><a href="#cb130-88" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;t&#39;(116): 0x10,0x3C,0x10,0x10,0x10,0x0C,0x00,0x00</span></span>
<span id="cb130-89"><a href="#cb130-89" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;u&#39;(117): 0x00,0x42,0x42,0x42,0x42,0x3E,0x00,0x00</span></span>
<span id="cb130-90"><a href="#cb130-90" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;v&#39;(118): 0x00,0x42,0x42,0x42,0x24,0x18,0x00,0x00</span></span>
<span id="cb130-91"><a href="#cb130-91" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;w&#39;(119): 0x00,0x42,0x42,0x5A,0x5A,0x66,0x00,0x00</span></span>
<span id="cb130-92"><a href="#cb130-92" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;x&#39;(120): 0x00,0x42,0x24,0x18,0x24,0x42,0x00,0x00</span></span>
<span id="cb130-93"><a href="#cb130-93" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;y&#39;(121): 0x00,0x42,0x42,0x3E,0x02,0x3C,0x00,0x00</span></span>
<span id="cb130-94"><a href="#cb130-94" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;z&#39;(122): 0x00,0x7E,0x04,0x18,0x20,0x7E,0x00,0x00</span></span>
<span id="cb130-95"><a href="#cb130-95" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;{&#39;(123): 0x0E,0x18,0x30,0x18,0x18,0x0E,0x00,0x00</span></span>
<span id="cb130-96"><a href="#cb130-96" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;|&#39;(124): 0x18,0x18,0x18,0x18,0x18,0x18,0x00,0x00</span></span>
<span id="cb130-97"><a href="#cb130-97" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;}&#39;(125): 0x70,0x18,0x0C,0x18,0x18,0x70,0x00,0x00</span></span>
<span id="cb130-98"><a href="#cb130-98" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;~&#39;(126): 0x00,0x32,0x4C,0x00,0x00,0x00,0x00,0x00</span></span>
<span id="cb130-99"><a href="#cb130-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-100"><a href="#cb130-100" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>SCREEN <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb130-101"><a href="#cb130-101" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> pixels_drawn <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb130-102"><a href="#cb130-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-103"><a href="#cb130-103" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_pixel<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb130-104"><a href="#cb130-104" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> row_base<span class="op">;</span></span>
<span id="cb130-105"><a href="#cb130-105" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> byte_idx<span class="op">;</span></span>
<span id="cb130-106"><a href="#cb130-106" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb130-107"><a href="#cb130-107" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb130-108"><a href="#cb130-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-109"><a href="#cb130-109" aria-hidden="true" tabindex="-1"></a>    row_base <span class="op">=</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">);</span>  <span class="co">// y * 10</span></span>
<span id="cb130-110"><a href="#cb130-110" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> row_base <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb130-111"><a href="#cb130-111" aria-hidden="true" tabindex="-1"></a>    byte_idx <span class="op">=</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb130-112"><a href="#cb130-112" aria-hidden="true" tabindex="-1"></a>    bit_pos <span class="op">=</span> byte_idx <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb130-113"><a href="#cb130-113" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">|</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">);</span></span>
<span id="cb130-114"><a href="#cb130-114" aria-hidden="true" tabindex="-1"></a>    pixels_drawn <span class="op">=</span> pixels_drawn <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb130-115"><a href="#cb130-115" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb130-116"><a href="#cb130-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-117"><a href="#cb130-117" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_line<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> line_data<span class="op">)</span> <span class="op">{</span></span>
<span id="cb130-118"><a href="#cb130-118" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> bit<span class="op">;</span></span>
<span id="cb130-119"><a href="#cb130-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-120"><a href="#cb130-120" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>bit <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> bit <span class="op">&lt;</span> <span class="dv">8</span><span class="op">;</span> bit <span class="op">=</span> bit <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb130-121"><a href="#cb130-121" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">((</span>line_data <span class="op">&gt;&gt;</span> <span class="op">(</span><span class="dv">7</span> <span class="op">-</span> bit<span class="op">))</span> <span class="op">&amp;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb130-122"><a href="#cb130-122" aria-hidden="true" tabindex="-1"></a>            set_pixel<span class="op">(</span>x <span class="op">+</span> bit<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb130-123"><a href="#cb130-123" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb130-124"><a href="#cb130-124" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb130-125"><a href="#cb130-125" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb130-126"><a href="#cb130-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-127"><a href="#cb130-127" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_char<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> line0<span class="op">,</span> <span class="dt">int</span> line1<span class="op">,</span> <span class="dt">int</span> line2<span class="op">,</span> <span class="dt">int</span> line3<span class="op">,</span></span>
<span id="cb130-128"><a href="#cb130-128" aria-hidden="true" tabindex="-1"></a>               <span class="dt">int</span> line4<span class="op">,</span> <span class="dt">int</span> line5<span class="op">,</span> <span class="dt">int</span> line6<span class="op">,</span> <span class="dt">int</span> line7<span class="op">)</span> <span class="op">{</span></span>
<span id="cb130-129"><a href="#cb130-129" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> line0<span class="op">);</span></span>
<span id="cb130-130"><a href="#cb130-130" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> line1<span class="op">);</span></span>
<span id="cb130-131"><a href="#cb130-131" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> line2<span class="op">);</span></span>
<span id="cb130-132"><a href="#cb130-132" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> line3<span class="op">);</span></span>
<span id="cb130-133"><a href="#cb130-133" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> line4<span class="op">);</span></span>
<span id="cb130-134"><a href="#cb130-134" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">5</span><span class="op">,</span> line5<span class="op">);</span></span>
<span id="cb130-135"><a href="#cb130-135" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">6</span><span class="op">,</span> line6<span class="op">);</span></span>
<span id="cb130-136"><a href="#cb130-136" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">7</span><span class="op">,</span> line7<span class="op">);</span></span>
<span id="cb130-137"><a href="#cb130-137" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb130-138"><a href="#cb130-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-139"><a href="#cb130-139" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb130-140"><a href="#cb130-140" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Dessiner &quot;HI&quot; en grand (position centrale)</span></span>
<span id="cb130-141"><a href="#cb130-141" aria-hidden="true" tabindex="-1"></a>    <span class="co">// H: lignes verticales + barre horizontale</span></span>
<span id="cb130-142"><a href="#cb130-142" aria-hidden="true" tabindex="-1"></a>    draw_char<span class="op">(</span><span class="dv">100</span><span class="op">,</span> <span class="dv">100</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">,</span> <span class="bn">0x7E</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">,</span> <span class="bn">0x00</span><span class="op">);</span></span>
<span id="cb130-143"><a href="#cb130-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-144"><a href="#cb130-144" aria-hidden="true" tabindex="-1"></a>    <span class="co">// I: barre verticale centrÃ©e</span></span>
<span id="cb130-145"><a href="#cb130-145" aria-hidden="true" tabindex="-1"></a>    draw_char<span class="op">(</span><span class="dv">112</span><span class="op">,</span> <span class="dv">100</span><span class="op">,</span> <span class="bn">0x3E</span><span class="op">,</span> <span class="bn">0x08</span><span class="op">,</span> <span class="bn">0x08</span><span class="op">,</span> <span class="bn">0x08</span><span class="op">,</span> <span class="bn">0x08</span><span class="op">,</span> <span class="bn">0x08</span><span class="op">,</span> <span class="bn">0x3E</span><span class="op">,</span> <span class="bn">0x00</span><span class="op">);</span></span>
<span id="cb130-146"><a href="#cb130-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-147"><a href="#cb130-147" aria-hidden="true" tabindex="-1"></a>    <span class="co">// A</span></span>
<span id="cb130-148"><a href="#cb130-148" aria-hidden="true" tabindex="-1"></a>    draw_char<span class="op">(</span><span class="dv">124</span><span class="op">,</span> <span class="dv">100</span><span class="op">,</span> <span class="bn">0x18</span><span class="op">,</span> <span class="bn">0x24</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">,</span> <span class="bn">0x7E</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">,</span> <span class="bn">0x00</span><span class="op">);</span></span>
<span id="cb130-149"><a href="#cb130-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-150"><a href="#cb130-150" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pixels_drawn<span class="op">;</span></span>
<span id="cb130-151"><a href="#cb130-151" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.6" id="console"><span class="header-section-number">1.5.6</span> Console</h3>
<div class="sourceCode" id="cb131"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Console - Solution (affichage rÃ©el optimisÃ©)</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>SCREEN <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> cursor_x <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> cursor_y <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb131-6"><a href="#cb131-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-7"><a href="#cb131-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_pixel<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb131-8"><a href="#cb131-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> row_base<span class="op">;</span></span>
<span id="cb131-9"><a href="#cb131-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb131-10"><a href="#cb131-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb131-11"><a href="#cb131-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-12"><a href="#cb131-12" aria-hidden="true" tabindex="-1"></a>    row_base <span class="op">=</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb131-13"><a href="#cb131-13" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> row_base <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb131-14"><a href="#cb131-14" aria-hidden="true" tabindex="-1"></a>    bit_pos <span class="op">=</span> <span class="op">((</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb131-15"><a href="#cb131-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">|</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">);</span></span>
<span id="cb131-16"><a href="#cb131-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb131-17"><a href="#cb131-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-18"><a href="#cb131-18" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine une ligne de 8 pixels</span></span>
<span id="cb131-19"><a href="#cb131-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_line<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> data<span class="op">)</span> <span class="op">{</span></span>
<span id="cb131-20"><a href="#cb131-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x80</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb131-21"><a href="#cb131-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x40</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb131-22"><a href="#cb131-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x20</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb131-23"><a href="#cb131-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x10</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb131-24"><a href="#cb131-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x08</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb131-25"><a href="#cb131-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x04</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">5</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb131-26"><a href="#cb131-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x02</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">6</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb131-27"><a href="#cb131-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x01</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">7</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb131-28"><a href="#cb131-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb131-29"><a href="#cb131-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-30"><a href="#cb131-30" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine H Ã  (x, y)</span></span>
<span id="cb131-31"><a href="#cb131-31" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_H<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb131-32"><a href="#cb131-32" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb131-33"><a href="#cb131-33" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb131-34"><a href="#cb131-34" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x7E</span><span class="op">);</span></span>
<span id="cb131-35"><a href="#cb131-35" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb131-36"><a href="#cb131-36" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb131-37"><a href="#cb131-37" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb131-38"><a href="#cb131-38" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb131-39"><a href="#cb131-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-40"><a href="#cb131-40" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine e Ã  (x, y)</span></span>
<span id="cb131-41"><a href="#cb131-41" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_e<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb131-42"><a href="#cb131-42" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span></span>
<span id="cb131-43"><a href="#cb131-43" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb131-44"><a href="#cb131-44" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x7E</span><span class="op">);</span></span>
<span id="cb131-45"><a href="#cb131-45" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x40</span><span class="op">);</span></span>
<span id="cb131-46"><a href="#cb131-46" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">6</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span></span>
<span id="cb131-47"><a href="#cb131-47" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb131-48"><a href="#cb131-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-49"><a href="#cb131-49" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine l Ã  (x, y)</span></span>
<span id="cb131-50"><a href="#cb131-50" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_l<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb131-51"><a href="#cb131-51" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> <span class="bn">0x38</span><span class="op">);</span></span>
<span id="cb131-52"><a href="#cb131-52" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x18</span><span class="op">);</span></span>
<span id="cb131-53"><a href="#cb131-53" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x18</span><span class="op">);</span></span>
<span id="cb131-54"><a href="#cb131-54" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x18</span><span class="op">);</span></span>
<span id="cb131-55"><a href="#cb131-55" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x18</span><span class="op">);</span></span>
<span id="cb131-56"><a href="#cb131-56" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span></span>
<span id="cb131-57"><a href="#cb131-57" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb131-58"><a href="#cb131-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-59"><a href="#cb131-59" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine o Ã  (x, y)</span></span>
<span id="cb131-60"><a href="#cb131-60" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_o<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb131-61"><a href="#cb131-61" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span></span>
<span id="cb131-62"><a href="#cb131-62" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb131-63"><a href="#cb131-63" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb131-64"><a href="#cb131-64" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb131-65"><a href="#cb131-65" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">6</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span></span>
<span id="cb131-66"><a href="#cb131-66" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb131-67"><a href="#cb131-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-68"><a href="#cb131-68" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine W Ã  (x, y)</span></span>
<span id="cb131-69"><a href="#cb131-69" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_W<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb131-70"><a href="#cb131-70" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb131-71"><a href="#cb131-71" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb131-72"><a href="#cb131-72" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb131-73"><a href="#cb131-73" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x5A</span><span class="op">);</span></span>
<span id="cb131-74"><a href="#cb131-74" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x66</span><span class="op">);</span></span>
<span id="cb131-75"><a href="#cb131-75" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb131-76"><a href="#cb131-76" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb131-77"><a href="#cb131-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-78"><a href="#cb131-78" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine r Ã  (x, y)</span></span>
<span id="cb131-79"><a href="#cb131-79" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_r<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb131-80"><a href="#cb131-80" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x5C</span><span class="op">);</span></span>
<span id="cb131-81"><a href="#cb131-81" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x60</span><span class="op">);</span></span>
<span id="cb131-82"><a href="#cb131-82" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x40</span><span class="op">);</span></span>
<span id="cb131-83"><a href="#cb131-83" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x40</span><span class="op">);</span></span>
<span id="cb131-84"><a href="#cb131-84" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">6</span><span class="op">,</span> <span class="bn">0x40</span><span class="op">);</span></span>
<span id="cb131-85"><a href="#cb131-85" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb131-86"><a href="#cb131-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-87"><a href="#cb131-87" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine d Ã  (x, y)</span></span>
<span id="cb131-88"><a href="#cb131-88" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_d<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb131-89"><a href="#cb131-89" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> <span class="bn">0x02</span><span class="op">);</span></span>
<span id="cb131-90"><a href="#cb131-90" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x02</span><span class="op">);</span></span>
<span id="cb131-91"><a href="#cb131-91" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x3E</span><span class="op">);</span></span>
<span id="cb131-92"><a href="#cb131-92" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb131-93"><a href="#cb131-93" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb131-94"><a href="#cb131-94" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x3E</span><span class="op">);</span></span>
<span id="cb131-95"><a href="#cb131-95" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb131-96"><a href="#cb131-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-97"><a href="#cb131-97" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb131-98"><a href="#cb131-98" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Hello (ligne 0, y=0)</span></span>
<span id="cb131-99"><a href="#cb131-99" aria-hidden="true" tabindex="-1"></a>    draw_H<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb131-100"><a href="#cb131-100" aria-hidden="true" tabindex="-1"></a>    draw_e<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb131-101"><a href="#cb131-101" aria-hidden="true" tabindex="-1"></a>    draw_l<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb131-102"><a href="#cb131-102" aria-hidden="true" tabindex="-1"></a>    draw_l<span class="op">(</span><span class="dv">24</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb131-103"><a href="#cb131-103" aria-hidden="true" tabindex="-1"></a>    draw_o<span class="op">(</span><span class="dv">32</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb131-104"><a href="#cb131-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-105"><a href="#cb131-105" aria-hidden="true" tabindex="-1"></a>    <span class="co">// World (ligne 1, y=8)</span></span>
<span id="cb131-106"><a href="#cb131-106" aria-hidden="true" tabindex="-1"></a>    draw_W<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb131-107"><a href="#cb131-107" aria-hidden="true" tabindex="-1"></a>    draw_o<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb131-108"><a href="#cb131-108" aria-hidden="true" tabindex="-1"></a>    draw_r<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb131-109"><a href="#cb131-109" aria-hidden="true" tabindex="-1"></a>    draw_l<span class="op">(</span><span class="dv">24</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb131-110"><a href="#cb131-110" aria-hidden="true" tabindex="-1"></a>    draw_d<span class="op">(</span><span class="dv">32</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb131-111"><a href="#cb131-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-112"><a href="#cb131-112" aria-hidden="true" tabindex="-1"></a>    cursor_y <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb131-113"><a href="#cb131-113" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> cursor_y<span class="op">;</span></span>
<span id="cb131-114"><a href="#cb131-114" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.7" id="driver-clavier"><span class="header-section-number">1.5.7</span> Driver Clavier</h3>
<div class="sourceCode" id="cb132"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Driver Clavier - Solution Interactive</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Activez &quot;Capturer clavier&quot; et appuyez sur des touches!</span></span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>SCREEN <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>KEYBOARD <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00402600</span><span class="op">;</span></span>
<span id="cb132-6"><a href="#cb132-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> key_count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb132-7"><a href="#cb132-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> cursor_x <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb132-8"><a href="#cb132-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-9"><a href="#cb132-9" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_pixel<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb132-10"><a href="#cb132-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> row_base<span class="op">;</span></span>
<span id="cb132-11"><a href="#cb132-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb132-12"><a href="#cb132-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb132-13"><a href="#cb132-13" aria-hidden="true" tabindex="-1"></a>    row_base <span class="op">=</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb132-14"><a href="#cb132-14" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> row_base <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb132-15"><a href="#cb132-15" aria-hidden="true" tabindex="-1"></a>    bit_pos <span class="op">=</span> <span class="op">((</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb132-16"><a href="#cb132-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">|</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">);</span></span>
<span id="cb132-17"><a href="#cb132-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb132-18"><a href="#cb132-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-19"><a href="#cb132-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_line<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> data<span class="op">)</span> <span class="op">{</span></span>
<span id="cb132-20"><a href="#cb132-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x80</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb132-21"><a href="#cb132-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x40</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb132-22"><a href="#cb132-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x20</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb132-23"><a href="#cb132-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x10</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb132-24"><a href="#cb132-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x08</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb132-25"><a href="#cb132-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x04</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">5</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb132-26"><a href="#cb132-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x02</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">6</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb132-27"><a href="#cb132-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x01</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">7</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb132-28"><a href="#cb132-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb132-29"><a href="#cb132-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-30"><a href="#cb132-30" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine un caractÃ¨re gÃ©nÃ©rique (carrÃ© avec le code)</span></span>
<span id="cb132-31"><a href="#cb132-31" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_key<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> key<span class="op">)</span> <span class="op">{</span></span>
<span id="cb132-32"><a href="#cb132-32" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Dessiner un petit carrÃ© pour indiquer la touche</span></span>
<span id="cb132-33"><a href="#cb132-33" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> <span class="bn">0xFF</span><span class="op">);</span></span>
<span id="cb132-34"><a href="#cb132-34" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x81</span><span class="op">);</span></span>
<span id="cb132-35"><a href="#cb132-35" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x81</span><span class="op">);</span></span>
<span id="cb132-36"><a href="#cb132-36" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x81</span><span class="op">);</span></span>
<span id="cb132-37"><a href="#cb132-37" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x81</span><span class="op">);</span></span>
<span id="cb132-38"><a href="#cb132-38" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x81</span><span class="op">);</span></span>
<span id="cb132-39"><a href="#cb132-39" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">6</span><span class="op">,</span> <span class="bn">0x81</span><span class="op">);</span></span>
<span id="cb132-40"><a href="#cb132-40" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">7</span><span class="op">,</span> <span class="bn">0xFF</span><span class="op">);</span></span>
<span id="cb132-41"><a href="#cb132-41" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Afficher une marque au centre basÃ©e sur le code</span></span>
<span id="cb132-42"><a href="#cb132-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>key <span class="op">&amp;</span> <span class="dv">1</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb132-43"><a href="#cb132-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>key <span class="op">&amp;</span> <span class="dv">2</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb132-44"><a href="#cb132-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>key <span class="op">&amp;</span> <span class="dv">4</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb132-45"><a href="#cb132-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>key <span class="op">&amp;</span> <span class="dv">8</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb132-46"><a href="#cb132-46" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb132-47"><a href="#cb132-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-48"><a href="#cb132-48" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> read_key<span class="op">()</span> <span class="op">{</span></span>
<span id="cb132-49"><a href="#cb132-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">*</span>KEYBOARD<span class="op">;</span></span>
<span id="cb132-50"><a href="#cb132-50" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb132-51"><a href="#cb132-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-52"><a href="#cb132-52" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb132-53"><a href="#cb132-53" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> key<span class="op">;</span></span>
<span id="cb132-54"><a href="#cb132-54" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> last_key<span class="op">;</span></span>
<span id="cb132-55"><a href="#cb132-55" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> timeout<span class="op">;</span></span>
<span id="cb132-56"><a href="#cb132-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-57"><a href="#cb132-57" aria-hidden="true" tabindex="-1"></a>    last_key <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb132-58"><a href="#cb132-58" aria-hidden="true" tabindex="-1"></a>    timeout <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb132-59"><a href="#cb132-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-60"><a href="#cb132-60" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Afficher 5 indicateurs en haut</span></span>
<span id="cb132-61"><a href="#cb132-61" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0xFF</span><span class="op">);</span></span>
<span id="cb132-62"><a href="#cb132-62" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="bn">0xFF</span><span class="op">);</span></span>
<span id="cb132-63"><a href="#cb132-63" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0xFF</span><span class="op">);</span></span>
<span id="cb132-64"><a href="#cb132-64" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="bn">0xFF</span><span class="op">);</span></span>
<span id="cb132-65"><a href="#cb132-65" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0xFF</span><span class="op">);</span></span>
<span id="cb132-66"><a href="#cb132-66" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="bn">0xFF</span><span class="op">);</span></span>
<span id="cb132-67"><a href="#cb132-67" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">30</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0xFF</span><span class="op">);</span></span>
<span id="cb132-68"><a href="#cb132-68" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">30</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="bn">0xFF</span><span class="op">);</span></span>
<span id="cb132-69"><a href="#cb132-69" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">40</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0xFF</span><span class="op">);</span></span>
<span id="cb132-70"><a href="#cb132-70" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">40</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="bn">0xFF</span><span class="op">);</span></span>
<span id="cb132-71"><a href="#cb132-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-72"><a href="#cb132-72" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Boucle principale: attendre 5 touches (avec timeout)</span></span>
<span id="cb132-73"><a href="#cb132-73" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>key_count <span class="op">&lt;</span> <span class="dv">5</span> <span class="op">&amp;&amp;</span> timeout <span class="op">&lt;</span> <span class="dv">100000</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb132-74"><a href="#cb132-74" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> read_key<span class="op">();</span></span>
<span id="cb132-75"><a href="#cb132-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-76"><a href="#cb132-76" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Nouvelle touche pressÃ©e?</span></span>
<span id="cb132-77"><a href="#cb132-77" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>key <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> key <span class="op">!=</span> last_key<span class="op">)</span> <span class="op">{</span></span>
<span id="cb132-78"><a href="#cb132-78" aria-hidden="true" tabindex="-1"></a>            draw_key<span class="op">(</span>cursor_x<span class="op">,</span> <span class="dv">16</span><span class="op">,</span> key<span class="op">);</span></span>
<span id="cb132-79"><a href="#cb132-79" aria-hidden="true" tabindex="-1"></a>            cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb132-80"><a href="#cb132-80" aria-hidden="true" tabindex="-1"></a>            key_count <span class="op">=</span> key_count <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb132-81"><a href="#cb132-81" aria-hidden="true" tabindex="-1"></a>            timeout <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>  <span class="co">// Reset timeout quand touche pressÃ©e</span></span>
<span id="cb132-82"><a href="#cb132-82" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb132-83"><a href="#cb132-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-84"><a href="#cb132-84" aria-hidden="true" tabindex="-1"></a>        last_key <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb132-85"><a href="#cb132-85" aria-hidden="true" tabindex="-1"></a>        timeout <span class="op">=</span> timeout <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb132-86"><a href="#cb132-86" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb132-87"><a href="#cb132-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-88"><a href="#cb132-88" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Si timeout atteint sans 5 touches, retourner quand mÃªme key_count</span></span>
<span id="cb132-89"><a href="#cb132-89" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span>  <span class="co">// Test visuel uniquement</span></span>
<span id="cb132-90"><a href="#cb132-90" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.8" id="shell"><span class="header-section-number">1.5.8</span> Shell</h3>
<div class="sourceCode" id="cb133"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Shell Interactif - Solution</span></span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Cochez &quot;Capturer clavier&quot; et tapez des chiffres!</span></span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>SCREEN <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>KEYBOARD <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00402600</span><span class="op">;</span></span>
<span id="cb133-6"><a href="#cb133-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> number <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb133-7"><a href="#cb133-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> cursor_x <span class="op">=</span> <span class="dv">16</span><span class="op">;</span></span>
<span id="cb133-8"><a href="#cb133-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-9"><a href="#cb133-9" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_pixel<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb133-10"><a href="#cb133-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> row_base<span class="op">;</span></span>
<span id="cb133-11"><a href="#cb133-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb133-12"><a href="#cb133-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb133-13"><a href="#cb133-13" aria-hidden="true" tabindex="-1"></a>    row_base <span class="op">=</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb133-14"><a href="#cb133-14" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> row_base <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb133-15"><a href="#cb133-15" aria-hidden="true" tabindex="-1"></a>    bit_pos <span class="op">=</span> <span class="op">((</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb133-16"><a href="#cb133-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">|</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">);</span></span>
<span id="cb133-17"><a href="#cb133-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb133-18"><a href="#cb133-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-19"><a href="#cb133-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_line<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> data<span class="op">)</span> <span class="op">{</span></span>
<span id="cb133-20"><a href="#cb133-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x80</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb133-21"><a href="#cb133-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x40</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb133-22"><a href="#cb133-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x20</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb133-23"><a href="#cb133-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x10</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb133-24"><a href="#cb133-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x08</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb133-25"><a href="#cb133-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x04</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">5</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb133-26"><a href="#cb133-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x02</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">6</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb133-27"><a href="#cb133-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x01</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">7</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb133-28"><a href="#cb133-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb133-29"><a href="#cb133-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-30"><a href="#cb133-30" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine &quot;&gt;&quot; prompt</span></span>
<span id="cb133-31"><a href="#cb133-31" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> show_prompt<span class="op">()</span> <span class="op">{</span></span>
<span id="cb133-32"><a href="#cb133-32" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0x40</span><span class="op">);</span></span>
<span id="cb133-33"><a href="#cb133-33" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x20</span><span class="op">);</span></span>
<span id="cb133-34"><a href="#cb133-34" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x10</span><span class="op">);</span></span>
<span id="cb133-35"><a href="#cb133-35" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x20</span><span class="op">);</span></span>
<span id="cb133-36"><a href="#cb133-36" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x40</span><span class="op">);</span></span>
<span id="cb133-37"><a href="#cb133-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb133-38"><a href="#cb133-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-39"><a href="#cb133-39" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine un chiffre simplifiÃ©</span></span>
<span id="cb133-40"><a href="#cb133-40" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_digit<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> d<span class="op">)</span> <span class="op">{</span></span>
<span id="cb133-41"><a href="#cb133-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb133-42"><a href="#cb133-42" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb133-43"><a href="#cb133-43" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb133-44"><a href="#cb133-44" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span></span>
<span id="cb133-45"><a href="#cb133-45" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb133-46"><a href="#cb133-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb133-47"><a href="#cb133-47" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0x18</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x38</span><span class="op">);</span></span>
<span id="cb133-48"><a href="#cb133-48" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x18</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x18</span><span class="op">);</span></span>
<span id="cb133-49"><a href="#cb133-49" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x18</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span></span>
<span id="cb133-50"><a href="#cb133-50" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb133-51"><a href="#cb133-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb133-52"><a href="#cb133-52" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb133-53"><a href="#cb133-53" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x04</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x18</span><span class="op">);</span></span>
<span id="cb133-54"><a href="#cb133-54" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x20</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x7E</span><span class="op">);</span></span>
<span id="cb133-55"><a href="#cb133-55" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb133-56"><a href="#cb133-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">3</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb133-57"><a href="#cb133-57" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb133-58"><a href="#cb133-58" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x0C</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x02</span><span class="op">);</span></span>
<span id="cb133-59"><a href="#cb133-59" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span></span>
<span id="cb133-60"><a href="#cb133-60" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb133-61"><a href="#cb133-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">4</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb133-62"><a href="#cb133-62" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0x04</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x0C</span><span class="op">);</span></span>
<span id="cb133-63"><a href="#cb133-63" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x14</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x24</span><span class="op">);</span></span>
<span id="cb133-64"><a href="#cb133-64" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x7E</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x04</span><span class="op">);</span></span>
<span id="cb133-65"><a href="#cb133-65" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb133-66"><a href="#cb133-66" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">5</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb133-67"><a href="#cb133-67" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0x7E</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x40</span><span class="op">);</span></span>
<span id="cb133-68"><a href="#cb133-68" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x7C</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x02</span><span class="op">);</span></span>
<span id="cb133-69"><a href="#cb133-69" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span></span>
<span id="cb133-70"><a href="#cb133-70" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb133-71"><a href="#cb133-71" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">6</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb133-72"><a href="#cb133-72" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0x1C</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x20</span><span class="op">);</span></span>
<span id="cb133-73"><a href="#cb133-73" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x7C</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb133-74"><a href="#cb133-74" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span></span>
<span id="cb133-75"><a href="#cb133-75" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb133-76"><a href="#cb133-76" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb133-77"><a href="#cb133-77" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0x7E</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x02</span><span class="op">);</span></span>
<span id="cb133-78"><a href="#cb133-78" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x04</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x08</span><span class="op">);</span></span>
<span id="cb133-79"><a href="#cb133-79" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x10</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x10</span><span class="op">);</span></span>
<span id="cb133-80"><a href="#cb133-80" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb133-81"><a href="#cb133-81" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">8</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb133-82"><a href="#cb133-82" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb133-83"><a href="#cb133-83" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb133-84"><a href="#cb133-84" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span></span>
<span id="cb133-85"><a href="#cb133-85" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb133-86"><a href="#cb133-86" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">9</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb133-87"><a href="#cb133-87" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb133-88"><a href="#cb133-88" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x3E</span><span class="op">);</span></span>
<span id="cb133-89"><a href="#cb133-89" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x04</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x38</span><span class="op">);</span></span>
<span id="cb133-90"><a href="#cb133-90" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb133-91"><a href="#cb133-91" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb133-92"><a href="#cb133-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-93"><a href="#cb133-93" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> read_key<span class="op">()</span> <span class="op">{</span></span>
<span id="cb133-94"><a href="#cb133-94" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">*</span>KEYBOARD<span class="op">;</span></span>
<span id="cb133-95"><a href="#cb133-95" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb133-96"><a href="#cb133-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-97"><a href="#cb133-97" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb133-98"><a href="#cb133-98" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> key<span class="op">;</span></span>
<span id="cb133-99"><a href="#cb133-99" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> last_key<span class="op">;</span></span>
<span id="cb133-100"><a href="#cb133-100" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> timeout<span class="op">;</span></span>
<span id="cb133-101"><a href="#cb133-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-102"><a href="#cb133-102" aria-hidden="true" tabindex="-1"></a>    last_key <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb133-103"><a href="#cb133-103" aria-hidden="true" tabindex="-1"></a>    timeout <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb133-104"><a href="#cb133-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-105"><a href="#cb133-105" aria-hidden="true" tabindex="-1"></a>    show_prompt<span class="op">();</span></span>
<span id="cb133-106"><a href="#cb133-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-107"><a href="#cb133-107" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>timeout <span class="op">&lt;</span> <span class="dv">50000</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb133-108"><a href="#cb133-108" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> read_key<span class="op">();</span></span>
<span id="cb133-109"><a href="#cb133-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-110"><a href="#cb133-110" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>key <span class="op">!=</span> last_key <span class="op">&amp;&amp;</span> key <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb133-111"><a href="#cb133-111" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Esc (27) = quitter</span></span>
<span id="cb133-112"><a href="#cb133-112" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">27</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb133-113"><a href="#cb133-113" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> number<span class="op">;</span></span>
<span id="cb133-114"><a href="#cb133-114" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb133-115"><a href="#cb133-115" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Enter (13) = terminer</span></span>
<span id="cb133-116"><a href="#cb133-116" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">13</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb133-117"><a href="#cb133-117" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> number<span class="op">;</span></span>
<span id="cb133-118"><a href="#cb133-118" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb133-119"><a href="#cb133-119" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Chiffres 0-9 (48-57)</span></span>
<span id="cb133-120"><a href="#cb133-120" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">&gt;=</span> <span class="dv">48</span> <span class="op">&amp;&amp;</span> key <span class="op">&lt;=</span> <span class="dv">57</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb133-121"><a href="#cb133-121" aria-hidden="true" tabindex="-1"></a>                draw_digit<span class="op">(</span>cursor_x<span class="op">,</span> key <span class="op">-</span> <span class="dv">48</span><span class="op">);</span></span>
<span id="cb133-122"><a href="#cb133-122" aria-hidden="true" tabindex="-1"></a>                cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb133-123"><a href="#cb133-123" aria-hidden="true" tabindex="-1"></a>                number <span class="op">=</span> number <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> <span class="op">(</span>key <span class="op">-</span> <span class="dv">48</span><span class="op">);</span></span>
<span id="cb133-124"><a href="#cb133-124" aria-hidden="true" tabindex="-1"></a>                timeout <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb133-125"><a href="#cb133-125" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb133-126"><a href="#cb133-126" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb133-127"><a href="#cb133-127" aria-hidden="true" tabindex="-1"></a>        last_key <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb133-128"><a href="#cb133-128" aria-hidden="true" tabindex="-1"></a>        timeout <span class="op">=</span> timeout <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb133-129"><a href="#cb133-129" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb133-130"><a href="#cb133-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-131"><a href="#cb133-131" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> number<span class="op">;</span></span>
<span id="cb133-132"><a href="#cb133-132" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.9" id="calculatrice"><span class="header-section-number">1.5.9</span> Calculatrice</h3>
<div class="sourceCode" id="cb134"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Calculatrice Interactive - Solution</span></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Cochez &quot;Capturer clavier&quot;, tapez: 3+5 Enter</span></span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>SCREEN <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>KEYBOARD <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00402600</span><span class="op">;</span></span>
<span id="cb134-6"><a href="#cb134-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> cursor_x <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb134-7"><a href="#cb134-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-8"><a href="#cb134-8" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_pixel<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb134-9"><a href="#cb134-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb134-10"><a href="#cb134-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb134-11"><a href="#cb134-11" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb134-12"><a href="#cb134-12" aria-hidden="true" tabindex="-1"></a>    bit_pos <span class="op">=</span> <span class="op">((</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb134-13"><a href="#cb134-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">|</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">);</span></span>
<span id="cb134-14"><a href="#cb134-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb134-15"><a href="#cb134-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-16"><a href="#cb134-16" aria-hidden="true" tabindex="-1"></a><span class="co">// Chiffre 3x5 pixels</span></span>
<span id="cb134-17"><a href="#cb134-17" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_digit<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> d<span class="op">)</span> <span class="op">{</span></span>
<span id="cb134-18"><a href="#cb134-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span> <span class="op">}</span></span>
<span id="cb134-19"><a href="#cb134-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">4</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">5</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">9</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb134-20"><a href="#cb134-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">5</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">6</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb134-21"><a href="#cb134-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb134-22"><a href="#cb134-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">2</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb134-23"><a href="#cb134-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb134-24"><a href="#cb134-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb134-25"><a href="#cb134-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb134-26"><a href="#cb134-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span> <span class="op">}</span></span>
<span id="cb134-27"><a href="#cb134-27" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb134-28"><a href="#cb134-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-29"><a href="#cb134-29" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_plus<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb134-30"><a href="#cb134-30" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb134-31"><a href="#cb134-31" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb134-32"><a href="#cb134-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb134-33"><a href="#cb134-33" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_minus<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb134-34"><a href="#cb134-34" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_times<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb134-35"><a href="#cb134-35" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_equal<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb134-36"><a href="#cb134-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-37"><a href="#cb134-37" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb134-38"><a href="#cb134-38" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> key<span class="op">;</span> <span class="dt">int</span> lk<span class="op">;</span> <span class="dt">int</span> a<span class="op">;</span> <span class="dt">int</span> b<span class="op">;</span> <span class="dt">int</span> op<span class="op">;</span> <span class="dt">int</span> st<span class="op">;</span> <span class="dt">int</span> r<span class="op">;</span> <span class="dt">int</span> t<span class="op">;</span> <span class="dt">int</span> tens<span class="op">;</span> <span class="dt">int</span> u<span class="op">;</span></span>
<span id="cb134-39"><a href="#cb134-39" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> b <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> op <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> st <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> lk <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> t <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb134-40"><a href="#cb134-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-41"><a href="#cb134-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>t <span class="op">&lt;</span> <span class="dv">50000</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb134-42"><a href="#cb134-42" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> <span class="op">*</span>KEYBOARD<span class="op">;</span></span>
<span id="cb134-43"><a href="#cb134-43" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>key <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> key <span class="op">!=</span> lk<span class="op">)</span> <span class="op">{</span></span>
<span id="cb134-44"><a href="#cb134-44" aria-hidden="true" tabindex="-1"></a>            t <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb134-45"><a href="#cb134-45" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">13</span> <span class="op">&amp;&amp;</span> st <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb134-46"><a href="#cb134-46" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> r <span class="op">=</span> a <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb134-47"><a href="#cb134-47" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> r <span class="op">=</span> a <span class="op">-</span> b<span class="op">;</span></span>
<span id="cb134-48"><a href="#cb134-48" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="dv">3</span><span class="op">)</span> r <span class="op">=</span> a <span class="op">*</span> b<span class="op">;</span></span>
<span id="cb134-49"><a href="#cb134-49" aria-hidden="true" tabindex="-1"></a>                draw_equal<span class="op">(</span>cursor_x<span class="op">,</span> <span class="dv">10</span><span class="op">);</span> cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb134-50"><a href="#cb134-50" aria-hidden="true" tabindex="-1"></a>                tens <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> u <span class="op">=</span> r<span class="op">;</span></span>
<span id="cb134-51"><a href="#cb134-51" aria-hidden="true" tabindex="-1"></a>                <span class="cf">while</span> <span class="op">(</span>u <span class="op">&gt;=</span> <span class="dv">10</span><span class="op">)</span> <span class="op">{</span> u <span class="op">=</span> u <span class="op">-</span> <span class="dv">10</span><span class="op">;</span> tens <span class="op">=</span> tens <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb134-52"><a href="#cb134-52" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="op">(</span>tens <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> draw_digit<span class="op">(</span>cursor_x<span class="op">,</span> <span class="dv">10</span><span class="op">,</span> tens<span class="op">);</span> cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">5</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb134-53"><a href="#cb134-53" aria-hidden="true" tabindex="-1"></a>                draw_digit<span class="op">(</span>cursor_x<span class="op">,</span> <span class="dv">10</span><span class="op">,</span> u<span class="op">);</span></span>
<span id="cb134-54"><a href="#cb134-54" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> r<span class="op">;</span></span>
<span id="cb134-55"><a href="#cb134-55" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb134-56"><a href="#cb134-56" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">&gt;=</span> <span class="dv">48</span> <span class="op">&amp;&amp;</span> key <span class="op">&lt;=</span> <span class="dv">57</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb134-57"><a href="#cb134-57" aria-hidden="true" tabindex="-1"></a>                draw_digit<span class="op">(</span>cursor_x<span class="op">,</span> <span class="dv">10</span><span class="op">,</span> key <span class="op">-</span> <span class="dv">48</span><span class="op">);</span></span>
<span id="cb134-58"><a href="#cb134-58" aria-hidden="true" tabindex="-1"></a>                cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb134-59"><a href="#cb134-59" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="op">(</span>st <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> a <span class="op">=</span> key <span class="op">-</span> <span class="dv">48</span><span class="op">;</span> st <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb134-60"><a href="#cb134-60" aria-hidden="true" tabindex="-1"></a>                <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>st <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span> b <span class="op">=</span> key <span class="op">-</span> <span class="dv">48</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb134-61"><a href="#cb134-61" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb134-62"><a href="#cb134-62" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">43</span> <span class="op">&amp;&amp;</span> st <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> draw_plus<span class="op">(</span>cursor_x<span class="op">,</span> <span class="dv">10</span><span class="op">);</span> cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">5</span><span class="op">;</span> op <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> st <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb134-63"><a href="#cb134-63" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">45</span> <span class="op">&amp;&amp;</span> st <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> draw_minus<span class="op">(</span>cursor_x<span class="op">,</span> <span class="dv">10</span><span class="op">);</span> cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">5</span><span class="op">;</span> op <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> st <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb134-64"><a href="#cb134-64" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">42</span> <span class="op">&amp;&amp;</span> st <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> draw_times<span class="op">(</span>cursor_x<span class="op">,</span> <span class="dv">10</span><span class="op">);</span> cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">5</span><span class="op">;</span> op <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> st <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb134-65"><a href="#cb134-65" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb134-66"><a href="#cb134-66" aria-hidden="true" tabindex="-1"></a>        lk <span class="op">=</span> key<span class="op">;</span> t <span class="op">=</span> t <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb134-67"><a href="#cb134-67" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb134-68"><a href="#cb134-68" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb134-69"><a href="#cb134-69" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.10" id="variables-shell"><span class="header-section-number">1.5.10</span> Variables Shell</h3>
<div class="sourceCode" id="cb135"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Variables Shell Interactive - Solution</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Cochez &quot;Capturer clavier&quot;, tapez: a=5 b=3 Enter</span></span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>SCREEN <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb135-5"><a href="#cb135-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>KEYBOARD <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00402600</span><span class="op">;</span></span>
<span id="cb135-6"><a href="#cb135-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> cursor_x <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb135-7"><a href="#cb135-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-8"><a href="#cb135-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> var_names<span class="op">[</span><span class="dv">8</span><span class="op">];</span></span>
<span id="cb135-9"><a href="#cb135-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> var_values<span class="op">[</span><span class="dv">8</span><span class="op">];</span></span>
<span id="cb135-10"><a href="#cb135-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> var_count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb135-11"><a href="#cb135-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-12"><a href="#cb135-12" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_pixel<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb135-13"><a href="#cb135-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb135-14"><a href="#cb135-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb135-15"><a href="#cb135-15" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb135-16"><a href="#cb135-16" aria-hidden="true" tabindex="-1"></a>    bit_pos <span class="op">=</span> <span class="op">((</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb135-17"><a href="#cb135-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">|</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">);</span></span>
<span id="cb135-18"><a href="#cb135-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb135-19"><a href="#cb135-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-20"><a href="#cb135-20" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_char<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> c<span class="op">)</span> <span class="op">{</span></span>
<span id="cb135-21"><a href="#cb135-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb135-22"><a href="#cb135-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Lettre = ligne verticale + petit trait</span></span>
<span id="cb135-23"><a href="#cb135-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">&gt;=</span> <span class="dv">97</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="dv">122</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb135-24"><a href="#cb135-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> i<span class="op">);</span> <span class="op">}</span></span>
<span id="cb135-25"><a href="#cb135-25" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb135-26"><a href="#cb135-26" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> y <span class="op">+</span> <span class="op">(</span>c <span class="op">-</span> <span class="dv">97</span><span class="op">)</span> <span class="op">%</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb135-27"><a href="#cb135-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb135-28"><a href="#cb135-28" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Chiffre 3x5</span></span>
<span id="cb135-29"><a href="#cb135-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">&gt;=</span> <span class="dv">48</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="dv">57</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb135-30"><a href="#cb135-30" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> d<span class="op">;</span></span>
<span id="cb135-31"><a href="#cb135-31" aria-hidden="true" tabindex="-1"></a>        d <span class="op">=</span> c <span class="op">-</span> <span class="dv">48</span><span class="op">;</span></span>
<span id="cb135-32"><a href="#cb135-32" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span> <span class="op">}</span></span>
<span id="cb135-33"><a href="#cb135-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">4</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">5</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">9</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb135-34"><a href="#cb135-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">5</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">6</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb135-35"><a href="#cb135-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb135-36"><a href="#cb135-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">2</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb135-37"><a href="#cb135-37" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb135-38"><a href="#cb135-38" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb135-39"><a href="#cb135-39" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb135-40"><a href="#cb135-40" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb135-41"><a href="#cb135-41" aria-hidden="true" tabindex="-1"></a>    <span class="co">// = sign</span></span>
<span id="cb135-42"><a href="#cb135-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">==</span> <span class="dv">61</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb135-43"><a href="#cb135-43" aria-hidden="true" tabindex="-1"></a>    <span class="co">// + sign</span></span>
<span id="cb135-44"><a href="#cb135-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">==</span> <span class="dv">43</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb135-45"><a href="#cb135-45" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb135-46"><a href="#cb135-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-47"><a href="#cb135-47" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> find_var<span class="op">(</span><span class="dt">int</span> name<span class="op">)</span> <span class="op">{</span></span>
<span id="cb135-48"><a href="#cb135-48" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb135-49"><a href="#cb135-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> var_count<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb135-50"><a href="#cb135-50" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>var_names<span class="op">[</span>i<span class="op">]</span> <span class="op">==</span> name<span class="op">)</span> <span class="cf">return</span> i<span class="op">;</span></span>
<span id="cb135-51"><a href="#cb135-51" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb135-52"><a href="#cb135-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span> <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb135-53"><a href="#cb135-53" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb135-54"><a href="#cb135-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-55"><a href="#cb135-55" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_var<span class="op">(</span><span class="dt">int</span> name<span class="op">,</span> <span class="dt">int</span> value<span class="op">)</span> <span class="op">{</span></span>
<span id="cb135-56"><a href="#cb135-56" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> idx<span class="op">;</span></span>
<span id="cb135-57"><a href="#cb135-57" aria-hidden="true" tabindex="-1"></a>    idx <span class="op">=</span> find_var<span class="op">(</span>name<span class="op">);</span></span>
<span id="cb135-58"><a href="#cb135-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>idx <span class="op">&gt;=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> var_values<span class="op">[</span>idx<span class="op">]</span> <span class="op">=</span> value<span class="op">;</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb135-59"><a href="#cb135-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>var_count <span class="op">&lt;</span> <span class="dv">8</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb135-60"><a href="#cb135-60" aria-hidden="true" tabindex="-1"></a>        var_names<span class="op">[</span>var_count<span class="op">]</span> <span class="op">=</span> name<span class="op">;</span></span>
<span id="cb135-61"><a href="#cb135-61" aria-hidden="true" tabindex="-1"></a>        var_values<span class="op">[</span>var_count<span class="op">]</span> <span class="op">=</span> value<span class="op">;</span></span>
<span id="cb135-62"><a href="#cb135-62" aria-hidden="true" tabindex="-1"></a>        var_count <span class="op">=</span> var_count <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb135-63"><a href="#cb135-63" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb135-64"><a href="#cb135-64" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb135-65"><a href="#cb135-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-66"><a href="#cb135-66" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> get_var<span class="op">(</span><span class="dt">int</span> name<span class="op">)</span> <span class="op">{</span></span>
<span id="cb135-67"><a href="#cb135-67" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> idx<span class="op">;</span></span>
<span id="cb135-68"><a href="#cb135-68" aria-hidden="true" tabindex="-1"></a>    idx <span class="op">=</span> find_var<span class="op">(</span>name<span class="op">);</span></span>
<span id="cb135-69"><a href="#cb135-69" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>idx <span class="op">&gt;=</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> var_values<span class="op">[</span>idx<span class="op">];</span></span>
<span id="cb135-70"><a href="#cb135-70" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb135-71"><a href="#cb135-71" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb135-72"><a href="#cb135-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-73"><a href="#cb135-73" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb135-74"><a href="#cb135-74" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> key<span class="op">;</span> <span class="dt">int</span> lk<span class="op">;</span> <span class="dt">int</span> t<span class="op">;</span> <span class="dt">int</span> st<span class="op">;</span> <span class="dt">int</span> cur_name<span class="op">;</span> <span class="dt">int</span> result<span class="op">;</span></span>
<span id="cb135-75"><a href="#cb135-75" aria-hidden="true" tabindex="-1"></a>    lk <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> t <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> st <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> cur_name <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> result <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb135-76"><a href="#cb135-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-77"><a href="#cb135-77" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>t <span class="op">&lt;</span> <span class="dv">50000</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb135-78"><a href="#cb135-78" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> <span class="op">*</span>KEYBOARD<span class="op">;</span></span>
<span id="cb135-79"><a href="#cb135-79" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>key <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> key <span class="op">!=</span> lk<span class="op">)</span> <span class="op">{</span></span>
<span id="cb135-80"><a href="#cb135-80" aria-hidden="true" tabindex="-1"></a>            t <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb135-81"><a href="#cb135-81" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Enter = calculer rÃ©sultat</span></span>
<span id="cb135-82"><a href="#cb135-82" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">13</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb135-83"><a href="#cb135-83" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="op">(</span>var_count <span class="op">&gt;=</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb135-84"><a href="#cb135-84" aria-hidden="true" tabindex="-1"></a>                    result <span class="op">=</span> var_values<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">+</span> var_values<span class="op">[</span><span class="dv">1</span><span class="op">];</span></span>
<span id="cb135-85"><a href="#cb135-85" aria-hidden="true" tabindex="-1"></a>                    draw_char<span class="op">(</span>cursor_x<span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">61</span><span class="op">);</span> cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb135-86"><a href="#cb135-86" aria-hidden="true" tabindex="-1"></a>                    draw_char<span class="op">(</span>cursor_x<span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">48</span> <span class="op">+</span> result<span class="op">);</span> cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb135-87"><a href="#cb135-87" aria-hidden="true" tabindex="-1"></a>                <span class="op">}</span></span>
<span id="cb135-88"><a href="#cb135-88" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb135-89"><a href="#cb135-89" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb135-90"><a href="#cb135-90" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Lettre a-z</span></span>
<span id="cb135-91"><a href="#cb135-91" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">&gt;=</span> <span class="dv">97</span> <span class="op">&amp;&amp;</span> key <span class="op">&lt;=</span> <span class="dv">122</span> <span class="op">&amp;&amp;</span> st <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb135-92"><a href="#cb135-92" aria-hidden="true" tabindex="-1"></a>                draw_char<span class="op">(</span>cursor_x<span class="op">,</span> <span class="dv">10</span><span class="op">,</span> key<span class="op">);</span> cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb135-93"><a href="#cb135-93" aria-hidden="true" tabindex="-1"></a>                cur_name <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb135-94"><a href="#cb135-94" aria-hidden="true" tabindex="-1"></a>                st <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb135-95"><a href="#cb135-95" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb135-96"><a href="#cb135-96" aria-hidden="true" tabindex="-1"></a>            <span class="co">// = aprÃ¨s lettre</span></span>
<span id="cb135-97"><a href="#cb135-97" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">61</span> <span class="op">&amp;&amp;</span> st <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb135-98"><a href="#cb135-98" aria-hidden="true" tabindex="-1"></a>                draw_char<span class="op">(</span>cursor_x<span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">61</span><span class="op">);</span> cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb135-99"><a href="#cb135-99" aria-hidden="true" tabindex="-1"></a>                st <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb135-100"><a href="#cb135-100" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb135-101"><a href="#cb135-101" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Chiffre aprÃ¨s =</span></span>
<span id="cb135-102"><a href="#cb135-102" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">&gt;=</span> <span class="dv">48</span> <span class="op">&amp;&amp;</span> key <span class="op">&lt;=</span> <span class="dv">57</span> <span class="op">&amp;&amp;</span> st <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb135-103"><a href="#cb135-103" aria-hidden="true" tabindex="-1"></a>                draw_char<span class="op">(</span>cursor_x<span class="op">,</span> <span class="dv">10</span><span class="op">,</span> key<span class="op">);</span> cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb135-104"><a href="#cb135-104" aria-hidden="true" tabindex="-1"></a>                set_var<span class="op">(</span>cur_name<span class="op">,</span> key <span class="op">-</span> <span class="dv">48</span><span class="op">);</span></span>
<span id="cb135-105"><a href="#cb135-105" aria-hidden="true" tabindex="-1"></a>                st <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb135-106"><a href="#cb135-106" aria-hidden="true" tabindex="-1"></a>                cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">3</span><span class="op">;</span> <span class="co">// espace</span></span>
<span id="cb135-107"><a href="#cb135-107" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb135-108"><a href="#cb135-108" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb135-109"><a href="#cb135-109" aria-hidden="true" tabindex="-1"></a>        lk <span class="op">=</span> key<span class="op">;</span> t <span class="op">=</span> t <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb135-110"><a href="#cb135-110" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb135-111"><a href="#cb135-111" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb135-112"><a href="#cb135-112" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.11" id="compte-Ã -rebours"><span class="header-section-number">1.5.11</span> Compte Ã  Rebours</h3>
<div class="sourceCode" id="cb136"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Compte Ã  Rebours Interactif - Solution</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Cochez &quot;Capturer clavier&quot;, tapez 3 pour 3 secondes</span></span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>SCREEN <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb136-5"><a href="#cb136-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>KEYBOARD <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00402600</span><span class="op">;</span></span>
<span id="cb136-6"><a href="#cb136-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-7"><a href="#cb136-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_pixel<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-8"><a href="#cb136-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb136-9"><a href="#cb136-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb136-10"><a href="#cb136-10" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb136-11"><a href="#cb136-11" aria-hidden="true" tabindex="-1"></a>    bit_pos <span class="op">=</span> <span class="op">((</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb136-12"><a href="#cb136-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">|</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">);</span></span>
<span id="cb136-13"><a href="#cb136-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb136-14"><a href="#cb136-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-15"><a href="#cb136-15" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine chiffre 3x5</span></span>
<span id="cb136-16"><a href="#cb136-16" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_digit<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> d<span class="op">,</span> <span class="dt">int</span> on<span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-17"><a href="#cb136-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> j<span class="op">;</span> <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span> <span class="dt">int</span> bit_pos<span class="op">;</span> <span class="dt">int</span> px<span class="op">;</span> <span class="dt">int</span> py<span class="op">;</span></span>
<span id="cb136-18"><a href="#cb136-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Efface d&#39;abord la zone</span></span>
<span id="cb136-19"><a href="#cb136-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-20"><a href="#cb136-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">6</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-21"><a href="#cb136-21" aria-hidden="true" tabindex="-1"></a>            px <span class="op">=</span> x <span class="op">+</span> i<span class="op">;</span> py <span class="op">=</span> y <span class="op">+</span> j<span class="op">;</span></span>
<span id="cb136-22"><a href="#cb136-22" aria-hidden="true" tabindex="-1"></a>            ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>py <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>py <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>px <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb136-23"><a href="#cb136-23" aria-hidden="true" tabindex="-1"></a>            bit_pos <span class="op">=</span> <span class="op">((</span>px <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>px <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb136-24"><a href="#cb136-24" aria-hidden="true" tabindex="-1"></a>            <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">&amp;</span> <span class="op">(</span><span class="bn">0xFFFFFFFF</span> <span class="op">^</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">));</span></span>
<span id="cb136-25"><a href="#cb136-25" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb136-26"><a href="#cb136-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb136-27"><a href="#cb136-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>on <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb136-28"><a href="#cb136-28" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Dessine le chiffre</span></span>
<span id="cb136-29"><a href="#cb136-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span> <span class="op">}</span></span>
<span id="cb136-30"><a href="#cb136-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">4</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">5</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">9</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb136-31"><a href="#cb136-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">5</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">6</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb136-32"><a href="#cb136-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb136-33"><a href="#cb136-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">2</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb136-34"><a href="#cb136-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb136-35"><a href="#cb136-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb136-36"><a href="#cb136-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb136-37"><a href="#cb136-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb136-38"><a href="#cb136-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-39"><a href="#cb136-39" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine barre horizontale</span></span>
<span id="cb136-40"><a href="#cb136-40" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_hbar<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-41"><a href="#cb136-41" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> j<span class="op">;</span></span>
<span id="cb136-42"><a href="#cb136-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-43"><a href="#cb136-43" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-44"><a href="#cb136-44" aria-hidden="true" tabindex="-1"></a>            set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y <span class="op">+</span> j<span class="op">);</span></span>
<span id="cb136-45"><a href="#cb136-45" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb136-46"><a href="#cb136-46" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb136-47"><a href="#cb136-47" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb136-48"><a href="#cb136-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-49"><a href="#cb136-49" aria-hidden="true" tabindex="-1"></a><span class="co">// Efface colonne de barre (XOR avec 0xFFFFFFFF au lieu de ~)</span></span>
<span id="cb136-50"><a href="#cb136-50" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> clear_col<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-51"><a href="#cb136-51" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> j<span class="op">;</span> <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span> <span class="dt">int</span> bit_pos<span class="op">;</span> <span class="dt">int</span> py<span class="op">;</span></span>
<span id="cb136-52"><a href="#cb136-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-53"><a href="#cb136-53" aria-hidden="true" tabindex="-1"></a>        py <span class="op">=</span> y <span class="op">+</span> j<span class="op">;</span></span>
<span id="cb136-54"><a href="#cb136-54" aria-hidden="true" tabindex="-1"></a>        ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>py <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>py <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb136-55"><a href="#cb136-55" aria-hidden="true" tabindex="-1"></a>        bit_pos <span class="op">=</span> <span class="op">((</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb136-56"><a href="#cb136-56" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">&amp;</span> <span class="op">(</span><span class="bn">0xFFFFFFFF</span> <span class="op">^</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">));</span></span>
<span id="cb136-57"><a href="#cb136-57" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb136-58"><a href="#cb136-58" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb136-59"><a href="#cb136-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-60"><a href="#cb136-60" aria-hidden="true" tabindex="-1"></a><span class="co">// Flash rectangle</span></span>
<span id="cb136-61"><a href="#cb136-61" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> flash<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-62"><a href="#cb136-62" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> j<span class="op">;</span></span>
<span id="cb136-63"><a href="#cb136-63" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-64"><a href="#cb136-64" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> h<span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-65"><a href="#cb136-65" aria-hidden="true" tabindex="-1"></a>            set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y <span class="op">+</span> j<span class="op">);</span></span>
<span id="cb136-66"><a href="#cb136-66" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb136-67"><a href="#cb136-67" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb136-68"><a href="#cb136-68" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb136-69"><a href="#cb136-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-70"><a href="#cb136-70" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> state <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb136-71"><a href="#cb136-71" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> secs <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb136-72"><a href="#cb136-72" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> bar_x <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb136-73"><a href="#cb136-73" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> step <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb136-74"><a href="#cb136-74" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> tick <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb136-75"><a href="#cb136-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-76"><a href="#cb136-76" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb136-77"><a href="#cb136-77" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> key<span class="op">;</span> <span class="dt">int</span> lk<span class="op">;</span> <span class="dt">int</span> t<span class="op">;</span> <span class="dt">int</span> bar_w<span class="op">;</span></span>
<span id="cb136-78"><a href="#cb136-78" aria-hidden="true" tabindex="-1"></a>    lk <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> t <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb136-79"><a href="#cb136-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-80"><a href="#cb136-80" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>t <span class="op">&lt;</span> <span class="dv">500000</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-81"><a href="#cb136-81" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> <span class="op">*</span>KEYBOARD<span class="op">;</span></span>
<span id="cb136-82"><a href="#cb136-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-83"><a href="#cb136-83" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>state <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-84"><a href="#cb136-84" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">&gt;=</span> <span class="dv">49</span> <span class="op">&amp;&amp;</span> key <span class="op">&lt;=</span> <span class="dv">57</span> <span class="op">&amp;&amp;</span> key <span class="op">!=</span> lk<span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-85"><a href="#cb136-85" aria-hidden="true" tabindex="-1"></a>                secs <span class="op">=</span> key <span class="op">-</span> <span class="dv">48</span><span class="op">;</span></span>
<span id="cb136-86"><a href="#cb136-86" aria-hidden="true" tabindex="-1"></a>                draw_digit<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> secs<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb136-87"><a href="#cb136-87" aria-hidden="true" tabindex="-1"></a>                bar_w <span class="op">=</span> secs <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb136-88"><a href="#cb136-88" aria-hidden="true" tabindex="-1"></a>                draw_hbar<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">15</span><span class="op">,</span> bar_w<span class="op">);</span></span>
<span id="cb136-89"><a href="#cb136-89" aria-hidden="true" tabindex="-1"></a>                bar_x <span class="op">=</span> <span class="dv">3</span> <span class="op">+</span> bar_w<span class="op">;</span></span>
<span id="cb136-90"><a href="#cb136-90" aria-hidden="true" tabindex="-1"></a>                step <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb136-91"><a href="#cb136-91" aria-hidden="true" tabindex="-1"></a>                tick <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb136-92"><a href="#cb136-92" aria-hidden="true" tabindex="-1"></a>                state <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb136-93"><a href="#cb136-93" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb136-94"><a href="#cb136-94" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb136-95"><a href="#cb136-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-96"><a href="#cb136-96" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>state <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-97"><a href="#cb136-97" aria-hidden="true" tabindex="-1"></a>            tick <span class="op">=</span> tick <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb136-98"><a href="#cb136-98" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>tick <span class="op">&gt;=</span> <span class="dv">800</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-99"><a href="#cb136-99" aria-hidden="true" tabindex="-1"></a>                tick <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb136-100"><a href="#cb136-100" aria-hidden="true" tabindex="-1"></a>                clear_col<span class="op">(</span>bar_x<span class="op">,</span> <span class="dv">15</span><span class="op">);</span></span>
<span id="cb136-101"><a href="#cb136-101" aria-hidden="true" tabindex="-1"></a>                bar_x <span class="op">=</span> bar_x <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb136-102"><a href="#cb136-102" aria-hidden="true" tabindex="-1"></a>                step <span class="op">=</span> step <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb136-103"><a href="#cb136-103" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="op">(</span>step <span class="op">&gt;=</span> <span class="dv">8</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-104"><a href="#cb136-104" aria-hidden="true" tabindex="-1"></a>                    step <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb136-105"><a href="#cb136-105" aria-hidden="true" tabindex="-1"></a>                    secs <span class="op">=</span> secs <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb136-106"><a href="#cb136-106" aria-hidden="true" tabindex="-1"></a>                    draw_digit<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> secs<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb136-107"><a href="#cb136-107" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">if</span> <span class="op">(</span>secs <span class="op">&lt;=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-108"><a href="#cb136-108" aria-hidden="true" tabindex="-1"></a>                        state <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb136-109"><a href="#cb136-109" aria-hidden="true" tabindex="-1"></a>                    <span class="op">}</span></span>
<span id="cb136-110"><a href="#cb136-110" aria-hidden="true" tabindex="-1"></a>                <span class="op">}</span></span>
<span id="cb136-111"><a href="#cb136-111" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb136-112"><a href="#cb136-112" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb136-113"><a href="#cb136-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-114"><a href="#cb136-114" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>state <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-115"><a href="#cb136-115" aria-hidden="true" tabindex="-1"></a>            flash<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">60</span><span class="op">,</span> <span class="dv">20</span><span class="op">);</span></span>
<span id="cb136-116"><a href="#cb136-116" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb136-117"><a href="#cb136-117" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb136-118"><a href="#cb136-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-119"><a href="#cb136-119" aria-hidden="true" tabindex="-1"></a>        lk <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb136-120"><a href="#cb136-120" aria-hidden="true" tabindex="-1"></a>        t <span class="op">=</span> t <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb136-121"><a href="#cb136-121" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb136-122"><a href="#cb136-122" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb136-123"><a href="#cb136-123" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.12" id="interruptions"><span class="header-section-number">1.5.12</span> Interruptions</h3>
<div class="sourceCode" id="cb137"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Interruptions Visuelles - Solution</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Cochez &quot;Capturer clavier&quot;, appuyez T/K/S puis Enter</span></span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>SCREEN <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb137-5"><a href="#cb137-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>KEYBOARD <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00402600</span><span class="op">;</span></span>
<span id="cb137-6"><a href="#cb137-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-7"><a href="#cb137-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> irq_count<span class="op">[</span><span class="dv">3</span><span class="op">];</span></span>
<span id="cb137-8"><a href="#cb137-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-9"><a href="#cb137-9" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_pixel<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb137-10"><a href="#cb137-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span> <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb137-11"><a href="#cb137-11" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb137-12"><a href="#cb137-12" aria-hidden="true" tabindex="-1"></a>    bit_pos <span class="op">=</span> <span class="op">((</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb137-13"><a href="#cb137-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">|</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">);</span></span>
<span id="cb137-14"><a href="#cb137-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb137-15"><a href="#cb137-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-16"><a href="#cb137-16" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> clear_rect<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb137-17"><a href="#cb137-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> j<span class="op">;</span> <span class="dt">int</span> px<span class="op">;</span> <span class="dt">int</span> py<span class="op">;</span> <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span> <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb137-18"><a href="#cb137-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb137-19"><a href="#cb137-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> h<span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb137-20"><a href="#cb137-20" aria-hidden="true" tabindex="-1"></a>            px <span class="op">=</span> x <span class="op">+</span> i<span class="op">;</span> py <span class="op">=</span> y <span class="op">+</span> j<span class="op">;</span></span>
<span id="cb137-21"><a href="#cb137-21" aria-hidden="true" tabindex="-1"></a>            ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>py <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>py <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>px <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb137-22"><a href="#cb137-22" aria-hidden="true" tabindex="-1"></a>            bit_pos <span class="op">=</span> <span class="op">((</span>px <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>px <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb137-23"><a href="#cb137-23" aria-hidden="true" tabindex="-1"></a>            <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">&amp;</span> <span class="op">(</span><span class="bn">0xFFFFFFFF</span> <span class="op">^</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">));</span></span>
<span id="cb137-24"><a href="#cb137-24" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb137-25"><a href="#cb137-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb137-26"><a href="#cb137-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb137-27"><a href="#cb137-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-28"><a href="#cb137-28" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> fill_rect<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb137-29"><a href="#cb137-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> j<span class="op">;</span></span>
<span id="cb137-30"><a href="#cb137-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb137-31"><a href="#cb137-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> h<span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb137-32"><a href="#cb137-32" aria-hidden="true" tabindex="-1"></a>            set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y <span class="op">+</span> j<span class="op">);</span></span>
<span id="cb137-33"><a href="#cb137-33" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb137-34"><a href="#cb137-34" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb137-35"><a href="#cb137-35" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb137-36"><a href="#cb137-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-37"><a href="#cb137-37" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_box<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb137-38"><a href="#cb137-38" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb137-39"><a href="#cb137-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y <span class="op">+</span> h <span class="op">-</span> <span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb137-40"><a href="#cb137-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> h<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> i<span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> w <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> y <span class="op">+</span> i<span class="op">);</span> <span class="op">}</span></span>
<span id="cb137-41"><a href="#cb137-41" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb137-42"><a href="#cb137-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-43"><a href="#cb137-43" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_digit<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> d<span class="op">)</span> <span class="op">{</span></span>
<span id="cb137-44"><a href="#cb137-44" aria-hidden="true" tabindex="-1"></a>    clear_rect<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb137-45"><a href="#cb137-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span> <span class="op">}</span></span>
<span id="cb137-46"><a href="#cb137-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">4</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">5</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">9</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb137-47"><a href="#cb137-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">5</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">6</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb137-48"><a href="#cb137-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb137-49"><a href="#cb137-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">2</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb137-50"><a href="#cb137-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">2</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb137-51"><a href="#cb137-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb137-52"><a href="#cb137-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb137-53"><a href="#cb137-53" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb137-54"><a href="#cb137-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-55"><a href="#cb137-55" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine lettre T, K ou S</span></span>
<span id="cb137-56"><a href="#cb137-56" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_letter<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> c<span class="op">)</span> <span class="op">{</span></span>
<span id="cb137-57"><a href="#cb137-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">==</span> <span class="dv">84</span><span class="op">)</span> <span class="op">{</span> <span class="co">// T</span></span>
<span id="cb137-58"><a href="#cb137-58" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">);</span></span>
<span id="cb137-59"><a href="#cb137-59" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">4</span><span class="op">);</span></span>
<span id="cb137-60"><a href="#cb137-60" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb137-61"><a href="#cb137-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">==</span> <span class="dv">75</span><span class="op">)</span> <span class="op">{</span> <span class="co">// K</span></span>
<span id="cb137-62"><a href="#cb137-62" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">+</span><span class="dv">4</span><span class="op">);</span></span>
<span id="cb137-63"><a href="#cb137-63" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">+</span><span class="dv">4</span><span class="op">);</span></span>
<span id="cb137-64"><a href="#cb137-64" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb137-65"><a href="#cb137-65" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb137-66"><a href="#cb137-66" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">==</span> <span class="dv">83</span><span class="op">)</span> <span class="op">{</span> <span class="co">// S</span></span>
<span id="cb137-67"><a href="#cb137-67" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">);</span></span>
<span id="cb137-68"><a href="#cb137-68" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb137-69"><a href="#cb137-69" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">+</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb137-70"><a href="#cb137-70" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb137-71"><a href="#cb137-71" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">+</span><span class="dv">4</span><span class="op">);</span></span>
<span id="cb137-72"><a href="#cb137-72" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb137-73"><a href="#cb137-73" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb137-74"><a href="#cb137-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-75"><a href="#cb137-75" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_device<span class="op">(</span><span class="dt">int</span> idx<span class="op">)</span> <span class="op">{</span></span>
<span id="cb137-76"><a href="#cb137-76" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x<span class="op">;</span></span>
<span id="cb137-77"><a href="#cb137-77" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> idx <span class="op">*</span> <span class="dv">25</span> <span class="op">+</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb137-78"><a href="#cb137-78" aria-hidden="true" tabindex="-1"></a>    draw_box<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">15</span><span class="op">);</span></span>
<span id="cb137-79"><a href="#cb137-79" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>idx <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> draw_letter<span class="op">(</span>x <span class="op">+</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">84</span><span class="op">);</span></span>
<span id="cb137-80"><a href="#cb137-80" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>idx <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> draw_letter<span class="op">(</span>x <span class="op">+</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">75</span><span class="op">);</span></span>
<span id="cb137-81"><a href="#cb137-81" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>idx <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> draw_letter<span class="op">(</span>x <span class="op">+</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">83</span><span class="op">);</span></span>
<span id="cb137-82"><a href="#cb137-82" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span>x <span class="op">+</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">13</span><span class="op">,</span> irq_count<span class="op">[</span>idx<span class="op">]);</span></span>
<span id="cb137-83"><a href="#cb137-83" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb137-84"><a href="#cb137-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-85"><a href="#cb137-85" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> flash_device<span class="op">(</span><span class="dt">int</span> idx<span class="op">)</span> <span class="op">{</span></span>
<span id="cb137-86"><a href="#cb137-86" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x<span class="op">;</span> <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb137-87"><a href="#cb137-87" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> idx <span class="op">*</span> <span class="dv">25</span> <span class="op">+</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb137-88"><a href="#cb137-88" aria-hidden="true" tabindex="-1"></a>    fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">18</span><span class="op">,</span> <span class="dv">13</span><span class="op">);</span></span>
<span id="cb137-89"><a href="#cb137-89" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Petit delai</span></span>
<span id="cb137-90"><a href="#cb137-90" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">500</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> <span class="op">}</span></span>
<span id="cb137-91"><a href="#cb137-91" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb137-92"><a href="#cb137-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-93"><a href="#cb137-93" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> irq_handler<span class="op">(</span><span class="dt">int</span> type<span class="op">)</span> <span class="op">{</span></span>
<span id="cb137-94"><a href="#cb137-94" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>type <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> type <span class="op">&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb137-95"><a href="#cb137-95" aria-hidden="true" tabindex="-1"></a>        irq_count<span class="op">[</span>type<span class="op">]</span> <span class="op">=</span> irq_count<span class="op">[</span>type<span class="op">]</span> <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb137-96"><a href="#cb137-96" aria-hidden="true" tabindex="-1"></a>        flash_device<span class="op">(</span>type<span class="op">);</span></span>
<span id="cb137-97"><a href="#cb137-97" aria-hidden="true" tabindex="-1"></a>        draw_device<span class="op">(</span>type<span class="op">);</span></span>
<span id="cb137-98"><a href="#cb137-98" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb137-99"><a href="#cb137-99" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb137-100"><a href="#cb137-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-101"><a href="#cb137-101" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb137-102"><a href="#cb137-102" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> key<span class="op">;</span> <span class="dt">int</span> lk<span class="op">;</span> <span class="dt">int</span> t<span class="op">;</span> <span class="dt">int</span> total<span class="op">;</span></span>
<span id="cb137-103"><a href="#cb137-103" aria-hidden="true" tabindex="-1"></a>    lk <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> t <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb137-104"><a href="#cb137-104" aria-hidden="true" tabindex="-1"></a>    irq_count<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> irq_count<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> irq_count<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb137-105"><a href="#cb137-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-106"><a href="#cb137-106" aria-hidden="true" tabindex="-1"></a>    draw_device<span class="op">(</span><span class="dv">0</span><span class="op">);</span></span>
<span id="cb137-107"><a href="#cb137-107" aria-hidden="true" tabindex="-1"></a>    draw_device<span class="op">(</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb137-108"><a href="#cb137-108" aria-hidden="true" tabindex="-1"></a>    draw_device<span class="op">(</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb137-109"><a href="#cb137-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-110"><a href="#cb137-110" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>t <span class="op">&lt;</span> <span class="dv">100000</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb137-111"><a href="#cb137-111" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> <span class="op">*</span>KEYBOARD<span class="op">;</span></span>
<span id="cb137-112"><a href="#cb137-112" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>key <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> key <span class="op">!=</span> lk<span class="op">)</span> <span class="op">{</span></span>
<span id="cb137-113"><a href="#cb137-113" aria-hidden="true" tabindex="-1"></a>            t <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb137-114"><a href="#cb137-114" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">13</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb137-115"><a href="#cb137-115" aria-hidden="true" tabindex="-1"></a>                total <span class="op">=</span> irq_count<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">+</span> irq_count<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">+</span> irq_count<span class="op">[</span><span class="dv">2</span><span class="op">];</span></span>
<span id="cb137-116"><a href="#cb137-116" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> total<span class="op">;</span></span>
<span id="cb137-117"><a href="#cb137-117" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb137-118"><a href="#cb137-118" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">116</span> <span class="op">||</span> key <span class="op">==</span> <span class="dv">84</span><span class="op">)</span> irq_handler<span class="op">(</span><span class="dv">0</span><span class="op">);</span></span>
<span id="cb137-119"><a href="#cb137-119" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">107</span> <span class="op">||</span> key <span class="op">==</span> <span class="dv">75</span><span class="op">)</span> irq_handler<span class="op">(</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb137-120"><a href="#cb137-120" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">115</span> <span class="op">||</span> key <span class="op">==</span> <span class="dv">83</span><span class="op">)</span> irq_handler<span class="op">(</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb137-121"><a href="#cb137-121" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb137-122"><a href="#cb137-122" aria-hidden="true" tabindex="-1"></a>        lk <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb137-123"><a href="#cb137-123" aria-hidden="true" tabindex="-1"></a>        t <span class="op">=</span> t <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb137-124"><a href="#cb137-124" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb137-125"><a href="#cb137-125" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb137-126"><a href="#cb137-126" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.13" id="coroutines"><span class="header-section-number">1.5.13</span> Coroutines</h3>
<div class="sourceCode" id="cb138"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Coroutines Visuelles - Solution</span></span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Cochez &quot;Capturer clavier&quot;, appuyez Espace pour chaque step</span></span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>SCREEN <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb138-5"><a href="#cb138-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>KEYBOARD <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00402600</span><span class="op">;</span></span>
<span id="cb138-6"><a href="#cb138-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-7"><a href="#cb138-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> current_task <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb138-8"><a href="#cb138-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> task_a_val <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb138-9"><a href="#cb138-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> task_b_val <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb138-10"><a href="#cb138-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> steps <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb138-11"><a href="#cb138-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-12"><a href="#cb138-12" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_pixel<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb138-13"><a href="#cb138-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span> <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb138-14"><a href="#cb138-14" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb138-15"><a href="#cb138-15" aria-hidden="true" tabindex="-1"></a>    bit_pos <span class="op">=</span> <span class="op">((</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb138-16"><a href="#cb138-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">|</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">);</span></span>
<span id="cb138-17"><a href="#cb138-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb138-18"><a href="#cb138-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-19"><a href="#cb138-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> clear_rect<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb138-20"><a href="#cb138-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> j<span class="op">;</span> <span class="dt">int</span> px<span class="op">;</span> <span class="dt">int</span> py<span class="op">;</span> <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span> <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb138-21"><a href="#cb138-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb138-22"><a href="#cb138-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> h<span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb138-23"><a href="#cb138-23" aria-hidden="true" tabindex="-1"></a>            px <span class="op">=</span> x <span class="op">+</span> i<span class="op">;</span> py <span class="op">=</span> y <span class="op">+</span> j<span class="op">;</span></span>
<span id="cb138-24"><a href="#cb138-24" aria-hidden="true" tabindex="-1"></a>            ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>py <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>py <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>px <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb138-25"><a href="#cb138-25" aria-hidden="true" tabindex="-1"></a>            bit_pos <span class="op">=</span> <span class="op">((</span>px <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>px <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb138-26"><a href="#cb138-26" aria-hidden="true" tabindex="-1"></a>            <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">&amp;</span> <span class="op">(</span><span class="bn">0xFFFFFFFF</span> <span class="op">^</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">));</span></span>
<span id="cb138-27"><a href="#cb138-27" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb138-28"><a href="#cb138-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb138-29"><a href="#cb138-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb138-30"><a href="#cb138-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-31"><a href="#cb138-31" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> fill_rect<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb138-32"><a href="#cb138-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> j<span class="op">;</span></span>
<span id="cb138-33"><a href="#cb138-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb138-34"><a href="#cb138-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> h<span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb138-35"><a href="#cb138-35" aria-hidden="true" tabindex="-1"></a>            set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y <span class="op">+</span> j<span class="op">);</span></span>
<span id="cb138-36"><a href="#cb138-36" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb138-37"><a href="#cb138-37" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb138-38"><a href="#cb138-38" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb138-39"><a href="#cb138-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-40"><a href="#cb138-40" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_box<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb138-41"><a href="#cb138-41" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb138-42"><a href="#cb138-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y <span class="op">+</span> h <span class="op">-</span> <span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb138-43"><a href="#cb138-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> h<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> i<span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> w <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> y <span class="op">+</span> i<span class="op">);</span> <span class="op">}</span></span>
<span id="cb138-44"><a href="#cb138-44" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb138-45"><a href="#cb138-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-46"><a href="#cb138-46" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_digit<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> d<span class="op">)</span> <span class="op">{</span></span>
<span id="cb138-47"><a href="#cb138-47" aria-hidden="true" tabindex="-1"></a>    clear_rect<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb138-48"><a href="#cb138-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span> <span class="op">}</span></span>
<span id="cb138-49"><a href="#cb138-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">4</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">5</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">9</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb138-50"><a href="#cb138-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">5</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">6</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb138-51"><a href="#cb138-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb138-52"><a href="#cb138-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">2</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb138-53"><a href="#cb138-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">2</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb138-54"><a href="#cb138-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb138-55"><a href="#cb138-55" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb138-56"><a href="#cb138-56" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb138-57"><a href="#cb138-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-58"><a href="#cb138-58" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_letter_A<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb138-59"><a href="#cb138-59" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb138-60"><a href="#cb138-60" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb138-61"><a href="#cb138-61" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb138-62"><a href="#cb138-62" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb138-63"><a href="#cb138-63" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span></span>
<span id="cb138-64"><a href="#cb138-64" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb138-65"><a href="#cb138-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-66"><a href="#cb138-66" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_letter_B<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb138-67"><a href="#cb138-67" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb138-68"><a href="#cb138-68" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb138-69"><a href="#cb138-69" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb138-70"><a href="#cb138-70" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb138-71"><a href="#cb138-71" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span></span>
<span id="cb138-72"><a href="#cb138-72" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb138-73"><a href="#cb138-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-74"><a href="#cb138-74" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_arrow<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb138-75"><a href="#cb138-75" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb138-76"><a href="#cb138-76" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb138-77"><a href="#cb138-77" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span></span>
<span id="cb138-78"><a href="#cb138-78" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">3</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">3</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">3</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb138-79"><a href="#cb138-79" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">4</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb138-80"><a href="#cb138-80" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb138-81"><a href="#cb138-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-82"><a href="#cb138-82" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_task<span class="op">(</span><span class="dt">int</span> idx<span class="op">,</span> <span class="dt">int</span> active<span class="op">)</span> <span class="op">{</span></span>
<span id="cb138-83"><a href="#cb138-83" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x<span class="op">;</span></span>
<span id="cb138-84"><a href="#cb138-84" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> idx <span class="op">*</span> <span class="dv">35</span> <span class="op">+</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb138-85"><a href="#cb138-85" aria-hidden="true" tabindex="-1"></a>    clear_rect<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">20</span><span class="op">);</span></span>
<span id="cb138-86"><a href="#cb138-86" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>active<span class="op">)</span> <span class="op">{</span></span>
<span id="cb138-87"><a href="#cb138-87" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">20</span><span class="op">);</span></span>
<span id="cb138-88"><a href="#cb138-88" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Dessiner en inverse (effacer les pixels pour la lettre/chiffre)</span></span>
<span id="cb138-89"><a href="#cb138-89" aria-hidden="true" tabindex="-1"></a>        clear_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb138-90"><a href="#cb138-90" aria-hidden="true" tabindex="-1"></a>        clear_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">15</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb138-91"><a href="#cb138-91" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb138-92"><a href="#cb138-92" aria-hidden="true" tabindex="-1"></a>        draw_box<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">20</span><span class="op">);</span></span>
<span id="cb138-93"><a href="#cb138-93" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb138-94"><a href="#cb138-94" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>idx <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb138-95"><a href="#cb138-95" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>active<span class="op">)</span> clear_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">13</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb138-96"><a href="#cb138-96" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> draw_letter_A<span class="op">(</span>x <span class="op">+</span> <span class="dv">13</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb138-97"><a href="#cb138-97" aria-hidden="true" tabindex="-1"></a>        draw_digit<span class="op">(</span>x <span class="op">+</span> <span class="dv">13</span><span class="op">,</span> <span class="dv">15</span><span class="op">,</span> task_a_val<span class="op">);</span></span>
<span id="cb138-98"><a href="#cb138-98" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb138-99"><a href="#cb138-99" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>active<span class="op">)</span> clear_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">13</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb138-100"><a href="#cb138-100" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> draw_letter_B<span class="op">(</span>x <span class="op">+</span> <span class="dv">13</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb138-101"><a href="#cb138-101" aria-hidden="true" tabindex="-1"></a>        draw_digit<span class="op">(</span>x <span class="op">+</span> <span class="dv">13</span><span class="op">,</span> <span class="dv">15</span><span class="op">,</span> task_b_val<span class="op">);</span></span>
<span id="cb138-102"><a href="#cb138-102" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb138-103"><a href="#cb138-103" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb138-104"><a href="#cb138-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-105"><a href="#cb138-105" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_all<span class="op">()</span> <span class="op">{</span></span>
<span id="cb138-106"><a href="#cb138-106" aria-hidden="true" tabindex="-1"></a>    draw_task<span class="op">(</span><span class="dv">0</span><span class="op">,</span> current_task <span class="op">==</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb138-107"><a href="#cb138-107" aria-hidden="true" tabindex="-1"></a>    draw_task<span class="op">(</span><span class="dv">1</span><span class="op">,</span> current_task <span class="op">==</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb138-108"><a href="#cb138-108" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Fleche entre les taches</span></span>
<span id="cb138-109"><a href="#cb138-109" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>current_task <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb138-110"><a href="#cb138-110" aria-hidden="true" tabindex="-1"></a>        clear_rect<span class="op">(</span><span class="dv">32</span><span class="op">,</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb138-111"><a href="#cb138-111" aria-hidden="true" tabindex="-1"></a>        draw_arrow<span class="op">(</span><span class="dv">32</span><span class="op">,</span> <span class="dv">12</span><span class="op">);</span></span>
<span id="cb138-112"><a href="#cb138-112" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb138-113"><a href="#cb138-113" aria-hidden="true" tabindex="-1"></a>        clear_rect<span class="op">(</span><span class="dv">32</span><span class="op">,</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb138-114"><a href="#cb138-114" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Fleche inversee</span></span>
<span id="cb138-115"><a href="#cb138-115" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span><span class="dv">36</span><span class="op">,</span> <span class="dv">14</span><span class="op">);</span></span>
<span id="cb138-116"><a href="#cb138-116" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span><span class="dv">35</span><span class="op">,</span> <span class="dv">13</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">35</span><span class="op">,</span> <span class="dv">14</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">35</span><span class="op">,</span> <span class="dv">15</span><span class="op">);</span></span>
<span id="cb138-117"><a href="#cb138-117" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span><span class="dv">34</span><span class="op">,</span> <span class="dv">12</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">34</span><span class="op">,</span> <span class="dv">14</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">34</span><span class="op">,</span> <span class="dv">16</span><span class="op">);</span></span>
<span id="cb138-118"><a href="#cb138-118" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span><span class="dv">33</span><span class="op">,</span> <span class="dv">13</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">33</span><span class="op">,</span> <span class="dv">14</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">33</span><span class="op">,</span> <span class="dv">15</span><span class="op">);</span></span>
<span id="cb138-119"><a href="#cb138-119" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span><span class="dv">32</span><span class="op">,</span> <span class="dv">14</span><span class="op">);</span></span>
<span id="cb138-120"><a href="#cb138-120" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb138-121"><a href="#cb138-121" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb138-122"><a href="#cb138-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-123"><a href="#cb138-123" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> step<span class="op">()</span> <span class="op">{</span></span>
<span id="cb138-124"><a href="#cb138-124" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>current_task <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb138-125"><a href="#cb138-125" aria-hidden="true" tabindex="-1"></a>        task_a_val <span class="op">=</span> task_a_val <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb138-126"><a href="#cb138-126" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>task_a_val <span class="op">&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb138-127"><a href="#cb138-127" aria-hidden="true" tabindex="-1"></a>        current_task <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb138-128"><a href="#cb138-128" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb138-129"><a href="#cb138-129" aria-hidden="true" tabindex="-1"></a>        task_b_val <span class="op">=</span> task_b_val <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb138-130"><a href="#cb138-130" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>task_b_val <span class="op">&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb138-131"><a href="#cb138-131" aria-hidden="true" tabindex="-1"></a>        current_task <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb138-132"><a href="#cb138-132" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb138-133"><a href="#cb138-133" aria-hidden="true" tabindex="-1"></a>    steps <span class="op">=</span> steps <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb138-134"><a href="#cb138-134" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb138-135"><a href="#cb138-135" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb138-136"><a href="#cb138-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-137"><a href="#cb138-137" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb138-138"><a href="#cb138-138" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> key<span class="op">;</span> <span class="dt">int</span> lk<span class="op">;</span> <span class="dt">int</span> t<span class="op">;</span> <span class="dt">int</span> running<span class="op">;</span></span>
<span id="cb138-139"><a href="#cb138-139" aria-hidden="true" tabindex="-1"></a>    lk <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> t <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> running <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb138-140"><a href="#cb138-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-141"><a href="#cb138-141" aria-hidden="true" tabindex="-1"></a>    draw_all<span class="op">();</span></span>
<span id="cb138-142"><a href="#cb138-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-143"><a href="#cb138-143" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>t <span class="op">&lt;</span> <span class="dv">100000</span> <span class="op">&amp;&amp;</span> running<span class="op">)</span> <span class="op">{</span></span>
<span id="cb138-144"><a href="#cb138-144" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> <span class="op">*</span>KEYBOARD<span class="op">;</span></span>
<span id="cb138-145"><a href="#cb138-145" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>key <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> key <span class="op">!=</span> lk<span class="op">)</span> <span class="op">{</span></span>
<span id="cb138-146"><a href="#cb138-146" aria-hidden="true" tabindex="-1"></a>            t <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb138-147"><a href="#cb138-147" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">32</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb138-148"><a href="#cb138-148" aria-hidden="true" tabindex="-1"></a>                running <span class="op">=</span> step<span class="op">();</span></span>
<span id="cb138-149"><a href="#cb138-149" aria-hidden="true" tabindex="-1"></a>                draw_all<span class="op">();</span></span>
<span id="cb138-150"><a href="#cb138-150" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb138-151"><a href="#cb138-151" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">13</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb138-152"><a href="#cb138-152" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> steps<span class="op">;</span></span>
<span id="cb138-153"><a href="#cb138-153" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb138-154"><a href="#cb138-154" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb138-155"><a href="#cb138-155" aria-hidden="true" tabindex="-1"></a>        lk <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb138-156"><a href="#cb138-156" aria-hidden="true" tabindex="-1"></a>        t <span class="op">=</span> t <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb138-157"><a href="#cb138-157" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb138-158"><a href="#cb138-158" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Flash final</span></span>
<span id="cb138-159"><a href="#cb138-159" aria-hidden="true" tabindex="-1"></a>    fill_rect<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">80</span><span class="op">,</span> <span class="dv">30</span><span class="op">);</span></span>
<span id="cb138-160"><a href="#cb138-160" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> steps<span class="op">;</span></span>
<span id="cb138-161"><a href="#cb138-161" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.14" id="scheduler"><span class="header-section-number">1.5.14</span> Scheduler</h3>
<div class="sourceCode" id="cb139"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Scheduler Round-Robin Visuel - Solution</span></span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Cochez &quot;Capturer clavier&quot;, Espace pour chaque tick</span></span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-4"><a href="#cb139-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>SCREEN <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb139-5"><a href="#cb139-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>KEYBOARD <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00402600</span><span class="op">;</span></span>
<span id="cb139-6"><a href="#cb139-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-7"><a href="#cb139-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> proc_time<span class="op">[</span><span class="dv">3</span><span class="op">];</span></span>
<span id="cb139-8"><a href="#cb139-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> proc_state<span class="op">[</span><span class="dv">3</span><span class="op">];</span></span>
<span id="cb139-9"><a href="#cb139-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> current_proc <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb139-10"><a href="#cb139-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> quantum_left <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb139-11"><a href="#cb139-11" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> switches <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb139-12"><a href="#cb139-12" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> ticks <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb139-13"><a href="#cb139-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-14"><a href="#cb139-14" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_pixel<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-15"><a href="#cb139-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span> <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb139-16"><a href="#cb139-16" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb139-17"><a href="#cb139-17" aria-hidden="true" tabindex="-1"></a>    bit_pos <span class="op">=</span> <span class="op">((</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb139-18"><a href="#cb139-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">|</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">);</span></span>
<span id="cb139-19"><a href="#cb139-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb139-20"><a href="#cb139-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-21"><a href="#cb139-21" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> clear_rect<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-22"><a href="#cb139-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> j<span class="op">;</span> <span class="dt">int</span> px<span class="op">;</span> <span class="dt">int</span> py<span class="op">;</span> <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span> <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb139-23"><a href="#cb139-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-24"><a href="#cb139-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> h<span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-25"><a href="#cb139-25" aria-hidden="true" tabindex="-1"></a>            px <span class="op">=</span> x <span class="op">+</span> i<span class="op">;</span> py <span class="op">=</span> y <span class="op">+</span> j<span class="op">;</span></span>
<span id="cb139-26"><a href="#cb139-26" aria-hidden="true" tabindex="-1"></a>            ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>py <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>py <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>px <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb139-27"><a href="#cb139-27" aria-hidden="true" tabindex="-1"></a>            bit_pos <span class="op">=</span> <span class="op">((</span>px <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>px <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb139-28"><a href="#cb139-28" aria-hidden="true" tabindex="-1"></a>            <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">&amp;</span> <span class="op">(</span><span class="bn">0xFFFFFFFF</span> <span class="op">^</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">));</span></span>
<span id="cb139-29"><a href="#cb139-29" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb139-30"><a href="#cb139-30" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb139-31"><a href="#cb139-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb139-32"><a href="#cb139-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-33"><a href="#cb139-33" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> fill_rect<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-34"><a href="#cb139-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> j<span class="op">;</span></span>
<span id="cb139-35"><a href="#cb139-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-36"><a href="#cb139-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> h<span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-37"><a href="#cb139-37" aria-hidden="true" tabindex="-1"></a>            set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y <span class="op">+</span> j<span class="op">);</span></span>
<span id="cb139-38"><a href="#cb139-38" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb139-39"><a href="#cb139-39" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb139-40"><a href="#cb139-40" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb139-41"><a href="#cb139-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-42"><a href="#cb139-42" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_box<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-43"><a href="#cb139-43" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb139-44"><a href="#cb139-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y <span class="op">+</span> h <span class="op">-</span> <span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb139-45"><a href="#cb139-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> h<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> i<span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> w <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> y <span class="op">+</span> i<span class="op">);</span> <span class="op">}</span></span>
<span id="cb139-46"><a href="#cb139-46" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb139-47"><a href="#cb139-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-48"><a href="#cb139-48" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_digit<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> d<span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-49"><a href="#cb139-49" aria-hidden="true" tabindex="-1"></a>    clear_rect<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb139-50"><a href="#cb139-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span> <span class="op">}</span></span>
<span id="cb139-51"><a href="#cb139-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">4</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">5</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">9</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb139-52"><a href="#cb139-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">5</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">6</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb139-53"><a href="#cb139-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb139-54"><a href="#cb139-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">2</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb139-55"><a href="#cb139-55" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">2</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb139-56"><a href="#cb139-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb139-57"><a href="#cb139-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb139-58"><a href="#cb139-58" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb139-59"><a href="#cb139-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-60"><a href="#cb139-60" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_P<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-61"><a href="#cb139-61" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb139-62"><a href="#cb139-62" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb139-63"><a href="#cb139-63" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb139-64"><a href="#cb139-64" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span></span>
<span id="cb139-65"><a href="#cb139-65" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb139-66"><a href="#cb139-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-67"><a href="#cb139-67" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_proc<span class="op">(</span><span class="dt">int</span> idx<span class="op">,</span> <span class="dt">int</span> active<span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-68"><a href="#cb139-68" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x<span class="op">;</span> <span class="dt">int</span> y<span class="op">;</span> <span class="dt">int</span> t<span class="op">;</span> <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb139-69"><a href="#cb139-69" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> idx <span class="op">*</span> <span class="dv">32</span> <span class="op">+</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb139-70"><a href="#cb139-70" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb139-71"><a href="#cb139-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-72"><a href="#cb139-72" aria-hidden="true" tabindex="-1"></a>    clear_rect<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> <span class="dv">28</span><span class="op">,</span> <span class="dv">24</span><span class="op">);</span></span>
<span id="cb139-73"><a href="#cb139-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-74"><a href="#cb139-74" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>active<span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-75"><a href="#cb139-75" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> <span class="dv">28</span><span class="op">,</span> <span class="dv">24</span><span class="op">);</span></span>
<span id="cb139-76"><a href="#cb139-76" aria-hidden="true" tabindex="-1"></a>        clear_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">24</span><span class="op">,</span> <span class="dv">20</span><span class="op">);</span></span>
<span id="cb139-77"><a href="#cb139-77" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb139-78"><a href="#cb139-78" aria-hidden="true" tabindex="-1"></a>        draw_box<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> <span class="dv">28</span><span class="op">,</span> <span class="dv">24</span><span class="op">);</span></span>
<span id="cb139-79"><a href="#cb139-79" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb139-80"><a href="#cb139-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-81"><a href="#cb139-81" aria-hidden="true" tabindex="-1"></a>    <span class="co">// P et numero</span></span>
<span id="cb139-82"><a href="#cb139-82" aria-hidden="true" tabindex="-1"></a>    draw_P<span class="op">(</span>x <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb139-83"><a href="#cb139-83" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span>x <span class="op">+</span> <span class="dv">10</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> idx<span class="op">);</span></span>
<span id="cb139-84"><a href="#cb139-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-85"><a href="#cb139-85" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Barre de temps restant</span></span>
<span id="cb139-86"><a href="#cb139-86" aria-hidden="true" tabindex="-1"></a>    t <span class="op">=</span> proc_time<span class="op">[</span>idx<span class="op">];</span></span>
<span id="cb139-87"><a href="#cb139-87" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>t <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-88"><a href="#cb139-88" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> t<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-89"><a href="#cb139-89" aria-hidden="true" tabindex="-1"></a>            fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">4</span> <span class="op">+</span> i <span class="op">*</span> <span class="dv">5</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb139-90"><a href="#cb139-90" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb139-91"><a href="#cb139-91" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb139-92"><a href="#cb139-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-93"><a href="#cb139-93" aria-hidden="true" tabindex="-1"></a>    <span class="co">// X si termine</span></span>
<span id="cb139-94"><a href="#cb139-94" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span>idx<span class="op">]</span> <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-95"><a href="#cb139-95" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">8</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">14</span><span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">12</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">14</span><span class="op">);</span></span>
<span id="cb139-96"><a href="#cb139-96" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">9</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">15</span><span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">11</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">15</span><span class="op">);</span></span>
<span id="cb139-97"><a href="#cb139-97" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">10</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">16</span><span class="op">);</span></span>
<span id="cb139-98"><a href="#cb139-98" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">9</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">17</span><span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">11</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">17</span><span class="op">);</span></span>
<span id="cb139-99"><a href="#cb139-99" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">8</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">18</span><span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">12</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">18</span><span class="op">);</span></span>
<span id="cb139-100"><a href="#cb139-100" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb139-101"><a href="#cb139-101" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb139-102"><a href="#cb139-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-103"><a href="#cb139-103" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_all<span class="op">()</span> <span class="op">{</span></span>
<span id="cb139-104"><a href="#cb139-104" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb139-105"><a href="#cb139-105" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-106"><a href="#cb139-106" aria-hidden="true" tabindex="-1"></a>        draw_proc<span class="op">(</span>i<span class="op">,</span> i <span class="op">==</span> current_proc <span class="op">&amp;&amp;</span> proc_state<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb139-107"><a href="#cb139-107" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb139-108"><a href="#cb139-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-109"><a href="#cb139-109" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Quantum: Q=N</span></span>
<span id="cb139-110"><a href="#cb139-110" aria-hidden="true" tabindex="-1"></a>    clear_rect<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">32</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb139-111"><a href="#cb139-111" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Q</span></span>
<span id="cb139-112"><a href="#cb139-112" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">6</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">7</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span></span>
<span id="cb139-113"><a href="#cb139-113" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">33</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">33</span><span class="op">);</span></span>
<span id="cb139-114"><a href="#cb139-114" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">34</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">34</span><span class="op">);</span></span>
<span id="cb139-115"><a href="#cb139-115" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">35</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">6</span><span class="op">,</span> <span class="dv">35</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">35</span><span class="op">);</span></span>
<span id="cb139-116"><a href="#cb139-116" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">36</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">6</span><span class="op">,</span> <span class="dv">36</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">36</span><span class="op">);</span></span>
<span id="cb139-117"><a href="#cb139-117" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span><span class="dv">12</span><span class="op">,</span> <span class="dv">32</span><span class="op">,</span> quantum_left<span class="op">);</span></span>
<span id="cb139-118"><a href="#cb139-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-119"><a href="#cb139-119" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Switches: SW=N</span></span>
<span id="cb139-120"><a href="#cb139-120" aria-hidden="true" tabindex="-1"></a>    clear_rect<span class="op">(</span><span class="dv">30</span><span class="op">,</span> <span class="dv">32</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb139-121"><a href="#cb139-121" aria-hidden="true" tabindex="-1"></a>    <span class="co">// S</span></span>
<span id="cb139-122"><a href="#cb139-122" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">31</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">32</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">33</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span></span>
<span id="cb139-123"><a href="#cb139-123" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">30</span><span class="op">,</span> <span class="dv">33</span><span class="op">);</span></span>
<span id="cb139-124"><a href="#cb139-124" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">31</span><span class="op">,</span> <span class="dv">34</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">32</span><span class="op">,</span> <span class="dv">34</span><span class="op">);</span></span>
<span id="cb139-125"><a href="#cb139-125" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">33</span><span class="op">,</span> <span class="dv">35</span><span class="op">);</span></span>
<span id="cb139-126"><a href="#cb139-126" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">30</span><span class="op">,</span> <span class="dv">36</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">31</span><span class="op">,</span> <span class="dv">36</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">32</span><span class="op">,</span> <span class="dv">36</span><span class="op">);</span></span>
<span id="cb139-127"><a href="#cb139-127" aria-hidden="true" tabindex="-1"></a>    <span class="co">// W</span></span>
<span id="cb139-128"><a href="#cb139-128" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">36</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">40</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span></span>
<span id="cb139-129"><a href="#cb139-129" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">36</span><span class="op">,</span> <span class="dv">33</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">40</span><span class="op">,</span> <span class="dv">33</span><span class="op">);</span></span>
<span id="cb139-130"><a href="#cb139-130" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">36</span><span class="op">,</span> <span class="dv">34</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">38</span><span class="op">,</span> <span class="dv">34</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">40</span><span class="op">,</span> <span class="dv">34</span><span class="op">);</span></span>
<span id="cb139-131"><a href="#cb139-131" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">36</span><span class="op">,</span> <span class="dv">35</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">38</span><span class="op">,</span> <span class="dv">35</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">40</span><span class="op">,</span> <span class="dv">35</span><span class="op">);</span></span>
<span id="cb139-132"><a href="#cb139-132" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">37</span><span class="op">,</span> <span class="dv">36</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">39</span><span class="op">,</span> <span class="dv">36</span><span class="op">);</span></span>
<span id="cb139-133"><a href="#cb139-133" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span><span class="dv">44</span><span class="op">,</span> <span class="dv">32</span><span class="op">,</span> switches<span class="op">);</span></span>
<span id="cb139-134"><a href="#cb139-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-135"><a href="#cb139-135" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Ticks: T=N</span></span>
<span id="cb139-136"><a href="#cb139-136" aria-hidden="true" tabindex="-1"></a>    clear_rect<span class="op">(</span><span class="dv">60</span><span class="op">,</span> <span class="dv">32</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb139-137"><a href="#cb139-137" aria-hidden="true" tabindex="-1"></a>    <span class="co">// T</span></span>
<span id="cb139-138"><a href="#cb139-138" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">60</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">61</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">62</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span></span>
<span id="cb139-139"><a href="#cb139-139" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">61</span><span class="op">,</span> <span class="dv">33</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">61</span><span class="op">,</span> <span class="dv">34</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">61</span><span class="op">,</span> <span class="dv">35</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">61</span><span class="op">,</span> <span class="dv">36</span><span class="op">);</span></span>
<span id="cb139-140"><a href="#cb139-140" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span><span class="dv">66</span><span class="op">,</span> <span class="dv">32</span><span class="op">,</span> ticks<span class="op">);</span></span>
<span id="cb139-141"><a href="#cb139-141" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb139-142"><a href="#cb139-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-143"><a href="#cb139-143" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> find_next<span class="op">(</span><span class="dt">int</span> from<span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-144"><a href="#cb139-144" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> next<span class="op">;</span></span>
<span id="cb139-145"><a href="#cb139-145" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">3</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-146"><a href="#cb139-146" aria-hidden="true" tabindex="-1"></a>        next <span class="op">=</span> <span class="op">(</span>from <span class="op">+</span> i<span class="op">)</span> <span class="op">%</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb139-147"><a href="#cb139-147" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span>next<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> proc_time<span class="op">[</span>next<span class="op">]</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> next<span class="op">;</span></span>
<span id="cb139-148"><a href="#cb139-148" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb139-149"><a href="#cb139-149" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> from<span class="op">;</span></span>
<span id="cb139-150"><a href="#cb139-150" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb139-151"><a href="#cb139-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-152"><a href="#cb139-152" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> tick<span class="op">()</span> <span class="op">{</span></span>
<span id="cb139-153"><a href="#cb139-153" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> next<span class="op">;</span> <span class="dt">int</span> all_done<span class="op">;</span></span>
<span id="cb139-154"><a href="#cb139-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-155"><a href="#cb139-155" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Verifier si tous termines</span></span>
<span id="cb139-156"><a href="#cb139-156" aria-hidden="true" tabindex="-1"></a>    all_done <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb139-157"><a href="#cb139-157" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">!=</span> <span class="dv">2</span><span class="op">)</span> all_done <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb139-158"><a href="#cb139-158" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">!=</span> <span class="dv">2</span><span class="op">)</span> all_done <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb139-159"><a href="#cb139-159" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">!=</span> <span class="dv">2</span><span class="op">)</span> all_done <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb139-160"><a href="#cb139-160" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>all_done<span class="op">)</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb139-161"><a href="#cb139-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-162"><a href="#cb139-162" aria-hidden="true" tabindex="-1"></a>    ticks <span class="op">=</span> ticks <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb139-163"><a href="#cb139-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-164"><a href="#cb139-164" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Executer processus courant</span></span>
<span id="cb139-165"><a href="#cb139-165" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>proc_time<span class="op">[</span>current_proc<span class="op">]</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-166"><a href="#cb139-166" aria-hidden="true" tabindex="-1"></a>        proc_time<span class="op">[</span>current_proc<span class="op">]</span> <span class="op">=</span> proc_time<span class="op">[</span>current_proc<span class="op">]</span> <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb139-167"><a href="#cb139-167" aria-hidden="true" tabindex="-1"></a>        quantum_left <span class="op">=</span> quantum_left <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb139-168"><a href="#cb139-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-169"><a href="#cb139-169" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>proc_time<span class="op">[</span>current_proc<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-170"><a href="#cb139-170" aria-hidden="true" tabindex="-1"></a>            proc_state<span class="op">[</span>current_proc<span class="op">]</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb139-171"><a href="#cb139-171" aria-hidden="true" tabindex="-1"></a>            quantum_left <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb139-172"><a href="#cb139-172" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb139-173"><a href="#cb139-173" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb139-174"><a href="#cb139-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-175"><a href="#cb139-175" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Context switch si quantum epuise</span></span>
<span id="cb139-176"><a href="#cb139-176" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>quantum_left <span class="op">&lt;=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-177"><a href="#cb139-177" aria-hidden="true" tabindex="-1"></a>        next <span class="op">=</span> find_next<span class="op">(</span>current_proc<span class="op">);</span></span>
<span id="cb139-178"><a href="#cb139-178" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>next <span class="op">!=</span> current_proc<span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-179"><a href="#cb139-179" aria-hidden="true" tabindex="-1"></a>            current_proc <span class="op">=</span> next<span class="op">;</span></span>
<span id="cb139-180"><a href="#cb139-180" aria-hidden="true" tabindex="-1"></a>            switches <span class="op">=</span> switches <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb139-181"><a href="#cb139-181" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb139-182"><a href="#cb139-182" aria-hidden="true" tabindex="-1"></a>        quantum_left <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb139-183"><a href="#cb139-183" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb139-184"><a href="#cb139-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-185"><a href="#cb139-185" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb139-186"><a href="#cb139-186" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb139-187"><a href="#cb139-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-188"><a href="#cb139-188" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb139-189"><a href="#cb139-189" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> key<span class="op">;</span> <span class="dt">int</span> lk<span class="op">;</span> <span class="dt">int</span> t<span class="op">;</span> <span class="dt">int</span> running<span class="op">;</span></span>
<span id="cb139-190"><a href="#cb139-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-191"><a href="#cb139-191" aria-hidden="true" tabindex="-1"></a>    proc_time<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> proc_time<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> proc_time<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb139-192"><a href="#cb139-192" aria-hidden="true" tabindex="-1"></a>    proc_state<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> proc_state<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> proc_state<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb139-193"><a href="#cb139-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-194"><a href="#cb139-194" aria-hidden="true" tabindex="-1"></a>    lk <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> t <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> running <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb139-195"><a href="#cb139-195" aria-hidden="true" tabindex="-1"></a>    draw_all<span class="op">();</span></span>
<span id="cb139-196"><a href="#cb139-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-197"><a href="#cb139-197" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>t <span class="op">&lt;</span> <span class="dv">100000</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-198"><a href="#cb139-198" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> <span class="op">*</span>KEYBOARD<span class="op">;</span></span>
<span id="cb139-199"><a href="#cb139-199" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>key <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> key <span class="op">!=</span> lk<span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-200"><a href="#cb139-200" aria-hidden="true" tabindex="-1"></a>            t <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb139-201"><a href="#cb139-201" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">32</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-202"><a href="#cb139-202" aria-hidden="true" tabindex="-1"></a>                running <span class="op">=</span> tick<span class="op">();</span></span>
<span id="cb139-203"><a href="#cb139-203" aria-hidden="true" tabindex="-1"></a>                draw_all<span class="op">();</span></span>
<span id="cb139-204"><a href="#cb139-204" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb139-205"><a href="#cb139-205" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">13</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-206"><a href="#cb139-206" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> switches<span class="op">;</span></span>
<span id="cb139-207"><a href="#cb139-207" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb139-208"><a href="#cb139-208" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb139-209"><a href="#cb139-209" aria-hidden="true" tabindex="-1"></a>        lk <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb139-210"><a href="#cb139-210" aria-hidden="true" tabindex="-1"></a>        t <span class="op">=</span> t <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb139-211"><a href="#cb139-211" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb139-212"><a href="#cb139-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-213"><a href="#cb139-213" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> switches<span class="op">;</span></span>
<span id="cb139-214"><a href="#cb139-214" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.15" id="projet-1-mini-os-shell"><span class="header-section-number">1.5.15</span> Projet 1: Mini-OS Shell</h3>
<div class="sourceCode" id="cb140"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Mini-OS Shell - Solution</span></span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Cochez &quot;Capturer clavier&quot;</span></span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-4"><a href="#cb140-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>SCREEN <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb140-5"><a href="#cb140-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>KEYBOARD <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00402600</span><span class="op">;</span></span>
<span id="cb140-6"><a href="#cb140-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-7"><a href="#cb140-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_pixel<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb140-8"><a href="#cb140-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span> <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb140-9"><a href="#cb140-9" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb140-10"><a href="#cb140-10" aria-hidden="true" tabindex="-1"></a>    bit_pos <span class="op">=</span> <span class="op">((</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb140-11"><a href="#cb140-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">|</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">);</span></span>
<span id="cb140-12"><a href="#cb140-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb140-13"><a href="#cb140-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-14"><a href="#cb140-14" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> clear_screen<span class="op">()</span> <span class="op">{</span></span>
<span id="cb140-15"><a href="#cb140-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb140-16"><a href="#cb140-16" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN<span class="op">;</span></span>
<span id="cb140-17"><a href="#cb140-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">2400</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb140-18"><a href="#cb140-18" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>ptr <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb140-19"><a href="#cb140-19" aria-hidden="true" tabindex="-1"></a>        ptr <span class="op">=</span> ptr <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb140-20"><a href="#cb140-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb140-21"><a href="#cb140-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb140-22"><a href="#cb140-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-23"><a href="#cb140-23" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_digit<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> d<span class="op">)</span> <span class="op">{</span></span>
<span id="cb140-24"><a href="#cb140-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span> <span class="op">}</span></span>
<span id="cb140-25"><a href="#cb140-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">4</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">5</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">9</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb140-26"><a href="#cb140-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">5</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">6</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb140-27"><a href="#cb140-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb140-28"><a href="#cb140-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">2</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb140-29"><a href="#cb140-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">2</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb140-30"><a href="#cb140-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb140-31"><a href="#cb140-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb140-32"><a href="#cb140-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb140-33"><a href="#cb140-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-34"><a href="#cb140-34" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_plus<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb140-35"><a href="#cb140-35" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb140-36"><a href="#cb140-36" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb140-37"><a href="#cb140-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-38"><a href="#cb140-38" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_equal<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb140-39"><a href="#cb140-39" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb140-40"><a href="#cb140-40" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb140-41"><a href="#cb140-41" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb140-42"><a href="#cb140-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-43"><a href="#cb140-43" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_H<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb140-44"><a href="#cb140-44" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span></span>
<span id="cb140-45"><a href="#cb140-45" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb140-46"><a href="#cb140-46" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span></span>
<span id="cb140-47"><a href="#cb140-47" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb140-48"><a href="#cb140-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-49"><a href="#cb140-49" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_I<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb140-50"><a href="#cb140-50" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb140-51"><a href="#cb140-51" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb140-52"><a href="#cb140-52" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span></span>
<span id="cb140-53"><a href="#cb140-53" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb140-54"><a href="#cb140-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-55"><a href="#cb140-55" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_box<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb140-56"><a href="#cb140-56" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb140-57"><a href="#cb140-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y <span class="op">+</span> h <span class="op">-</span> <span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb140-58"><a href="#cb140-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> h<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> i<span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> w <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> y <span class="op">+</span> i<span class="op">);</span> <span class="op">}</span></span>
<span id="cb140-59"><a href="#cb140-59" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb140-60"><a href="#cb140-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-61"><a href="#cb140-61" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_menu<span class="op">()</span> <span class="op">{</span></span>
<span id="cb140-62"><a href="#cb140-62" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Titre: MENU</span></span>
<span id="cb140-63"><a href="#cb140-63" aria-hidden="true" tabindex="-1"></a>    <span class="co">// M</span></span>
<span id="cb140-64"><a href="#cb140-64" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb140-65"><a href="#cb140-65" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">6</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">7</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb140-66"><a href="#cb140-66" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb140-67"><a href="#cb140-67" aria-hidden="true" tabindex="-1"></a>    <span class="co">// E</span></span>
<span id="cb140-68"><a href="#cb140-68" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">11</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">12</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">13</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb140-69"><a href="#cb140-69" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">11</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">11</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">12</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">11</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb140-70"><a href="#cb140-70" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">11</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">12</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">13</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb140-71"><a href="#cb140-71" aria-hidden="true" tabindex="-1"></a>    <span class="co">// N</span></span>
<span id="cb140-72"><a href="#cb140-72" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb140-73"><a href="#cb140-73" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">17</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">18</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">19</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb140-74"><a href="#cb140-74" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb140-75"><a href="#cb140-75" aria-hidden="true" tabindex="-1"></a>    <span class="co">// U</span></span>
<span id="cb140-76"><a href="#cb140-76" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">23</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">23</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">23</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">23</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb140-77"><a href="#cb140-77" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">24</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">25</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb140-78"><a href="#cb140-78" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">26</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">26</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">26</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">26</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb140-79"><a href="#cb140-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-80"><a href="#cb140-80" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Option 1: CALC</span></span>
<span id="cb140-81"><a href="#cb140-81" aria-hidden="true" tabindex="-1"></a>    draw_box<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">12</span><span class="op">);</span></span>
<span id="cb140-82"><a href="#cb140-82" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">17</span><span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb140-83"><a href="#cb140-83" aria-hidden="true" tabindex="-1"></a>    <span class="co">// C</span></span>
<span id="cb140-84"><a href="#cb140-84" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">17</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">17</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">17</span><span class="op">,</span> <span class="dv">17</span><span class="op">);</span></span>
<span id="cb140-85"><a href="#cb140-85" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">18</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">19</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">20</span><span class="op">);</span></span>
<span id="cb140-86"><a href="#cb140-86" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">21</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">21</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">17</span><span class="op">,</span> <span class="dv">21</span><span class="op">);</span></span>
<span id="cb140-87"><a href="#cb140-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-88"><a href="#cb140-88" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Option 2: COUNT</span></span>
<span id="cb140-89"><a href="#cb140-89" aria-hidden="true" tabindex="-1"></a>    draw_box<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">28</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">12</span><span class="op">);</span></span>
<span id="cb140-90"><a href="#cb140-90" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">31</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb140-91"><a href="#cb140-91" aria-hidden="true" tabindex="-1"></a>    <span class="co">// #</span></span>
<span id="cb140-92"><a href="#cb140-92" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">31</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">17</span><span class="op">,</span> <span class="dv">31</span><span class="op">);</span></span>
<span id="cb140-93"><a href="#cb140-93" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">17</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">18</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span></span>
<span id="cb140-94"><a href="#cb140-94" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">33</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">17</span><span class="op">,</span> <span class="dv">33</span><span class="op">);</span></span>
<span id="cb140-95"><a href="#cb140-95" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">34</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">34</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">34</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">17</span><span class="op">,</span> <span class="dv">34</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">18</span><span class="op">,</span> <span class="dv">34</span><span class="op">);</span></span>
<span id="cb140-96"><a href="#cb140-96" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">35</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">17</span><span class="op">,</span> <span class="dv">35</span><span class="op">);</span></span>
<span id="cb140-97"><a href="#cb140-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-98"><a href="#cb140-98" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Option 3: MSG</span></span>
<span id="cb140-99"><a href="#cb140-99" aria-hidden="true" tabindex="-1"></a>    draw_box<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">42</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">12</span><span class="op">);</span></span>
<span id="cb140-100"><a href="#cb140-100" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">45</span><span class="op">,</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb140-101"><a href="#cb140-101" aria-hidden="true" tabindex="-1"></a>    draw_H<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">45</span><span class="op">);</span></span>
<span id="cb140-102"><a href="#cb140-102" aria-hidden="true" tabindex="-1"></a>    draw_I<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">45</span><span class="op">);</span></span>
<span id="cb140-103"><a href="#cb140-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-104"><a href="#cb140-104" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Option 0: QUIT</span></span>
<span id="cb140-105"><a href="#cb140-105" aria-hidden="true" tabindex="-1"></a>    draw_box<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">56</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">12</span><span class="op">);</span></span>
<span id="cb140-106"><a href="#cb140-106" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">59</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb140-107"><a href="#cb140-107" aria-hidden="true" tabindex="-1"></a>    <span class="co">// X</span></span>
<span id="cb140-108"><a href="#cb140-108" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">59</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">19</span><span class="op">,</span> <span class="dv">59</span><span class="op">);</span></span>
<span id="cb140-109"><a href="#cb140-109" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">60</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">18</span><span class="op">,</span> <span class="dv">60</span><span class="op">);</span></span>
<span id="cb140-110"><a href="#cb140-110" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">17</span><span class="op">,</span> <span class="dv">61</span><span class="op">);</span></span>
<span id="cb140-111"><a href="#cb140-111" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">62</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">18</span><span class="op">,</span> <span class="dv">62</span><span class="op">);</span></span>
<span id="cb140-112"><a href="#cb140-112" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">63</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">19</span><span class="op">,</span> <span class="dv">63</span><span class="op">);</span></span>
<span id="cb140-113"><a href="#cb140-113" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb140-114"><a href="#cb140-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-115"><a href="#cb140-115" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> delay<span class="op">()</span> <span class="op">{</span></span>
<span id="cb140-116"><a href="#cb140-116" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb140-117"><a href="#cb140-117" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">50000</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> <span class="op">}</span></span>
<span id="cb140-118"><a href="#cb140-118" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb140-119"><a href="#cb140-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-120"><a href="#cb140-120" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> wait_key<span class="op">()</span> <span class="op">{</span></span>
<span id="cb140-121"><a href="#cb140-121" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> k<span class="op">;</span></span>
<span id="cb140-122"><a href="#cb140-122" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb140-123"><a href="#cb140-123" aria-hidden="true" tabindex="-1"></a>        k <span class="op">=</span> <span class="op">*</span>KEYBOARD<span class="op">;</span></span>
<span id="cb140-124"><a href="#cb140-124" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>k <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb140-125"><a href="#cb140-125" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb140-126"><a href="#cb140-126" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb140-127"><a href="#cb140-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-128"><a href="#cb140-128" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> app_calc<span class="op">()</span> <span class="op">{</span></span>
<span id="cb140-129"><a href="#cb140-129" aria-hidden="true" tabindex="-1"></a>    clear_screen<span class="op">();</span></span>
<span id="cb140-130"><a href="#cb140-130" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Titre</span></span>
<span id="cb140-131"><a href="#cb140-131" aria-hidden="true" tabindex="-1"></a>    <span class="co">// C</span></span>
<span id="cb140-132"><a href="#cb140-132" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">6</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">7</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb140-133"><a href="#cb140-133" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb140-134"><a href="#cb140-134" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">6</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">7</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb140-135"><a href="#cb140-135" aria-hidden="true" tabindex="-1"></a>    <span class="co">// A</span></span>
<span id="cb140-136"><a href="#cb140-136" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">11</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">12</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb140-137"><a href="#cb140-137" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">11</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">12</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb140-138"><a href="#cb140-138" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">12</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">12</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb140-139"><a href="#cb140-139" aria-hidden="true" tabindex="-1"></a>    <span class="co">// L</span></span>
<span id="cb140-140"><a href="#cb140-140" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb140-141"><a href="#cb140-141" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">17</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb140-142"><a href="#cb140-142" aria-hidden="true" tabindex="-1"></a>    <span class="co">// C</span></span>
<span id="cb140-143"><a href="#cb140-143" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">21</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">22</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">23</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb140-144"><a href="#cb140-144" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb140-145"><a href="#cb140-145" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">21</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">22</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">23</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb140-146"><a href="#cb140-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-147"><a href="#cb140-147" aria-hidden="true" tabindex="-1"></a>    <span class="co">// 3 + 5 = 8</span></span>
<span id="cb140-148"><a href="#cb140-148" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb140-149"><a href="#cb140-149" aria-hidden="true" tabindex="-1"></a>    draw_plus<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">20</span><span class="op">);</span></span>
<span id="cb140-150"><a href="#cb140-150" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span><span class="dv">22</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb140-151"><a href="#cb140-151" aria-hidden="true" tabindex="-1"></a>    draw_equal<span class="op">(</span><span class="dv">28</span><span class="op">,</span> <span class="dv">20</span><span class="op">);</span></span>
<span id="cb140-152"><a href="#cb140-152" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span><span class="dv">34</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb140-153"><a href="#cb140-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-154"><a href="#cb140-154" aria-hidden="true" tabindex="-1"></a>    wait_key<span class="op">();</span></span>
<span id="cb140-155"><a href="#cb140-155" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb140-156"><a href="#cb140-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-157"><a href="#cb140-157" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> app_count<span class="op">()</span> <span class="op">{</span></span>
<span id="cb140-158"><a href="#cb140-158" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb140-159"><a href="#cb140-159" aria-hidden="true" tabindex="-1"></a>    clear_screen<span class="op">();</span></span>
<span id="cb140-160"><a href="#cb140-160" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Titre: COUNT</span></span>
<span id="cb140-161"><a href="#cb140-161" aria-hidden="true" tabindex="-1"></a>    <span class="co">// #</span></span>
<span id="cb140-162"><a href="#cb140-162" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">7</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb140-163"><a href="#cb140-163" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">6</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">7</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb140-164"><a href="#cb140-164" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">7</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb140-165"><a href="#cb140-165" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">6</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">7</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb140-166"><a href="#cb140-166" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">7</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb140-167"><a href="#cb140-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-168"><a href="#cb140-168" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">6</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb140-169"><a href="#cb140-169" aria-hidden="true" tabindex="-1"></a>        draw_digit<span class="op">(</span><span class="dv">10</span> <span class="op">+</span> i <span class="op">*</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb140-170"><a href="#cb140-170" aria-hidden="true" tabindex="-1"></a>        delay<span class="op">();</span></span>
<span id="cb140-171"><a href="#cb140-171" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb140-172"><a href="#cb140-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-173"><a href="#cb140-173" aria-hidden="true" tabindex="-1"></a>    wait_key<span class="op">();</span></span>
<span id="cb140-174"><a href="#cb140-174" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb140-175"><a href="#cb140-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-176"><a href="#cb140-176" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> app_msg<span class="op">()</span> <span class="op">{</span></span>
<span id="cb140-177"><a href="#cb140-177" aria-hidden="true" tabindex="-1"></a>    clear_screen<span class="op">();</span></span>
<span id="cb140-178"><a href="#cb140-178" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Titre: MSG</span></span>
<span id="cb140-179"><a href="#cb140-179" aria-hidden="true" tabindex="-1"></a>    <span class="co">// M</span></span>
<span id="cb140-180"><a href="#cb140-180" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb140-181"><a href="#cb140-181" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">6</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">7</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb140-182"><a href="#cb140-182" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb140-183"><a href="#cb140-183" aria-hidden="true" tabindex="-1"></a>    <span class="co">// S</span></span>
<span id="cb140-184"><a href="#cb140-184" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">12</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">13</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">11</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb140-185"><a href="#cb140-185" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">12</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">13</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb140-186"><a href="#cb140-186" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">11</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">12</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb140-187"><a href="#cb140-187" aria-hidden="true" tabindex="-1"></a>    <span class="co">// G</span></span>
<span id="cb140-188"><a href="#cb140-188" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">17</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">18</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">19</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb140-189"><a href="#cb140-189" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">18</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">19</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb140-190"><a href="#cb140-190" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">19</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb140-191"><a href="#cb140-191" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">17</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">18</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">19</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb140-192"><a href="#cb140-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-193"><a href="#cb140-193" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Grand HI</span></span>
<span id="cb140-194"><a href="#cb140-194" aria-hidden="true" tabindex="-1"></a>    <span class="co">// H</span></span>
<span id="cb140-195"><a href="#cb140-195" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">18</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">19</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">21</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">22</span><span class="op">);</span></span>
<span id="cb140-196"><a href="#cb140-196" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">23</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">24</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">25</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">26</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">27</span><span class="op">);</span></span>
<span id="cb140-197"><a href="#cb140-197" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">11</span><span class="op">,</span> <span class="dv">22</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">12</span><span class="op">,</span> <span class="dv">22</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">13</span><span class="op">,</span> <span class="dv">22</span><span class="op">);</span></span>
<span id="cb140-198"><a href="#cb140-198" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">18</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">19</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">20</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">21</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">22</span><span class="op">);</span></span>
<span id="cb140-199"><a href="#cb140-199" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">23</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">24</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">25</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">26</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">27</span><span class="op">);</span></span>
<span id="cb140-200"><a href="#cb140-200" aria-hidden="true" tabindex="-1"></a>    <span class="co">// I</span></span>
<span id="cb140-201"><a href="#cb140-201" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">18</span><span class="op">,</span> <span class="dv">18</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">19</span><span class="op">,</span> <span class="dv">18</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">18</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">21</span><span class="op">,</span> <span class="dv">18</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">22</span><span class="op">,</span> <span class="dv">18</span><span class="op">);</span></span>
<span id="cb140-202"><a href="#cb140-202" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">19</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">20</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">21</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">22</span><span class="op">);</span></span>
<span id="cb140-203"><a href="#cb140-203" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">23</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">24</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">25</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">26</span><span class="op">);</span></span>
<span id="cb140-204"><a href="#cb140-204" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">18</span><span class="op">,</span> <span class="dv">27</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">19</span><span class="op">,</span> <span class="dv">27</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">27</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">21</span><span class="op">,</span> <span class="dv">27</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">22</span><span class="op">,</span> <span class="dv">27</span><span class="op">);</span></span>
<span id="cb140-205"><a href="#cb140-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-206"><a href="#cb140-206" aria-hidden="true" tabindex="-1"></a>    wait_key<span class="op">();</span></span>
<span id="cb140-207"><a href="#cb140-207" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb140-208"><a href="#cb140-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-209"><a href="#cb140-209" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb140-210"><a href="#cb140-210" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> key<span class="op">;</span> <span class="dt">int</span> lk<span class="op">;</span> <span class="dt">int</span> running<span class="op">;</span></span>
<span id="cb140-211"><a href="#cb140-211" aria-hidden="true" tabindex="-1"></a>    running <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb140-212"><a href="#cb140-212" aria-hidden="true" tabindex="-1"></a>    lk <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb140-213"><a href="#cb140-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-214"><a href="#cb140-214" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>running<span class="op">)</span> <span class="op">{</span></span>
<span id="cb140-215"><a href="#cb140-215" aria-hidden="true" tabindex="-1"></a>        clear_screen<span class="op">();</span></span>
<span id="cb140-216"><a href="#cb140-216" aria-hidden="true" tabindex="-1"></a>        draw_menu<span class="op">();</span></span>
<span id="cb140-217"><a href="#cb140-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-218"><a href="#cb140-218" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb140-219"><a href="#cb140-219" aria-hidden="true" tabindex="-1"></a>            key <span class="op">=</span> <span class="op">*</span>KEYBOARD<span class="op">;</span></span>
<span id="cb140-220"><a href="#cb140-220" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> key <span class="op">!=</span> lk<span class="op">)</span> <span class="op">{</span></span>
<span id="cb140-221"><a href="#cb140-221" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">49</span><span class="op">)</span> <span class="op">{</span> app_calc<span class="op">();</span> <span class="cf">break</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb140-222"><a href="#cb140-222" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">50</span><span class="op">)</span> <span class="op">{</span> app_count<span class="op">();</span> <span class="cf">break</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb140-223"><a href="#cb140-223" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">51</span><span class="op">)</span> <span class="op">{</span> app_msg<span class="op">();</span> <span class="cf">break</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb140-224"><a href="#cb140-224" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">48</span><span class="op">)</span> <span class="op">{</span> running <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">break</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb140-225"><a href="#cb140-225" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb140-226"><a href="#cb140-226" aria-hidden="true" tabindex="-1"></a>            lk <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb140-227"><a href="#cb140-227" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb140-228"><a href="#cb140-228" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb140-229"><a href="#cb140-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-230"><a href="#cb140-230" aria-hidden="true" tabindex="-1"></a>    clear_screen<span class="op">();</span></span>
<span id="cb140-231"><a href="#cb140-231" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb140-232"><a href="#cb140-232" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.16" id="projet-2-task-manager"><span class="header-section-number">1.5.16</span> Projet 2: Task Manager</h3>
<div class="sourceCode" id="cb141"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Gestionnaire de TÃ¢ches - Solution</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Cochez &quot;Capturer clavier&quot;</span></span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>SCREEN <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb141-5"><a href="#cb141-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>KEYBOARD <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00402600</span><span class="op">;</span></span>
<span id="cb141-6"><a href="#cb141-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-7"><a href="#cb141-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> proc_work<span class="op">[</span><span class="dv">4</span><span class="op">];</span></span>
<span id="cb141-8"><a href="#cb141-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> proc_state<span class="op">[</span><span class="dv">4</span><span class="op">];</span></span>
<span id="cb141-9"><a href="#cb141-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> proc_done<span class="op">[</span><span class="dv">4</span><span class="op">];</span></span>
<span id="cb141-10"><a href="#cb141-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> current <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb141-11"><a href="#cb141-11" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> quantum_left <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb141-12"><a href="#cb141-12" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> switches <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb141-13"><a href="#cb141-13" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> ticks <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb141-14"><a href="#cb141-14" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> auto_run <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb141-15"><a href="#cb141-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-16"><a href="#cb141-16" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_pixel<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-17"><a href="#cb141-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span> <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb141-18"><a href="#cb141-18" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb141-19"><a href="#cb141-19" aria-hidden="true" tabindex="-1"></a>    bit_pos <span class="op">=</span> <span class="op">((</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb141-20"><a href="#cb141-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">|</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">);</span></span>
<span id="cb141-21"><a href="#cb141-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb141-22"><a href="#cb141-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-23"><a href="#cb141-23" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> clear_rect<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-24"><a href="#cb141-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> j<span class="op">;</span> <span class="dt">int</span> px<span class="op">;</span> <span class="dt">int</span> py<span class="op">;</span> <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span> <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb141-25"><a href="#cb141-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-26"><a href="#cb141-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> h<span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-27"><a href="#cb141-27" aria-hidden="true" tabindex="-1"></a>            px <span class="op">=</span> x <span class="op">+</span> i<span class="op">;</span> py <span class="op">=</span> y <span class="op">+</span> j<span class="op">;</span></span>
<span id="cb141-28"><a href="#cb141-28" aria-hidden="true" tabindex="-1"></a>            ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>py <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>py <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>px <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb141-29"><a href="#cb141-29" aria-hidden="true" tabindex="-1"></a>            bit_pos <span class="op">=</span> <span class="op">((</span>px <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>px <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb141-30"><a href="#cb141-30" aria-hidden="true" tabindex="-1"></a>            <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">&amp;</span> <span class="op">(</span><span class="bn">0xFFFFFFFF</span> <span class="op">^</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">));</span></span>
<span id="cb141-31"><a href="#cb141-31" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb141-32"><a href="#cb141-32" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb141-33"><a href="#cb141-33" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb141-34"><a href="#cb141-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-35"><a href="#cb141-35" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> fill_rect<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-36"><a href="#cb141-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> j<span class="op">;</span></span>
<span id="cb141-37"><a href="#cb141-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-38"><a href="#cb141-38" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> h<span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-39"><a href="#cb141-39" aria-hidden="true" tabindex="-1"></a>            set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y <span class="op">+</span> j<span class="op">);</span></span>
<span id="cb141-40"><a href="#cb141-40" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb141-41"><a href="#cb141-41" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb141-42"><a href="#cb141-42" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb141-43"><a href="#cb141-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-44"><a href="#cb141-44" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_box<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-45"><a href="#cb141-45" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb141-46"><a href="#cb141-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y <span class="op">+</span> h <span class="op">-</span> <span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb141-47"><a href="#cb141-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> h<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> i<span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> w <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> y <span class="op">+</span> i<span class="op">);</span> <span class="op">}</span></span>
<span id="cb141-48"><a href="#cb141-48" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb141-49"><a href="#cb141-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-50"><a href="#cb141-50" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_digit<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> d<span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-51"><a href="#cb141-51" aria-hidden="true" tabindex="-1"></a>    clear_rect<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb141-52"><a href="#cb141-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span> <span class="op">}</span></span>
<span id="cb141-53"><a href="#cb141-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">4</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">5</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">9</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb141-54"><a href="#cb141-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">5</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">6</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb141-55"><a href="#cb141-55" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb141-56"><a href="#cb141-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">2</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb141-57"><a href="#cb141-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">2</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb141-58"><a href="#cb141-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb141-59"><a href="#cb141-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb141-60"><a href="#cb141-60" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb141-61"><a href="#cb141-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-62"><a href="#cb141-62" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_proc<span class="op">(</span><span class="dt">int</span> idx<span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-63"><a href="#cb141-63" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x<span class="op">;</span> <span class="dt">int</span> w<span class="op">;</span> <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> active<span class="op">;</span></span>
<span id="cb141-64"><a href="#cb141-64" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> idx <span class="op">*</span> <span class="dv">40</span> <span class="op">+</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb141-65"><a href="#cb141-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-66"><a href="#cb141-66" aria-hidden="true" tabindex="-1"></a>    clear_rect<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">36</span><span class="op">,</span> <span class="dv">55</span><span class="op">);</span></span>
<span id="cb141-67"><a href="#cb141-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-68"><a href="#cb141-68" aria-hidden="true" tabindex="-1"></a>    active <span class="op">=</span> <span class="op">(</span>idx <span class="op">==</span> current <span class="op">&amp;&amp;</span> proc_state<span class="op">[</span>idx<span class="op">]</span> <span class="op">==</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb141-69"><a href="#cb141-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-70"><a href="#cb141-70" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Cadre - double si running</span></span>
<span id="cb141-71"><a href="#cb141-71" aria-hidden="true" tabindex="-1"></a>    draw_box<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">36</span><span class="op">,</span> <span class="dv">55</span><span class="op">);</span></span>
<span id="cb141-72"><a href="#cb141-72" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>active<span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-73"><a href="#cb141-73" aria-hidden="true" tabindex="-1"></a>        draw_box<span class="op">(</span>x <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">32</span><span class="op">,</span> <span class="dv">51</span><span class="op">);</span></span>
<span id="cb141-74"><a href="#cb141-74" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb141-75"><a href="#cb141-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-76"><a href="#cb141-76" aria-hidden="true" tabindex="-1"></a>    <span class="co">// P et numero (grand)</span></span>
<span id="cb141-77"><a href="#cb141-77" aria-hidden="true" tabindex="-1"></a>    fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">9</span><span class="op">);</span></span>
<span id="cb141-78"><a href="#cb141-78" aria-hidden="true" tabindex="-1"></a>    fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb141-79"><a href="#cb141-79" aria-hidden="true" tabindex="-1"></a>    fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb141-80"><a href="#cb141-80" aria-hidden="true" tabindex="-1"></a>    fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb141-81"><a href="#cb141-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-82"><a href="#cb141-82" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span>x <span class="op">+</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">12</span><span class="op">,</span> idx<span class="op">);</span></span>
<span id="cb141-83"><a href="#cb141-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-84"><a href="#cb141-84" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Etat: R=Ready *=Run B=Block X=Done</span></span>
<span id="cb141-85"><a href="#cb141-85" aria-hidden="true" tabindex="-1"></a>    clear_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">24</span><span class="op">,</span> <span class="dv">16</span><span class="op">,</span> <span class="dv">10</span><span class="op">);</span></span>
<span id="cb141-86"><a href="#cb141-86" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span>idx<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-87"><a href="#cb141-87" aria-hidden="true" tabindex="-1"></a>        <span class="co">// R</span></span>
<span id="cb141-88"><a href="#cb141-88" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb141-89"><a href="#cb141-89" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb141-90"><a href="#cb141-90" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">18</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb141-91"><a href="#cb141-91" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">28</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb141-92"><a href="#cb141-92" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">16</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb141-93"><a href="#cb141-93" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb141-94"><a href="#cb141-94" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span>idx<span class="op">]</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-95"><a href="#cb141-95" aria-hidden="true" tabindex="-1"></a>        <span class="co">// * etoile</span></span>
<span id="cb141-96"><a href="#cb141-96" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">26</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb141-97"><a href="#cb141-97" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">28</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb141-98"><a href="#cb141-98" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb141-99"><a href="#cb141-99" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span>idx<span class="op">]</span> <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-100"><a href="#cb141-100" aria-hidden="true" tabindex="-1"></a>        <span class="co">// B</span></span>
<span id="cb141-101"><a href="#cb141-101" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb141-102"><a href="#cb141-102" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb141-103"><a href="#cb141-103" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">28</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb141-104"><a href="#cb141-104" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">31</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb141-105"><a href="#cb141-105" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">18</span><span class="op">,</span> <span class="dv">26</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb141-106"><a href="#cb141-106" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">18</span><span class="op">,</span> <span class="dv">29</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb141-107"><a href="#cb141-107" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb141-108"><a href="#cb141-108" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span>idx<span class="op">]</span> <span class="op">==</span> <span class="dv">3</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-109"><a href="#cb141-109" aria-hidden="true" tabindex="-1"></a>        <span class="co">// X</span></span>
<span id="cb141-110"><a href="#cb141-110" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span> fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">18</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb141-111"><a href="#cb141-111" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">27</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span> fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">16</span><span class="op">,</span> <span class="dv">27</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb141-112"><a href="#cb141-112" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">29</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb141-113"><a href="#cb141-113" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">31</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span> fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">18</span><span class="op">,</span> <span class="dv">31</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb141-114"><a href="#cb141-114" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb141-115"><a href="#cb141-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-116"><a href="#cb141-116" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Barre travail restant</span></span>
<span id="cb141-117"><a href="#cb141-117" aria-hidden="true" tabindex="-1"></a>    w <span class="op">=</span> proc_work<span class="op">[</span>idx<span class="op">];</span></span>
<span id="cb141-118"><a href="#cb141-118" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-119"><a href="#cb141-119" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>i <span class="op">&lt;</span> w<span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-120"><a href="#cb141-120" aria-hidden="true" tabindex="-1"></a>            fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">6</span> <span class="op">+</span> i <span class="op">*</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">38</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb141-121"><a href="#cb141-121" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb141-122"><a href="#cb141-122" aria-hidden="true" tabindex="-1"></a>            draw_box<span class="op">(</span>x <span class="op">+</span> <span class="dv">6</span> <span class="op">+</span> i <span class="op">*</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">38</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb141-123"><a href="#cb141-123" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb141-124"><a href="#cb141-124" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb141-125"><a href="#cb141-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-126"><a href="#cb141-126" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Compteur</span></span>
<span id="cb141-127"><a href="#cb141-127" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span>x <span class="op">+</span> <span class="dv">15</span><span class="op">,</span> <span class="dv">50</span><span class="op">,</span> proc_done<span class="op">[</span>idx<span class="op">]</span> <span class="op">%</span> <span class="dv">10</span><span class="op">);</span></span>
<span id="cb141-128"><a href="#cb141-128" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb141-129"><a href="#cb141-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-130"><a href="#cb141-130" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_info<span class="op">()</span> <span class="op">{</span></span>
<span id="cb141-131"><a href="#cb141-131" aria-hidden="true" tabindex="-1"></a>    clear_rect<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">62</span><span class="op">,</span> <span class="dv">156</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb141-132"><a href="#cb141-132" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Q:</span></span>
<span id="cb141-133"><a href="#cb141-133" aria-hidden="true" tabindex="-1"></a>    fill_rect<span class="op">(</span><span class="dv">6</span><span class="op">,</span> <span class="dv">63</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> fill_rect<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">63</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span> fill_rect<span class="op">(</span><span class="dv">11</span><span class="op">,</span> <span class="dv">63</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb141-134"><a href="#cb141-134" aria-hidden="true" tabindex="-1"></a>    fill_rect<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">66</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span> fill_rect<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">67</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb141-135"><a href="#cb141-135" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">63</span><span class="op">,</span> quantum_left<span class="op">);</span></span>
<span id="cb141-136"><a href="#cb141-136" aria-hidden="true" tabindex="-1"></a>    <span class="co">// S:</span></span>
<span id="cb141-137"><a href="#cb141-137" aria-hidden="true" tabindex="-1"></a>    fill_rect<span class="op">(</span><span class="dv">30</span><span class="op">,</span> <span class="dv">63</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span> fill_rect<span class="op">(</span><span class="dv">28</span><span class="op">,</span> <span class="dv">65</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb141-138"><a href="#cb141-138" aria-hidden="true" tabindex="-1"></a>    fill_rect<span class="op">(</span><span class="dv">30</span><span class="op">,</span> <span class="dv">66</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span> fill_rect<span class="op">(</span><span class="dv">33</span><span class="op">,</span> <span class="dv">67</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb141-139"><a href="#cb141-139" aria-hidden="true" tabindex="-1"></a>    fill_rect<span class="op">(</span><span class="dv">28</span><span class="op">,</span> <span class="dv">68</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb141-140"><a href="#cb141-140" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span><span class="dv">38</span><span class="op">,</span> <span class="dv">63</span><span class="op">,</span> switches <span class="op">%</span> <span class="dv">10</span><span class="op">);</span></span>
<span id="cb141-141"><a href="#cb141-141" aria-hidden="true" tabindex="-1"></a>    <span class="co">// T:</span></span>
<span id="cb141-142"><a href="#cb141-142" aria-hidden="true" tabindex="-1"></a>    fill_rect<span class="op">(</span><span class="dv">52</span><span class="op">,</span> <span class="dv">63</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span> fill_rect<span class="op">(</span><span class="dv">54</span><span class="op">,</span> <span class="dv">65</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb141-143"><a href="#cb141-143" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span><span class="dv">62</span><span class="op">,</span> <span class="dv">63</span><span class="op">,</span> ticks <span class="op">%</span> <span class="dv">10</span><span class="op">);</span></span>
<span id="cb141-144"><a href="#cb141-144" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb141-145"><a href="#cb141-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-146"><a href="#cb141-146" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> find_next<span class="op">(</span><span class="dt">int</span> from<span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-147"><a href="#cb141-147" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> next<span class="op">;</span></span>
<span id="cb141-148"><a href="#cb141-148" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">4</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-149"><a href="#cb141-149" aria-hidden="true" tabindex="-1"></a>        next <span class="op">=</span> <span class="op">(</span>from <span class="op">+</span> i<span class="op">)</span> <span class="op">%</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb141-150"><a href="#cb141-150" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span>next<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> proc_work<span class="op">[</span>next<span class="op">]</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> next<span class="op">;</span></span>
<span id="cb141-151"><a href="#cb141-151" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb141-152"><a href="#cb141-152" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> from<span class="op">;</span></span>
<span id="cb141-153"><a href="#cb141-153" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb141-154"><a href="#cb141-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-155"><a href="#cb141-155" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> all_done<span class="op">()</span> <span class="op">{</span></span>
<span id="cb141-156"><a href="#cb141-156" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb141-157"><a href="#cb141-157" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-158"><a href="#cb141-158" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> <span class="dv">3</span> <span class="op">&amp;&amp;</span> proc_state<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-159"><a href="#cb141-159" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>proc_work<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb141-160"><a href="#cb141-160" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb141-161"><a href="#cb141-161" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb141-162"><a href="#cb141-162" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb141-163"><a href="#cb141-163" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb141-164"><a href="#cb141-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-165"><a href="#cb141-165" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> do_tick<span class="op">()</span> <span class="op">{</span></span>
<span id="cb141-166"><a href="#cb141-166" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> next<span class="op">;</span></span>
<span id="cb141-167"><a href="#cb141-167" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>all_done<span class="op">())</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb141-168"><a href="#cb141-168" aria-hidden="true" tabindex="-1"></a>    ticks <span class="op">=</span> ticks <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb141-169"><a href="#cb141-169" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span>current<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> proc_state<span class="op">[</span>current<span class="op">]</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb141-170"><a href="#cb141-170" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span>current<span class="op">]</span> <span class="op">==</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> proc_work<span class="op">[</span>current<span class="op">]</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-171"><a href="#cb141-171" aria-hidden="true" tabindex="-1"></a>        proc_work<span class="op">[</span>current<span class="op">]</span> <span class="op">=</span> proc_work<span class="op">[</span>current<span class="op">]</span> <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb141-172"><a href="#cb141-172" aria-hidden="true" tabindex="-1"></a>        proc_done<span class="op">[</span>current<span class="op">]</span> <span class="op">=</span> proc_done<span class="op">[</span>current<span class="op">]</span> <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb141-173"><a href="#cb141-173" aria-hidden="true" tabindex="-1"></a>        quantum_left <span class="op">=</span> quantum_left <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb141-174"><a href="#cb141-174" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>proc_work<span class="op">[</span>current<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-175"><a href="#cb141-175" aria-hidden="true" tabindex="-1"></a>            proc_state<span class="op">[</span>current<span class="op">]</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb141-176"><a href="#cb141-176" aria-hidden="true" tabindex="-1"></a>            quantum_left <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb141-177"><a href="#cb141-177" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb141-178"><a href="#cb141-178" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb141-179"><a href="#cb141-179" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>quantum_left <span class="op">&lt;=</span> <span class="dv">0</span> <span class="op">||</span> proc_state<span class="op">[</span>current<span class="op">]</span> <span class="op">==</span> <span class="dv">2</span> <span class="op">||</span> proc_state<span class="op">[</span>current<span class="op">]</span> <span class="op">==</span> <span class="dv">3</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-180"><a href="#cb141-180" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span>current<span class="op">]</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> proc_state<span class="op">[</span>current<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb141-181"><a href="#cb141-181" aria-hidden="true" tabindex="-1"></a>        next <span class="op">=</span> find_next<span class="op">(</span>current<span class="op">);</span></span>
<span id="cb141-182"><a href="#cb141-182" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>next <span class="op">!=</span> current<span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-183"><a href="#cb141-183" aria-hidden="true" tabindex="-1"></a>            current <span class="op">=</span> next<span class="op">;</span></span>
<span id="cb141-184"><a href="#cb141-184" aria-hidden="true" tabindex="-1"></a>            switches <span class="op">=</span> switches <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb141-185"><a href="#cb141-185" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb141-186"><a href="#cb141-186" aria-hidden="true" tabindex="-1"></a>        quantum_left <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb141-187"><a href="#cb141-187" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb141-188"><a href="#cb141-188" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb141-189"><a href="#cb141-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-190"><a href="#cb141-190" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> toggle_block<span class="op">(</span><span class="dt">int</span> idx<span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-191"><a href="#cb141-191" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span>idx<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> proc_state<span class="op">[</span>idx<span class="op">]</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-192"><a href="#cb141-192" aria-hidden="true" tabindex="-1"></a>        proc_state<span class="op">[</span>idx<span class="op">]</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb141-193"><a href="#cb141-193" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>idx <span class="op">==</span> current<span class="op">)</span> quantum_left <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb141-194"><a href="#cb141-194" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span>idx<span class="op">]</span> <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-195"><a href="#cb141-195" aria-hidden="true" tabindex="-1"></a>        proc_state<span class="op">[</span>idx<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb141-196"><a href="#cb141-196" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb141-197"><a href="#cb141-197" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb141-198"><a href="#cb141-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-199"><a href="#cb141-199" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_all<span class="op">()</span> <span class="op">{</span></span>
<span id="cb141-200"><a href="#cb141-200" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb141-201"><a href="#cb141-201" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> draw_proc<span class="op">(</span>i<span class="op">);</span></span>
<span id="cb141-202"><a href="#cb141-202" aria-hidden="true" tabindex="-1"></a>    draw_info<span class="op">();</span></span>
<span id="cb141-203"><a href="#cb141-203" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb141-204"><a href="#cb141-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-205"><a href="#cb141-205" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb141-206"><a href="#cb141-206" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> key<span class="op">;</span> <span class="dt">int</span> lk<span class="op">;</span> <span class="dt">int</span> delay<span class="op">;</span></span>
<span id="cb141-207"><a href="#cb141-207" aria-hidden="true" tabindex="-1"></a>    proc_work<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> proc_work<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> proc_work<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">4</span><span class="op">;</span> proc_work<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb141-208"><a href="#cb141-208" aria-hidden="true" tabindex="-1"></a>    proc_state<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> proc_state<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> proc_state<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> proc_state<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb141-209"><a href="#cb141-209" aria-hidden="true" tabindex="-1"></a>    proc_done<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> proc_done<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> proc_done<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> proc_done<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb141-210"><a href="#cb141-210" aria-hidden="true" tabindex="-1"></a>    lk <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> delay <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb141-211"><a href="#cb141-211" aria-hidden="true" tabindex="-1"></a>    draw_all<span class="op">();</span></span>
<span id="cb141-212"><a href="#cb141-212" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-213"><a href="#cb141-213" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> <span class="op">*</span>KEYBOARD<span class="op">;</span></span>
<span id="cb141-214"><a href="#cb141-214" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>key <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> key <span class="op">!=</span> lk<span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-215"><a href="#cb141-215" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">32</span><span class="op">)</span> <span class="op">{</span> do_tick<span class="op">();</span> draw_all<span class="op">();</span> <span class="op">}</span></span>
<span id="cb141-216"><a href="#cb141-216" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">65</span><span class="op">)</span> <span class="op">{</span> auto_run <span class="op">=</span> <span class="dv">1</span> <span class="op">-</span> auto_run<span class="op">;</span> <span class="op">}</span></span>
<span id="cb141-217"><a href="#cb141-217" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">48</span><span class="op">)</span> <span class="op">{</span> toggle_block<span class="op">(</span><span class="dv">0</span><span class="op">);</span> draw_all<span class="op">();</span> <span class="op">}</span></span>
<span id="cb141-218"><a href="#cb141-218" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">49</span><span class="op">)</span> <span class="op">{</span> toggle_block<span class="op">(</span><span class="dv">1</span><span class="op">);</span> draw_all<span class="op">();</span> <span class="op">}</span></span>
<span id="cb141-219"><a href="#cb141-219" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">50</span><span class="op">)</span> <span class="op">{</span> toggle_block<span class="op">(</span><span class="dv">2</span><span class="op">);</span> draw_all<span class="op">();</span> <span class="op">}</span></span>
<span id="cb141-220"><a href="#cb141-220" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">51</span><span class="op">)</span> <span class="op">{</span> toggle_block<span class="op">(</span><span class="dv">3</span><span class="op">);</span> draw_all<span class="op">();</span> <span class="op">}</span></span>
<span id="cb141-221"><a href="#cb141-221" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">13</span><span class="op">)</span> <span class="cf">return</span> switches<span class="op">;</span></span>
<span id="cb141-222"><a href="#cb141-222" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb141-223"><a href="#cb141-223" aria-hidden="true" tabindex="-1"></a>        lk <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb141-224"><a href="#cb141-224" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>auto_run<span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-225"><a href="#cb141-225" aria-hidden="true" tabindex="-1"></a>            delay <span class="op">=</span> delay <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb141-226"><a href="#cb141-226" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>delay <span class="op">&gt;</span> <span class="dv">3000</span><span class="op">)</span> <span class="op">{</span> delay <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> do_tick<span class="op">();</span> draw_all<span class="op">();</span> <span class="op">}</span></span>
<span id="cb141-227"><a href="#cb141-227" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb141-228"><a href="#cb141-228" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb141-229"><a href="#cb141-229" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> switches<span class="op">;</span></span>
<span id="cb141-230"><a href="#cb141-230" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
</body>
</html>
