<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Solutions</title>
  <style>
html {
color: #1a1a1a;
background-color: #fdfdfd;
}
body {
margin: 0 auto;
max-width: 36em;
padding-left: 50px;
padding-right: 50px;
padding-top: 50px;
padding-bottom: 50px;
hyphens: auto;
overflow-wrap: break-word;
text-rendering: optimizeLegibility;
font-kerning: normal;
}
@media (max-width: 600px) {
body {
font-size: 0.9em;
padding: 12px;
}
h1 {
font-size: 1.8em;
}
}
@media print {
html {
background-color: white;
}
body {
background-color: transparent;
color: black;
font-size: 12pt;
}
p, h2, h3 {
orphans: 3;
widows: 3;
}
h2, h3, h4 {
page-break-after: avoid;
}
}
p {
margin: 1em 0;
}
a {
color: #1a1a1a;
}
a:visited {
color: #1a1a1a;
}
img {
max-width: 100%;
}
svg {
height: auto;
max-width: 100%;
}
h1, h2, h3, h4, h5, h6 {
margin-top: 1.4em;
}
h5, h6 {
font-size: 1em;
font-style: italic;
}
h6 {
font-weight: normal;
}
ol, ul {
padding-left: 1.7em;
margin-top: 1em;
}
li > ol, li > ul {
margin-top: 0;
}
blockquote {
margin: 1em 0 1em 1.7em;
padding-left: 1em;
border-left: 2px solid #e6e6e6;
color: #606060;
}
code {
font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
font-size: 85%;
margin: 0;
hyphens: manual;
}
pre {
margin: 1em 0;
overflow: auto;
}
pre code {
padding: 0;
overflow: visible;
overflow-wrap: normal;
}
.sourceCode {
background-color: transparent;
overflow: visible;
}
hr {
background-color: #1a1a1a;
border: none;
height: 1px;
margin: 1em 0;
}
table {
margin: 1em 0;
border-collapse: collapse;
width: 100%;
overflow-x: auto;
display: block;
font-variant-numeric: lining-nums tabular-nums;
}
table caption {
margin-bottom: 0.75em;
}
tbody {
margin-top: 0.5em;
border-top: 1px solid #1a1a1a;
border-bottom: 1px solid #1a1a1a;
}
th {
border-top: 1px solid #1a1a1a;
padding: 0.25em 0.5em 0.25em 0.5em;
}
td {
padding: 0.125em 0.5em 0.25em 0.5em;
}
header {
margin-bottom: 4em;
text-align: center;
}
#TOC li {
list-style: none;
}
#TOC ul {
padding-left: 1.3em;
}
#TOC > ul {
padding-left: 0;
}
#TOC a:not(:hover) {
text-decoration: none;
}
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}

ul.task-list[class]{list-style: none;}
ul.task-list li input[type="checkbox"] {
font-size: inherit;
width: 0.8em;
margin: 0 0.8em 0.2em -1.6em;
vertical-align: middle;
}
.display.math{display: block; text-align: center; margin: 0.5rem auto;}

pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
</head>
<body>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#livre-des-solutions" id="toc-livre-des-solutions"><span class="toc-section-number">1</span> Livre des Solutions</a>
<ul>
<li><a href="#a.-solutions-hdl-portes-logiques" id="toc-a.-solutions-hdl-portes-logiques"><span class="toc-section-number">1.1</span> A. Solutions HDL (Portes
Logiques)</a></li>
<li><a href="#b.-solutions-assembleur-a32" id="toc-b.-solutions-assembleur-a32"><span class="toc-section-number">1.2</span> B. Solutions Assembleur
A32</a></li>
<li><a href="#c.-solutions-c32" id="toc-c.-solutions-c32"><span class="toc-section-number">1.3</span> C. Solutions C32</a></li>
<li><a href="#d.-solutions-construction-du-compilateur" id="toc-d.-solutions-construction-du-compilateur"><span class="toc-section-number">1.4</span> D. Solutions Construction du
Compilateur</a></li>
<li><a href="#e.-solutions-systeme-dexploitation" id="toc-e.-solutions-systeme-dexploitation"><span class="toc-section-number">1.5</span> E. Solutions Systeme
dâ€™Exploitation</a></li>
</ul></li>
</ul>
</nav>
<h1 data-number="1" id="livre-des-solutions"><span class="header-section-number">1</span> Livre des Solutions</h1>
<p>Ce document contient les solutions completes de tous les exercices du
simulateur web Codex.</p>
<p><strong>Note:</strong> Ces solutions sont fournies pour reference
apres avoir tente les exercices.</p>
<hr />
<h2 data-number="1.1" id="a.-solutions-hdl-portes-logiques"><span class="header-section-number">1.1</span> A. Solutions HDL (Portes
Logiques)</h2>
<h3 data-number="1.1.1" id="inv"><span class="header-section-number">1.1.1</span> Inv</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Inverter (NOT gate)</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Inv(a) = Nand(a, a)</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Inv</span> <span class="kw">is</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Inv</span> <span class="kw">is</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">nand2</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">nand2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> a<span class="ot">,</span> y <span class="ot">=&gt;</span> y);</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.2" id="and2"><span class="header-section-number">1.1.2</span> And2</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- AND gate</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- And2(a,b) = Inv(Nand(a,b))</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">And2</span> <span class="kw">is</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">And2</span> <span class="kw">is</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">nand2</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Inv</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> t <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">nand2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> b<span class="ot">,</span> y <span class="ot">=&gt;</span> t);</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> t<span class="ot">,</span> y <span class="ot">=&gt;</span> y);</span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.3" id="or2"><span class="header-section-number">1.1.3</span> Or2</h3>
<div class="sourceCode" id="cb3"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- OR gate</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Or2(a,b) = Nand(Inv(a), Inv(b))</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Or2</span> <span class="kw">is</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Or2</span> <span class="kw">is</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">nand2</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Inv</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> na<span class="ot">,</span> nb <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> y <span class="ot">=&gt;</span> na);</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> b<span class="ot">,</span> y <span class="ot">=&gt;</span> nb);</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">nand2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> na<span class="ot">,</span> b <span class="ot">=&gt;</span> nb<span class="ot">,</span> y <span class="ot">=&gt;</span> y);</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.4" id="xor2"><span class="header-section-number">1.1.4</span> Xor2</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- XOR gate</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Xor2(a,b) = Or2(And2(a, Inv(b)), And2(Inv(a), b))</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Xor2</span> <span class="kw">is</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Xor2</span> <span class="kw">is</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Inv</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">And2</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Or2</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> na<span class="ot">,</span> nb<span class="ot">,</span> t1<span class="ot">,</span> t2 <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> y <span class="ot">=&gt;</span> na);</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> b<span class="ot">,</span> y <span class="ot">=&gt;</span> nb);</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> nb<span class="ot">,</span> y <span class="ot">=&gt;</span> t1);</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u3</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> na<span class="ot">,</span> b <span class="ot">=&gt;</span> b<span class="ot">,</span> y <span class="ot">=&gt;</span> t2);</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u4</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> t1<span class="ot">,</span> b <span class="ot">=&gt;</span> t2<span class="ot">,</span> y <span class="ot">=&gt;</span> y);</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.5" id="mux"><span class="header-section-number">1.1.5</span> Mux</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 2-way Multiplexer</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- if sel=0 then y=a else y=b</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Mux</span> <span class="kw">is</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    a   <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    b   <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    sel <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    y   <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Mux</span> <span class="kw">is</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Inv</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">And2</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Or2</span></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> nsel<span class="ot">,</span> t1<span class="ot">,</span> t2 <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> nsel);</span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> nsel<span class="ot">,</span> y <span class="ot">=&gt;</span> t1);</span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> b<span class="ot">,</span> b <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> t2);</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u3</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> t1<span class="ot">,</span> b <span class="ot">=&gt;</span> t2<span class="ot">,</span> y <span class="ot">=&gt;</span> y);</span>
<span id="cb5-29"><a href="#cb5-29" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.6" id="dmux"><span class="header-section-number">1.1.6</span> DMux</h3>
<div class="sourceCode" id="cb6"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Demultiplexer</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- if sel=0 then {a,b}={x,0} else {a,b}={0,x}</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">DMux</span> <span class="kw">is</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    x   <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    sel <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    a   <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    b   <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">DMux</span> <span class="kw">is</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Inv</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">And2</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> nsel <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> nsel);</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> x<span class="ot">,</span> b <span class="ot">=&gt;</span> nsel<span class="ot">,</span> y <span class="ot">=&gt;</span> a);</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> x<span class="ot">,</span> b <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> b);</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.7" id="inv16"><span class="header-section-number">1.1.7</span> Inv16</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 16-bit Inverter</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Inv16</span> <span class="kw">is</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Inv16</span> <span class="kw">is</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Inv</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">0</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">0</span>));</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">1</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">1</span>));</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">2</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">2</span>));</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u3</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">3</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">3</span>));</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u4</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">4</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">4</span>));</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u5</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">5</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">5</span>));</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u6</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">6</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">6</span>));</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u7</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">7</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">7</span>));</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u8</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">8</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">8</span>));</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u9</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">9</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">9</span>));</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u10</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">10</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">10</span>));</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u11</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">11</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">11</span>));</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u12</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">12</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">12</span>));</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u13</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">13</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">13</span>));</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u14</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">14</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">14</span>));</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u15</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">15</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">15</span>));</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.8" id="and16"><span class="header-section-number">1.1.8</span> And16</h3>
<div class="sourceCode" id="cb8"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 16-bit AND</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">And16</span> <span class="kw">is</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    b <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">And16</span> <span class="kw">is</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">And2</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">0</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">0</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">0</span>));</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">1</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">1</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">1</span>));</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">2</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">2</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">2</span>));</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u3</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">3</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">3</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">3</span>));</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u4</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">4</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">4</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">4</span>));</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u5</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">5</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">5</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">5</span>));</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u6</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">6</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">6</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">6</span>));</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u7</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">7</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">7</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">7</span>));</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u8</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">8</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">8</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">8</span>));</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u9</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">9</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">9</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">9</span>));</span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u10</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">10</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">10</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">10</span>));</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u11</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">11</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">11</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">11</span>));</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u12</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">12</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">12</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">12</span>));</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u13</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">13</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">13</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">13</span>));</span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u14</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">14</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">14</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">14</span>));</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u15</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">15</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">15</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">15</span>));</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.9" id="or16"><span class="header-section-number">1.1.9</span> Or16</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 16-bit OR</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Or16</span> <span class="kw">is</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    b <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Or16</span> <span class="kw">is</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Or2</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">0</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">0</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">0</span>));</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">1</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">1</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">1</span>));</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">2</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">2</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">2</span>));</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u3</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">3</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">3</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">3</span>));</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u4</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">4</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">4</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">4</span>));</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u5</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">5</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">5</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">5</span>));</span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u6</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">6</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">6</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">6</span>));</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u7</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">7</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">7</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">7</span>));</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u8</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">8</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">8</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">8</span>));</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u9</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">9</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">9</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">9</span>));</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u10</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">10</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">10</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">10</span>));</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u11</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">11</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">11</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">11</span>));</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u12</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">12</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">12</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">12</span>));</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u13</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">13</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">13</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">13</span>));</span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u14</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">14</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">14</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">14</span>));</span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u15</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">15</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">15</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">15</span>));</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.10" id="mux16"><span class="header-section-number">1.1.10</span> Mux16</h3>
<div class="sourceCode" id="cb10"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 16-bit 2-way Multiplexer</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Mux16</span> <span class="kw">is</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    a   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    b   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    sel <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    y   <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Mux16</span> <span class="kw">is</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Mux</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; sel <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">0</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">0</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">0</span>));</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">1</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">1</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">1</span>));</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">2</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">2</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">2</span>));</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u3</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">3</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">3</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">3</span>));</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u4</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">4</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">4</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">4</span>));</span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u5</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">5</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">5</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">5</span>));</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u6</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">6</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">6</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">6</span>));</span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u7</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">7</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">7</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">7</span>));</span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u8</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">8</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">8</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">8</span>));</span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u9</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">9</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">9</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">9</span>));</span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u10</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">10</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">10</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">10</span>));</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u11</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">11</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">11</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">11</span>));</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u12</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">12</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">12</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">12</span>));</span>
<span id="cb10-29"><a href="#cb10-29" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u13</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">13</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">13</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">13</span>));</span>
<span id="cb10-30"><a href="#cb10-30" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u14</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">14</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">14</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">14</span>));</span>
<span id="cb10-31"><a href="#cb10-31" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u15</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">15</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">15</span>)<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel<span class="ot">,</span> y <span class="ot">=&gt;</span> y(<span class="dv">15</span>));</span>
<span id="cb10-32"><a href="#cb10-32" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.11" id="or8way"><span class="header-section-number">1.1.11</span> Or8Way</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 8-way OR</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Or8Way</span> <span class="kw">is</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">7</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Or8Way</span> <span class="kw">is</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Or2</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> t1<span class="ot">,</span> t2<span class="ot">,</span> t3<span class="ot">,</span> t4<span class="ot">,</span> t5<span class="ot">,</span> t6 <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">0</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> a(<span class="dv">1</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> t1);</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">2</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> a(<span class="dv">3</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> t2);</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">4</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> a(<span class="dv">5</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> t3);</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u3</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">6</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> a(<span class="dv">7</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> t4);</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u4</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> t1<span class="ot">,</span> b <span class="ot">=&gt;</span> t2<span class="ot">,</span> y <span class="ot">=&gt;</span> t5);</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u5</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> t3<span class="ot">,</span> b <span class="ot">=&gt;</span> t4<span class="ot">,</span> y <span class="ot">=&gt;</span> t6);</span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u6</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> t5<span class="ot">,</span> b <span class="ot">=&gt;</span> t6<span class="ot">,</span> y <span class="ot">=&gt;</span> y);</span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.12" id="mux4way16"><span class="header-section-number">1.1.12</span> Mux4Way16</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 4-way 16-bit Multiplexer</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Mux4Way16</span> <span class="kw">is</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    a   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    b   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    c   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    d   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    sel <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    y   <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Mux4Way16</span> <span class="kw">is</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Mux16</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); b <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); sel <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> ab<span class="ot">,</span> cd <span class="ot">:</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">Mux16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> b<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel(<span class="dv">0</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> ab);</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">Mux16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> c<span class="ot">,</span> b <span class="ot">=&gt;</span> d<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel(<span class="dv">0</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> cd);</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">Mux16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> ab<span class="ot">,</span> b <span class="ot">=&gt;</span> cd<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel(<span class="dv">1</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y);</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.13" id="mux8way16"><span class="header-section-number">1.1.13</span> Mux8Way16</h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 8-way 16-bit Multiplexer</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Mux8Way16</span> <span class="kw">is</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    a   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    b   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    c   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    d   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    e   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>    f   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    g   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    h   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>    sel <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>    y   <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Mux8Way16</span> <span class="kw">is</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Mux4Way16</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b<span class="ot">,</span>c<span class="ot">,</span>d <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); sel <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>); y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Mux16</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); b <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); sel <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> lo<span class="ot">,</span> hi <span class="ot">:</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">Mux4Way16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> b<span class="ot">,</span> c <span class="ot">=&gt;</span> c<span class="ot">,</span> d <span class="ot">=&gt;</span> d<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> lo);</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">Mux4Way16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> e<span class="ot">,</span> b <span class="ot">=&gt;</span> f<span class="ot">,</span> c <span class="ot">=&gt;</span> g<span class="ot">,</span> d <span class="ot">=&gt;</span> h<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> hi);</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">Mux16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> lo<span class="ot">,</span> b <span class="ot">=&gt;</span> hi<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel(<span class="dv">2</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> y);</span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.14" id="dmux4way"><span class="header-section-number">1.1.14</span> DMux4Way</h3>
<div class="sourceCode" id="cb14"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 4-way Demultiplexer</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">DMux4Way</span> <span class="kw">is</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    x   <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    sel <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    a   <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    b   <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    c   <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>    d   <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">DMux4Way</span> <span class="kw">is</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">DMux</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(x <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; sel <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; a <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> lo<span class="ot">,</span> hi <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">DMux</span> <span class="kw">port map </span>(x <span class="ot">=&gt;</span> x<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel(<span class="dv">1</span>)<span class="ot">,</span> a <span class="ot">=&gt;</span> lo<span class="ot">,</span> b <span class="ot">=&gt;</span> hi);</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">DMux</span> <span class="kw">port map </span>(x <span class="ot">=&gt;</span> lo<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel(<span class="dv">0</span>)<span class="ot">,</span> a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> b);</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">DMux</span> <span class="kw">port map </span>(x <span class="ot">=&gt;</span> hi<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel(<span class="dv">0</span>)<span class="ot">,</span> a <span class="ot">=&gt;</span> c<span class="ot">,</span> b <span class="ot">=&gt;</span> d);</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.15" id="dmux8way"><span class="header-section-number">1.1.15</span> DMux8Way</h3>
<div class="sourceCode" id="cb15"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 8-way Demultiplexer</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">DMux8Way</span> <span class="kw">is</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    x   <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    sel <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    a<span class="ot">,</span> b<span class="ot">,</span> c<span class="ot">,</span> d<span class="ot">,</span> e<span class="ot">,</span> f<span class="ot">,</span> g<span class="ot">,</span> h <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">DMux8Way</span> <span class="kw">is</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">DMux</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(x <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; sel <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; a <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">DMux4Way</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(x <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; sel <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>); a<span class="ot">,</span>b<span class="ot">,</span>c<span class="ot">,</span>d <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> lo<span class="ot">,</span> hi <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">DMux</span> <span class="kw">port map </span>(x <span class="ot">=&gt;</span> x<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel(<span class="dv">2</span>)<span class="ot">,</span> a <span class="ot">=&gt;</span> lo<span class="ot">,</span> b <span class="ot">=&gt;</span> hi);</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">DMux4Way</span> <span class="kw">port map </span>(x <span class="ot">=&gt;</span> lo<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>)<span class="ot">,</span> a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> b<span class="ot">,</span> c <span class="ot">=&gt;</span> c<span class="ot">,</span> d <span class="ot">=&gt;</span> d);</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">DMux4Way</span> <span class="kw">port map </span>(x <span class="ot">=&gt;</span> hi<span class="ot">,</span> sel <span class="ot">=&gt;</span> sel(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>)<span class="ot">,</span> a <span class="ot">=&gt;</span> e<span class="ot">,</span> b <span class="ot">=&gt;</span> f<span class="ot">,</span> c <span class="ot">=&gt;</span> g<span class="ot">,</span> d <span class="ot">=&gt;</span> h);</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.16" id="halfadder"><span class="header-section-number">1.1.16</span> HalfAdder</h3>
<div class="sourceCode" id="cb16"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Half Adder</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">HalfAdder</span> <span class="kw">is</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    a     <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    b     <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    sum   <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    carry <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">HalfAdder</span> <span class="kw">is</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Xor2</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">And2</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">Xor2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> b<span class="ot">,</span> y <span class="ot">=&gt;</span> sum);</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> b<span class="ot">,</span> y <span class="ot">=&gt;</span> carry);</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.17" id="fulladder"><span class="header-section-number">1.1.17</span> FullAdder</h3>
<div class="sourceCode" id="cb17"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Full Adder</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">FullAdder</span> <span class="kw">is</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    a     <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    b     <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    cin   <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    sum   <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    cout  <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">FullAdder</span> <span class="kw">is</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">HalfAdder</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; sum <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>; carry <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Or2</span></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> s1<span class="ot">,</span> c1<span class="ot">,</span> c2 <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">HalfAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> b<span class="ot">,</span> sum <span class="ot">=&gt;</span> s1<span class="ot">,</span> carry <span class="ot">=&gt;</span> c1);</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">HalfAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> s1<span class="ot">,</span> b <span class="ot">=&gt;</span> cin<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum<span class="ot">,</span> carry <span class="ot">=&gt;</span> c2);</span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">Or2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> c1<span class="ot">,</span> b <span class="ot">=&gt;</span> c2<span class="ot">,</span> y <span class="ot">=&gt;</span> cout);</span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.18" id="add16"><span class="header-section-number">1.1.18</span> Add16</h3>
<div class="sourceCode" id="cb18"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 16-bit Adder</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Add16</span> <span class="kw">is</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    a    <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    b    <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    cin  <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    sum  <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    cout <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Add16</span> <span class="kw">is</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">FullAdder</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b<span class="ot">,</span>cin <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; sum<span class="ot">,</span>cout <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> c <span class="ot">:</span> bits(<span class="dv">16</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">0</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">0</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> cin<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">0</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">1</span>));</span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">1</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">1</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">1</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">1</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">2</span>));</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">2</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">2</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">2</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">2</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">3</span>));</span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u3</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">3</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">3</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">3</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">3</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">4</span>));</span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u4</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">4</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">4</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">4</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">4</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">5</span>));</span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u5</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">5</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">5</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">5</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">5</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">6</span>));</span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u6</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">6</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">6</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">6</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">6</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">7</span>));</span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u7</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">7</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">7</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">7</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">7</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">8</span>));</span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u8</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">8</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">8</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">8</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">8</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">9</span>));</span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u9</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">9</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">9</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">9</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">9</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">10</span>));</span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u10</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">10</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">10</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">10</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">10</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">11</span>));</span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u11</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">11</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">11</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">11</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">11</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">12</span>));</span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u12</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">12</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">12</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">12</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">12</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">13</span>));</span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u13</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">13</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">13</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">13</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">13</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">14</span>));</span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u14</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">14</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">14</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">14</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">14</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> c(<span class="dv">15</span>));</span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u15</span><span class="ot">:</span> <span class="fu">FullAdder</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a(<span class="dv">15</span>)<span class="ot">,</span> b <span class="ot">=&gt;</span> b(<span class="dv">15</span>)<span class="ot">,</span> cin <span class="ot">=&gt;</span> c(<span class="dv">15</span>)<span class="ot">,</span> sum <span class="ot">=&gt;</span> sum(<span class="dv">15</span>)<span class="ot">,</span> cout <span class="ot">=&gt;</span> cout);</span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.19" id="inc16"><span class="header-section-number">1.1.19</span> Inc16</h3>
<div class="sourceCode" id="cb19"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 16-bit Incrementer</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Inc16</span> <span class="kw">is</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Inc16</span> <span class="kw">is</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Add16</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); cin <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; sum <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); cout <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> zero16 <span class="ot">:</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> unused_cout <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>  zero16 <span class="ot">&lt;=</span> X<span class="st">&quot;0000&quot;</span>;</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">Add16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> zero16<span class="ot">,</span> cin <span class="ot">=&gt;</span> <span class="bn">&#39;1&#39;</span><span class="ot">,</span> sum <span class="ot">=&gt;</span> y<span class="ot">,</span> cout <span class="ot">=&gt;</span> unused_cout);</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.20" id="sub16"><span class="header-section-number">1.1.20</span> Sub16</h3>
<div class="sourceCode" id="cb20"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 16-bit Subtractor</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Sub16</span> <span class="kw">is</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    a    <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    b    <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    diff <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Sub16</span> <span class="kw">is</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Add16</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); cin <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; sum <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); cout <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Inv16</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> nb <span class="ot">:</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> unused_cout <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">Inv16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> b<span class="ot">,</span> y <span class="ot">=&gt;</span> nb);</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">Add16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> nb<span class="ot">,</span> cin <span class="ot">=&gt;</span> <span class="bn">&#39;1&#39;</span><span class="ot">,</span> sum <span class="ot">=&gt;</span> diff<span class="ot">,</span> cout <span class="ot">=&gt;</span> unused_cout);</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.21" id="alu"><span class="header-section-number">1.1.21</span> ALU</h3>
<div class="sourceCode" id="cb21"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 16-bit ALU</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- op: 0=AND, 1=OR, 2=ADD, 3=SUB</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">ALU</span> <span class="kw">is</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    a    <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    b    <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    op   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>    y    <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    zero <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>    neg  <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">ALU</span> <span class="kw">is</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Add16</span></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); cin <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; sum <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); cout <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">And16</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Or16</span></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Inv16</span></span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Mux4Way16</span></span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b<span class="ot">,</span>c<span class="ot">,</span>d <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); sel <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>); y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Or8Way</span></span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">7</span> <span class="ot">downto</span> <span class="dv">0</span>); y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> r_and<span class="ot">,</span> r_or<span class="ot">,</span> r_add<span class="ot">,</span> r_sub<span class="ot">,</span> nb<span class="ot">,</span> result <span class="ot">:</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> unused_cout1<span class="ot">,</span> unused_cout2 <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> or_lo<span class="ot">,</span> or_hi <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Compute all operations</span></span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_and</span><span class="ot">:</span> <span class="fu">And16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> b<span class="ot">,</span> y <span class="ot">=&gt;</span> r_and);</span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_or</span><span class="ot">:</span> <span class="fu">Or16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> b<span class="ot">,</span> y <span class="ot">=&gt;</span> r_or);</span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_add</span><span class="ot">:</span> <span class="fu">Add16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> b<span class="ot">,</span> cin <span class="ot">=&gt;</span> <span class="bn">&#39;0&#39;</span><span class="ot">,</span> sum <span class="ot">=&gt;</span> r_add<span class="ot">,</span> cout <span class="ot">=&gt;</span> unused_cout1);</span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- SUB: a - b = a + (~b) + 1</span></span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_inv</span><span class="ot">:</span> <span class="fu">Inv16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> b<span class="ot">,</span> y <span class="ot">=&gt;</span> nb);</span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_sub</span><span class="ot">:</span> <span class="fu">Add16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> a<span class="ot">,</span> b <span class="ot">=&gt;</span> nb<span class="ot">,</span> cin <span class="ot">=&gt;</span> <span class="bn">&#39;1&#39;</span><span class="ot">,</span> sum <span class="ot">=&gt;</span> r_sub<span class="ot">,</span> cout <span class="ot">=&gt;</span> unused_cout2);</span>
<span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Select result based on op</span></span>
<span id="cb21-48"><a href="#cb21-48" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_mux</span><span class="ot">:</span> <span class="fu">Mux4Way16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> r_and<span class="ot">,</span> b <span class="ot">=&gt;</span> r_or<span class="ot">,</span> c <span class="ot">=&gt;</span> r_add<span class="ot">,</span> d <span class="ot">=&gt;</span> r_sub<span class="ot">,</span> sel <span class="ot">=&gt;</span> op<span class="ot">,</span> y <span class="ot">=&gt;</span> result);</span>
<span id="cb21-49"><a href="#cb21-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-50"><a href="#cb21-50" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Output result</span></span>
<span id="cb21-51"><a href="#cb21-51" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;=</span> result;</span>
<span id="cb21-52"><a href="#cb21-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-53"><a href="#cb21-53" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Zero flag: result == 0</span></span>
<span id="cb21-54"><a href="#cb21-54" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_or_lo</span><span class="ot">:</span> <span class="fu">Or8Way</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> result(<span class="dv">7</span> <span class="ot">downto</span> <span class="dv">0</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> or_lo);</span>
<span id="cb21-55"><a href="#cb21-55" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_or_hi</span><span class="ot">:</span> <span class="fu">Or8Way</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> result(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">8</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> or_hi);</span>
<span id="cb21-56"><a href="#cb21-56" aria-hidden="true" tabindex="-1"></a>  zero <span class="ot">&lt;=</span> <span class="kw">not</span> (or_lo <span class="kw">or</span> or_hi);</span>
<span id="cb21-57"><a href="#cb21-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-58"><a href="#cb21-58" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Negative flag: MSB of result</span></span>
<span id="cb21-59"><a href="#cb21-59" aria-hidden="true" tabindex="-1"></a>  neg <span class="ot">&lt;=</span> result(<span class="dv">15</span>);</span>
<span id="cb21-60"><a href="#cb21-60" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.22" id="dff1"><span class="header-section-number">1.1.22</span> DFF1</h3>
<div class="sourceCode" id="cb22"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- D Flip-Flop</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Uses the built-in dff primitive</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">DFF1</span> <span class="kw">is</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    clk <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    d   <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>    q   <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">DFF1</span> <span class="kw">is</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">dff</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(clk <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; d <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; q <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">dff</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d<span class="ot">,</span> q <span class="ot">=&gt;</span> q);</span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.23" id="bitreg"><span class="header-section-number">1.1.23</span> BitReg</h3>
<div class="sourceCode" id="cb23"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 1-bit Register</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">BitReg</span> <span class="kw">is</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    clk  <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    d    <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>    load <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>    q    <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">BitReg</span> <span class="kw">is</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">dff</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(clk <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; d <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; q <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Mux</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; sel <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> mux_out<span class="ot">,</span> q_int <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_mux</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> q_int<span class="ot">,</span> b <span class="ot">=&gt;</span> d<span class="ot">,</span> sel <span class="ot">=&gt;</span> load<span class="ot">,</span> y <span class="ot">=&gt;</span> mux_out);</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_dff</span><span class="ot">:</span> <span class="fu">dff</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> mux_out<span class="ot">,</span> q <span class="ot">=&gt;</span> q_int);</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>  q <span class="ot">&lt;=</span> q_int;</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.24" id="register16"><span class="header-section-number">1.1.24</span> Register16</h3>
<div class="sourceCode" id="cb24"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 16-bit Register</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Register16</span> <span class="kw">is</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    clk  <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    d    <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    load <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    q    <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Register16</span> <span class="kw">is</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">BitReg</span></span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(clk <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; d <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; load <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; q <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u0</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">0</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">0</span>));</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u1</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">1</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">1</span>));</span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u2</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">2</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">2</span>));</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u3</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">3</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">3</span>));</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u4</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">4</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">4</span>));</span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u5</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">5</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">5</span>));</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u6</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">6</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">6</span>));</span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u7</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">7</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">7</span>));</span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u8</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">8</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">8</span>));</span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u9</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">9</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">9</span>));</span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u10</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">10</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">10</span>));</span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u11</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">11</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">11</span>));</span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u12</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">12</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">12</span>));</span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u13</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">13</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">13</span>));</span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u14</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">14</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">14</span>));</span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u15</span><span class="ot">:</span> <span class="fu">BitReg</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> d(<span class="dv">15</span>)<span class="ot">,</span> load <span class="ot">=&gt;</span> load<span class="ot">,</span> q <span class="ot">=&gt;</span> q(<span class="dv">15</span>));</span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.25" id="pc"><span class="header-section-number">1.1.25</span> PC</h3>
<div class="sourceCode" id="cb25"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Program Counter</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">PC</span> <span class="kw">is</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    clk   <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    d     <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    inc   <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>    load  <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    reset <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>    q     <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">PC</span> <span class="kw">is</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Register16</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(clk <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; d <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); load <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; q <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Inc16</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Mux16</span></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); sel <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> q_int<span class="ot">,</span> inc_out<span class="ot">,</span> mux1_out<span class="ot">,</span> mux2_out<span class="ot">,</span> mux3_out <span class="ot">:</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> zero16 <span class="ot">:</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> do_load <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>  zero16 <span class="ot">&lt;=</span> X<span class="st">&quot;0000&quot;</span>;</span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Increment current value</span></span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_inc</span><span class="ot">:</span> <span class="fu">Inc16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> q_int<span class="ot">,</span> y <span class="ot">=&gt;</span> inc_out);</span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Priority: reset &gt; load &gt; inc</span></span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- First mux: inc or hold</span></span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_mux1</span><span class="ot">:</span> <span class="fu">Mux16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> q_int<span class="ot">,</span> b <span class="ot">=&gt;</span> inc_out<span class="ot">,</span> sel <span class="ot">=&gt;</span> inc<span class="ot">,</span> y <span class="ot">=&gt;</span> mux1_out);</span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Second mux: load overrides</span></span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_mux2</span><span class="ot">:</span> <span class="fu">Mux16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> mux1_out<span class="ot">,</span> b <span class="ot">=&gt;</span> d<span class="ot">,</span> sel <span class="ot">=&gt;</span> load<span class="ot">,</span> y <span class="ot">=&gt;</span> mux2_out);</span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Third mux: reset overrides all</span></span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_mux3</span><span class="ot">:</span> <span class="fu">Mux16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> mux2_out<span class="ot">,</span> b <span class="ot">=&gt;</span> zero16<span class="ot">,</span> sel <span class="ot">=&gt;</span> reset<span class="ot">,</span> y <span class="ot">=&gt;</span> mux3_out);</span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-40"><a href="#cb25-40" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Always load the register</span></span>
<span id="cb25-41"><a href="#cb25-41" aria-hidden="true" tabindex="-1"></a>  do_load <span class="ot">&lt;=</span> inc <span class="kw">or</span> load <span class="kw">or</span> reset;</span>
<span id="cb25-42"><a href="#cb25-42" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_reg</span><span class="ot">:</span> <span class="fu">Register16</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> mux3_out<span class="ot">,</span> load <span class="ot">=&gt;</span> do_load<span class="ot">,</span> q <span class="ot">=&gt;</span> q_int);</span>
<span id="cb25-43"><a href="#cb25-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-44"><a href="#cb25-44" aria-hidden="true" tabindex="-1"></a>  q <span class="ot">&lt;=</span> q_int;</span>
<span id="cb25-45"><a href="#cb25-45" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.26" id="ram8"><span class="header-section-number">1.1.26</span> RAM8</h3>
<div class="sourceCode" id="cb26"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 8-word RAM</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">RAM8</span> <span class="kw">is</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>    clk  <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    din  <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    addr <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>    we   <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    dout <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">RAM8</span> <span class="kw">is</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Register16</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(clk <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; d <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); load <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; q <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">DMux8Way</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(x <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; sel <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>); a<span class="ot">,</span>b<span class="ot">,</span>c<span class="ot">,</span>d<span class="ot">,</span>e<span class="ot">,</span>f<span class="ot">,</span>g<span class="ot">,</span>h <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Mux8Way16</span></span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b<span class="ot">,</span>c<span class="ot">,</span>d<span class="ot">,</span>e<span class="ot">,</span>f<span class="ot">,</span>g<span class="ot">,</span>h <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); sel <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>); y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> load0<span class="ot">,</span>load1<span class="ot">,</span>load2<span class="ot">,</span>load3<span class="ot">,</span>load4<span class="ot">,</span>load5<span class="ot">,</span>load6<span class="ot">,</span>load7 <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> r0<span class="ot">,</span>r1<span class="ot">,</span>r2<span class="ot">,</span>r3<span class="ot">,</span>r4<span class="ot">,</span>r5<span class="ot">,</span>r6<span class="ot">,</span>r7 <span class="ot">:</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_dmux</span><span class="ot">:</span> <span class="fu">DMux8Way</span> <span class="kw">port map </span>(x <span class="ot">=&gt;</span> we<span class="ot">,</span> sel <span class="ot">=&gt;</span> addr<span class="ot">,</span> a <span class="ot">=&gt;</span> load0<span class="ot">,</span> b <span class="ot">=&gt;</span> load1<span class="ot">,</span> c <span class="ot">=&gt;</span> load2<span class="ot">,</span> d <span class="ot">=&gt;</span> load3<span class="ot">,</span> e <span class="ot">=&gt;</span> load4<span class="ot">,</span> f <span class="ot">=&gt;</span> load5<span class="ot">,</span> g <span class="ot">=&gt;</span> load6<span class="ot">,</span> h <span class="ot">=&gt;</span> load7);</span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_r0</span><span class="ot">:</span> <span class="fu">Register16</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> din<span class="ot">,</span> load <span class="ot">=&gt;</span> load0<span class="ot">,</span> q <span class="ot">=&gt;</span> r0);</span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_r1</span><span class="ot">:</span> <span class="fu">Register16</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> din<span class="ot">,</span> load <span class="ot">=&gt;</span> load1<span class="ot">,</span> q <span class="ot">=&gt;</span> r1);</span>
<span id="cb26-29"><a href="#cb26-29" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_r2</span><span class="ot">:</span> <span class="fu">Register16</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> din<span class="ot">,</span> load <span class="ot">=&gt;</span> load2<span class="ot">,</span> q <span class="ot">=&gt;</span> r2);</span>
<span id="cb26-30"><a href="#cb26-30" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_r3</span><span class="ot">:</span> <span class="fu">Register16</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> din<span class="ot">,</span> load <span class="ot">=&gt;</span> load3<span class="ot">,</span> q <span class="ot">=&gt;</span> r3);</span>
<span id="cb26-31"><a href="#cb26-31" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_r4</span><span class="ot">:</span> <span class="fu">Register16</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> din<span class="ot">,</span> load <span class="ot">=&gt;</span> load4<span class="ot">,</span> q <span class="ot">=&gt;</span> r4);</span>
<span id="cb26-32"><a href="#cb26-32" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_r5</span><span class="ot">:</span> <span class="fu">Register16</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> din<span class="ot">,</span> load <span class="ot">=&gt;</span> load5<span class="ot">,</span> q <span class="ot">=&gt;</span> r5);</span>
<span id="cb26-33"><a href="#cb26-33" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_r6</span><span class="ot">:</span> <span class="fu">Register16</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> din<span class="ot">,</span> load <span class="ot">=&gt;</span> load6<span class="ot">,</span> q <span class="ot">=&gt;</span> r6);</span>
<span id="cb26-34"><a href="#cb26-34" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_r7</span><span class="ot">:</span> <span class="fu">Register16</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> din<span class="ot">,</span> load <span class="ot">=&gt;</span> load7<span class="ot">,</span> q <span class="ot">=&gt;</span> r7);</span>
<span id="cb26-35"><a href="#cb26-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-36"><a href="#cb26-36" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_mux</span><span class="ot">:</span> <span class="fu">Mux8Way16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> r0<span class="ot">,</span> b <span class="ot">=&gt;</span> r1<span class="ot">,</span> c <span class="ot">=&gt;</span> r2<span class="ot">,</span> d <span class="ot">=&gt;</span> r3<span class="ot">,</span> e <span class="ot">=&gt;</span> r4<span class="ot">,</span> f <span class="ot">=&gt;</span> r5<span class="ot">,</span> g <span class="ot">=&gt;</span> r6<span class="ot">,</span> h <span class="ot">=&gt;</span> r7<span class="ot">,</span> sel <span class="ot">=&gt;</span> addr<span class="ot">,</span> y <span class="ot">=&gt;</span> dout);</span>
<span id="cb26-37"><a href="#cb26-37" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.27" id="ram64"><span class="header-section-number">1.1.27</span> RAM64</h3>
<div class="sourceCode" id="cb27"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 64-word RAM</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">RAM64</span> <span class="kw">is</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    clk  <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    din  <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>    addr <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">5</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>    we   <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    dout <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">RAM64</span> <span class="kw">is</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">RAM8</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(clk <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; din <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); addr <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>); we <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; dout <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">DMux8Way</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(x <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; sel <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>); a<span class="ot">,</span>b<span class="ot">,</span>c<span class="ot">,</span>d<span class="ot">,</span>e<span class="ot">,</span>f<span class="ot">,</span>g<span class="ot">,</span>h <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Mux8Way16</span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b<span class="ot">,</span>c<span class="ot">,</span>d<span class="ot">,</span>e<span class="ot">,</span>f<span class="ot">,</span>g<span class="ot">,</span>h <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); sel <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>); y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> we0<span class="ot">,</span>we1<span class="ot">,</span>we2<span class="ot">,</span>we3<span class="ot">,</span>we4<span class="ot">,</span>we5<span class="ot">,</span>we6<span class="ot">,</span>we7 <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> r0<span class="ot">,</span>r1<span class="ot">,</span>r2<span class="ot">,</span>r3<span class="ot">,</span>r4<span class="ot">,</span>r5<span class="ot">,</span>r6<span class="ot">,</span>r7 <span class="ot">:</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_dmux</span><span class="ot">:</span> <span class="fu">DMux8Way</span> <span class="kw">port map </span>(x <span class="ot">=&gt;</span> we<span class="ot">,</span> sel <span class="ot">=&gt;</span> addr(<span class="dv">5</span> <span class="ot">downto</span> <span class="dv">3</span>)<span class="ot">,</span> a <span class="ot">=&gt;</span> we0<span class="ot">,</span> b <span class="ot">=&gt;</span> we1<span class="ot">,</span> c <span class="ot">=&gt;</span> we2<span class="ot">,</span> d <span class="ot">=&gt;</span> we3<span class="ot">,</span> e <span class="ot">=&gt;</span> we4<span class="ot">,</span> f <span class="ot">=&gt;</span> we5<span class="ot">,</span> g <span class="ot">=&gt;</span> we6<span class="ot">,</span> h <span class="ot">=&gt;</span> we7);</span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_ram0</span><span class="ot">:</span> <span class="fu">RAM8</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> din <span class="ot">=&gt;</span> din<span class="ot">,</span> addr <span class="ot">=&gt;</span> addr(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>)<span class="ot">,</span> we <span class="ot">=&gt;</span> we0<span class="ot">,</span> dout <span class="ot">=&gt;</span> r0);</span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_ram1</span><span class="ot">:</span> <span class="fu">RAM8</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> din <span class="ot">=&gt;</span> din<span class="ot">,</span> addr <span class="ot">=&gt;</span> addr(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>)<span class="ot">,</span> we <span class="ot">=&gt;</span> we1<span class="ot">,</span> dout <span class="ot">=&gt;</span> r1);</span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_ram2</span><span class="ot">:</span> <span class="fu">RAM8</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> din <span class="ot">=&gt;</span> din<span class="ot">,</span> addr <span class="ot">=&gt;</span> addr(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>)<span class="ot">,</span> we <span class="ot">=&gt;</span> we2<span class="ot">,</span> dout <span class="ot">=&gt;</span> r2);</span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_ram3</span><span class="ot">:</span> <span class="fu">RAM8</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> din <span class="ot">=&gt;</span> din<span class="ot">,</span> addr <span class="ot">=&gt;</span> addr(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>)<span class="ot">,</span> we <span class="ot">=&gt;</span> we3<span class="ot">,</span> dout <span class="ot">=&gt;</span> r3);</span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_ram4</span><span class="ot">:</span> <span class="fu">RAM8</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> din <span class="ot">=&gt;</span> din<span class="ot">,</span> addr <span class="ot">=&gt;</span> addr(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>)<span class="ot">,</span> we <span class="ot">=&gt;</span> we4<span class="ot">,</span> dout <span class="ot">=&gt;</span> r4);</span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_ram5</span><span class="ot">:</span> <span class="fu">RAM8</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> din <span class="ot">=&gt;</span> din<span class="ot">,</span> addr <span class="ot">=&gt;</span> addr(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>)<span class="ot">,</span> we <span class="ot">=&gt;</span> we5<span class="ot">,</span> dout <span class="ot">=&gt;</span> r5);</span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_ram6</span><span class="ot">:</span> <span class="fu">RAM8</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> din <span class="ot">=&gt;</span> din<span class="ot">,</span> addr <span class="ot">=&gt;</span> addr(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>)<span class="ot">,</span> we <span class="ot">=&gt;</span> we6<span class="ot">,</span> dout <span class="ot">=&gt;</span> r6);</span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_ram7</span><span class="ot">:</span> <span class="fu">RAM8</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> din <span class="ot">=&gt;</span> din<span class="ot">,</span> addr <span class="ot">=&gt;</span> addr(<span class="dv">2</span> <span class="ot">downto</span> <span class="dv">0</span>)<span class="ot">,</span> we <span class="ot">=&gt;</span> we7<span class="ot">,</span> dout <span class="ot">=&gt;</span> r7);</span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_mux</span><span class="ot">:</span> <span class="fu">Mux8Way16</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> r0<span class="ot">,</span> b <span class="ot">=&gt;</span> r1<span class="ot">,</span> c <span class="ot">=&gt;</span> r2<span class="ot">,</span> d <span class="ot">=&gt;</span> r3<span class="ot">,</span> e <span class="ot">=&gt;</span> r4<span class="ot">,</span> f <span class="ot">=&gt;</span> r5<span class="ot">,</span> g <span class="ot">=&gt;</span> r6<span class="ot">,</span> h <span class="ot">=&gt;</span> r7<span class="ot">,</span> sel <span class="ot">=&gt;</span> addr(<span class="dv">5</span> <span class="ot">downto</span> <span class="dv">3</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> dout);</span>
<span id="cb27-37"><a href="#cb27-37" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.28" id="regfile"><span class="header-section-number">1.1.28</span> RegFile</h3>
<div class="sourceCode" id="cb28"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 16-Register File using RAM primitive</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">RegFile</span> <span class="kw">is</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    clk   <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    we    <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>    waddr <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>    wdata <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>    raddr1<span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>    raddr2<span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>    rdata1<span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>    rdata2<span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">RegFile</span> <span class="kw">is</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">ram</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(clk <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; we <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; addr <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>         din <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); dout <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Use two RAM instances for dual read ports</span></span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_ram1</span><span class="ot">:</span> <span class="fu">ram</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> we <span class="ot">=&gt;</span> we<span class="ot">,</span> addr <span class="ot">=&gt;</span> waddr<span class="ot">,</span> din <span class="ot">=&gt;</span> wdata<span class="ot">,</span> dout <span class="ot">=&gt;</span> rdata1);</span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_ram2</span><span class="ot">:</span> <span class="fu">ram</span> <span class="kw">port map </span>(clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> we <span class="ot">=&gt;</span> we<span class="ot">,</span> addr <span class="ot">=&gt;</span> waddr<span class="ot">,</span> din <span class="ot">=&gt;</span> wdata<span class="ot">,</span> dout <span class="ot">=&gt;</span> rdata2);</span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Note: Simplified - real implementation would need proper read port addressing</span></span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.29" id="decoder"><span class="header-section-number">1.1.29</span> Decoder</h3>
<div class="sourceCode" id="cb29"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Instruction Decoder</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Decodes opcode into control signals</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Opcodes: 0000=ALU, 0100=LOAD, 0101=STORE, 1000=BRANCH</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Decoder</span> <span class="kw">is</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    opcode    <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    alu_op    <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>    reg_write <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>    mem_read  <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>    mem_write <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>    branch    <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Decoder</span> <span class="kw">is</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Inv</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">And2</span></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span> b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> not_op3<span class="ot">,</span> not_op2<span class="ot">,</span> not_op1<span class="ot">,</span> not_op0 <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> is_alu<span class="ot">,</span> is_load<span class="ot">,</span> is_store<span class="ot">,</span> is_branch <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Invert opcode bits</span></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>  <span class="dv">inv3</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> opcode(<span class="dv">3</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> not_op3);</span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">inv2</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> opcode(<span class="dv">2</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> not_op2);</span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>  <span class="dv">inv1</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> opcode(<span class="dv">1</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> not_op1);</span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>  <span class="dv">inv0</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> opcode(<span class="dv">0</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> not_op0);</span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Decode: ALU = 0000</span></span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a>  <span class="dv">alu_a</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> not_op3<span class="ot">,</span> b <span class="ot">=&gt;</span> not_op2<span class="ot">,</span> y <span class="ot">=&gt;</span> is_alu);</span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Decode: LOAD = 0100</span></span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a>  <span class="dv">ld_a</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> not_op3<span class="ot">,</span> b <span class="ot">=&gt;</span> opcode(<span class="dv">2</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> is_load);</span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Decode: STORE = 0101</span></span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a>  <span class="dv">st_a</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> is_load<span class="ot">,</span> b <span class="ot">=&gt;</span> opcode(<span class="dv">0</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> is_store);</span>
<span id="cb29-40"><a href="#cb29-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-41"><a href="#cb29-41" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Decode: BRANCH = 1xxx</span></span>
<span id="cb29-42"><a href="#cb29-42" aria-hidden="true" tabindex="-1"></a>  <span class="dv">br_a</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> not_op3<span class="ot">,</span> y <span class="ot">=&gt;</span> is_branch);</span>
<span id="cb29-43"><a href="#cb29-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-44"><a href="#cb29-44" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Control signals - pass through lower opcode bits for ALU operation</span></span>
<span id="cb29-45"><a href="#cb29-45" aria-hidden="true" tabindex="-1"></a>  alu_op <span class="ot">&lt;=</span> opcode(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb29-46"><a href="#cb29-46" aria-hidden="true" tabindex="-1"></a>  reg_write <span class="ot">&lt;=</span> is_alu;</span>
<span id="cb29-47"><a href="#cb29-47" aria-hidden="true" tabindex="-1"></a>  mem_read <span class="ot">&lt;=</span> is_load;</span>
<span id="cb29-48"><a href="#cb29-48" aria-hidden="true" tabindex="-1"></a>  mem_write <span class="ot">&lt;=</span> is_store;</span>
<span id="cb29-49"><a href="#cb29-49" aria-hidden="true" tabindex="-1"></a>  branch <span class="ot">&lt;=</span> is_branch;</span>
<span id="cb29-50"><a href="#cb29-50" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.30" id="condcheck"><span class="header-section-number">1.1.30</span> CondCheck</h3>
<div class="sourceCode" id="cb30"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Condition Checker</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Checks ALU flags against condition code</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- cond: 0000=EQ (zero), 0001=NE (!zero), 0010=LT (neg), 0011=GE (!neg)</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">CondCheck</span> <span class="kw">is</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    cond <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    zero <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    neg  <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    carry<span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>    ovf  <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>    take <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">CondCheck</span> <span class="kw">is</span></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Inv</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Mux</span></span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span> b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; sel <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> not_zero<span class="ot">,</span> not_neg <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> eq_result<span class="ot">,</span> ne_result<span class="ot">,</span> lt_result<span class="ot">,</span> ge_result <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> sel0<span class="ot">,</span> sel1 <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Invert flags for NE and GE conditions</span></span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true" tabindex="-1"></a>  <span class="dv">inv_z</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> zero<span class="ot">,</span> y <span class="ot">=&gt;</span> not_zero);</span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true" tabindex="-1"></a>  <span class="dv">inv_n</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> neg<span class="ot">,</span> y <span class="ot">=&gt;</span> not_neg);</span>
<span id="cb30-30"><a href="#cb30-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-31"><a href="#cb30-31" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Condition results</span></span>
<span id="cb30-32"><a href="#cb30-32" aria-hidden="true" tabindex="-1"></a>  eq_result <span class="ot">&lt;=</span> zero;       <span class="co">-- EQ: zero=1</span></span>
<span id="cb30-33"><a href="#cb30-33" aria-hidden="true" tabindex="-1"></a>  ne_result <span class="ot">&lt;=</span> not_zero;   <span class="co">-- NE: zero=0</span></span>
<span id="cb30-34"><a href="#cb30-34" aria-hidden="true" tabindex="-1"></a>  lt_result <span class="ot">&lt;=</span> neg;        <span class="co">-- LT: neg=1</span></span>
<span id="cb30-35"><a href="#cb30-35" aria-hidden="true" tabindex="-1"></a>  ge_result <span class="ot">&lt;=</span> not_neg;    <span class="co">-- GE: neg=0</span></span>
<span id="cb30-36"><a href="#cb30-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-37"><a href="#cb30-37" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- 4-way mux using cond(1:0)</span></span>
<span id="cb30-38"><a href="#cb30-38" aria-hidden="true" tabindex="-1"></a>  <span class="dv">mux0</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> eq_result<span class="ot">,</span> b <span class="ot">=&gt;</span> ne_result<span class="ot">,</span> sel <span class="ot">=&gt;</span> cond(<span class="dv">0</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> sel0);</span>
<span id="cb30-39"><a href="#cb30-39" aria-hidden="true" tabindex="-1"></a>  <span class="dv">mux1</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> lt_result<span class="ot">,</span> b <span class="ot">=&gt;</span> ge_result<span class="ot">,</span> sel <span class="ot">=&gt;</span> cond(<span class="dv">0</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> sel1);</span>
<span id="cb30-40"><a href="#cb30-40" aria-hidden="true" tabindex="-1"></a>  <span class="dv">mux2</span><span class="ot">:</span> <span class="fu">Mux</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> sel0<span class="ot">,</span> b <span class="ot">=&gt;</span> sel1<span class="ot">,</span> sel <span class="ot">=&gt;</span> cond(<span class="dv">1</span>)<span class="ot">,</span> y <span class="ot">=&gt;</span> take);</span>
<span id="cb30-41"><a href="#cb30-41" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.31" id="control"><span class="header-section-number">1.1.31</span> Control</h3>
<div class="sourceCode" id="cb31"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Control Unit</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Generates all control signals</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">Control</span> <span class="kw">is</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    clk       <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    opcode    <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>    cond      <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>    zero      <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>    neg       <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>    alu_op    <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>    reg_write <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>    mem_read  <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>    mem_write <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>    pc_src    <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">Control</span> <span class="kw">is</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Decoder</span></span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(opcode <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>); alu_op <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>         reg_write<span class="ot">,</span> mem_read<span class="ot">,</span> mem_write<span class="ot">,</span> branch <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">CondCheck</span></span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(cond <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>); zero<span class="ot">,</span>neg<span class="ot">,</span>carry<span class="ot">,</span>ovf <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; take <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">And2</span></span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span> b <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> branch_sig<span class="ot">,</span> cond_take <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Decoder generates base control signals</span></span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_dec</span><span class="ot">:</span> <span class="fu">Decoder</span> <span class="kw">port map </span>(</span>
<span id="cb31-34"><a href="#cb31-34" aria-hidden="true" tabindex="-1"></a>    opcode <span class="ot">=&gt;</span> opcode<span class="ot">,</span></span>
<span id="cb31-35"><a href="#cb31-35" aria-hidden="true" tabindex="-1"></a>    alu_op <span class="ot">=&gt;</span> alu_op<span class="ot">,</span></span>
<span id="cb31-36"><a href="#cb31-36" aria-hidden="true" tabindex="-1"></a>    reg_write <span class="ot">=&gt;</span> reg_write<span class="ot">,</span></span>
<span id="cb31-37"><a href="#cb31-37" aria-hidden="true" tabindex="-1"></a>    mem_read <span class="ot">=&gt;</span> mem_read<span class="ot">,</span></span>
<span id="cb31-38"><a href="#cb31-38" aria-hidden="true" tabindex="-1"></a>    mem_write <span class="ot">=&gt;</span> mem_write<span class="ot">,</span></span>
<span id="cb31-39"><a href="#cb31-39" aria-hidden="true" tabindex="-1"></a>    branch <span class="ot">=&gt;</span> branch_sig</span>
<span id="cb31-40"><a href="#cb31-40" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb31-41"><a href="#cb31-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-42"><a href="#cb31-42" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- CondCheck evaluates branch condition</span></span>
<span id="cb31-43"><a href="#cb31-43" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_cond</span><span class="ot">:</span> <span class="fu">CondCheck</span> <span class="kw">port map </span>(</span>
<span id="cb31-44"><a href="#cb31-44" aria-hidden="true" tabindex="-1"></a>    cond <span class="ot">=&gt;</span> cond<span class="ot">,</span></span>
<span id="cb31-45"><a href="#cb31-45" aria-hidden="true" tabindex="-1"></a>    zero <span class="ot">=&gt;</span> zero<span class="ot">,</span></span>
<span id="cb31-46"><a href="#cb31-46" aria-hidden="true" tabindex="-1"></a>    neg <span class="ot">=&gt;</span> neg<span class="ot">,</span></span>
<span id="cb31-47"><a href="#cb31-47" aria-hidden="true" tabindex="-1"></a>    carry <span class="ot">=&gt;</span> <span class="bn">&#39;0&#39;</span><span class="ot">,</span></span>
<span id="cb31-48"><a href="#cb31-48" aria-hidden="true" tabindex="-1"></a>    ovf <span class="ot">=&gt;</span> <span class="bn">&#39;0&#39;</span><span class="ot">,</span></span>
<span id="cb31-49"><a href="#cb31-49" aria-hidden="true" tabindex="-1"></a>    take <span class="ot">=&gt;</span> cond_take</span>
<span id="cb31-50"><a href="#cb31-50" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb31-51"><a href="#cb31-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-52"><a href="#cb31-52" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- pc_src = branch AND condition_met</span></span>
<span id="cb31-53"><a href="#cb31-53" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_and</span><span class="ot">:</span> <span class="fu">And2</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> branch_sig<span class="ot">,</span> b <span class="ot">=&gt;</span> cond_take<span class="ot">,</span> y <span class="ot">=&gt;</span> pc_src);</span>
<span id="cb31-54"><a href="#cb31-54" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.32" id="cpu"><span class="header-section-number">1.1.32</span> CPU</h3>
<div class="sourceCode" id="cb32"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- A32-Lite CPU</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- Simple 16-bit RISC processor</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- Instruction format: [15:12]=opcode, [11:8]=rd, [7:4]=rs1, [3:0]=rs2/imm</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">CPU</span> <span class="kw">is</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    clk     <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    reset   <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>    instr   <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>    mem_in  <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>    mem_out <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>    mem_addr<span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>    mem_we  <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>    pc_out  <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">CPU</span> <span class="kw">is</span></span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">RegFile</span></span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(clk<span class="ot">,</span>we <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; waddr<span class="ot">,</span>raddr1<span class="ot">,</span>raddr2 <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>         wdata <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); rdata1<span class="ot">,</span>rdata2 <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">ALU</span></span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); op <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>         y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); zero<span class="ot">,</span>neg <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">PC</span></span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(clk <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; d <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); inc<span class="ot">,</span>load<span class="ot">,</span>reset <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; q <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Control</span></span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(clk <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; opcode<span class="ot">,</span>cond <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>); zero<span class="ot">,</span>neg <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a>         alu_op <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>); reg_write<span class="ot">,</span>mem_read<span class="ot">,</span>mem_write<span class="ot">,</span>pc_src <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb32-34"><a href="#cb32-34" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Mux16</span></span>
<span id="cb32-35"><a href="#cb32-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a<span class="ot">,</span>b <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>); sel <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>));</span>
<span id="cb32-36"><a href="#cb32-36" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb32-37"><a href="#cb32-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-38"><a href="#cb32-38" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Instruction decode</span></span>
<span id="cb32-39"><a href="#cb32-39" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> opcode<span class="ot">,</span> rd<span class="ot">,</span> rs1<span class="ot">,</span> rs2 <span class="ot">:</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb32-40"><a href="#cb32-40" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Control signals</span></span>
<span id="cb32-41"><a href="#cb32-41" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> alu_op <span class="ot">:</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb32-42"><a href="#cb32-42" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> reg_write<span class="ot">,</span> mem_rd<span class="ot">,</span> mem_wr<span class="ot">,</span> pc_src <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb32-43"><a href="#cb32-43" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Datapath signals</span></span>
<span id="cb32-44"><a href="#cb32-44" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> pc_val<span class="ot">,</span> branch_target <span class="ot">:</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb32-45"><a href="#cb32-45" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> reg_data1<span class="ot">,</span> reg_data2<span class="ot">,</span> alu_result <span class="ot">:</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb32-46"><a href="#cb32-46" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> write_data <span class="ot">:</span> bits(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb32-47"><a href="#cb32-47" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> zero_flag<span class="ot">,</span> neg_flag <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb32-48"><a href="#cb32-48" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> not_reset <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb32-49"><a href="#cb32-49" aria-hidden="true" tabindex="-1"></a>  <span class="cf">component</span> <span class="dv">Inv</span></span>
<span id="cb32-50"><a href="#cb32-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">port</span>(a <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>; y <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>);</span>
<span id="cb32-51"><a href="#cb32-51" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end component;</span></span>
<span id="cb32-52"><a href="#cb32-52" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb32-53"><a href="#cb32-53" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Instruction decode using slices</span></span>
<span id="cb32-54"><a href="#cb32-54" aria-hidden="true" tabindex="-1"></a>  opcode <span class="ot">&lt;=</span> instr(<span class="dv">15</span> <span class="ot">downto</span> <span class="dv">12</span>);</span>
<span id="cb32-55"><a href="#cb32-55" aria-hidden="true" tabindex="-1"></a>  rd <span class="ot">&lt;=</span> instr(<span class="dv">11</span> <span class="ot">downto</span> <span class="dv">8</span>);</span>
<span id="cb32-56"><a href="#cb32-56" aria-hidden="true" tabindex="-1"></a>  rs1 <span class="ot">&lt;=</span> instr(<span class="dv">7</span> <span class="ot">downto</span> <span class="dv">4</span>);</span>
<span id="cb32-57"><a href="#cb32-57" aria-hidden="true" tabindex="-1"></a>  rs2 <span class="ot">&lt;=</span> instr(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb32-58"><a href="#cb32-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-59"><a href="#cb32-59" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Control unit</span></span>
<span id="cb32-60"><a href="#cb32-60" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_ctrl</span><span class="ot">:</span> <span class="fu">Control</span> <span class="kw">port map </span>(</span>
<span id="cb32-61"><a href="#cb32-61" aria-hidden="true" tabindex="-1"></a>    clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> opcode <span class="ot">=&gt;</span> opcode<span class="ot">,</span> cond <span class="ot">=&gt;</span> rs2<span class="ot">,</span></span>
<span id="cb32-62"><a href="#cb32-62" aria-hidden="true" tabindex="-1"></a>    zero <span class="ot">=&gt;</span> zero_flag<span class="ot">,</span> neg <span class="ot">=&gt;</span> neg_flag<span class="ot">,</span></span>
<span id="cb32-63"><a href="#cb32-63" aria-hidden="true" tabindex="-1"></a>    alu_op <span class="ot">=&gt;</span> alu_op<span class="ot">,</span> reg_write <span class="ot">=&gt;</span> reg_write<span class="ot">,</span></span>
<span id="cb32-64"><a href="#cb32-64" aria-hidden="true" tabindex="-1"></a>    mem_read <span class="ot">=&gt;</span> mem_rd<span class="ot">,</span> mem_write <span class="ot">=&gt;</span> mem_wr<span class="ot">,</span> pc_src <span class="ot">=&gt;</span> pc_src</span>
<span id="cb32-65"><a href="#cb32-65" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb32-66"><a href="#cb32-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-67"><a href="#cb32-67" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Register file</span></span>
<span id="cb32-68"><a href="#cb32-68" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_regs</span><span class="ot">:</span> <span class="fu">RegFile</span> <span class="kw">port map </span>(</span>
<span id="cb32-69"><a href="#cb32-69" aria-hidden="true" tabindex="-1"></a>    clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> we <span class="ot">=&gt;</span> reg_write<span class="ot">,</span></span>
<span id="cb32-70"><a href="#cb32-70" aria-hidden="true" tabindex="-1"></a>    waddr <span class="ot">=&gt;</span> rd<span class="ot">,</span> raddr1 <span class="ot">=&gt;</span> rs1<span class="ot">,</span> raddr2 <span class="ot">=&gt;</span> rs2<span class="ot">,</span></span>
<span id="cb32-71"><a href="#cb32-71" aria-hidden="true" tabindex="-1"></a>    wdata <span class="ot">=&gt;</span> write_data<span class="ot">,</span> rdata1 <span class="ot">=&gt;</span> reg_data1<span class="ot">,</span> rdata2 <span class="ot">=&gt;</span> reg_data2</span>
<span id="cb32-72"><a href="#cb32-72" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb32-73"><a href="#cb32-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-74"><a href="#cb32-74" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- ALU</span></span>
<span id="cb32-75"><a href="#cb32-75" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_alu</span><span class="ot">:</span> <span class="fu">ALU</span> <span class="kw">port map </span>(</span>
<span id="cb32-76"><a href="#cb32-76" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">=&gt;</span> reg_data1<span class="ot">,</span> b <span class="ot">=&gt;</span> reg_data2<span class="ot">,</span> op <span class="ot">=&gt;</span> alu_op<span class="ot">,</span></span>
<span id="cb32-77"><a href="#cb32-77" aria-hidden="true" tabindex="-1"></a>    y <span class="ot">=&gt;</span> alu_result<span class="ot">,</span> zero <span class="ot">=&gt;</span> zero_flag<span class="ot">,</span> neg <span class="ot">=&gt;</span> neg_flag</span>
<span id="cb32-78"><a href="#cb32-78" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb32-79"><a href="#cb32-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-80"><a href="#cb32-80" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Write back mux (ALU result or memory)</span></span>
<span id="cb32-81"><a href="#cb32-81" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_wb_mux</span><span class="ot">:</span> <span class="fu">Mux16</span> <span class="kw">port map </span>(</span>
<span id="cb32-82"><a href="#cb32-82" aria-hidden="true" tabindex="-1"></a>    a <span class="ot">=&gt;</span> alu_result<span class="ot">,</span> b <span class="ot">=&gt;</span> mem_in<span class="ot">,</span> sel <span class="ot">=&gt;</span> mem_rd<span class="ot">,</span> y <span class="ot">=&gt;</span> write_data</span>
<span id="cb32-83"><a href="#cb32-83" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb32-84"><a href="#cb32-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-85"><a href="#cb32-85" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Program counter</span></span>
<span id="cb32-86"><a href="#cb32-86" aria-hidden="true" tabindex="-1"></a>  <span class="dv">inv_reset</span><span class="ot">:</span> <span class="fu">Inv</span> <span class="kw">port map </span>(a <span class="ot">=&gt;</span> reset<span class="ot">,</span> y <span class="ot">=&gt;</span> not_reset);</span>
<span id="cb32-87"><a href="#cb32-87" aria-hidden="true" tabindex="-1"></a>  branch_target <span class="ot">&lt;=</span> reg_data1;</span>
<span id="cb32-88"><a href="#cb32-88" aria-hidden="true" tabindex="-1"></a>  <span class="dv">u_pc</span><span class="ot">:</span> <span class="fu">PC</span> <span class="kw">port map </span>(</span>
<span id="cb32-89"><a href="#cb32-89" aria-hidden="true" tabindex="-1"></a>    clk <span class="ot">=&gt;</span> clk<span class="ot">,</span> d <span class="ot">=&gt;</span> branch_target<span class="ot">,</span></span>
<span id="cb32-90"><a href="#cb32-90" aria-hidden="true" tabindex="-1"></a>    inc <span class="ot">=&gt;</span> not_reset<span class="ot">,</span> load <span class="ot">=&gt;</span> pc_src<span class="ot">,</span> reset <span class="ot">=&gt;</span> reset<span class="ot">,</span> q <span class="ot">=&gt;</span> pc_val</span>
<span id="cb32-91"><a href="#cb32-91" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb32-92"><a href="#cb32-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-93"><a href="#cb32-93" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Outputs</span></span>
<span id="cb32-94"><a href="#cb32-94" aria-hidden="true" tabindex="-1"></a>  pc_out <span class="ot">&lt;=</span> pc_val;</span>
<span id="cb32-95"><a href="#cb32-95" aria-hidden="true" tabindex="-1"></a>  mem_addr <span class="ot">&lt;=</span> alu_result;</span>
<span id="cb32-96"><a href="#cb32-96" aria-hidden="true" tabindex="-1"></a>  mem_out <span class="ot">&lt;=</span> reg_data2;</span>
<span id="cb32-97"><a href="#cb32-97" aria-hidden="true" tabindex="-1"></a>  mem_we <span class="ot">&lt;=</span> mem_wr;</span>
<span id="cb32-98"><a href="#cb32-98" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.33" id="if_id_reg"><span class="header-section-number">1.1.33</span> IF_ID_Reg</h3>
<div class="sourceCode" id="cb33"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- IF/ID Pipeline Register</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">IF_ID_Reg</span> <span class="kw">is</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    clk <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    reset <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    stall <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>    flush <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>    if_instr <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">31</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>    if_pc_plus4 <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">31</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>    id_instr <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">31</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>    id_pc_plus4 <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">31</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">IF_ID_Reg</span> <span class="kw">is</span></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> instr_reg <span class="ot">:</span> bits(<span class="dv">31</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> pc_plus4_reg <span class="ot">:</span> bits(<span class="dv">31</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>  <span class="sc">process</span>(clk)</span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a>  <span class="sc">begin</span></span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">rising_edge</span>(clk) <span class="cf">then</span></span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (reset <span class="ot">=</span> <span class="bn">&#39;1&#39;</span>) <span class="kw">or</span> (flush <span class="ot">=</span> <span class="bn">&#39;1&#39;</span>) <span class="cf">then</span></span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a>        instr_reg <span class="ot">&lt;=</span> x<span class="st">&quot;E0000000&quot;</span>;  <span class="co">-- NOP</span></span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a>        pc_plus4_reg <span class="ot">&lt;=</span> x<span class="st">&quot;00000000&quot;</span>;</span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a>      <span class="cf">elsif</span> stall <span class="ot">=</span> <span class="bn">&#39;0&#39;</span> <span class="cf">then</span></span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a>        instr_reg <span class="ot">&lt;=</span> if_instr;</span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a>        pc_plus4_reg <span class="ot">&lt;=</span> if_pc_plus4;</span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a>      <span class="cf">end if;</span></span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end if;</span></span>
<span id="cb33-31"><a href="#cb33-31" aria-hidden="true" tabindex="-1"></a>  <span class="sc">end process;</span></span>
<span id="cb33-32"><a href="#cb33-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-33"><a href="#cb33-33" aria-hidden="true" tabindex="-1"></a>  id_instr <span class="ot">&lt;=</span> instr_reg;</span>
<span id="cb33-34"><a href="#cb33-34" aria-hidden="true" tabindex="-1"></a>  id_pc_plus4 <span class="ot">&lt;=</span> pc_plus4_reg;</span>
<span id="cb33-35"><a href="#cb33-35" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.34" id="hazarddetect"><span class="header-section-number">1.1.34</span> HazardDetect</h3>
<div class="sourceCode" id="cb34"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Hazard Detection Unit</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">HazardDetect</span> <span class="kw">is</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    id_rn <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    id_rm <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>    id_rn_used <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>    id_rm_used <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>    ex_rd <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>    ex_mem_read <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>    stall <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">HazardDetect</span> <span class="kw">is</span></span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> rn_hazard <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> rm_hazard <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Hazard if: load in EX AND register used in ID AND same register</span></span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>  rn_hazard <span class="ot">&lt;=</span> ex_mem_read <span class="kw">and</span> id_rn_used <span class="kw">and</span> (id_rn <span class="ot">=</span> ex_rd);</span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a>  rm_hazard <span class="ot">&lt;=</span> ex_mem_read <span class="kw">and</span> id_rm_used <span class="kw">and</span> (id_rm <span class="ot">=</span> ex_rd);</span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a>  stall <span class="ot">&lt;=</span> rn_hazard <span class="kw">or</span> rm_hazard;</span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.35" id="forwardunit"><span class="header-section-number">1.1.35</span> ForwardUnit</h3>
<div class="sourceCode" id="cb35"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Forwarding Unit</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">ForwardUnit</span> <span class="kw">is</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    ex_rn <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    ex_rm <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    mem_rd <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    mem_reg_write <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>    wb_rd <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">3</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>    wb_reg_write <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>    forward_a <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>    forward_b <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">ForwardUnit</span> <span class="kw">is</span></span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> mem_fwd_a <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> wb_fwd_a <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> mem_fwd_b <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> wb_fwd_b <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Detect forwarding conditions</span></span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a>  mem_fwd_a <span class="ot">&lt;=</span> mem_reg_write <span class="kw">and</span> (mem_rd <span class="ot">=</span> ex_rn);</span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a>  wb_fwd_a <span class="ot">&lt;=</span> wb_reg_write <span class="kw">and</span> (wb_rd <span class="ot">=</span> ex_rn) <span class="kw">and</span> (<span class="kw">not</span> mem_fwd_a);</span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a>  mem_fwd_b <span class="ot">&lt;=</span> mem_reg_write <span class="kw">and</span> (mem_rd <span class="ot">=</span> ex_rm);</span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a>  wb_fwd_b <span class="ot">&lt;=</span> wb_reg_write <span class="kw">and</span> (wb_rd <span class="ot">=</span> ex_rm) <span class="kw">and</span> (<span class="kw">not</span> mem_fwd_b);</span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-28"><a href="#cb35-28" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Encode output: 00=none, 01=MEM, 10=WB</span></span>
<span id="cb35-29"><a href="#cb35-29" aria-hidden="true" tabindex="-1"></a>  forward_a <span class="ot">&lt;=</span> wb_fwd_a <span class="ot">&amp;</span> mem_fwd_a;</span>
<span id="cb35-30"><a href="#cb35-30" aria-hidden="true" tabindex="-1"></a>  forward_b <span class="ot">&lt;=</span> wb_fwd_b <span class="ot">&amp;</span> mem_fwd_b;</span>
<span id="cb35-31"><a href="#cb35-31" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.36" id="cpu_pipeline"><span class="header-section-number">1.1.36</span> CPU_Pipeline</h3>
<div class="sourceCode" id="cb36"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- 5-Stage Pipelined CPU</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="co">-- See hdl_lib/05_cpu/CPU_Pipeline.hdl for full implementation</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="co">-- This exercise is a capstone project</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">CPU_Pipeline</span> <span class="kw">is</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>    clk <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    reset <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>    instr_addr <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">31</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>    instr_data <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">31</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>    mem_addr <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">31</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>    mem_wdata <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">31</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>    mem_rdata <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">31</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>    mem_read <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>    mem_write <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>    halted <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">CPU_Pipeline</span> <span class="kw">is</span></span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Implementation uses IF_ID_Reg, HazardDetect, ForwardUnit</span></span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- and additional pipeline registers EX_MEM, MEM_WB</span></span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- See hdl_lib/05_cpu/CPU_Pipeline.hdl for complete code</span></span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a>  instr_addr <span class="ot">&lt;=</span> x<span class="st">&quot;00000000&quot;</span>;</span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a>  mem_addr <span class="ot">&lt;=</span> x<span class="st">&quot;00000000&quot;</span>;</span>
<span id="cb36-27"><a href="#cb36-27" aria-hidden="true" tabindex="-1"></a>  mem_wdata <span class="ot">&lt;=</span> x<span class="st">&quot;00000000&quot;</span>;</span>
<span id="cb36-28"><a href="#cb36-28" aria-hidden="true" tabindex="-1"></a>  mem_read <span class="ot">&lt;=</span> <span class="bn">&#39;0&#39;</span>;</span>
<span id="cb36-29"><a href="#cb36-29" aria-hidden="true" tabindex="-1"></a>  mem_write <span class="ot">&lt;=</span> <span class="bn">&#39;0&#39;</span>;</span>
<span id="cb36-30"><a href="#cb36-30" aria-hidden="true" tabindex="-1"></a>  halted <span class="ot">&lt;=</span> <span class="bn">&#39;0&#39;</span>;</span>
<span id="cb36-31"><a href="#cb36-31" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.37" id="projet-7-cache-l1"><span class="header-section-number">1.1.37</span> Projet 7 : Cache L1</h3>
<h3 data-number="1.1.38" id="cacheline"><span class="header-section-number">1.1.38</span> CacheLine</h3>
<div class="sourceCode" id="cb37"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Cache Line</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">CacheLine</span> <span class="kw">is</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    clk <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>    write_enable <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>    write_tag <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">19</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>    write_data <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">127</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>    write_word <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">31</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>    write_word_sel <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>    write_word_en <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>    set_dirty <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>    clear_dirty <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>    invalidate <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>    valid <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a>    dirty <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>    tag <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">19</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>    data <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">127</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">CacheLine</span> <span class="kw">is</span></span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> valid_reg <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> dirty_reg <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> tag_reg <span class="ot">:</span> bits(<span class="dv">19</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb37-26"><a href="#cb37-26" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> data_reg <span class="ot">:</span> bits(<span class="dv">127</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb37-27"><a href="#cb37-27" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb37-28"><a href="#cb37-28" aria-hidden="true" tabindex="-1"></a>  <span class="sc">process</span>(clk)</span>
<span id="cb37-29"><a href="#cb37-29" aria-hidden="true" tabindex="-1"></a>  <span class="sc">begin</span></span>
<span id="cb37-30"><a href="#cb37-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">rising_edge</span>(clk) <span class="cf">then</span></span>
<span id="cb37-31"><a href="#cb37-31" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> invalidate <span class="ot">=</span> <span class="bn">&#39;1&#39;</span> <span class="cf">then</span></span>
<span id="cb37-32"><a href="#cb37-32" aria-hidden="true" tabindex="-1"></a>        valid_reg <span class="ot">&lt;=</span> <span class="bn">&#39;0&#39;</span>;</span>
<span id="cb37-33"><a href="#cb37-33" aria-hidden="true" tabindex="-1"></a>        dirty_reg <span class="ot">&lt;=</span> <span class="bn">&#39;0&#39;</span>;</span>
<span id="cb37-34"><a href="#cb37-34" aria-hidden="true" tabindex="-1"></a>      <span class="cf">elsif</span> write_enable <span class="ot">=</span> <span class="bn">&#39;1&#39;</span> <span class="cf">then</span></span>
<span id="cb37-35"><a href="#cb37-35" aria-hidden="true" tabindex="-1"></a>        valid_reg <span class="ot">&lt;=</span> <span class="bn">&#39;1&#39;</span>;</span>
<span id="cb37-36"><a href="#cb37-36" aria-hidden="true" tabindex="-1"></a>        tag_reg <span class="ot">&lt;=</span> write_tag;</span>
<span id="cb37-37"><a href="#cb37-37" aria-hidden="true" tabindex="-1"></a>        data_reg <span class="ot">&lt;=</span> write_data;</span>
<span id="cb37-38"><a href="#cb37-38" aria-hidden="true" tabindex="-1"></a>        dirty_reg <span class="ot">&lt;=</span> <span class="bn">&#39;0&#39;</span>;</span>
<span id="cb37-39"><a href="#cb37-39" aria-hidden="true" tabindex="-1"></a>      <span class="cf">elsif</span> write_word_en <span class="ot">=</span> <span class="bn">&#39;1&#39;</span> <span class="cf">then</span></span>
<span id="cb37-40"><a href="#cb37-40" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> write_word_sel <span class="ot">=</span> b<span class="st">&quot;00&quot;</span> <span class="cf">then</span></span>
<span id="cb37-41"><a href="#cb37-41" aria-hidden="true" tabindex="-1"></a>          data_reg(<span class="dv">31</span> <span class="ot">downto</span> <span class="dv">0</span>) <span class="ot">&lt;=</span> write_word;</span>
<span id="cb37-42"><a href="#cb37-42" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elsif</span> write_word_sel <span class="ot">=</span> b<span class="st">&quot;01&quot;</span> <span class="cf">then</span></span>
<span id="cb37-43"><a href="#cb37-43" aria-hidden="true" tabindex="-1"></a>          data_reg(<span class="dv">63</span> <span class="ot">downto</span> <span class="dv">32</span>) <span class="ot">&lt;=</span> write_word;</span>
<span id="cb37-44"><a href="#cb37-44" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elsif</span> write_word_sel <span class="ot">=</span> b<span class="st">&quot;10&quot;</span> <span class="cf">then</span></span>
<span id="cb37-45"><a href="#cb37-45" aria-hidden="true" tabindex="-1"></a>          data_reg(<span class="dv">95</span> <span class="ot">downto</span> <span class="dv">64</span>) <span class="ot">&lt;=</span> write_word;</span>
<span id="cb37-46"><a href="#cb37-46" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb37-47"><a href="#cb37-47" aria-hidden="true" tabindex="-1"></a>          data_reg(<span class="dv">127</span> <span class="ot">downto</span> <span class="dv">96</span>) <span class="ot">&lt;=</span> write_word;</span>
<span id="cb37-48"><a href="#cb37-48" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end if;</span></span>
<span id="cb37-49"><a href="#cb37-49" aria-hidden="true" tabindex="-1"></a>      <span class="cf">end if;</span></span>
<span id="cb37-50"><a href="#cb37-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-51"><a href="#cb37-51" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> set_dirty <span class="ot">=</span> <span class="bn">&#39;1&#39;</span> <span class="cf">then</span></span>
<span id="cb37-52"><a href="#cb37-52" aria-hidden="true" tabindex="-1"></a>        dirty_reg <span class="ot">&lt;=</span> <span class="bn">&#39;1&#39;</span>;</span>
<span id="cb37-53"><a href="#cb37-53" aria-hidden="true" tabindex="-1"></a>      <span class="cf">elsif</span> clear_dirty <span class="ot">=</span> <span class="bn">&#39;1&#39;</span> <span class="cf">then</span></span>
<span id="cb37-54"><a href="#cb37-54" aria-hidden="true" tabindex="-1"></a>        dirty_reg <span class="ot">&lt;=</span> <span class="bn">&#39;0&#39;</span>;</span>
<span id="cb37-55"><a href="#cb37-55" aria-hidden="true" tabindex="-1"></a>      <span class="cf">end if;</span></span>
<span id="cb37-56"><a href="#cb37-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end if;</span></span>
<span id="cb37-57"><a href="#cb37-57" aria-hidden="true" tabindex="-1"></a>  <span class="sc">end process;</span></span>
<span id="cb37-58"><a href="#cb37-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-59"><a href="#cb37-59" aria-hidden="true" tabindex="-1"></a>  valid <span class="ot">&lt;=</span> valid_reg;</span>
<span id="cb37-60"><a href="#cb37-60" aria-hidden="true" tabindex="-1"></a>  dirty <span class="ot">&lt;=</span> dirty_reg;</span>
<span id="cb37-61"><a href="#cb37-61" aria-hidden="true" tabindex="-1"></a>  tag <span class="ot">&lt;=</span> tag_reg;</span>
<span id="cb37-62"><a href="#cb37-62" aria-hidden="true" tabindex="-1"></a>  data <span class="ot">&lt;=</span> data_reg;</span>
<span id="cb37-63"><a href="#cb37-63" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.39" id="tagcompare"><span class="header-section-number">1.1.39</span> TagCompare</h3>
<div class="sourceCode" id="cb38"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Tag Comparator</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">TagCompare</span> <span class="kw">is</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>    valid <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    addr_tag <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">19</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>    stored_tag <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">19</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>    hit <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">TagCompare</span> <span class="kw">is</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> tags_equal <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>  <span class="sc">process</span>(addr_tag<span class="ot">,</span> stored_tag)</span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>  <span class="sc">begin</span></span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> addr_tag <span class="ot">=</span> stored_tag <span class="cf">then</span></span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>      tags_equal <span class="ot">&lt;=</span> <span class="bn">&#39;1&#39;</span>;</span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>      tags_equal <span class="ot">&lt;=</span> <span class="bn">&#39;0&#39;</span>;</span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end if;</span></span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a>  <span class="sc">end process;</span></span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"></a>  hit <span class="ot">&lt;=</span> valid <span class="kw">and</span> tags_equal;</span>
<span id="cb38-25"><a href="#cb38-25" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.40" id="wordselect"><span class="header-section-number">1.1.40</span> WordSelect</h3>
<div class="sourceCode" id="cb39"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Word Selector</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">WordSelect</span> <span class="kw">is</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    line_data <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">127</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>    word_sel <span class="ot">:</span> <span class="kw">in</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>    word_out <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">31</span> <span class="ot">downto</span> <span class="dv">0</span>)</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">WordSelect</span> <span class="kw">is</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>  <span class="sc">process</span>(line_data<span class="ot">,</span> word_sel)</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>  <span class="sc">begin</span></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> word_sel <span class="ot">=</span> b<span class="st">&quot;00&quot;</span> <span class="cf">then</span></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a>      word_out <span class="ot">&lt;=</span> line_data(<span class="dv">31</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elsif</span> word_sel <span class="ot">=</span> b<span class="st">&quot;01&quot;</span> <span class="cf">then</span></span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>      word_out <span class="ot">&lt;=</span> line_data(<span class="dv">63</span> <span class="ot">downto</span> <span class="dv">32</span>);</span>
<span id="cb39-19"><a href="#cb39-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elsif</span> word_sel <span class="ot">=</span> b<span class="st">&quot;10&quot;</span> <span class="cf">then</span></span>
<span id="cb39-20"><a href="#cb39-20" aria-hidden="true" tabindex="-1"></a>      word_out <span class="ot">&lt;=</span> line_data(<span class="dv">95</span> <span class="ot">downto</span> <span class="dv">64</span>);</span>
<span id="cb39-21"><a href="#cb39-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb39-22"><a href="#cb39-22" aria-hidden="true" tabindex="-1"></a>      word_out <span class="ot">&lt;=</span> line_data(<span class="dv">127</span> <span class="ot">downto</span> <span class="dv">96</span>);</span>
<span id="cb39-23"><a href="#cb39-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end if;</span></span>
<span id="cb39-24"><a href="#cb39-24" aria-hidden="true" tabindex="-1"></a>  <span class="sc">end process;</span></span>
<span id="cb39-25"><a href="#cb39-25" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h3 data-number="1.1.41" id="cachecontroller"><span class="header-section-number">1.1.41</span> CacheController</h3>
<div class="sourceCode" id="cb40"><pre class="sourceCode vhdl"><code class="sourceCode vhdl"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">-- Cache Controller FSM</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="cf">entity</span> <span class="dv">CacheController</span> <span class="kw">is</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">port</span>(</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>    clk <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>    reset <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>    cpu_read <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>    cpu_write <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>    cache_hit <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>    mem_ready <span class="ot">:</span> <span class="kw">in</span> <span class="dt">bit</span>;</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>    state <span class="ot">:</span> <span class="kw">out</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>    cpu_ready <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>    mem_read <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>    mem_write <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span>;</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>    fill_line <span class="ot">:</span> <span class="kw">out</span> <span class="dt">bit</span></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>  );</span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a><span class="cf">end entity;</span></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a><span class="cf">architecture</span> <span class="dv">rtl</span> <span class="kw">of</span> <span class="fu">CacheController</span> <span class="kw">is</span></span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> state_reg <span class="ot">:</span> bits(<span class="dv">1</span> <span class="ot">downto</span> <span class="dv">0</span>);</span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a>  <span class="ot">signal</span> pending_write <span class="ot">:</span> <span class="dt">bit</span>;</span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a><span class="cf">begin</span></span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a>  <span class="sc">process</span>(clk)</span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a>  <span class="sc">begin</span></span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">rising_edge</span>(clk) <span class="cf">then</span></span>
<span id="cb40-26"><a href="#cb40-26" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> reset <span class="ot">=</span> <span class="bn">&#39;1&#39;</span> <span class="cf">then</span></span>
<span id="cb40-27"><a href="#cb40-27" aria-hidden="true" tabindex="-1"></a>        state_reg <span class="ot">&lt;=</span> b<span class="st">&quot;00&quot;</span>;</span>
<span id="cb40-28"><a href="#cb40-28" aria-hidden="true" tabindex="-1"></a>        pending_write <span class="ot">&lt;=</span> <span class="bn">&#39;0&#39;</span>;</span>
<span id="cb40-29"><a href="#cb40-29" aria-hidden="true" tabindex="-1"></a>      <span class="cf">else</span></span>
<span id="cb40-30"><a href="#cb40-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> state_reg <span class="ot">=</span> b<span class="st">&quot;00&quot;</span> <span class="cf">then</span></span>
<span id="cb40-31"><a href="#cb40-31" aria-hidden="true" tabindex="-1"></a>          <span class="co">-- IDLE</span></span>
<span id="cb40-32"><a href="#cb40-32" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> (cpu_read <span class="ot">=</span> <span class="bn">&#39;1&#39;</span> <span class="kw">or</span> cpu_write <span class="ot">=</span> <span class="bn">&#39;1&#39;</span>) <span class="kw">and</span> cache_hit <span class="ot">=</span> <span class="bn">&#39;0&#39;</span> <span class="cf">then</span></span>
<span id="cb40-33"><a href="#cb40-33" aria-hidden="true" tabindex="-1"></a>            state_reg <span class="ot">&lt;=</span> b<span class="st">&quot;01&quot;</span>;  <span class="co">-- FETCH</span></span>
<span id="cb40-34"><a href="#cb40-34" aria-hidden="true" tabindex="-1"></a>            pending_write <span class="ot">&lt;=</span> cpu_write;</span>
<span id="cb40-35"><a href="#cb40-35" aria-hidden="true" tabindex="-1"></a>          <span class="cf">elsif</span> cpu_write <span class="ot">=</span> <span class="bn">&#39;1&#39;</span> <span class="kw">and</span> cache_hit <span class="ot">=</span> <span class="bn">&#39;1&#39;</span> <span class="cf">then</span></span>
<span id="cb40-36"><a href="#cb40-36" aria-hidden="true" tabindex="-1"></a>            state_reg <span class="ot">&lt;=</span> b<span class="st">&quot;10&quot;</span>;  <span class="co">-- WRITEBACK</span></span>
<span id="cb40-37"><a href="#cb40-37" aria-hidden="true" tabindex="-1"></a>          <span class="cf">end if;</span></span>
<span id="cb40-38"><a href="#cb40-38" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elsif</span> state_reg <span class="ot">=</span> b<span class="st">&quot;01&quot;</span> <span class="cf">then</span></span>
<span id="cb40-39"><a href="#cb40-39" aria-hidden="true" tabindex="-1"></a>          <span class="co">-- FETCH</span></span>
<span id="cb40-40"><a href="#cb40-40" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> mem_ready <span class="ot">=</span> <span class="bn">&#39;1&#39;</span> <span class="cf">then</span></span>
<span id="cb40-41"><a href="#cb40-41" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> pending_write <span class="ot">=</span> <span class="bn">&#39;1&#39;</span> <span class="cf">then</span></span>
<span id="cb40-42"><a href="#cb40-42" aria-hidden="true" tabindex="-1"></a>              state_reg <span class="ot">&lt;=</span> b<span class="st">&quot;10&quot;</span>;  <span class="co">-- WRITEBACK</span></span>
<span id="cb40-43"><a href="#cb40-43" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span></span>
<span id="cb40-44"><a href="#cb40-44" aria-hidden="true" tabindex="-1"></a>              state_reg <span class="ot">&lt;=</span> b<span class="st">&quot;00&quot;</span>;  <span class="co">-- IDLE</span></span>
<span id="cb40-45"><a href="#cb40-45" aria-hidden="true" tabindex="-1"></a>            <span class="cf">end if;</span></span>
<span id="cb40-46"><a href="#cb40-46" aria-hidden="true" tabindex="-1"></a>          <span class="cf">end if;</span></span>
<span id="cb40-47"><a href="#cb40-47" aria-hidden="true" tabindex="-1"></a>        <span class="cf">elsif</span> state_reg <span class="ot">=</span> b<span class="st">&quot;10&quot;</span> <span class="cf">then</span></span>
<span id="cb40-48"><a href="#cb40-48" aria-hidden="true" tabindex="-1"></a>          <span class="co">-- WRITEBACK</span></span>
<span id="cb40-49"><a href="#cb40-49" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span> mem_ready <span class="ot">=</span> <span class="bn">&#39;1&#39;</span> <span class="cf">then</span></span>
<span id="cb40-50"><a href="#cb40-50" aria-hidden="true" tabindex="-1"></a>            state_reg <span class="ot">&lt;=</span> b<span class="st">&quot;00&quot;</span>;  <span class="co">-- IDLE</span></span>
<span id="cb40-51"><a href="#cb40-51" aria-hidden="true" tabindex="-1"></a>            pending_write <span class="ot">&lt;=</span> <span class="bn">&#39;0&#39;</span>;</span>
<span id="cb40-52"><a href="#cb40-52" aria-hidden="true" tabindex="-1"></a>          <span class="cf">end if;</span></span>
<span id="cb40-53"><a href="#cb40-53" aria-hidden="true" tabindex="-1"></a>        <span class="cf">end if;</span></span>
<span id="cb40-54"><a href="#cb40-54" aria-hidden="true" tabindex="-1"></a>      <span class="cf">end if;</span></span>
<span id="cb40-55"><a href="#cb40-55" aria-hidden="true" tabindex="-1"></a>    <span class="cf">end if;</span></span>
<span id="cb40-56"><a href="#cb40-56" aria-hidden="true" tabindex="-1"></a>  <span class="sc">end process;</span></span>
<span id="cb40-57"><a href="#cb40-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-58"><a href="#cb40-58" aria-hidden="true" tabindex="-1"></a>  state <span class="ot">&lt;=</span> state_reg;</span>
<span id="cb40-59"><a href="#cb40-59" aria-hidden="true" tabindex="-1"></a>  cpu_ready <span class="ot">&lt;=</span> <span class="bn">&#39;1&#39;</span> <span class="kw">when</span> (state_reg <span class="ot">=</span> b<span class="st">&quot;00&quot;</span> <span class="kw">and</span> cache_hit <span class="ot">=</span> <span class="bn">&#39;1&#39;</span>) <span class="kw">or</span></span>
<span id="cb40-60"><a href="#cb40-60" aria-hidden="true" tabindex="-1"></a>                        (state_reg <span class="ot">=</span> b<span class="st">&quot;01&quot;</span> <span class="kw">and</span> mem_ready <span class="ot">=</span> <span class="bn">&#39;1&#39;</span> <span class="kw">and</span> pending_write <span class="ot">=</span> <span class="bn">&#39;0&#39;</span>) <span class="kw">or</span></span>
<span id="cb40-61"><a href="#cb40-61" aria-hidden="true" tabindex="-1"></a>                        (state_reg <span class="ot">=</span> b<span class="st">&quot;10&quot;</span> <span class="kw">and</span> mem_ready <span class="ot">=</span> <span class="bn">&#39;1&#39;</span>) <span class="kw">else</span> <span class="bn">&#39;0&#39;</span>;</span>
<span id="cb40-62"><a href="#cb40-62" aria-hidden="true" tabindex="-1"></a>  mem_read <span class="ot">&lt;=</span> <span class="bn">&#39;1&#39;</span> <span class="kw">when</span> state_reg <span class="ot">=</span> b<span class="st">&quot;01&quot;</span> <span class="kw">else</span> <span class="bn">&#39;0&#39;</span>;</span>
<span id="cb40-63"><a href="#cb40-63" aria-hidden="true" tabindex="-1"></a>  mem_write <span class="ot">&lt;=</span> <span class="bn">&#39;1&#39;</span> <span class="kw">when</span> state_reg <span class="ot">=</span> b<span class="st">&quot;10&quot;</span> <span class="kw">else</span> <span class="bn">&#39;0&#39;</span>;</span>
<span id="cb40-64"><a href="#cb40-64" aria-hidden="true" tabindex="-1"></a>  fill_line <span class="ot">&lt;=</span> <span class="bn">&#39;1&#39;</span> <span class="kw">when</span> state_reg <span class="ot">=</span> b<span class="st">&quot;01&quot;</span> <span class="kw">and</span> mem_ready <span class="ot">=</span> <span class="bn">&#39;1&#39;</span> <span class="kw">else</span> <span class="bn">&#39;0&#39;</span>;</span>
<span id="cb40-65"><a href="#cb40-65" aria-hidden="true" tabindex="-1"></a><span class="cf">end architecture;</span></span></code></pre></div>
<hr />
<h2 data-number="1.2" id="b.-solutions-assembleur-a32"><span class="header-section-number">1.2</span> B. Solutions Assembleur
A32</h2>
<h3 data-number="1.2.1" id="hello-world"><span class="header-section-number">1.2.1</span> Hello World</h3>
<div class="sourceCode" id="cb41"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Hello World - Solution</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">42</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.2" id="addition"><span class="header-section-number">1.2.2</span> Addition</h3>
<div class="sourceCode" id="cb42"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Addition - Solution</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">15</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">27</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.3" id="soustraction"><span class="header-section-number">1.2.3</span> Soustraction</h3>
<div class="sourceCode" id="cb43"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Soustraction - Solution</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">100</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">SUB</span> R0<span class="op">,</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">58</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.4" id="logique"><span class="header-section-number">1.2.4</span> Logique</h3>
<div class="sourceCode" id="cb44"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Logique - Solution</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="bn">0xFF</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0x0F</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">AND</span> R0<span class="op">,</span> R1<span class="op">,</span> R2</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.5" id="doubler"><span class="header-section-number">1.2.5</span> Doubler</h3>
<div class="sourceCode" id="cb45"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Doubler - Solution</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">21</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> R0   <span class="co">; R0 = R0 + R0 = 2 * R0</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.6" id="conditions"><span class="header-section-number">1.2.6</span> Conditions</h3>
<div class="sourceCode" id="cb46"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Conditions - Solution</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">25</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">17</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R1<span class="op">,</span> R2</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>GT <span class="op">.</span>r1_bigger</span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> R2</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>    B <span class="op">.</span>done</span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a><span class="fu">.r1_bigger:</span></span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> R1</span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a><span class="fu">.done:</span></span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.7" id="valeur-absolue"><span class="header-section-number">1.2.7</span> Valeur Absolue</h3>
<div class="sourceCode" id="cb47"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Valeur Absolue - Solution</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">SUB</span> R1<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">42</span>  <span class="co">; R1 = -42</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>GE <span class="op">.</span>positive</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">; NÃ©gatif: R0 = 0 - R1</span></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">SUB</span> R0<span class="op">,</span> R0<span class="op">,</span> R1</span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>    B <span class="op">.</span>done</span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a><span class="fu">.positive:</span></span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> R1</span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a><span class="fu">.done:</span></span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.8" id="boucles"><span class="header-section-number">1.2.8</span> Boucles</h3>
<div class="sourceCode" id="cb48"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Boucles - Solution</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>      <span class="co">; somme = 0</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">1</span>      <span class="co">; compteur = 1</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a><span class="fu">.loop:</span></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> R1  <span class="co">; somme += compteur</span></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R1<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">1</span>  <span class="co">; compteur++</span></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">10</span></span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>LE <span class="op">.</span>loop</span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.9" id="multiplication"><span class="header-section-number">1.2.9</span> Multiplication</h3>
<div class="sourceCode" id="cb49"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Multiplication - Solution</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>      <span class="co">; rÃ©sultat = 0</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">6</span>      <span class="co">; multiplicande</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">7</span>      <span class="co">; compteur (multiplicateur)</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a><span class="fu">.loop:</span></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> R1  <span class="co">; rÃ©sultat += multiplicande</span></span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">SUB</span> R2<span class="op">,</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">1</span>  <span class="co">; compteur--</span></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>GT <span class="op">.</span>loop</span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.10" id="fibonacci"><span class="header-section-number">1.2.10</span> Fibonacci</h3>
<div class="sourceCode" id="cb50"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Fibonacci - Solution</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">1</span>      <span class="co">; F(1) = 1</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">1</span>      <span class="co">; F(2) = 1</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">2</span>      <span class="co">; compteur = 2</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a><span class="fu">.loop:</span></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R3<span class="op">,</span> R0<span class="op">,</span> R1  <span class="co">; R3 = F(n-2) + F(n-1)</span></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> R1      <span class="co">; F(n-2) = ancien F(n-1)</span></span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> R3      <span class="co">; F(n-1) = nouveau F(n)</span></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R2<span class="op">,</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">1</span>  <span class="co">; compteur++</span></span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">10</span></span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>LT <span class="op">.</span>loop</span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> R1      <span class="co">; rÃ©sultat dans R0</span></span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.11" id="tableaux"><span class="header-section-number">1.2.11</span> Tableaux</h3>
<div class="sourceCode" id="cb51"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Tableaux - Solution</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>.<span class="bu">data</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="fu">data:</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">10</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">20</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">30</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">40</span></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">50</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>          <span class="co">; somme = 0</span></span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span>data       <span class="co">; adresse du tableau</span></span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">5</span>          <span class="co">; compteur = 5</span></span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true" tabindex="-1"></a><span class="fu">.loop:</span></span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true" tabindex="-1"></a>    LDR R3<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span>        <span class="co">; charge Ã©lÃ©ment</span></span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> R3      <span class="co">; somme += Ã©lÃ©ment</span></span>
<span id="cb51-21"><a href="#cb51-21" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R1<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">4</span>      <span class="co">; adresse suivante</span></span>
<span id="cb51-22"><a href="#cb51-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">SUB</span> R2<span class="op">,</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">1</span>      <span class="co">; compteur--</span></span>
<span id="cb51-23"><a href="#cb51-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb51-24"><a href="#cb51-24" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>GT <span class="op">.</span>loop</span>
<span id="cb51-25"><a href="#cb51-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-26"><a href="#cb51-26" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.12" id="maximum-tableau"><span class="header-section-number">1.2.12</span> Maximum Tableau</h3>
<div class="sourceCode" id="cb52"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Maximum Tableau - Solution</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>.<span class="bu">data</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="fu">data:</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">12</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">45</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">7</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">89</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">23</span></span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span>data       <span class="co">; adresse du tableau</span></span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>    LDR R0<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span>        <span class="co">; max = premier Ã©lÃ©ment</span></span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R1<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">4</span>      <span class="co">; passer au suivant</span></span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">4</span>          <span class="co">; compteur = 4 (reste)</span></span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a><span class="fu">.loop:</span></span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a>    LDR R3<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span>        <span class="co">; charge Ã©lÃ©ment</span></span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R3<span class="op">,</span> R0          <span class="co">; compare avec max</span></span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>LE <span class="op">.</span>skip</span>
<span id="cb52-23"><a href="#cb52-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> R3          <span class="co">; nouveau max</span></span>
<span id="cb52-24"><a href="#cb52-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-25"><a href="#cb52-25" aria-hidden="true" tabindex="-1"></a><span class="fu">.skip:</span></span>
<span id="cb52-26"><a href="#cb52-26" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R1<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">4</span>      <span class="co">; adresse suivante</span></span>
<span id="cb52-27"><a href="#cb52-27" aria-hidden="true" tabindex="-1"></a>    <span class="bu">SUB</span> R2<span class="op">,</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">1</span>      <span class="co">; compteur--</span></span>
<span id="cb52-28"><a href="#cb52-28" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb52-29"><a href="#cb52-29" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>GT <span class="op">.</span>loop</span>
<span id="cb52-30"><a href="#cb52-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-31"><a href="#cb52-31" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.13" id="mÃ©moire"><span class="header-section-number">1.2.13</span> MÃ©moire</h3>
<div class="sourceCode" id="cb53"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co">; MÃ©moire - Solution</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>.<span class="bu">data</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="fu">data:</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">0</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">0</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">10</span></span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">20</span></span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Sauvegarder</span></span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a>    LDR R4<span class="op">,</span> <span class="op">=</span>data</span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">STR</span> R1<span class="op">,</span> <span class="op">[</span>R4<span class="op">]</span>        <span class="co">; data[0] = R1</span></span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R4<span class="op">,</span> R4<span class="op">,</span> <span class="op">#</span><span class="dv">4</span></span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">STR</span> R2<span class="op">,</span> <span class="op">[</span>R4<span class="op">]</span>        <span class="co">; data[1] = R2</span></span>
<span id="cb53-19"><a href="#cb53-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-20"><a href="#cb53-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Effacer</span></span>
<span id="cb53-21"><a href="#cb53-21" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb53-22"><a href="#cb53-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb53-23"><a href="#cb53-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-24"><a href="#cb53-24" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Recharger</span></span>
<span id="cb53-25"><a href="#cb53-25" aria-hidden="true" tabindex="-1"></a>    LDR R4<span class="op">,</span> <span class="op">=</span>data</span>
<span id="cb53-26"><a href="#cb53-26" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">[</span>R4<span class="op">]</span>        <span class="co">; R1 = data[0]</span></span>
<span id="cb53-27"><a href="#cb53-27" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R4<span class="op">,</span> R4<span class="op">,</span> <span class="op">#</span><span class="dv">4</span></span>
<span id="cb53-28"><a href="#cb53-28" aria-hidden="true" tabindex="-1"></a>    LDR R2<span class="op">,</span> <span class="op">[</span>R4<span class="op">]</span>        <span class="co">; R2 = data[1]</span></span>
<span id="cb53-29"><a href="#cb53-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-30"><a href="#cb53-30" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Calculer</span></span>
<span id="cb53-31"><a href="#cb53-31" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R1<span class="op">,</span> R2</span>
<span id="cb53-32"><a href="#cb53-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-33"><a href="#cb53-33" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.14" id="structure-simple"><span class="header-section-number">1.2.14</span> Structure Simple</h3>
<div class="sourceCode" id="cb54"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Structure Simple - Solution</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>.<span class="bu">data</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="co">; Structure Point { int x; int y; }</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="fu">point:</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">10</span>    <span class="co">; x = 10 (offset 0)</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">32</span>    <span class="co">; y = 32 (offset 4)</span></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Charger l&#39;adresse de la structure</span></span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span>point</span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Charger p.x (offset 0)</span></span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>    LDR R2<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span>        <span class="co">; R2 = p.x = 10</span></span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Charger p.y (offset 4)</span></span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a>    LDR R3<span class="op">,</span> <span class="op">[</span>R1<span class="op">,</span> <span class="op">#</span><span class="dv">4</span><span class="op">]</span>    <span class="co">; R3 = p.y = 32</span></span>
<span id="cb54-20"><a href="#cb54-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-21"><a href="#cb54-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Calculer la somme</span></span>
<span id="cb54-22"><a href="#cb54-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R2<span class="op">,</span> R3      <span class="co">; R0 = 10 + 32 = 42</span></span>
<span id="cb54-23"><a href="#cb54-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-24"><a href="#cb54-24" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.15" id="initialiser-structure"><span class="header-section-number">1.2.15</span> Initialiser Structure</h3>
<div class="sourceCode" id="cb55"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Initialiser Structure - Solution</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>.<span class="bu">data</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="co">; Structure Point (non initialisÃ©e)</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="fu">point:</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">0</span>     <span class="co">; x (offset 0)</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">0</span>     <span class="co">; y (offset 4)</span></span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>    LDR R4<span class="op">,</span> <span class="op">=</span>point  <span class="co">; adresse de la structure</span></span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Initialiser p.x = 20</span></span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">20</span></span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">STR</span> R1<span class="op">,</span> <span class="op">[</span>R4<span class="op">]</span>        <span class="co">; p.x = 20</span></span>
<span id="cb55-17"><a href="#cb55-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-18"><a href="#cb55-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Initialiser p.y = 22</span></span>
<span id="cb55-19"><a href="#cb55-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">22</span></span>
<span id="cb55-20"><a href="#cb55-20" aria-hidden="true" tabindex="-1"></a>    <span class="bu">STR</span> R2<span class="op">,</span> <span class="op">[</span>R4<span class="op">,</span> <span class="op">#</span><span class="dv">4</span><span class="op">]</span>    <span class="co">; p.y = 22</span></span>
<span id="cb55-21"><a href="#cb55-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-22"><a href="#cb55-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Relire et additionner</span></span>
<span id="cb55-23"><a href="#cb55-23" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">[</span>R4<span class="op">]</span>        <span class="co">; R1 = p.x</span></span>
<span id="cb55-24"><a href="#cb55-24" aria-hidden="true" tabindex="-1"></a>    LDR R2<span class="op">,</span> <span class="op">[</span>R4<span class="op">,</span> <span class="op">#</span><span class="dv">4</span><span class="op">]</span>    <span class="co">; R2 = p.y</span></span>
<span id="cb55-25"><a href="#cb55-25" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R1<span class="op">,</span> R2      <span class="co">; R0 = 42</span></span>
<span id="cb55-26"><a href="#cb55-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-27"><a href="#cb55-27" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.16" id="structure-rectangle"><span class="header-section-number">1.2.16</span> Structure Rectangle</h3>
<div class="sourceCode" id="cb56"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Structure Rectangle - Solution</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>.<span class="bu">data</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="co">; Structure Rectangle</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="fu">rect:</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">5</span>     <span class="co">; x (offset 0)</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">10</span>    <span class="co">; y (offset 4)</span></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">6</span>     <span class="co">; width (offset 8)</span></span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">7</span>     <span class="co">; height (offset 12)</span></span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a>    LDR R4<span class="op">,</span> <span class="op">=</span>rect</span>
<span id="cb56-15"><a href="#cb56-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-16"><a href="#cb56-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Charger width et height</span></span>
<span id="cb56-17"><a href="#cb56-17" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">[</span>R4<span class="op">,</span> <span class="op">#</span><span class="dv">8</span><span class="op">]</span>    <span class="co">; R1 = width = 6</span></span>
<span id="cb56-18"><a href="#cb56-18" aria-hidden="true" tabindex="-1"></a>    LDR R2<span class="op">,</span> <span class="op">[</span>R4<span class="op">,</span> <span class="op">#</span><span class="dv">12</span><span class="op">]</span>   <span class="co">; R2 = height = 7</span></span>
<span id="cb56-19"><a href="#cb56-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-20"><a href="#cb56-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Multiplier par additions: 6 * 7</span></span>
<span id="cb56-21"><a href="#cb56-21" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>          <span class="co">; rÃ©sultat = 0</span></span>
<span id="cb56-22"><a href="#cb56-22" aria-hidden="true" tabindex="-1"></a><span class="fu">.mult:</span></span>
<span id="cb56-23"><a href="#cb56-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb56-24"><a href="#cb56-24" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>EQ <span class="op">.</span>done</span>
<span id="cb56-25"><a href="#cb56-25" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> R1      <span class="co">; rÃ©sultat += width</span></span>
<span id="cb56-26"><a href="#cb56-26" aria-hidden="true" tabindex="-1"></a>    <span class="bu">SUB</span> R2<span class="op">,</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">1</span>      <span class="co">; height--</span></span>
<span id="cb56-27"><a href="#cb56-27" aria-hidden="true" tabindex="-1"></a>    B <span class="op">.</span>mult</span>
<span id="cb56-28"><a href="#cb56-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-29"><a href="#cb56-29" aria-hidden="true" tabindex="-1"></a><span class="fu">.done:</span></span>
<span id="cb56-30"><a href="#cb56-30" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.17" id="tableau-de-structures"><span class="header-section-number">1.2.17</span> Tableau de Structures</h3>
<div class="sourceCode" id="cb57"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Tableau de Structures - Solution</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>.<span class="bu">data</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="co">; Tableau de 3 Points (8 octets chacun)</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="fu">points:</span></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">; points[0]: x=10, y=2</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">10</span></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">2</span></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">; points[1]: x=15, y=5</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">15</span></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">5</span></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">; points[2]: x=8, y=7</span></span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">8</span></span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">7</span></span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb57-19"><a href="#cb57-19" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span>points     <span class="co">; adresse du tableau</span></span>
<span id="cb57-20"><a href="#cb57-20" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>          <span class="co">; somme = 0</span></span>
<span id="cb57-21"><a href="#cb57-21" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">3</span>          <span class="co">; compteur = 3</span></span>
<span id="cb57-22"><a href="#cb57-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-23"><a href="#cb57-23" aria-hidden="true" tabindex="-1"></a><span class="fu">.loop:</span></span>
<span id="cb57-24"><a href="#cb57-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb57-25"><a href="#cb57-25" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>EQ <span class="op">.</span>done</span>
<span id="cb57-26"><a href="#cb57-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-27"><a href="#cb57-27" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Charger x du Point courant</span></span>
<span id="cb57-28"><a href="#cb57-28" aria-hidden="true" tabindex="-1"></a>    LDR R3<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span>        <span class="co">; R3 = points[i].x</span></span>
<span id="cb57-29"><a href="#cb57-29" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> R3      <span class="co">; somme += x</span></span>
<span id="cb57-30"><a href="#cb57-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-31"><a href="#cb57-31" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Passer au Point suivant (8 octets)</span></span>
<span id="cb57-32"><a href="#cb57-32" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R1<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">8</span></span>
<span id="cb57-33"><a href="#cb57-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-34"><a href="#cb57-34" aria-hidden="true" tabindex="-1"></a>    <span class="co">; DÃ©crÃ©menter compteur</span></span>
<span id="cb57-35"><a href="#cb57-35" aria-hidden="true" tabindex="-1"></a>    <span class="bu">SUB</span> R2<span class="op">,</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">1</span></span>
<span id="cb57-36"><a href="#cb57-36" aria-hidden="true" tabindex="-1"></a>    B <span class="op">.</span>loop</span>
<span id="cb57-37"><a href="#cb57-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-38"><a href="#cb57-38" aria-hidden="true" tabindex="-1"></a><span class="fu">.done:</span></span>
<span id="cb57-39"><a href="#cb57-39" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.18" id="somme-xy-structures"><span class="header-section-number">1.2.18</span> Somme x+y Structures</h3>
<div class="sourceCode" id="cb58"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Somme x+y de Structures - Solution</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>.<span class="bu">data</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="fu">points:</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">; points[0]: x=5, y=3</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">5</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">3</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">; points[1]: x=10, y=4</span></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">10</span></span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">4</span></span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">; points[2]: x=12, y=8</span></span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">12</span></span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a>    .<span class="dt">word</span> <span class="dv">8</span></span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb58-17"><a href="#cb58-17" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb58-18"><a href="#cb58-18" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span>points     <span class="co">; adresse du tableau</span></span>
<span id="cb58-19"><a href="#cb58-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>          <span class="co">; somme totale = 0</span></span>
<span id="cb58-20"><a href="#cb58-20" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R4<span class="op">,</span> <span class="op">#</span><span class="dv">3</span>          <span class="co">; compteur = 3</span></span>
<span id="cb58-21"><a href="#cb58-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-22"><a href="#cb58-22" aria-hidden="true" tabindex="-1"></a><span class="fu">.loop:</span></span>
<span id="cb58-23"><a href="#cb58-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R4<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb58-24"><a href="#cb58-24" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>EQ <span class="op">.</span>done</span>
<span id="cb58-25"><a href="#cb58-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-26"><a href="#cb58-26" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Charger x et y du Point courant</span></span>
<span id="cb58-27"><a href="#cb58-27" aria-hidden="true" tabindex="-1"></a>    LDR R2<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span>        <span class="co">; R2 = x</span></span>
<span id="cb58-28"><a href="#cb58-28" aria-hidden="true" tabindex="-1"></a>    LDR R3<span class="op">,</span> <span class="op">[</span>R1<span class="op">,</span> <span class="op">#</span><span class="dv">4</span><span class="op">]</span>    <span class="co">; R3 = y</span></span>
<span id="cb58-29"><a href="#cb58-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-30"><a href="#cb58-30" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Ajouter x+y Ã  la somme</span></span>
<span id="cb58-31"><a href="#cb58-31" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> R2      <span class="co">; somme += x</span></span>
<span id="cb58-32"><a href="#cb58-32" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> R3      <span class="co">; somme += y</span></span>
<span id="cb58-33"><a href="#cb58-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-34"><a href="#cb58-34" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Point suivant (8 octets)</span></span>
<span id="cb58-35"><a href="#cb58-35" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R1<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">8</span></span>
<span id="cb58-36"><a href="#cb58-36" aria-hidden="true" tabindex="-1"></a>    <span class="bu">SUB</span> R4<span class="op">,</span> R4<span class="op">,</span> <span class="op">#</span><span class="dv">1</span></span>
<span id="cb58-37"><a href="#cb58-37" aria-hidden="true" tabindex="-1"></a>    B <span class="op">.</span>loop</span>
<span id="cb58-38"><a href="#cb58-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-39"><a href="#cb58-39" aria-hidden="true" tabindex="-1"></a><span class="fu">.done:</span></span>
<span id="cb58-40"><a href="#cb58-40" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.19" id="fonctions"><span class="header-section-number">1.2.19</span> Fonctions</h3>
<div class="sourceCode" id="cb59"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Fonctions - Solution</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">21</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>    BL double</span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>    HALT</span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a><span class="fu">double:</span></span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> R0  <span class="co">; R0 = R0 + R0 = 2 * R0</span></span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> PC<span class="op">,</span> LR      <span class="co">; retour</span></span></code></pre></div>
<hr />
<h3 data-number="1.2.20" id="fonction-add3"><span class="header-section-number">1.2.20</span> Fonction Add3</h3>
<div class="sourceCode" id="cb60"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Fonction Add3 - Solution</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">10</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">15</span></span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">17</span></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>    BL add3</span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>    HALT</span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a><span class="fu">add3:</span></span>
<span id="cb60-13"><a href="#cb60-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> R1</span>
<span id="cb60-14"><a href="#cb60-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> R2</span>
<span id="cb60-15"><a href="#cb60-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> PC<span class="op">,</span> LR</span></code></pre></div>
<hr />
<h3 data-number="1.2.21" id="Ã©crire-caractÃ¨re"><span class="header-section-number">1.2.21</span> Ã‰crire CaractÃ¨re</h3>
<div class="sourceCode" id="cb61"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Ã‰crire CaractÃ¨re - Solution</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">65</span>         <span class="co">; &#39;A&#39; = 65</span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span><span class="bn">0xFFFF0000</span> <span class="co">; adresse PUTC</span></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>    STRB R0<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span>       <span class="co">; Ã©crire le caractÃ¨re</span></span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.22" id="hello-string"><span class="header-section-number">1.2.22</span> Hello String</h3>
<div class="sourceCode" id="cb62"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Hello String - Solution</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span><span class="bn">0xFFFF0000</span> <span class="co">; adresse PUTC</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>          <span class="co">; compteur</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">72</span>         <span class="co">; &#39;H&#39;</span></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>    STRB R2<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span></span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">1</span></span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">105</span>        <span class="co">; &#39;i&#39;</span></span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a>    STRB R2<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span></span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">1</span></span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.23" id="print-loop"><span class="header-section-number">1.2.23</span> Print Loop</h3>
<div class="sourceCode" id="cb63"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Print Loop - Solution</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span><span class="bn">0xFFFF0000</span> <span class="co">; adresse PUTC</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>          <span class="co">; compteur</span></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">65</span>         <span class="co">; caractÃ¨re courant = &#39;A&#39;</span></span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a><span class="fu">.loop:</span></span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a>    STRB R2<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span>       <span class="co">; Ã©crire caractÃ¨re</span></span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">1</span>      <span class="co">; compteur++</span></span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R2<span class="op">,</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">1</span>      <span class="co">; caractÃ¨re suivant</span></span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">69</span>         <span class="co">; &#39;E&#39; = 69</span></span>
<span id="cb63-15"><a href="#cb63-15" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>LT <span class="op">.</span>loop</span>
<span id="cb63-16"><a href="#cb63-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-17"><a href="#cb63-17" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.24" id="pixel"><span class="header-section-number">1.2.24</span> Pixel</h3>
<div class="sourceCode" id="cb64"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Pixel - Solution</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span><span class="bn">0x00400000</span> <span class="co">; adresse Ã©cran</span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="bn">0x80</span>       <span class="co">; bit 7 = pixel 0</span></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>    STRB R0<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span>       <span class="co">; Ã©crire le byte</span></span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.25" id="ligne-horizontale"><span class="header-section-number">1.2.25</span> Ligne Horizontale</h3>
<div class="sourceCode" id="cb65"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Ligne Horizontale - Solution</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span><span class="bn">0x00400000</span> <span class="co">; adresse Ã©cran</span></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="bn">0xFF</span>       <span class="co">; 8 pixels allumÃ©s</span></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>    STRB R0<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span>       <span class="co">; Ã©crire le byte</span></span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.26" id="ligne-verticale"><span class="header-section-number">1.2.26</span> Ligne Verticale</h3>
<div class="sourceCode" id="cb66"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Ligne Verticale - Solution</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span><span class="bn">0x00400000</span> <span class="co">; adresse Ã©cran</span></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0x80</span>       <span class="co">; bit du pixel (colonne 0)</span></span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>          <span class="co">; compteur</span></span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a><span class="fu">.loop:</span></span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a>    STRB R2<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span>       <span class="co">; dessiner pixel</span></span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R1<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">40</span>     <span class="co">; ligne suivante (320/8 = 40)</span></span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">1</span>      <span class="co">; compteur++</span></span>
<span id="cb66-14"><a href="#cb66-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">8</span></span>
<span id="cb66-15"><a href="#cb66-15" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>LT <span class="op">.</span>loop</span>
<span id="cb66-16"><a href="#cb66-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-17"><a href="#cb66-17" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.27" id="rectangle"><span class="header-section-number">1.2.27</span> Rectangle</h3>
<div class="sourceCode" id="cb67"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Rectangle - Solution</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span><span class="bn">0x00400000</span> <span class="co">; adresse Ã©cran</span></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0xFF</span>       <span class="co">; ligne de 8 pixels</span></span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>          <span class="co">; compteur de lignes</span></span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a><span class="fu">.loop:</span></span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>    STRB R2<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span>       <span class="co">; dessiner ligne</span></span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R1<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">40</span>     <span class="co">; ligne suivante</span></span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">1</span>      <span class="co">; compteur++</span></span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">8</span></span>
<span id="cb67-15"><a href="#cb67-15" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>LT <span class="op">.</span>loop</span>
<span id="cb67-16"><a href="#cb67-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-17"><a href="#cb67-17" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.28" id="damier"><span class="header-section-number">1.2.28</span> Damier</h3>
<div class="sourceCode" id="cb68"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Damier - Solution</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span><span class="bn">0x00400000</span> <span class="co">; adresse Ã©cran</span></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0xAA</span>       <span class="co">; motif courant</span></span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>          <span class="co">; compteur de lignes</span></span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a><span class="fu">.loop:</span></span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a>    STRB R2<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span>       <span class="co">; colonne 0</span></span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R4<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">1</span></span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a>    EOR R5<span class="op">,</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0xFF</span>   <span class="co">; inverser pour colonne 1</span></span>
<span id="cb68-14"><a href="#cb68-14" aria-hidden="true" tabindex="-1"></a>    STRB R5<span class="op">,</span> <span class="op">[</span>R4<span class="op">]</span>       <span class="co">; colonne 1</span></span>
<span id="cb68-15"><a href="#cb68-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-16"><a href="#cb68-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R1<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">40</span>     <span class="co">; ligne suivante</span></span>
<span id="cb68-17"><a href="#cb68-17" aria-hidden="true" tabindex="-1"></a>    EOR R2<span class="op">,</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0xFF</span>   <span class="co">; alterner le motif</span></span>
<span id="cb68-18"><a href="#cb68-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">1</span></span>
<span id="cb68-19"><a href="#cb68-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">8</span></span>
<span id="cb68-20"><a href="#cb68-20" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>LT <span class="op">.</span>loop</span>
<span id="cb68-21"><a href="#cb68-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-22"><a href="#cb68-22" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.29" id="lire-un-caractÃ¨re"><span class="header-section-number">1.2.29</span> Lire un CaractÃ¨re</h3>
<div class="sourceCode" id="cb69"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Lire un CaractÃ¨re - Solution</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span><span class="bn">0x00402600</span> <span class="co">; adresse KEYBOARD (temps rÃ©el)</span></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>    LDR R4<span class="op">,</span> <span class="op">=</span><span class="bn">0xFFFF0000</span> <span class="co">; adresse PUTC</span></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Attendre une touche</span></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a><span class="fu">.wait:</span></span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>    LDR R2<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span>        <span class="co">; lire clavier</span></span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>EQ <span class="op">.</span>wait          <span class="co">; boucler si pas de touche</span></span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Convertir ASCII â†’ nombre</span></span>
<span id="cb69-16"><a href="#cb69-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">SUB</span> R0<span class="op">,</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0x30</span>   <span class="co">; R0 = chiffre (0-9)</span></span>
<span id="cb69-17"><a href="#cb69-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-18"><a href="#cb69-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Afficher le chiffre tapÃ© (Ã©cho)</span></span>
<span id="cb69-19"><a href="#cb69-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">STR</span> R2<span class="op">,</span> <span class="op">[</span>R4<span class="op">]</span>        <span class="co">; afficher le caractÃ¨re</span></span>
<span id="cb69-20"><a href="#cb69-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-21"><a href="#cb69-21" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.30" id="lire-un-nombre-Ã -2-chiffres"><span class="header-section-number">1.2.30</span> Lire un Nombre Ã  2
Chiffres</h3>
<div class="sourceCode" id="cb70"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Lire un Nombre Ã  2 Chiffres - Solution</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>    LDR R5<span class="op">,</span> <span class="op">=</span><span class="bn">0x00402600</span> <span class="co">; adresse KEYBOARD (temps rÃ©el)</span></span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>    LDR R6<span class="op">,</span> <span class="op">=</span><span class="bn">0xFFFF0000</span> <span class="co">; adresse PUTC</span></span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Attendre premier chiffre</span></span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a><span class="fu">.wait1:</span></span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">[</span>R5<span class="op">]</span></span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>EQ <span class="op">.</span>wait1</span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-15"><a href="#cb70-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Ã‰cho du premier chiffre</span></span>
<span id="cb70-16"><a href="#cb70-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">STR</span> R1<span class="op">,</span> <span class="op">[</span>R6<span class="op">]</span></span>
<span id="cb70-17"><a href="#cb70-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-18"><a href="#cb70-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Convertir en nombre</span></span>
<span id="cb70-19"><a href="#cb70-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">SUB</span> R1<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="bn">0x30</span>   <span class="co">; R1 = premier chiffre</span></span>
<span id="cb70-20"><a href="#cb70-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-21"><a href="#cb70-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Multiplier par 10: x â†’ 2x â†’ 4x â†’ 5x â†’ 10x</span></span>
<span id="cb70-22"><a href="#cb70-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R2<span class="op">,</span> R1<span class="op">,</span> R1      <span class="co">; R2 = 2x</span></span>
<span id="cb70-23"><a href="#cb70-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R2<span class="op">,</span> R2<span class="op">,</span> R2      <span class="co">; R2 = 4x</span></span>
<span id="cb70-24"><a href="#cb70-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R2<span class="op">,</span> R2<span class="op">,</span> R1      <span class="co">; R2 = 5x</span></span>
<span id="cb70-25"><a href="#cb70-25" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R1<span class="op">,</span> R2<span class="op">,</span> R2      <span class="co">; R1 = 10x</span></span>
<span id="cb70-26"><a href="#cb70-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-27"><a href="#cb70-27" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Attendre relÃ¢che de la touche</span></span>
<span id="cb70-28"><a href="#cb70-28" aria-hidden="true" tabindex="-1"></a><span class="fu">.release1:</span></span>
<span id="cb70-29"><a href="#cb70-29" aria-hidden="true" tabindex="-1"></a>    LDR R2<span class="op">,</span> <span class="op">[</span>R5<span class="op">]</span></span>
<span id="cb70-30"><a href="#cb70-30" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb70-31"><a href="#cb70-31" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>NE <span class="op">.</span>release1</span>
<span id="cb70-32"><a href="#cb70-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-33"><a href="#cb70-33" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Attendre deuxiÃ¨me chiffre</span></span>
<span id="cb70-34"><a href="#cb70-34" aria-hidden="true" tabindex="-1"></a><span class="fu">.wait2:</span></span>
<span id="cb70-35"><a href="#cb70-35" aria-hidden="true" tabindex="-1"></a>    LDR R2<span class="op">,</span> <span class="op">[</span>R5<span class="op">]</span></span>
<span id="cb70-36"><a href="#cb70-36" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb70-37"><a href="#cb70-37" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>EQ <span class="op">.</span>wait2</span>
<span id="cb70-38"><a href="#cb70-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-39"><a href="#cb70-39" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Ã‰cho du deuxiÃ¨me chiffre</span></span>
<span id="cb70-40"><a href="#cb70-40" aria-hidden="true" tabindex="-1"></a>    <span class="bu">STR</span> R2<span class="op">,</span> <span class="op">[</span>R6<span class="op">]</span></span>
<span id="cb70-41"><a href="#cb70-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-42"><a href="#cb70-42" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Convertir et ajouter</span></span>
<span id="cb70-43"><a href="#cb70-43" aria-hidden="true" tabindex="-1"></a>    <span class="bu">SUB</span> R2<span class="op">,</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0x30</span>   <span class="co">; R2 = deuxiÃ¨me chiffre</span></span>
<span id="cb70-44"><a href="#cb70-44" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R1<span class="op">,</span> R2      <span class="co">; R0 = nombre complet</span></span>
<span id="cb70-45"><a href="#cb70-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-46"><a href="#cb70-46" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.31" id="deviner-le-nombre"><span class="header-section-number">1.2.31</span> Deviner le Nombre</h3>
<div class="sourceCode" id="cb71"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Deviner le Nombre - Solution</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R7<span class="op">,</span> <span class="op">#</span><span class="dv">55</span>         <span class="co">; nombre secret: &#39;7&#39; en ASCII (0x37)</span></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>    LDR R5<span class="op">,</span> <span class="op">=</span><span class="bn">0x00402600</span> <span class="co">; KEYBOARD</span></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>    LDR R6<span class="op">,</span> <span class="op">=</span><span class="bn">0xFFFF0000</span> <span class="co">; PUTC</span></span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R4<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>          <span class="co">; derniÃ¨re touche vue</span></span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a><span class="fu">.game_loop:</span></span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Lire clavier</span></span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a>    LDR R0<span class="op">,</span> <span class="op">[</span>R5<span class="op">]</span></span>
<span id="cb71-14"><a href="#cb71-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-15"><a href="#cb71-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Ignorer si pas de touche ou mÃªme touche que avant</span></span>
<span id="cb71-16"><a href="#cb71-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb71-17"><a href="#cb71-17" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>EQ <span class="op">.</span>game_loop</span>
<span id="cb71-18"><a href="#cb71-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R0<span class="op">,</span> R4</span>
<span id="cb71-19"><a href="#cb71-19" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>EQ <span class="op">.</span>game_loop</span>
<span id="cb71-20"><a href="#cb71-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-21"><a href="#cb71-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Nouvelle touche dÃ©tectÃ©e</span></span>
<span id="cb71-22"><a href="#cb71-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R4<span class="op">,</span> R0          <span class="co">; sauvegarder</span></span>
<span id="cb71-23"><a href="#cb71-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-24"><a href="#cb71-24" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Ã‰cho de la touche</span></span>
<span id="cb71-25"><a href="#cb71-25" aria-hidden="true" tabindex="-1"></a>    <span class="bu">STR</span> R0<span class="op">,</span> <span class="op">[</span>R6<span class="op">]</span></span>
<span id="cb71-26"><a href="#cb71-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-27"><a href="#cb71-27" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Comparer au secret</span></span>
<span id="cb71-28"><a href="#cb71-28" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R0<span class="op">,</span> R7</span>
<span id="cb71-29"><a href="#cb71-29" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>EQ <span class="op">.</span>win</span>
<span id="cb71-30"><a href="#cb71-30" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>LT <span class="op">.</span>too_small</span>
<span id="cb71-31"><a href="#cb71-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-32"><a href="#cb71-32" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Trop grand -&gt; afficher &#39;-&#39;</span></span>
<span id="cb71-33"><a href="#cb71-33" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">45</span>         <span class="co">; &#39;-&#39;</span></span>
<span id="cb71-34"><a href="#cb71-34" aria-hidden="true" tabindex="-1"></a>    <span class="bu">STR</span> R1<span class="op">,</span> <span class="op">[</span>R6<span class="op">]</span></span>
<span id="cb71-35"><a href="#cb71-35" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">10</span>         <span class="co">; newline</span></span>
<span id="cb71-36"><a href="#cb71-36" aria-hidden="true" tabindex="-1"></a>    <span class="bu">STR</span> R1<span class="op">,</span> <span class="op">[</span>R6<span class="op">]</span></span>
<span id="cb71-37"><a href="#cb71-37" aria-hidden="true" tabindex="-1"></a>    B <span class="op">.</span>wait_release</span>
<span id="cb71-38"><a href="#cb71-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-39"><a href="#cb71-39" aria-hidden="true" tabindex="-1"></a><span class="fu">.too_small:</span></span>
<span id="cb71-40"><a href="#cb71-40" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Trop petit -&gt; afficher &#39;+&#39;</span></span>
<span id="cb71-41"><a href="#cb71-41" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">43</span>         <span class="co">; &#39;+&#39;</span></span>
<span id="cb71-42"><a href="#cb71-42" aria-hidden="true" tabindex="-1"></a>    <span class="bu">STR</span> R1<span class="op">,</span> <span class="op">[</span>R6<span class="op">]</span></span>
<span id="cb71-43"><a href="#cb71-43" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">10</span>         <span class="co">; newline</span></span>
<span id="cb71-44"><a href="#cb71-44" aria-hidden="true" tabindex="-1"></a>    <span class="bu">STR</span> R1<span class="op">,</span> <span class="op">[</span>R6<span class="op">]</span></span>
<span id="cb71-45"><a href="#cb71-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-46"><a href="#cb71-46" aria-hidden="true" tabindex="-1"></a><span class="fu">.wait_release:</span></span>
<span id="cb71-47"><a href="#cb71-47" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Attendre relÃ¢che (R4 != 0, donc on attend que R0 change)</span></span>
<span id="cb71-48"><a href="#cb71-48" aria-hidden="true" tabindex="-1"></a>    LDR R0<span class="op">,</span> <span class="op">[</span>R5<span class="op">]</span></span>
<span id="cb71-49"><a href="#cb71-49" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R0<span class="op">,</span> R4</span>
<span id="cb71-50"><a href="#cb71-50" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>EQ <span class="op">.</span>wait_release</span>
<span id="cb71-51"><a href="#cb71-51" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R4<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>          <span class="co">; reset</span></span>
<span id="cb71-52"><a href="#cb71-52" aria-hidden="true" tabindex="-1"></a>    B <span class="op">.</span>game_loop</span>
<span id="cb71-53"><a href="#cb71-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-54"><a href="#cb71-54" aria-hidden="true" tabindex="-1"></a><span class="fu">.win:</span></span>
<span id="cb71-55"><a href="#cb71-55" aria-hidden="true" tabindex="-1"></a>    <span class="co">; GagnÃ©! Afficher &#39;*&#39;</span></span>
<span id="cb71-56"><a href="#cb71-56" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">42</span>         <span class="co">; &#39;*&#39;</span></span>
<span id="cb71-57"><a href="#cb71-57" aria-hidden="true" tabindex="-1"></a>    <span class="bu">STR</span> R1<span class="op">,</span> <span class="op">[</span>R6<span class="op">]</span></span>
<span id="cb71-58"><a href="#cb71-58" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">10</span></span>
<span id="cb71-59"><a href="#cb71-59" aria-hidden="true" tabindex="-1"></a>    <span class="bu">STR</span> R1<span class="op">,</span> <span class="op">[</span>R6<span class="op">]</span></span>
<span id="cb71-60"><a href="#cb71-60" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">7</span>          <span class="co">; rÃ©sultat dans R0</span></span>
<span id="cb71-61"><a href="#cb71-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-62"><a href="#cb71-62" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.32" id="dÃ©gradÃ©-dithering"><span class="header-section-number">1.2.32</span> DÃ©gradÃ© (Dithering)</h3>
<div class="sourceCode" id="cb72"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co">; DÃ©gradÃ© (Dithering) - Solution</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span><span class="bn">0x00400000</span> <span class="co">; adresse Ã©cran</span></span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>          <span class="co">; compteur lignes</span></span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a><span class="fu">.line_loop:</span></span>
<span id="cb72-10"><a href="#cb72-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Ã‰crire les 5 motifs de dÃ©gradÃ©</span></span>
<span id="cb72-11"><a href="#cb72-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0x00</span>       <span class="co">; noir</span></span>
<span id="cb72-12"><a href="#cb72-12" aria-hidden="true" tabindex="-1"></a>    STRB R2<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span></span>
<span id="cb72-13"><a href="#cb72-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-14"><a href="#cb72-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0x11</span>       <span class="co">; 12.5% blanc</span></span>
<span id="cb72-15"><a href="#cb72-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R3<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">1</span></span>
<span id="cb72-16"><a href="#cb72-16" aria-hidden="true" tabindex="-1"></a>    STRB R2<span class="op">,</span> <span class="op">[</span>R3<span class="op">]</span></span>
<span id="cb72-17"><a href="#cb72-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-18"><a href="#cb72-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0x55</span>       <span class="co">; 50% blanc</span></span>
<span id="cb72-19"><a href="#cb72-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R3<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">2</span></span>
<span id="cb72-20"><a href="#cb72-20" aria-hidden="true" tabindex="-1"></a>    STRB R2<span class="op">,</span> <span class="op">[</span>R3<span class="op">]</span></span>
<span id="cb72-21"><a href="#cb72-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-22"><a href="#cb72-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0xBB</span>       <span class="co">; 75% blanc</span></span>
<span id="cb72-23"><a href="#cb72-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R3<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">3</span></span>
<span id="cb72-24"><a href="#cb72-24" aria-hidden="true" tabindex="-1"></a>    STRB R2<span class="op">,</span> <span class="op">[</span>R3<span class="op">]</span></span>
<span id="cb72-25"><a href="#cb72-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-26"><a href="#cb72-26" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0xFF</span>       <span class="co">; blanc</span></span>
<span id="cb72-27"><a href="#cb72-27" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R3<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">4</span></span>
<span id="cb72-28"><a href="#cb72-28" aria-hidden="true" tabindex="-1"></a>    STRB R2<span class="op">,</span> <span class="op">[</span>R3<span class="op">]</span></span>
<span id="cb72-29"><a href="#cb72-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-30"><a href="#cb72-30" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Ligne suivante</span></span>
<span id="cb72-31"><a href="#cb72-31" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R1<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">40</span>     <span class="co">; 40 bytes par ligne</span></span>
<span id="cb72-32"><a href="#cb72-32" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">1</span></span>
<span id="cb72-33"><a href="#cb72-33" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">240</span></span>
<span id="cb72-34"><a href="#cb72-34" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>LT <span class="op">.</span>line_loop</span>
<span id="cb72-35"><a href="#cb72-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-36"><a href="#cb72-36" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.33" id="dÃ©gradÃ©-plein-Ã©cran"><span class="header-section-number">1.2.33</span> DÃ©gradÃ© Plein Ã‰cran</h3>
<div class="sourceCode" id="cb73"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co">; DÃ©gradÃ© Plein Ã‰cran - Solution</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="co">; 8 bandes avec motifs croissants</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>    LDR R1<span class="op">,</span> <span class="op">=</span><span class="bn">0x00400000</span> <span class="co">; adresse Ã©cran</span></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>          <span class="co">; compteur bandes</span></span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0x00</span>       <span class="co">; motif initial (noir)</span></span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a><span class="fu">next_band:</span></span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a>    LDR R3<span class="op">,</span> <span class="op">=</span><span class="dv">1200</span>       <span class="co">; 30 lignes * 40 bytes</span></span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-14"><a href="#cb73-14" aria-hidden="true" tabindex="-1"></a><span class="fu">fill_band:</span></span>
<span id="cb73-15"><a href="#cb73-15" aria-hidden="true" tabindex="-1"></a>    STRB R2<span class="op">,</span> <span class="op">[</span>R1<span class="op">]</span></span>
<span id="cb73-16"><a href="#cb73-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R1<span class="op">,</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">1</span></span>
<span id="cb73-17"><a href="#cb73-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">SUB</span> R3<span class="op">,</span> R3<span class="op">,</span> <span class="op">#</span><span class="dv">1</span></span>
<span id="cb73-18"><a href="#cb73-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R3<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb73-19"><a href="#cb73-19" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>GT fill_band</span>
<span id="cb73-20"><a href="#cb73-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-21"><a href="#cb73-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Passer au motif suivant (approximation)</span></span>
<span id="cb73-22"><a href="#cb73-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">; 0x00 -&gt; 0x11 -&gt; 0x22 -&gt; 0x33 -&gt; ...</span></span>
<span id="cb73-23"><a href="#cb73-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R2<span class="op">,</span> R2<span class="op">,</span> <span class="op">#</span><span class="bn">0x11</span></span>
<span id="cb73-24"><a href="#cb73-24" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">1</span></span>
<span id="cb73-25"><a href="#cb73-25" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">8</span></span>
<span id="cb73-26"><a href="#cb73-26" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>LT next_band</span>
<span id="cb73-27"><a href="#cb73-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-28"><a href="#cb73-28" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h3 data-number="1.2.34" id="recherche-dichotomique"><span class="header-section-number">1.2.34</span> Recherche Dichotomique</h3>
<div class="sourceCode" id="cb74"><pre class="sourceCode asm"><code class="sourceCode fasm"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co">; Recherche Dichotomique - Solution</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>.text</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>.global _start</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a><span class="fu">_start:</span></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R5<span class="op">,</span> <span class="op">#</span><span class="dv">42</span>         <span class="co">; nombre secret</span></span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R1<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>          <span class="co">; low</span></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R2<span class="op">,</span> <span class="op">#</span><span class="dv">100</span>        <span class="co">; high</span></span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">0</span>          <span class="co">; compteur d&#39;essais</span></span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a><span class="fu">.loop:</span></span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R0<span class="op">,</span> R0<span class="op">,</span> <span class="op">#</span><span class="dv">1</span>      <span class="co">; compteur++</span></span>
<span id="cb74-13"><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-14"><a href="#cb74-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">; mid = (low + high) / 2</span></span>
<span id="cb74-15"><a href="#cb74-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R3<span class="op">,</span> R1<span class="op">,</span> R2</span>
<span id="cb74-16"><a href="#cb74-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R4<span class="op">,</span> R3</span>
<span id="cb74-17"><a href="#cb74-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">; Division par 2 avec shift (simulÃ© par soustraction successive)</span></span>
<span id="cb74-18"><a href="#cb74-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">MOV</span> R3<span class="op">,</span> <span class="op">#</span><span class="dv">0</span></span>
<span id="cb74-19"><a href="#cb74-19" aria-hidden="true" tabindex="-1"></a><span class="fu">.div2:</span></span>
<span id="cb74-20"><a href="#cb74-20" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R4<span class="op">,</span> <span class="op">#</span><span class="dv">2</span></span>
<span id="cb74-21"><a href="#cb74-21" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>LT <span class="op">.</span>div_done</span>
<span id="cb74-22"><a href="#cb74-22" aria-hidden="true" tabindex="-1"></a>    <span class="bu">SUB</span> R4<span class="op">,</span> R4<span class="op">,</span> <span class="op">#</span><span class="dv">2</span></span>
<span id="cb74-23"><a href="#cb74-23" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R3<span class="op">,</span> R3<span class="op">,</span> <span class="op">#</span><span class="dv">1</span></span>
<span id="cb74-24"><a href="#cb74-24" aria-hidden="true" tabindex="-1"></a>    B <span class="op">.</span>div2</span>
<span id="cb74-25"><a href="#cb74-25" aria-hidden="true" tabindex="-1"></a><span class="fu">.div_done:</span></span>
<span id="cb74-26"><a href="#cb74-26" aria-hidden="true" tabindex="-1"></a>    <span class="co">; R3 = mid</span></span>
<span id="cb74-27"><a href="#cb74-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-28"><a href="#cb74-28" aria-hidden="true" tabindex="-1"></a>    <span class="bu">CMP</span> R3<span class="op">,</span> R5</span>
<span id="cb74-29"><a href="#cb74-29" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>EQ <span class="op">.</span>found</span>
<span id="cb74-30"><a href="#cb74-30" aria-hidden="true" tabindex="-1"></a>    B<span class="op">.</span>LT <span class="op">.</span>too_low</span>
<span id="cb74-31"><a href="#cb74-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-32"><a href="#cb74-32" aria-hidden="true" tabindex="-1"></a>    <span class="co">; mid &gt; secret: high = mid - 1</span></span>
<span id="cb74-33"><a href="#cb74-33" aria-hidden="true" tabindex="-1"></a>    <span class="bu">SUB</span> R2<span class="op">,</span> R3<span class="op">,</span> <span class="op">#</span><span class="dv">1</span></span>
<span id="cb74-34"><a href="#cb74-34" aria-hidden="true" tabindex="-1"></a>    B <span class="op">.</span>loop</span>
<span id="cb74-35"><a href="#cb74-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-36"><a href="#cb74-36" aria-hidden="true" tabindex="-1"></a><span class="fu">.too_low:</span></span>
<span id="cb74-37"><a href="#cb74-37" aria-hidden="true" tabindex="-1"></a>    <span class="co">; mid &lt; secret: low = mid + 1</span></span>
<span id="cb74-38"><a href="#cb74-38" aria-hidden="true" tabindex="-1"></a>    <span class="bu">ADD</span> R1<span class="op">,</span> R3<span class="op">,</span> <span class="op">#</span><span class="dv">1</span></span>
<span id="cb74-39"><a href="#cb74-39" aria-hidden="true" tabindex="-1"></a>    B <span class="op">.</span>loop</span>
<span id="cb74-40"><a href="#cb74-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-41"><a href="#cb74-41" aria-hidden="true" tabindex="-1"></a><span class="fu">.found:</span></span>
<span id="cb74-42"><a href="#cb74-42" aria-hidden="true" tabindex="-1"></a>    HALT</span></code></pre></div>
<hr />
<h2 data-number="1.3" id="c.-solutions-c32"><span class="header-section-number">1.3</span> C. Solutions C32</h2>
<h3 data-number="1.3.1" id="variables"><span class="header-section-number">1.3.1</span> Variables</h3>
<div class="sourceCode" id="cb75"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Variables - Solution</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> y <span class="op">=</span> <span class="dv">32</span><span class="op">;</span></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result <span class="op">=</span> x <span class="op">+</span> y<span class="op">;</span></span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.2" id="expressions"><span class="header-section-number">1.3.2</span> Expressions</h3>
<div class="sourceCode" id="cb76"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Expressions - Solution</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result <span class="op">=</span> <span class="op">(</span><span class="dv">5</span> <span class="op">+</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="op">(</span><span class="dv">10</span> <span class="op">-</span> <span class="dv">4</span><span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.3" id="modulo"><span class="header-section-number">1.3.3</span> Modulo</h3>
<div class="sourceCode" id="cb77"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Modulo - Solution</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result <span class="op">=</span> <span class="op">(</span><span class="dv">100</span> <span class="op">%</span> <span class="dv">7</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="dv">45</span> <span class="op">%</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.4" id="incrÃ©mentation"><span class="header-section-number">1.3.4</span> IncrÃ©mentation</h3>
<div class="sourceCode" id="cb78"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co">// IncrÃ©mentation - Solution</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> x <span class="op">+</span> <span class="dv">3</span><span class="op">;</span>   <span class="co">// x = 8</span></span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> x <span class="op">*</span> <span class="dv">2</span><span class="op">;</span>   <span class="co">// x = 16</span></span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> x <span class="op">-</span> <span class="dv">1</span><span class="op">;</span>   <span class="co">// x = 15</span></span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-10"><a href="#cb78-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x<span class="op">;</span></span>
<span id="cb78-11"><a href="#cb78-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.5" id="conditions-1"><span class="header-section-number">1.3.5</span> Conditions</h3>
<div class="sourceCode" id="cb79"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Conditions - Solution</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a <span class="op">=</span> <span class="dv">25</span><span class="op">;</span></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> b <span class="op">=</span> <span class="dv">17</span><span class="op">;</span></span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> max<span class="op">;</span></span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>a <span class="op">&gt;</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>        max <span class="op">=</span> a<span class="op">;</span></span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a>        max <span class="op">=</span> b<span class="op">;</span></span>
<span id="cb79-12"><a href="#cb79-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb79-13"><a href="#cb79-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-14"><a href="#cb79-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> max<span class="op">;</span></span>
<span id="cb79-15"><a href="#cb79-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.6" id="else-if"><span class="header-section-number">1.3.6</span> Else-If</h3>
<div class="sourceCode" id="cb80"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Else-If - Solution</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">75</span><span class="op">;</span></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> grade<span class="op">;</span></span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="dv">90</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a>        grade <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="dv">80</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a>        grade <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb80-11"><a href="#cb80-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="dv">70</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb80-12"><a href="#cb80-12" aria-hidden="true" tabindex="-1"></a>        grade <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb80-13"><a href="#cb80-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="dv">60</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb80-14"><a href="#cb80-14" aria-hidden="true" tabindex="-1"></a>        grade <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb80-15"><a href="#cb80-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb80-16"><a href="#cb80-16" aria-hidden="true" tabindex="-1"></a>        grade <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb80-17"><a href="#cb80-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb80-18"><a href="#cb80-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-19"><a href="#cb80-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> grade<span class="op">;</span></span>
<span id="cb80-20"><a href="#cb80-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.7" id="opÃ©rateurs-logiques"><span class="header-section-number">1.3.7</span> OpÃ©rateurs Logiques</h3>
<div class="sourceCode" id="cb81"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co">// OpÃ©rateurs Logiques - Solution</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">15</span><span class="op">;</span></span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result<span class="op">;</span></span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>x <span class="op">&gt;=</span> <span class="dv">10</span> <span class="op">&amp;&amp;</span> x <span class="op">&lt;=</span> <span class="dv">20</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb81-10"><a href="#cb81-10" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb81-11"><a href="#cb81-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb81-12"><a href="#cb81-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-13"><a href="#cb81-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb81-14"><a href="#cb81-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.8" id="maximum-de-3"><span class="header-section-number">1.3.8</span> Maximum de 3</h3>
<div class="sourceCode" id="cb82"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Maximum de 3 - Solution</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a <span class="op">=</span> <span class="dv">15</span><span class="op">;</span></span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> b <span class="op">=</span> <span class="dv">42</span><span class="op">;</span></span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> c <span class="op">=</span> <span class="dv">27</span><span class="op">;</span></span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> max<span class="op">;</span></span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-9"><a href="#cb82-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>a <span class="op">&gt;=</span> b <span class="op">&amp;&amp;</span> a <span class="op">&gt;=</span> c<span class="op">)</span> <span class="op">{</span></span>
<span id="cb82-10"><a href="#cb82-10" aria-hidden="true" tabindex="-1"></a>        max <span class="op">=</span> a<span class="op">;</span></span>
<span id="cb82-11"><a href="#cb82-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>b <span class="op">&gt;=</span> c<span class="op">)</span> <span class="op">{</span></span>
<span id="cb82-12"><a href="#cb82-12" aria-hidden="true" tabindex="-1"></a>        max <span class="op">=</span> b<span class="op">;</span></span>
<span id="cb82-13"><a href="#cb82-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb82-14"><a href="#cb82-14" aria-hidden="true" tabindex="-1"></a>        max <span class="op">=</span> c<span class="op">;</span></span>
<span id="cb82-15"><a href="#cb82-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb82-16"><a href="#cb82-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-17"><a href="#cb82-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> max<span class="op">;</span></span>
<span id="cb82-18"><a href="#cb82-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.9" id="boucle-for"><span class="header-section-number">1.3.9</span> Boucle For</h3>
<div class="sourceCode" id="cb83"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Boucle For - Solution</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">10</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">=</span> sum <span class="op">+</span> i<span class="op">;</span></span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum<span class="op">;</span></span>
<span id="cb83-11"><a href="#cb83-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.10" id="boucle-while"><span class="header-section-number">1.3.10</span> Boucle While</h3>
<div class="sourceCode" id="cb84"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Boucle While - Solution</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> <span class="dv">12345</span><span class="op">;</span></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>        count <span class="op">=</span> count <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a>        n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb84-11"><a href="#cb84-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-12"><a href="#cb84-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> count<span class="op">;</span></span>
<span id="cb84-13"><a href="#cb84-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.11" id="boucles-imbriquÃ©es"><span class="header-section-number">1.3.11</span> Boucles ImbriquÃ©es</h3>
<div class="sourceCode" id="cb85"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Boucles ImbriquÃ©es - Solution</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">3</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">&lt;=</span> <span class="dv">4</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a>            sum <span class="op">=</span> sum <span class="op">+</span> i <span class="op">*</span> j<span class="op">;</span></span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb85-10"><a href="#cb85-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb85-11"><a href="#cb85-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-12"><a href="#cb85-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum<span class="op">;</span></span>
<span id="cb85-13"><a href="#cb85-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.12" id="multiplication-1"><span class="header-section-number">1.3.12</span> Multiplication</h3>
<div class="sourceCode" id="cb86"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Multiplication - Solution</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a <span class="op">=</span> <span class="dv">7</span><span class="op">;</span></span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> b <span class="op">=</span> <span class="dv">8</span><span class="op">;</span></span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> b<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> result <span class="op">+</span> a<span class="op">;</span></span>
<span id="cb86-10"><a href="#cb86-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb86-11"><a href="#cb86-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-12"><a href="#cb86-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb86-13"><a href="#cb86-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.13" id="fonctions-1"><span class="header-section-number">1.3.13</span> Fonctions</h3>
<div class="sourceCode" id="cb87"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Fonctions - Solution</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> square<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> n <span class="op">*</span> n<span class="op">;</span></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> square<span class="op">(</span><span class="dv">7</span><span class="op">);</span></span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.14" id="paramÃ¨tres-multiples"><span class="header-section-number">1.3.14</span> ParamÃ¨tres Multiples</h3>
<div class="sourceCode" id="cb88"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co">// ParamÃ¨tres Multiples - Solution</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> add3<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">,</span> <span class="dt">int</span> c<span class="op">)</span> <span class="op">{</span></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">+</span> b <span class="op">+</span> c<span class="op">;</span></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> add3<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">12</span><span class="op">);</span></span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.15" id="valeur-absolue-1"><span class="header-section-number">1.3.15</span> Valeur Absolue</h3>
<div class="sourceCode" id="cb89"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Valeur Absolue - Solution</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> abs<span class="op">(</span><span class="dt">int</span> x<span class="op">)</span> <span class="op">{</span></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>x <span class="op">&lt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">-</span>x<span class="op">;</span></span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x<span class="op">;</span></span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb89-11"><a href="#cb89-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> abs<span class="op">(-</span><span class="dv">15</span><span class="op">)</span> <span class="op">+</span> abs<span class="op">(</span><span class="dv">10</span><span class="op">);</span></span>
<span id="cb89-12"><a href="#cb89-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.16" id="min-et-max"><span class="header-section-number">1.3.16</span> Min et Max</h3>
<div class="sourceCode" id="cb90"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Min et Max - Solution</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> min<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>a <span class="op">&lt;</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> a<span class="op">;</span></span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> b<span class="op">;</span></span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-10"><a href="#cb90-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> max<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb90-11"><a href="#cb90-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>a <span class="op">&gt;</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb90-12"><a href="#cb90-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> a<span class="op">;</span></span>
<span id="cb90-13"><a href="#cb90-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb90-14"><a href="#cb90-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> b<span class="op">;</span></span>
<span id="cb90-15"><a href="#cb90-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb90-16"><a href="#cb90-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-17"><a href="#cb90-17" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb90-18"><a href="#cb90-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> max<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">25</span><span class="op">)</span> <span class="op">-</span> min<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">25</span><span class="op">);</span></span>
<span id="cb90-19"><a href="#cb90-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.17" id="tableaux-1"><span class="header-section-number">1.3.17</span> Tableaux</h3>
<div class="sourceCode" id="cb91"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Tableaux - Solution</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[</span><span class="dv">5</span><span class="op">];</span></span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">7</span><span class="op">;</span></span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="dv">9</span><span class="op">;</span></span>
<span id="cb91-9"><a href="#cb91-9" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">4</span><span class="op">]</span> <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb91-10"><a href="#cb91-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-11"><a href="#cb91-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb91-12"><a href="#cb91-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-13"><a href="#cb91-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-14"><a href="#cb91-14" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">=</span> sum <span class="op">+</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb91-15"><a href="#cb91-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb91-16"><a href="#cb91-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-17"><a href="#cb91-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum<span class="op">;</span></span>
<span id="cb91-18"><a href="#cb91-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.18" id="maximum-tableau-1"><span class="header-section-number">1.3.18</span> Maximum Tableau</h3>
<div class="sourceCode" id="cb92"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Maximum Tableau - Solution</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[</span><span class="dv">6</span><span class="op">];</span></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">12</span><span class="op">;</span></span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">45</span><span class="op">;</span></span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">7</span><span class="op">;</span></span>
<span id="cb92-8"><a href="#cb92-8" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="dv">23</span><span class="op">;</span></span>
<span id="cb92-9"><a href="#cb92-9" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">4</span><span class="op">]</span> <span class="op">=</span> <span class="dv">56</span><span class="op">;</span></span>
<span id="cb92-10"><a href="#cb92-10" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="dv">34</span><span class="op">;</span></span>
<span id="cb92-11"><a href="#cb92-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-12"><a href="#cb92-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> max <span class="op">=</span> arr<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb92-13"><a href="#cb92-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-14"><a href="#cb92-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">6</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb92-15"><a href="#cb92-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> max<span class="op">)</span> <span class="op">{</span></span>
<span id="cb92-16"><a href="#cb92-16" aria-hidden="true" tabindex="-1"></a>            max <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb92-17"><a href="#cb92-17" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb92-18"><a href="#cb92-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb92-19"><a href="#cb92-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-20"><a href="#cb92-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> max<span class="op">;</span></span>
<span id="cb92-21"><a href="#cb92-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.19" id="compter-Ã©lÃ©ments"><span class="header-section-number">1.3.19</span> Compter Ã‰lÃ©ments</h3>
<div class="sourceCode" id="cb93"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Compter Ã‰lÃ©ments - Solution</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[</span><span class="dv">8</span><span class="op">];</span></span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">8</span><span class="op">;</span></span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="dv">7</span><span class="op">;</span></span>
<span id="cb93-9"><a href="#cb93-9" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">4</span><span class="op">]</span> <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb93-10"><a href="#cb93-10" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="dv">9</span><span class="op">;</span></span>
<span id="cb93-11"><a href="#cb93-11" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">6</span><span class="op">]</span> <span class="op">=</span> <span class="dv">6</span><span class="op">;</span></span>
<span id="cb93-12"><a href="#cb93-12" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">7</span><span class="op">]</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb93-13"><a href="#cb93-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-14"><a href="#cb93-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb93-15"><a href="#cb93-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-16"><a href="#cb93-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">8</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb93-17"><a href="#cb93-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb93-18"><a href="#cb93-18" aria-hidden="true" tabindex="-1"></a>            count <span class="op">=</span> count <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb93-19"><a href="#cb93-19" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb93-20"><a href="#cb93-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb93-21"><a href="#cb93-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-22"><a href="#cb93-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> count<span class="op">;</span></span>
<span id="cb93-23"><a href="#cb93-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.20" id="pointeurs"><span class="header-section-number">1.3.20</span> Pointeurs</h3>
<div class="sourceCode" id="cb94"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Pointeurs - Solution</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>p <span class="op">=</span> <span class="op">&amp;</span>x<span class="op">;</span></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>p <span class="op">=</span> <span class="dv">42</span><span class="op">;</span></span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x<span class="op">;</span></span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.21" id="swap"><span class="header-section-number">1.3.21</span> Swap</h3>
<div class="sourceCode" id="cb95"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Swap - Solution</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> temp <span class="op">=</span> <span class="op">*</span>a<span class="op">;</span></span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>b<span class="op">;</span></span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-9"><a href="#cb95-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb95-10"><a href="#cb95-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb95-11"><a href="#cb95-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> y <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb95-12"><a href="#cb95-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-13"><a href="#cb95-13" aria-hidden="true" tabindex="-1"></a>    swap<span class="op">(&amp;</span>x<span class="op">,</span> <span class="op">&amp;</span>y<span class="op">);</span></span>
<span id="cb95-14"><a href="#cb95-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-15"><a href="#cb95-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x<span class="op">;</span></span>
<span id="cb95-16"><a href="#cb95-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.22" id="pointeurs-et-tableaux"><span class="header-section-number">1.3.22</span> Pointeurs et Tableaux</h3>
<div class="sourceCode" id="cb96"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Pointeurs et Tableaux - Solution</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[</span><span class="dv">4</span><span class="op">];</span></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">15</span><span class="op">;</span></span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-10"><a href="#cb96-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb96-11"><a href="#cb96-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>p <span class="op">=</span> arr<span class="op">;</span></span>
<span id="cb96-12"><a href="#cb96-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-13"><a href="#cb96-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb96-14"><a href="#cb96-14" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">=</span> sum <span class="op">+</span> <span class="op">*(</span>p <span class="op">+</span> i<span class="op">);</span></span>
<span id="cb96-15"><a href="#cb96-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb96-16"><a href="#cb96-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-17"><a href="#cb96-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum<span class="op">;</span></span>
<span id="cb96-18"><a href="#cb96-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.23" id="opÃ©rations-binaires"><span class="header-section-number">1.3.23</span> OpÃ©rations Binaires</h3>
<div class="sourceCode" id="cb97"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co">// OpÃ©rations Binaires - Solution</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> y <span class="op">=</span> <span class="dv">12</span><span class="op">;</span></span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result <span class="op">=</span> <span class="op">(</span>x <span class="op">&amp;</span> y<span class="op">)</span> <span class="op">|</span> <span class="op">(</span>x <span class="op">^</span> y<span class="op">);</span></span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.24" id="puissance-de-2"><span class="header-section-number">1.3.24</span> Puissance de 2</h3>
<div class="sourceCode" id="cb98"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Puissance de 2 - Solution</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_pow2<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&lt;=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb98-7"><a href="#cb98-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">(</span>n <span class="op">&amp;</span> <span class="op">(</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">))</span> <span class="op">==</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb98-8"><a href="#cb98-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb98-9"><a href="#cb98-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-10"><a href="#cb98-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb98-11"><a href="#cb98-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> is_pow2<span class="op">(</span><span class="dv">16</span><span class="op">)</span> <span class="op">+</span> is_pow2<span class="op">(</span><span class="dv">15</span><span class="op">)</span> <span class="op">+</span> is_pow2<span class="op">(</span><span class="dv">32</span><span class="op">);</span></span>
<span id="cb98-12"><a href="#cb98-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.25" id="factorielle"><span class="header-section-number">1.3.25</span> Factorielle</h3>
<div class="sourceCode" id="cb99"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Factorielle - Solution</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> fact<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&lt;=</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb99-7"><a href="#cb99-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> n <span class="op">*</span> fact<span class="op">(</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb99-8"><a href="#cb99-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb99-9"><a href="#cb99-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-10"><a href="#cb99-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb99-11"><a href="#cb99-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> fact<span class="op">(</span><span class="dv">5</span><span class="op">);</span></span>
<span id="cb99-12"><a href="#cb99-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.26" id="fibonacci-1"><span class="header-section-number">1.3.26</span> Fibonacci</h3>
<div class="sourceCode" id="cb100"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Fibonacci - Solution</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> fib<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&lt;=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb100-10"><a href="#cb100-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> fib<span class="op">(</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> fib<span class="op">(</span>n <span class="op">-</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb100-11"><a href="#cb100-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb100-12"><a href="#cb100-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-13"><a href="#cb100-13" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb100-14"><a href="#cb100-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> fib<span class="op">(</span><span class="dv">10</span><span class="op">);</span></span>
<span id="cb100-15"><a href="#cb100-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.27" id="somme-rÃ©cursive"><span class="header-section-number">1.3.27</span> Somme RÃ©cursive</h3>
<div class="sourceCode" id="cb101"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Somme RÃ©cursive - Solution</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> sum<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&lt;=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb101-7"><a href="#cb101-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> n <span class="op">+</span> sum<span class="op">(</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb101-8"><a href="#cb101-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb101-9"><a href="#cb101-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-10"><a href="#cb101-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb101-11"><a href="#cb101-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum<span class="op">(</span><span class="dv">10</span><span class="op">);</span></span>
<span id="cb101-12"><a href="#cb101-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.28" id="pgcd-euclide"><span class="header-section-number">1.3.28</span> PGCD (Euclide)</h3>
<div class="sourceCode" id="cb102"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="co">// PGCD (Euclide) - Solution</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> gcd<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>b <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> a<span class="op">;</span></span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> gcd<span class="op">(</span>b<span class="op">,</span> a <span class="op">%</span> b<span class="op">);</span></span>
<span id="cb102-8"><a href="#cb102-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb102-9"><a href="#cb102-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-10"><a href="#cb102-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb102-11"><a href="#cb102-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> gcd<span class="op">(</span><span class="dv">48</span><span class="op">,</span> <span class="dv">18</span><span class="op">);</span></span>
<span id="cb102-12"><a href="#cb102-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.29" id="puissance"><span class="header-section-number">1.3.29</span> Puissance</h3>
<div class="sourceCode" id="cb103"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Puissance - Solution</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> power<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb103-8"><a href="#cb103-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> power<span class="op">(</span>x <span class="op">*</span> x<span class="op">,</span> n <span class="op">/</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb103-9"><a href="#cb103-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb103-10"><a href="#cb103-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">*</span> power<span class="op">(</span>x<span class="op">,</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb103-11"><a href="#cb103-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb103-12"><a href="#cb103-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-13"><a href="#cb103-13" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb103-14"><a href="#cb103-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> power<span class="op">(</span><span class="dv">2</span><span class="op">,</span> <span class="dv">10</span><span class="op">);</span></span>
<span id="cb103-15"><a href="#cb103-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.30" id="test-primalitÃ©"><span class="header-section-number">1.3.30</span> Test PrimalitÃ©</h3>
<div class="sourceCode" id="cb104"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Test PrimalitÃ© - Solution</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_prime<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&lt;</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> i <span class="op">*</span> i <span class="op">&lt;=</span> n<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>n <span class="op">%</span> i <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb104-10"><a href="#cb104-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb104-11"><a href="#cb104-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb104-12"><a href="#cb104-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb104-13"><a href="#cb104-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb104-14"><a href="#cb104-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-15"><a href="#cb104-15" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb104-16"><a href="#cb104-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb104-17"><a href="#cb104-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> n <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> n <span class="op">&lt;=</span> <span class="dv">20</span><span class="op">;</span> n <span class="op">=</span> n <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb104-18"><a href="#cb104-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>is_prime<span class="op">(</span>n<span class="op">))</span> <span class="op">{</span></span>
<span id="cb104-19"><a href="#cb104-19" aria-hidden="true" tabindex="-1"></a>            count <span class="op">=</span> count <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb104-20"><a href="#cb104-20" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb104-21"><a href="#cb104-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb104-22"><a href="#cb104-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> count<span class="op">;</span></span>
<span id="cb104-23"><a href="#cb104-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.31" id="tri-Ã -bulles"><span class="header-section-number">1.3.31</span> Tri Ã  Bulles</h3>
<div class="sourceCode" id="cb105"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Tri Ã  Bulles - Solution</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[</span><span class="dv">5</span><span class="op">];</span></span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">64</span><span class="op">;</span></span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">34</span><span class="op">;</span></span>
<span id="cb105-7"><a href="#cb105-7" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">25</span><span class="op">;</span></span>
<span id="cb105-8"><a href="#cb105-8" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="dv">12</span><span class="op">;</span></span>
<span id="cb105-9"><a href="#cb105-9" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">4</span><span class="op">]</span> <span class="op">=</span> <span class="dv">22</span><span class="op">;</span></span>
<span id="cb105-10"><a href="#cb105-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-11"><a href="#cb105-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb105-12"><a href="#cb105-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">4</span> <span class="op">-</span> i<span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb105-13"><a href="#cb105-13" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>j<span class="op">]</span> <span class="op">&gt;</span> arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">])</span> <span class="op">{</span></span>
<span id="cb105-14"><a href="#cb105-14" aria-hidden="true" tabindex="-1"></a>                <span class="dt">int</span> temp <span class="op">=</span> arr<span class="op">[</span>j<span class="op">];</span></span>
<span id="cb105-15"><a href="#cb105-15" aria-hidden="true" tabindex="-1"></a>                arr<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb105-16"><a href="#cb105-16" aria-hidden="true" tabindex="-1"></a>                arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb105-17"><a href="#cb105-17" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb105-18"><a href="#cb105-18" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb105-19"><a href="#cb105-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb105-20"><a href="#cb105-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-21"><a href="#cb105-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> arr<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb105-22"><a href="#cb105-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.32" id="recherche-binaire"><span class="header-section-number">1.3.32</span> Recherche Binaire</h3>
<div class="sourceCode" id="cb106"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Recherche Binaire - Solution</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> binary_search<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>arr<span class="op">,</span> <span class="dt">int</span> size<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> left <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> right <span class="op">=</span> size <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>left <span class="op">&lt;=</span> right<span class="op">)</span> <span class="op">{</span></span>
<span id="cb106-8"><a href="#cb106-8" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> mid <span class="op">=</span> <span class="op">(</span>left <span class="op">+</span> right<span class="op">)</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb106-9"><a href="#cb106-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">==</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb106-10"><a href="#cb106-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> mid<span class="op">;</span></span>
<span id="cb106-11"><a href="#cb106-11" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb106-12"><a href="#cb106-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>mid<span class="op">]</span> <span class="op">&lt;</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb106-13"><a href="#cb106-13" aria-hidden="true" tabindex="-1"></a>            left <span class="op">=</span> mid <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb106-14"><a href="#cb106-14" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb106-15"><a href="#cb106-15" aria-hidden="true" tabindex="-1"></a>            right <span class="op">=</span> mid <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb106-16"><a href="#cb106-16" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb106-17"><a href="#cb106-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb106-18"><a href="#cb106-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-19"><a href="#cb106-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb106-20"><a href="#cb106-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb106-21"><a href="#cb106-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-22"><a href="#cb106-22" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb106-23"><a href="#cb106-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[</span><span class="dv">10</span><span class="op">];</span></span>
<span id="cb106-24"><a href="#cb106-24" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb106-25"><a href="#cb106-25" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb106-26"><a href="#cb106-26" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">8</span><span class="op">;</span></span>
<span id="cb106-27"><a href="#cb106-27" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="dv">12</span><span class="op">;</span></span>
<span id="cb106-28"><a href="#cb106-28" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">4</span><span class="op">]</span> <span class="op">=</span> <span class="dv">16</span><span class="op">;</span></span>
<span id="cb106-29"><a href="#cb106-29" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="dv">23</span><span class="op">;</span></span>
<span id="cb106-30"><a href="#cb106-30" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">6</span><span class="op">]</span> <span class="op">=</span> <span class="dv">38</span><span class="op">;</span></span>
<span id="cb106-31"><a href="#cb106-31" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">7</span><span class="op">]</span> <span class="op">=</span> <span class="dv">56</span><span class="op">;</span></span>
<span id="cb106-32"><a href="#cb106-32" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">8</span><span class="op">]</span> <span class="op">=</span> <span class="dv">72</span><span class="op">;</span></span>
<span id="cb106-33"><a href="#cb106-33" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">9</span><span class="op">]</span> <span class="op">=</span> <span class="dv">91</span><span class="op">;</span></span>
<span id="cb106-34"><a href="#cb106-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-35"><a href="#cb106-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> binary_search<span class="op">(</span>arr<span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">23</span><span class="op">);</span></span>
<span id="cb106-36"><a href="#cb106-36" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.33" id="inverser-tableau"><span class="header-section-number">1.3.33</span> Inverser Tableau</h3>
<div class="sourceCode" id="cb107"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Inverser Tableau - Solution</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[</span><span class="dv">5</span><span class="op">];</span></span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb107-9"><a href="#cb107-9" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">4</span><span class="op">]</span> <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb107-10"><a href="#cb107-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-11"><a href="#cb107-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> left <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb107-12"><a href="#cb107-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> right <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb107-13"><a href="#cb107-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>left <span class="op">&lt;</span> right<span class="op">)</span> <span class="op">{</span></span>
<span id="cb107-14"><a href="#cb107-14" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> temp <span class="op">=</span> arr<span class="op">[</span>left<span class="op">];</span></span>
<span id="cb107-15"><a href="#cb107-15" aria-hidden="true" tabindex="-1"></a>        arr<span class="op">[</span>left<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>right<span class="op">];</span></span>
<span id="cb107-16"><a href="#cb107-16" aria-hidden="true" tabindex="-1"></a>        arr<span class="op">[</span>right<span class="op">]</span> <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb107-17"><a href="#cb107-17" aria-hidden="true" tabindex="-1"></a>        left <span class="op">=</span> left <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb107-18"><a href="#cb107-18" aria-hidden="true" tabindex="-1"></a>        right <span class="op">=</span> right <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb107-19"><a href="#cb107-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb107-20"><a href="#cb107-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-21"><a href="#cb107-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb107-22"><a href="#cb107-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb107-23"><a href="#cb107-23" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">=</span> sum <span class="op">+</span> arr<span class="op">[</span>i<span class="op">]</span> <span class="op">*</span> <span class="op">(</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb107-24"><a href="#cb107-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb107-25"><a href="#cb107-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum<span class="op">;</span></span>
<span id="cb107-26"><a href="#cb107-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.34" id="somme-des-chiffres"><span class="header-section-number">1.3.34</span> Somme des Chiffres</h3>
<div class="sourceCode" id="cb108"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Somme des Chiffres - Solution</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> digit_sum<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">=</span> sum <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span></span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a>        n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb108-8"><a href="#cb108-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb108-9"><a href="#cb108-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum<span class="op">;</span></span>
<span id="cb108-10"><a href="#cb108-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb108-11"><a href="#cb108-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-12"><a href="#cb108-12" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb108-13"><a href="#cb108-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> digit_sum<span class="op">(</span><span class="dv">12345</span><span class="op">);</span></span>
<span id="cb108-14"><a href="#cb108-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.35" id="nombre-palindrome"><span class="header-section-number">1.3.35</span> Nombre Palindrome</h3>
<div class="sourceCode" id="cb109"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Nombre Palindrome - Solution</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_palindrome<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> original <span class="op">=</span> n<span class="op">;</span></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> reversed <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb109-8"><a href="#cb109-8" aria-hidden="true" tabindex="-1"></a>        reversed <span class="op">=</span> reversed <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span></span>
<span id="cb109-9"><a href="#cb109-9" aria-hidden="true" tabindex="-1"></a>        n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb109-10"><a href="#cb109-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb109-11"><a href="#cb109-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-12"><a href="#cb109-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>reversed <span class="op">==</span> original<span class="op">)</span> <span class="op">{</span></span>
<span id="cb109-13"><a href="#cb109-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb109-14"><a href="#cb109-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb109-15"><a href="#cb109-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb109-16"><a href="#cb109-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb109-17"><a href="#cb109-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-18"><a href="#cb109-18" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb109-19"><a href="#cb109-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> is_palindrome<span class="op">(</span><span class="dv">12321</span><span class="op">)</span> <span class="op">+</span> is_palindrome<span class="op">(</span><span class="dv">1221</span><span class="op">)</span> <span class="op">+</span> is_palindrome<span class="op">(</span><span class="dv">123</span><span class="op">);</span></span>
<span id="cb109-20"><a href="#cb109-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.36" id="dÃ©finition-struct"><span class="header-section-number">1.3.36</span> DÃ©finition Struct</h3>
<div class="sourceCode" id="cb110"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co">// DÃ©finition Struct - Solution</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Point <span class="op">{</span> <span class="dt">int</span> x<span class="op">;</span> <span class="dt">int</span> y<span class="op">;</span> <span class="op">};</span></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Point p<span class="op">;</span></span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a>    p<span class="op">.</span>x <span class="op">=</span> <span class="dv">17</span><span class="op">;</span></span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a>    p<span class="op">.</span>y <span class="op">=</span> <span class="dv">25</span><span class="op">;</span></span>
<span id="cb110-9"><a href="#cb110-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> p<span class="op">.</span>x <span class="op">+</span> p<span class="op">.</span>y<span class="op">;</span></span>
<span id="cb110-10"><a href="#cb110-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.37" id="pointeur-struct"><span class="header-section-number">1.3.37</span> Pointeur Struct</h3>
<div class="sourceCode" id="cb111"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Pointeur Struct - Solution</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Point <span class="op">{</span> <span class="dt">int</span> x<span class="op">;</span> <span class="dt">int</span> y<span class="op">;</span> <span class="op">};</span></span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Point p<span class="op">;</span></span>
<span id="cb111-7"><a href="#cb111-7" aria-hidden="true" tabindex="-1"></a>    p<span class="op">.</span>x <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb111-8"><a href="#cb111-8" aria-hidden="true" tabindex="-1"></a>    p<span class="op">.</span>y <span class="op">=</span> <span class="dv">32</span><span class="op">;</span></span>
<span id="cb111-9"><a href="#cb111-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-10"><a href="#cb111-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Point <span class="op">*</span>ptr <span class="op">=</span> <span class="op">&amp;</span>p<span class="op">;</span></span>
<span id="cb111-11"><a href="#cb111-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> ptr<span class="op">-&gt;</span>x <span class="op">+</span> ptr<span class="op">-&gt;</span>y<span class="op">;</span></span>
<span id="cb111-12"><a href="#cb111-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.38" id="struct-et-fonctions"><span class="header-section-number">1.3.38</span> Struct et Fonctions</h3>
<div class="sourceCode" id="cb112"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Struct et Fonctions - Solution</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Point <span class="op">{</span> <span class="dt">int</span> x<span class="op">;</span> <span class="dt">int</span> y<span class="op">;</span> <span class="op">};</span></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> distance_sq<span class="op">(</span><span class="kw">struct</span> Point <span class="op">*</span>p<span class="op">)</span> <span class="op">{</span></span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> p<span class="op">-&gt;</span>x <span class="op">*</span> p<span class="op">-&gt;</span>x <span class="op">+</span> p<span class="op">-&gt;</span>y <span class="op">*</span> p<span class="op">-&gt;</span>y<span class="op">;</span></span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb112-8"><a href="#cb112-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-9"><a href="#cb112-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb112-10"><a href="#cb112-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Point p<span class="op">;</span></span>
<span id="cb112-11"><a href="#cb112-11" aria-hidden="true" tabindex="-1"></a>    p<span class="op">.</span>x <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb112-12"><a href="#cb112-12" aria-hidden="true" tabindex="-1"></a>    p<span class="op">.</span>y <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb112-13"><a href="#cb112-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> distance_sq<span class="op">(&amp;</span>p<span class="op">);</span></span>
<span id="cb112-14"><a href="#cb112-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.39" id="structs-imbriquÃ©es"><span class="header-section-number">1.3.39</span> Structs ImbriquÃ©es</h3>
<div class="sourceCode" id="cb113"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Structs ImbriquÃ©es - Solution</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Point <span class="op">{</span> <span class="dt">int</span> x<span class="op">;</span> <span class="dt">int</span> y<span class="op">;</span> <span class="op">};</span></span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Rectangle <span class="op">{</span> <span class="kw">struct</span> Point corner<span class="op">;</span> <span class="dt">int</span> width<span class="op">;</span> <span class="dt">int</span> height<span class="op">;</span> <span class="op">};</span></span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Rectangle r<span class="op">;</span></span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a>    r<span class="op">.</span>corner<span class="op">.</span>x <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb113-9"><a href="#cb113-9" aria-hidden="true" tabindex="-1"></a>    r<span class="op">.</span>corner<span class="op">.</span>y <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb113-10"><a href="#cb113-10" aria-hidden="true" tabindex="-1"></a>    r<span class="op">.</span>width <span class="op">=</span> <span class="dv">6</span><span class="op">;</span></span>
<span id="cb113-11"><a href="#cb113-11" aria-hidden="true" tabindex="-1"></a>    r<span class="op">.</span>height <span class="op">=</span> <span class="dv">7</span><span class="op">;</span></span>
<span id="cb113-12"><a href="#cb113-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-13"><a href="#cb113-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> r<span class="op">.</span>width <span class="op">*</span> r<span class="op">.</span>height<span class="op">;</span></span>
<span id="cb113-14"><a href="#cb113-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.40" id="tableau-de-structs"><span class="header-section-number">1.3.40</span> Tableau de Structs</h3>
<div class="sourceCode" id="cb114"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Tableau de Structs - Solution</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Point <span class="op">{</span> <span class="dt">int</span> x<span class="op">;</span> <span class="dt">int</span> y<span class="op">;</span> <span class="op">};</span></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Point points<span class="op">[</span><span class="dv">3</span><span class="op">];</span></span>
<span id="cb114-7"><a href="#cb114-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-8"><a href="#cb114-8" aria-hidden="true" tabindex="-1"></a>    points<span class="op">[</span><span class="dv">0</span><span class="op">].</span>x <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb114-9"><a href="#cb114-9" aria-hidden="true" tabindex="-1"></a>    points<span class="op">[</span><span class="dv">0</span><span class="op">].</span>y <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb114-10"><a href="#cb114-10" aria-hidden="true" tabindex="-1"></a>    points<span class="op">[</span><span class="dv">1</span><span class="op">].</span>x <span class="op">=</span> <span class="dv">15</span><span class="op">;</span></span>
<span id="cb114-11"><a href="#cb114-11" aria-hidden="true" tabindex="-1"></a>    points<span class="op">[</span><span class="dv">1</span><span class="op">].</span>y <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb114-12"><a href="#cb114-12" aria-hidden="true" tabindex="-1"></a>    points<span class="op">[</span><span class="dv">2</span><span class="op">].</span>x <span class="op">=</span> <span class="dv">8</span><span class="op">;</span></span>
<span id="cb114-13"><a href="#cb114-13" aria-hidden="true" tabindex="-1"></a>    points<span class="op">[</span><span class="dv">2</span><span class="op">].</span>y <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb114-14"><a href="#cb114-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-15"><a href="#cb114-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb114-16"><a href="#cb114-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb114-17"><a href="#cb114-17" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">=</span> sum <span class="op">+</span> points<span class="op">[</span>i<span class="op">].</span>x<span class="op">;</span></span>
<span id="cb114-18"><a href="#cb114-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb114-19"><a href="#cb114-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum<span class="op">;</span></span>
<span id="cb114-20"><a href="#cb114-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.41" id="sizeof-struct"><span class="header-section-number">1.3.41</span> Sizeof Struct</h3>
<div class="sourceCode" id="cb115"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Sizeof Struct - Solution</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> S1 <span class="op">{</span> <span class="dt">int</span> a<span class="op">;</span> <span class="op">};</span></span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> S2 <span class="op">{</span> <span class="dt">int</span> x<span class="op">;</span> <span class="dt">int</span> y<span class="op">;</span> <span class="dt">char</span> c<span class="op">;</span> <span class="op">};</span></span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb115-7"><a href="#cb115-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">sizeof</span><span class="op">(</span><span class="kw">struct</span> S1<span class="op">)</span> <span class="op">+</span> <span class="kw">sizeof</span><span class="op">(</span><span class="kw">struct</span> S2<span class="op">);</span></span>
<span id="cb115-8"><a href="#cb115-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.42" id="parcours-en-ligne"><span class="header-section-number">1.3.42</span> Parcours en Ligne</h3>
<div class="sourceCode" id="cb116"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Parcours en Ligne - Solution</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> arr<span class="op">[</span><span class="dv">4</span><span class="op">][</span><span class="dv">4</span><span class="op">];</span></span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb116-6"><a href="#cb116-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Initialiser (parcours en ligne: cache-friendly)</span></span>
<span id="cb116-7"><a href="#cb116-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb116-8"><a href="#cb116-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb116-9"><a href="#cb116-9" aria-hidden="true" tabindex="-1"></a>            arr<span class="op">[</span>i<span class="op">][</span>j<span class="op">]</span> <span class="op">=</span> i <span class="op">*</span> <span class="dv">4</span> <span class="op">+</span> j<span class="op">;</span></span>
<span id="cb116-10"><a href="#cb116-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb116-11"><a href="#cb116-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb116-12"><a href="#cb116-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-13"><a href="#cb116-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Calculer la somme</span></span>
<span id="cb116-14"><a href="#cb116-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb116-15"><a href="#cb116-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb116-16"><a href="#cb116-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb116-17"><a href="#cb116-17" aria-hidden="true" tabindex="-1"></a>            sum <span class="op">=</span> sum <span class="op">+</span> arr<span class="op">[</span>i<span class="op">][</span>j<span class="op">];</span></span>
<span id="cb116-18"><a href="#cb116-18" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb116-19"><a href="#cb116-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb116-20"><a href="#cb116-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-21"><a href="#cb116-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum<span class="op">;</span></span>
<span id="cb116-22"><a href="#cb116-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.43" id="parcours-en-colonne"><span class="header-section-number">1.3.43</span> Parcours en Colonne</h3>
<div class="sourceCode" id="cb117"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Parcours en Colonne - Solution</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> arr<span class="op">[</span><span class="dv">4</span><span class="op">][</span><span class="dv">4</span><span class="op">];</span></span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb117-6"><a href="#cb117-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Initialiser</span></span>
<span id="cb117-7"><a href="#cb117-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb117-8"><a href="#cb117-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb117-9"><a href="#cb117-9" aria-hidden="true" tabindex="-1"></a>            arr<span class="op">[</span>i<span class="op">][</span>j<span class="op">]</span> <span class="op">=</span> i <span class="op">*</span> <span class="dv">4</span> <span class="op">+</span> j<span class="op">;</span></span>
<span id="cb117-10"><a href="#cb117-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb117-11"><a href="#cb117-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb117-12"><a href="#cb117-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-13"><a href="#cb117-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Somme en colonne (cache-unfriendly mais correct)</span></span>
<span id="cb117-14"><a href="#cb117-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb117-15"><a href="#cb117-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb117-16"><a href="#cb117-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb117-17"><a href="#cb117-17" aria-hidden="true" tabindex="-1"></a>            sum <span class="op">=</span> sum <span class="op">+</span> arr<span class="op">[</span>i<span class="op">][</span>j<span class="op">];</span></span>
<span id="cb117-18"><a href="#cb117-18" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb117-19"><a href="#cb117-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb117-20"><a href="#cb117-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-21"><a href="#cb117-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum<span class="op">;</span></span>
<span id="cb117-22"><a href="#cb117-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.44" id="traitement-par-blocs"><span class="header-section-number">1.3.44</span> Traitement par Blocs</h3>
<div class="sourceCode" id="cb118"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Traitement par Blocs - Solution</span></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> arr<span class="op">[</span><span class="dv">4</span><span class="op">][</span><span class="dv">4</span><span class="op">];</span></span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb118-6"><a href="#cb118-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Initialiser</span></span>
<span id="cb118-7"><a href="#cb118-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb118-8"><a href="#cb118-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb118-9"><a href="#cb118-9" aria-hidden="true" tabindex="-1"></a>            arr<span class="op">[</span>i<span class="op">][</span>j<span class="op">]</span> <span class="op">=</span> i <span class="op">*</span> <span class="dv">4</span> <span class="op">+</span> j<span class="op">;</span></span>
<span id="cb118-10"><a href="#cb118-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb118-11"><a href="#cb118-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb118-12"><a href="#cb118-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-13"><a href="#cb118-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb118-14"><a href="#cb118-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> block_size <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb118-15"><a href="#cb118-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-16"><a href="#cb118-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Parcours par blocs (cache-friendly)</span></span>
<span id="cb118-17"><a href="#cb118-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> bi <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> bi <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> bi <span class="op">=</span> bi <span class="op">+</span> block_size<span class="op">)</span> <span class="op">{</span></span>
<span id="cb118-18"><a href="#cb118-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> bj <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> bj <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> bj <span class="op">=</span> bj <span class="op">+</span> block_size<span class="op">)</span> <span class="op">{</span></span>
<span id="cb118-19"><a href="#cb118-19" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> bi<span class="op">;</span> i <span class="op">&lt;</span> bi <span class="op">+</span> block_size<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb118-20"><a href="#cb118-20" aria-hidden="true" tabindex="-1"></a>                <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> j <span class="op">=</span> bj<span class="op">;</span> j <span class="op">&lt;</span> bj <span class="op">+</span> block_size<span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb118-21"><a href="#cb118-21" aria-hidden="true" tabindex="-1"></a>                    sum <span class="op">=</span> sum <span class="op">+</span> arr<span class="op">[</span>i<span class="op">][</span>j<span class="op">];</span></span>
<span id="cb118-22"><a href="#cb118-22" aria-hidden="true" tabindex="-1"></a>                <span class="op">}</span></span>
<span id="cb118-23"><a href="#cb118-23" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb118-24"><a href="#cb118-24" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb118-25"><a href="#cb118-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb118-26"><a href="#cb118-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-27"><a href="#cb118-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum<span class="op">;</span></span>
<span id="cb118-28"><a href="#cb118-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.45" id="localitÃ©-temporelle"><span class="header-section-number">1.3.45</span> LocalitÃ© Temporelle</h3>
<div class="sourceCode" id="cb119"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co">// LocalitÃ© Temporelle - Solution</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> arr<span class="op">[</span><span class="dv">4</span><span class="op">];</span></span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb119-6"><a href="#cb119-6" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb119-7"><a href="#cb119-7" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb119-8"><a href="#cb119-8" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb119-9"><a href="#cb119-9" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb119-10"><a href="#cb119-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-11"><a href="#cb119-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb119-12"><a href="#cb119-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> factor <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb119-13"><a href="#cb119-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-14"><a href="#cb119-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Un seul parcours: bonne localitÃ© temporelle</span></span>
<span id="cb119-15"><a href="#cb119-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb119-16"><a href="#cb119-16" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">=</span> sum <span class="op">+</span> arr<span class="op">[</span>i<span class="op">]</span> <span class="op">*</span> factor<span class="op">;</span></span>
<span id="cb119-17"><a href="#cb119-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb119-18"><a href="#cb119-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-19"><a href="#cb119-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum<span class="op">;</span></span>
<span id="cb119-20"><a href="#cb119-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.46" id="Ã©crire-un-caractÃ¨re"><span class="header-section-number">1.3.46</span> Ã‰crire un CaractÃ¨re</h3>
<div class="sourceCode" id="cb120"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Ã‰crire un CaractÃ¨re - Solution</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> putchar<span class="op">(</span><span class="dt">int</span> c<span class="op">)</span> <span class="op">{</span></span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>port <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0xFFFF0000</span><span class="op">;</span></span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>port <span class="op">=</span> c<span class="op">;</span></span>
<span id="cb120-6"><a href="#cb120-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb120-7"><a href="#cb120-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-8"><a href="#cb120-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb120-9"><a href="#cb120-9" aria-hidden="true" tabindex="-1"></a>    putchar<span class="op">(</span><span class="dv">65</span><span class="op">);</span>  <span class="co">// Affiche &#39;A&#39;</span></span>
<span id="cb120-10"><a href="#cb120-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">65</span><span class="op">;</span></span>
<span id="cb120-11"><a href="#cb120-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.47" id="afficher-une-chaÃ®ne"><span class="header-section-number">1.3.47</span> Afficher une ChaÃ®ne</h3>
<div class="sourceCode" id="cb121"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Afficher une ChaÃ®ne - Solution</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> putchar<span class="op">(</span><span class="dt">int</span> c<span class="op">)</span> <span class="op">{</span></span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>port <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0xFFFF0000</span><span class="op">;</span></span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>port <span class="op">=</span> c<span class="op">;</span></span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-8"><a href="#cb121-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> print<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb121-9"><a href="#cb121-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb121-10"><a href="#cb121-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(*</span>s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb121-11"><a href="#cb121-11" aria-hidden="true" tabindex="-1"></a>        putchar<span class="op">(*</span>s<span class="op">);</span></span>
<span id="cb121-12"><a href="#cb121-12" aria-hidden="true" tabindex="-1"></a>        s <span class="op">=</span> s <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb121-13"><a href="#cb121-13" aria-hidden="true" tabindex="-1"></a>        count <span class="op">=</span> count <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb121-14"><a href="#cb121-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb121-15"><a href="#cb121-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> count<span class="op">;</span></span>
<span id="cb121-16"><a href="#cb121-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb121-17"><a href="#cb121-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-18"><a href="#cb121-18" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb121-19"><a href="#cb121-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> print<span class="op">(</span><span class="st">&quot;HI&quot;</span><span class="op">);</span></span>
<span id="cb121-20"><a href="#cb121-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.48" id="afficher-un-nombre"><span class="header-section-number">1.3.48</span> Afficher un Nombre</h3>
<div class="sourceCode" id="cb122"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Afficher un Nombre - Solution</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> putchar<span class="op">(</span><span class="dt">int</span> c<span class="op">)</span> <span class="op">{</span></span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>port <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0xFFFF0000</span><span class="op">;</span></span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>port <span class="op">=</span> c<span class="op">;</span></span>
<span id="cb122-6"><a href="#cb122-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb122-7"><a href="#cb122-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-8"><a href="#cb122-8" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_int<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb122-9"><a href="#cb122-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">12</span><span class="op">];</span></span>
<span id="cb122-10"><a href="#cb122-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb122-11"><a href="#cb122-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-12"><a href="#cb122-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb122-13"><a href="#cb122-13" aria-hidden="true" tabindex="-1"></a>        putchar<span class="op">(</span><span class="dv">48</span><span class="op">);</span></span>
<span id="cb122-14"><a href="#cb122-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb122-15"><a href="#cb122-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb122-16"><a href="#cb122-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-17"><a href="#cb122-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb122-18"><a href="#cb122-18" aria-hidden="true" tabindex="-1"></a>        buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">48</span> <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span></span>
<span id="cb122-19"><a href="#cb122-19" aria-hidden="true" tabindex="-1"></a>        n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb122-20"><a href="#cb122-20" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb122-21"><a href="#cb122-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb122-22"><a href="#cb122-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-23"><a href="#cb122-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb122-24"><a href="#cb122-24" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb122-25"><a href="#cb122-25" aria-hidden="true" tabindex="-1"></a>        putchar<span class="op">(</span>buf<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb122-26"><a href="#cb122-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb122-27"><a href="#cb122-27" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb122-28"><a href="#cb122-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-29"><a href="#cb122-29" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb122-30"><a href="#cb122-30" aria-hidden="true" tabindex="-1"></a>    print_int<span class="op">(</span><span class="dv">42</span><span class="op">);</span></span>
<span id="cb122-31"><a href="#cb122-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">42</span><span class="op">;</span></span>
<span id="cb122-32"><a href="#cb122-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.49" id="dessiner-un-pixel"><span class="header-section-number">1.3.49</span> Dessiner un Pixel</h3>
<div class="sourceCode" id="cb123"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessiner un Pixel - Solution</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>screen <span class="op">=</span> <span class="op">(</span><span class="dt">char</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>screen <span class="op">=</span> <span class="bn">0x80</span><span class="op">;</span>  <span class="co">// 0b10000000 - allume le pixel 0</span></span>
<span id="cb123-6"><a href="#cb123-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">128</span><span class="op">;</span></span>
<span id="cb123-7"><a href="#cb123-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.50" id="ligne-horizontale-1"><span class="header-section-number">1.3.50</span> Ligne Horizontale</h3>
<div class="sourceCode" id="cb124"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Ligne Horizontale - Solution</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>screen <span class="op">=</span> <span class="op">(</span><span class="dt">char</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb124-5"><a href="#cb124-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-6"><a href="#cb124-6" aria-hidden="true" tabindex="-1"></a>    screen<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="bn">0xFF</span><span class="op">;</span>  <span class="co">// 8 premiers pixels</span></span>
<span id="cb124-7"><a href="#cb124-7" aria-hidden="true" tabindex="-1"></a>    screen<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="bn">0xFF</span><span class="op">;</span>  <span class="co">// 8 pixels suivants</span></span>
<span id="cb124-8"><a href="#cb124-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-9"><a href="#cb124-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">16</span><span class="op">;</span></span>
<span id="cb124-10"><a href="#cb124-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.51" id="dessiner-un-rectangle"><span class="header-section-number">1.3.51</span> Dessiner un Rectangle</h3>
<div class="sourceCode" id="cb125"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessiner un Rectangle - Solution</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>screen <span class="op">=</span> <span class="op">(</span><span class="dt">char</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> y <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> y <span class="op">&lt;</span> <span class="dv">8</span><span class="op">;</span> y <span class="op">=</span> y <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb125-7"><a href="#cb125-7" aria-hidden="true" tabindex="-1"></a>        screen<span class="op">[</span>y <span class="op">*</span> <span class="dv">40</span><span class="op">]</span> <span class="op">=</span> <span class="bn">0xFF</span><span class="op">;</span>  <span class="co">// 40 bytes par ligne</span></span>
<span id="cb125-8"><a href="#cb125-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb125-9"><a href="#cb125-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-10"><a href="#cb125-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">64</span><span class="op">;</span></span>
<span id="cb125-11"><a href="#cb125-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.52" id="crible-d"><span class="header-section-number">1.3.52</span> Crible d<br />
</h3>
<div class="sourceCode" id="cb126"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Crible d&#39;Ã‰ratosthÃ¨ne - Solution</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> is_prime<span class="op">[</span><span class="dv">51</span><span class="op">];</span></span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb126-6"><a href="#cb126-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> j<span class="op">;</span></span>
<span id="cb126-7"><a href="#cb126-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count<span class="op">;</span></span>
<span id="cb126-8"><a href="#cb126-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-9"><a href="#cb126-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">50</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb126-10"><a href="#cb126-10" aria-hidden="true" tabindex="-1"></a>        is_prime<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb126-11"><a href="#cb126-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb126-12"><a href="#cb126-12" aria-hidden="true" tabindex="-1"></a>    is_prime<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb126-13"><a href="#cb126-13" aria-hidden="true" tabindex="-1"></a>    is_prime<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb126-14"><a href="#cb126-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-15"><a href="#cb126-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> i <span class="op">*</span> i <span class="op">&lt;=</span> <span class="dv">50</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb126-16"><a href="#cb126-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>is_prime<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span></span>
<span id="cb126-17"><a href="#cb126-17" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> i <span class="op">*</span> i<span class="op">;</span> j <span class="op">&lt;=</span> <span class="dv">50</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> i<span class="op">)</span> <span class="op">{</span></span>
<span id="cb126-18"><a href="#cb126-18" aria-hidden="true" tabindex="-1"></a>                is_prime<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb126-19"><a href="#cb126-19" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb126-20"><a href="#cb126-20" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb126-21"><a href="#cb126-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb126-22"><a href="#cb126-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-23"><a href="#cb126-23" aria-hidden="true" tabindex="-1"></a>    count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb126-24"><a href="#cb126-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">50</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb126-25"><a href="#cb126-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>is_prime<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span></span>
<span id="cb126-26"><a href="#cb126-26" aria-hidden="true" tabindex="-1"></a>            count <span class="op">=</span> count <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb126-27"><a href="#cb126-27" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb126-28"><a href="#cb126-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb126-29"><a href="#cb126-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> count<span class="op">;</span></span>
<span id="cb126-30"><a href="#cb126-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.53" id="suite-de-collatz"><span class="header-section-number">1.3.53</span> Suite de Collatz</h3>
<div class="sourceCode" id="cb127"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Suite de Collatz - Solution</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> collatz_length<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count<span class="op">;</span></span>
<span id="cb127-5"><a href="#cb127-5" aria-hidden="true" tabindex="-1"></a>    count <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb127-6"><a href="#cb127-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">!=</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb127-7"><a href="#cb127-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb127-8"><a href="#cb127-8" aria-hidden="true" tabindex="-1"></a>            n <span class="op">=</span> n <span class="op">/</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb127-9"><a href="#cb127-9" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb127-10"><a href="#cb127-10" aria-hidden="true" tabindex="-1"></a>            n <span class="op">=</span> <span class="dv">3</span> <span class="op">*</span> n <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb127-11"><a href="#cb127-11" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb127-12"><a href="#cb127-12" aria-hidden="true" tabindex="-1"></a>        count <span class="op">=</span> count <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb127-13"><a href="#cb127-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb127-14"><a href="#cb127-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> count<span class="op">;</span></span>
<span id="cb127-15"><a href="#cb127-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb127-16"><a href="#cb127-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-17"><a href="#cb127-17" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb127-18"><a href="#cb127-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> collatz_length<span class="op">(</span><span class="dv">27</span><span class="op">);</span>  <span class="co">// attendu: 112</span></span>
<span id="cb127-19"><a href="#cb127-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.3.54" id="projet-final"><span class="header-section-number">1.3.54</span> Projet Final</h3>
<div class="sourceCode" id="cb128"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Projet Final - Solution</span></span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> sum_divisors<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb128-5"><a href="#cb128-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb128-6"><a href="#cb128-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>n <span class="op">%</span> i <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb128-7"><a href="#cb128-7" aria-hidden="true" tabindex="-1"></a>            sum <span class="op">=</span> sum <span class="op">+</span> i<span class="op">;</span></span>
<span id="cb128-8"><a href="#cb128-8" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb128-9"><a href="#cb128-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb128-10"><a href="#cb128-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum<span class="op">;</span></span>
<span id="cb128-11"><a href="#cb128-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb128-12"><a href="#cb128-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-13"><a href="#cb128-13" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb128-14"><a href="#cb128-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum_divisors<span class="op">(</span><span class="dv">28</span><span class="op">);</span></span>
<span id="cb128-15"><a href="#cb128-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h2 data-number="1.4" id="d.-solutions-construction-du-compilateur"><span class="header-section-number">1.4</span> D. Solutions Construction du
Compilateur</h2>
<h3 data-number="1.4.1" id="reconnaÃ®tre-un-chiffre"><span class="header-section-number">1.4.1</span> 1.1 ReconnaÃ®tre un
Chiffre</h3>
<div class="sourceCode" id="cb129"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_digit<span class="op">(</span><span class="dt">char</span> c<span class="op">)</span> <span class="op">{</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> c <span class="op">&gt;=</span> <span class="ch">&#39;0&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;9&#39;</span><span class="op">;</span></span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb129-7"><a href="#cb129-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>is_digit<span class="op">(</span><span class="ch">&#39;0&#39;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb129-8"><a href="#cb129-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>is_digit<span class="op">(</span><span class="ch">&#39;5&#39;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb129-9"><a href="#cb129-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>is_digit<span class="op">(</span><span class="ch">&#39;9&#39;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb129-10"><a href="#cb129-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>is_digit<span class="op">(</span><span class="ch">&#39;a&#39;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb129-11"><a href="#cb129-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>is_digit<span class="op">(</span><span class="ch">&#39; &#39;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb129-12"><a href="#cb129-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb129-13"><a href="#cb129-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.2" id="lire-un-nombre"><span class="header-section-number">1.4.2</span> 1.2 Lire un Nombre</h3>
<div class="sourceCode" id="cb130"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_digit<span class="op">(</span><span class="dt">char</span> c<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> c <span class="op">&gt;=</span> <span class="ch">&#39;0&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;9&#39;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_number<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">,</span> <span class="dt">int</span><span class="op">*</span> pos<span class="op">)</span> <span class="op">{</span></span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>is_digit<span class="op">(</span>s<span class="op">[*</span>pos<span class="op">]))</span> <span class="op">{</span></span>
<span id="cb130-6"><a href="#cb130-6" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> result <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> <span class="op">(</span>s<span class="op">[*</span>pos<span class="op">]</span> <span class="op">-</span> <span class="ch">&#39;0&#39;</span><span class="op">);</span></span>
<span id="cb130-7"><a href="#cb130-7" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>pos <span class="op">=</span> <span class="op">*</span>pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb130-8"><a href="#cb130-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb130-9"><a href="#cb130-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb130-10"><a href="#cb130-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb130-11"><a href="#cb130-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-12"><a href="#cb130-12" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb130-13"><a href="#cb130-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb130-14"><a href="#cb130-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> p<span class="op">;</span></span>
<span id="cb130-15"><a href="#cb130-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-16"><a href="#cb130-16" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb130-17"><a href="#cb130-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>parse_number<span class="op">(</span><span class="st">&quot;42&quot;</span><span class="op">,</span> <span class="op">&amp;</span>p<span class="op">)</span> <span class="op">==</span> <span class="dv">42</span> <span class="op">&amp;&amp;</span> p <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb130-18"><a href="#cb130-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-19"><a href="#cb130-19" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb130-20"><a href="#cb130-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>parse_number<span class="op">(</span><span class="st">&quot;123+45&quot;</span><span class="op">,</span> <span class="op">&amp;</span>p<span class="op">)</span> <span class="op">==</span> <span class="dv">123</span> <span class="op">&amp;&amp;</span> p <span class="op">==</span> <span class="dv">3</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb130-21"><a href="#cb130-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-22"><a href="#cb130-22" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb130-23"><a href="#cb130-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>parse_number<span class="op">(</span><span class="st">&quot;123+45&quot;</span><span class="op">,</span> <span class="op">&amp;</span>p<span class="op">)</span> <span class="op">==</span> <span class="dv">45</span> <span class="op">&amp;&amp;</span> p <span class="op">==</span> <span class="dv">6</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb130-24"><a href="#cb130-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-25"><a href="#cb130-25" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb130-26"><a href="#cb130-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>parse_number<span class="op">(</span><span class="st">&quot;7&quot;</span><span class="op">,</span> <span class="op">&amp;</span>p<span class="op">)</span> <span class="op">==</span> <span class="dv">7</span> <span class="op">&amp;&amp;</span> p <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb130-27"><a href="#cb130-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-28"><a href="#cb130-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb130-29"><a href="#cb130-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.3" id="identifier-les-tokens"><span class="header-section-number">1.4.3</span> 1.3 Identifier les
Tokens</h3>
<div class="sourceCode" id="cb131"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_digit<span class="op">(</span><span class="dt">char</span> c<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> c <span class="op">&gt;=</span> <span class="ch">&#39;0&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;9&#39;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> next_token<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">,</span> <span class="dt">int</span><span class="op">*</span> pos<span class="op">)</span> <span class="op">{</span></span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[*</span>pos<span class="op">]</span> <span class="op">==</span> <span class="ch">&#39; &#39;</span><span class="op">)</span> <span class="op">*</span>pos <span class="op">=</span> <span class="op">*</span>pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-6"><a href="#cb131-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> c <span class="op">=</span> s<span class="op">[*</span>pos<span class="op">];</span></span>
<span id="cb131-7"><a href="#cb131-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb131-8"><a href="#cb131-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-9"><a href="#cb131-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>is_digit<span class="op">(</span>c<span class="op">))</span> <span class="op">{</span></span>
<span id="cb131-10"><a href="#cb131-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>is_digit<span class="op">(</span>s<span class="op">[*</span>pos<span class="op">]))</span> <span class="op">*</span>pos <span class="op">=</span> <span class="op">*</span>pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb131-11"><a href="#cb131-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb131-12"><a href="#cb131-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb131-13"><a href="#cb131-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-14"><a href="#cb131-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>pos <span class="op">=</span> <span class="op">*</span>pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb131-15"><a href="#cb131-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">==</span> <span class="ch">&#39;+&#39;</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb131-16"><a href="#cb131-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">==</span> <span class="ch">&#39;-&#39;</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb131-17"><a href="#cb131-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">==</span> <span class="ch">&#39;*&#39;</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb131-18"><a href="#cb131-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">==</span> <span class="ch">&#39;/&#39;</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb131-19"><a href="#cb131-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">==</span> <span class="ch">&#39;(&#39;</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">6</span><span class="op">;</span></span>
<span id="cb131-20"><a href="#cb131-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">==</span> <span class="ch">&#39;)&#39;</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">7</span><span class="op">;</span></span>
<span id="cb131-21"><a href="#cb131-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-22"><a href="#cb131-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb131-23"><a href="#cb131-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb131-24"><a href="#cb131-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-25"><a href="#cb131-25" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb131-26"><a href="#cb131-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb131-27"><a href="#cb131-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> p<span class="op">;</span></span>
<span id="cb131-28"><a href="#cb131-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-29"><a href="#cb131-29" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb131-30"><a href="#cb131-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>next_token<span class="op">(</span><span class="st">&quot;42&quot;</span><span class="op">,</span> <span class="op">&amp;</span>p<span class="op">)</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb131-31"><a href="#cb131-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-32"><a href="#cb131-32" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb131-33"><a href="#cb131-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>next_token<span class="op">(</span><span class="st">&quot;+&quot;</span><span class="op">,</span> <span class="op">&amp;</span>p<span class="op">)</span> <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb131-34"><a href="#cb131-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-35"><a href="#cb131-35" aria-hidden="true" tabindex="-1"></a>    p <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb131-36"><a href="#cb131-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>next_token<span class="op">(</span><span class="st">&quot;3 + 5&quot;</span><span class="op">,</span> <span class="op">&amp;</span>p<span class="op">)</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb131-37"><a href="#cb131-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>next_token<span class="op">(</span><span class="st">&quot;3 + 5&quot;</span><span class="op">,</span> <span class="op">&amp;</span>p<span class="op">)</span> <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb131-38"><a href="#cb131-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>next_token<span class="op">(</span><span class="st">&quot;3 + 5&quot;</span><span class="op">,</span> <span class="op">&amp;</span>p<span class="op">)</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb131-39"><a href="#cb131-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>next_token<span class="op">(</span><span class="st">&quot;3 + 5&quot;</span><span class="op">,</span> <span class="op">&amp;</span>p<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb131-40"><a href="#cb131-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-41"><a href="#cb131-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb131-42"><a href="#cb131-42" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.4" id="Ã©valuer-a-b"><span class="header-section-number">1.4.4</span> 2.1 Ã‰valuer a + b</h3>
<div class="sourceCode" id="cb132"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_digit<span class="op">(</span><span class="dt">char</span> c<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> c <span class="op">&gt;=</span> <span class="ch">&#39;0&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;9&#39;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">,</span> <span class="dt">int</span><span class="op">*</span> p<span class="op">)</span> <span class="op">{</span></span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[*</span>p<span class="op">]</span> <span class="op">==</span> <span class="ch">&#39; &#39;</span><span class="op">)</span> <span class="op">*</span>p <span class="op">=</span> <span class="op">*</span>p <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> v <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb132-6"><a href="#cb132-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>is_digit<span class="op">(</span>s<span class="op">[*</span>p<span class="op">]))</span> <span class="op">{</span></span>
<span id="cb132-7"><a href="#cb132-7" aria-hidden="true" tabindex="-1"></a>        v <span class="op">=</span> v <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> <span class="op">(</span>s<span class="op">[*</span>p<span class="op">]</span> <span class="op">-</span> <span class="ch">&#39;0&#39;</span><span class="op">);</span></span>
<span id="cb132-8"><a href="#cb132-8" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>p <span class="op">=</span> <span class="op">*</span>p <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb132-9"><a href="#cb132-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb132-10"><a href="#cb132-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> v<span class="op">;</span></span>
<span id="cb132-11"><a href="#cb132-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb132-12"><a href="#cb132-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-13"><a href="#cb132-13" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> eval_simple<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb132-14"><a href="#cb132-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> pos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb132-15"><a href="#cb132-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a <span class="op">=</span> parse_num<span class="op">(</span>s<span class="op">,</span> <span class="op">&amp;</span>pos<span class="op">);</span></span>
<span id="cb132-16"><a href="#cb132-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-17"><a href="#cb132-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>pos<span class="op">]</span> <span class="op">==</span> <span class="ch">&#39; &#39;</span><span class="op">)</span> pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb132-18"><a href="#cb132-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> op <span class="op">=</span> s<span class="op">[</span>pos<span class="op">];</span></span>
<span id="cb132-19"><a href="#cb132-19" aria-hidden="true" tabindex="-1"></a>    pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb132-20"><a href="#cb132-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-21"><a href="#cb132-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> b <span class="op">=</span> parse_num<span class="op">(</span>s<span class="op">,</span> <span class="op">&amp;</span>pos<span class="op">);</span></span>
<span id="cb132-22"><a href="#cb132-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-23"><a href="#cb132-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;+&#39;</span><span class="op">)</span> <span class="cf">return</span> a <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb132-24"><a href="#cb132-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;-&#39;</span><span class="op">)</span> <span class="cf">return</span> a <span class="op">-</span> b<span class="op">;</span></span>
<span id="cb132-25"><a href="#cb132-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;*&#39;</span><span class="op">)</span> <span class="cf">return</span> a <span class="op">*</span> b<span class="op">;</span></span>
<span id="cb132-26"><a href="#cb132-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;/&#39;</span><span class="op">)</span> <span class="cf">return</span> a <span class="op">/</span> b<span class="op">;</span></span>
<span id="cb132-27"><a href="#cb132-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb132-28"><a href="#cb132-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb132-29"><a href="#cb132-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-30"><a href="#cb132-30" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb132-31"><a href="#cb132-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb132-32"><a href="#cb132-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval_simple<span class="op">(</span><span class="st">&quot;3 + 5&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">8</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb132-33"><a href="#cb132-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval_simple<span class="op">(</span><span class="st">&quot;10 - 4&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">6</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb132-34"><a href="#cb132-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval_simple<span class="op">(</span><span class="st">&quot;6 * 7&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">42</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb132-35"><a href="#cb132-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval_simple<span class="op">(</span><span class="st">&quot;20 / 4&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">5</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb132-36"><a href="#cb132-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb132-37"><a href="#cb132-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.5" id="Ã©valuer-a-b-c"><span class="header-section-number">1.4.5</span> 2.2 Ã‰valuer a + b + c</h3>
<div class="sourceCode" id="cb133"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_digit<span class="op">(</span><span class="dt">char</span> c<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> c <span class="op">&gt;=</span> <span class="ch">&#39;0&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;9&#39;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">,</span> <span class="dt">int</span><span class="op">*</span> p<span class="op">)</span> <span class="op">{</span></span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[*</span>p<span class="op">]</span> <span class="op">==</span> <span class="ch">&#39; &#39;</span><span class="op">)</span> <span class="op">*</span>p <span class="op">=</span> <span class="op">*</span>p <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> v <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb133-6"><a href="#cb133-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>is_digit<span class="op">(</span>s<span class="op">[*</span>p<span class="op">]))</span> <span class="op">{</span> v <span class="op">=</span> v <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> <span class="op">(</span>s<span class="op">[*</span>p<span class="op">]</span> <span class="op">-</span> <span class="ch">&#39;0&#39;</span><span class="op">);</span> <span class="op">*</span>p <span class="op">=</span> <span class="op">*</span>p <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb133-7"><a href="#cb133-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> v<span class="op">;</span></span>
<span id="cb133-8"><a href="#cb133-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb133-9"><a href="#cb133-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-10"><a href="#cb133-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_op<span class="op">(</span><span class="dt">char</span> c<span class="op">)</span> <span class="op">{</span></span>
<span id="cb133-11"><a href="#cb133-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> c <span class="op">==</span> <span class="ch">&#39;+&#39;</span> <span class="op">||</span> c <span class="op">==</span> <span class="ch">&#39;-&#39;</span> <span class="op">||</span> c <span class="op">==</span> <span class="ch">&#39;*&#39;</span> <span class="op">||</span> c <span class="op">==</span> <span class="ch">&#39;/&#39;</span><span class="op">;</span></span>
<span id="cb133-12"><a href="#cb133-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb133-13"><a href="#cb133-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-14"><a href="#cb133-14" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> eval_chain<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb133-15"><a href="#cb133-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> pos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb133-16"><a href="#cb133-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result <span class="op">=</span> parse_num<span class="op">(</span>s<span class="op">,</span> <span class="op">&amp;</span>pos<span class="op">);</span></span>
<span id="cb133-17"><a href="#cb133-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-18"><a href="#cb133-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb133-19"><a href="#cb133-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>pos<span class="op">]</span> <span class="op">==</span> <span class="ch">&#39; &#39;</span><span class="op">)</span> pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb133-20"><a href="#cb133-20" aria-hidden="true" tabindex="-1"></a>        <span class="dt">char</span> op <span class="op">=</span> s<span class="op">[</span>pos<span class="op">];</span></span>
<span id="cb133-21"><a href="#cb133-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(!</span>is_op<span class="op">(</span>op<span class="op">))</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb133-22"><a href="#cb133-22" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb133-23"><a href="#cb133-23" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> b <span class="op">=</span> parse_num<span class="op">(</span>s<span class="op">,</span> <span class="op">&amp;</span>pos<span class="op">);</span></span>
<span id="cb133-24"><a href="#cb133-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-25"><a href="#cb133-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;+&#39;</span><span class="op">)</span> result <span class="op">=</span> result <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb133-26"><a href="#cb133-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;-&#39;</span><span class="op">)</span> result <span class="op">=</span> result <span class="op">-</span> b<span class="op">;</span></span>
<span id="cb133-27"><a href="#cb133-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;*&#39;</span><span class="op">)</span> result <span class="op">=</span> result <span class="op">*</span> b<span class="op">;</span></span>
<span id="cb133-28"><a href="#cb133-28" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;/&#39;</span><span class="op">)</span> result <span class="op">=</span> result <span class="op">/</span> b<span class="op">;</span></span>
<span id="cb133-29"><a href="#cb133-29" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb133-30"><a href="#cb133-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-31"><a href="#cb133-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb133-32"><a href="#cb133-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb133-33"><a href="#cb133-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-34"><a href="#cb133-34" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb133-35"><a href="#cb133-35" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb133-36"><a href="#cb133-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval_chain<span class="op">(</span><span class="st">&quot;5&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">5</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb133-37"><a href="#cb133-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval_chain<span class="op">(</span><span class="st">&quot;3 + 5&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">8</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb133-38"><a href="#cb133-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval_chain<span class="op">(</span><span class="st">&quot;1 + 2 + 3&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">6</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb133-39"><a href="#cb133-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval_chain<span class="op">(</span><span class="st">&quot;10 - 2 - 3&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">5</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb133-40"><a href="#cb133-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval_chain<span class="op">(</span><span class="st">&quot;2 * 3 * 4&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">24</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb133-41"><a href="#cb133-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb133-42"><a href="#cb133-42" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.6" id="respecter-la-prÃ©cÃ©dence"><span class="header-section-number">1.4.6</span> 2.3 Respecter la
PrÃ©cÃ©dence</h3>
<div class="sourceCode" id="cb134"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_digit<span class="op">(</span><span class="dt">char</span> c<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> c <span class="op">&gt;=</span> <span class="ch">&#39;0&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;9&#39;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> input<span class="op">;</span></span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> pos<span class="op">;</span></span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> skip<span class="op">()</span> <span class="op">{</span> <span class="cf">while</span> <span class="op">(</span>input<span class="op">[</span>pos<span class="op">]</span> <span class="op">==</span> <span class="ch">&#39; &#39;</span><span class="op">)</span> pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb134-6"><a href="#cb134-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-7"><a href="#cb134-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_num<span class="op">()</span> <span class="op">{</span></span>
<span id="cb134-8"><a href="#cb134-8" aria-hidden="true" tabindex="-1"></a>    skip<span class="op">();</span></span>
<span id="cb134-9"><a href="#cb134-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> v <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb134-10"><a href="#cb134-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>is_digit<span class="op">(</span>input<span class="op">[</span>pos<span class="op">]))</span> <span class="op">{</span> v <span class="op">=</span> v <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> <span class="op">(</span>input<span class="op">[</span>pos<span class="op">]</span> <span class="op">-</span> <span class="ch">&#39;0&#39;</span><span class="op">);</span> pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb134-11"><a href="#cb134-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> v<span class="op">;</span></span>
<span id="cb134-12"><a href="#cb134-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb134-13"><a href="#cb134-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-14"><a href="#cb134-14" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_factor<span class="op">()</span> <span class="op">{</span></span>
<span id="cb134-15"><a href="#cb134-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> parse_num<span class="op">();</span></span>
<span id="cb134-16"><a href="#cb134-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb134-17"><a href="#cb134-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-18"><a href="#cb134-18" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_term<span class="op">()</span> <span class="op">{</span></span>
<span id="cb134-19"><a href="#cb134-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> left <span class="op">=</span> parse_factor<span class="op">();</span></span>
<span id="cb134-20"><a href="#cb134-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb134-21"><a href="#cb134-21" aria-hidden="true" tabindex="-1"></a>        skip<span class="op">();</span></span>
<span id="cb134-22"><a href="#cb134-22" aria-hidden="true" tabindex="-1"></a>        <span class="dt">char</span> op <span class="op">=</span> input<span class="op">[</span>pos<span class="op">];</span></span>
<span id="cb134-23"><a href="#cb134-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op <span class="op">!=</span> <span class="ch">&#39;*&#39;</span> <span class="op">&amp;&amp;</span> op <span class="op">!=</span> <span class="ch">&#39;/&#39;</span><span class="op">)</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb134-24"><a href="#cb134-24" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb134-25"><a href="#cb134-25" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> right <span class="op">=</span> parse_factor<span class="op">();</span></span>
<span id="cb134-26"><a href="#cb134-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;*&#39;</span><span class="op">)</span> left <span class="op">=</span> left <span class="op">*</span> right<span class="op">;</span></span>
<span id="cb134-27"><a href="#cb134-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> left <span class="op">=</span> left <span class="op">/</span> right<span class="op">;</span></span>
<span id="cb134-28"><a href="#cb134-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb134-29"><a href="#cb134-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> left<span class="op">;</span></span>
<span id="cb134-30"><a href="#cb134-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb134-31"><a href="#cb134-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-32"><a href="#cb134-32" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_expr<span class="op">()</span> <span class="op">{</span></span>
<span id="cb134-33"><a href="#cb134-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> left <span class="op">=</span> parse_term<span class="op">();</span></span>
<span id="cb134-34"><a href="#cb134-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb134-35"><a href="#cb134-35" aria-hidden="true" tabindex="-1"></a>        skip<span class="op">();</span></span>
<span id="cb134-36"><a href="#cb134-36" aria-hidden="true" tabindex="-1"></a>        <span class="dt">char</span> op <span class="op">=</span> input<span class="op">[</span>pos<span class="op">];</span></span>
<span id="cb134-37"><a href="#cb134-37" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op <span class="op">!=</span> <span class="ch">&#39;+&#39;</span> <span class="op">&amp;&amp;</span> op <span class="op">!=</span> <span class="ch">&#39;-&#39;</span><span class="op">)</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb134-38"><a href="#cb134-38" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb134-39"><a href="#cb134-39" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> right <span class="op">=</span> parse_term<span class="op">();</span></span>
<span id="cb134-40"><a href="#cb134-40" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;+&#39;</span><span class="op">)</span> left <span class="op">=</span> left <span class="op">+</span> right<span class="op">;</span></span>
<span id="cb134-41"><a href="#cb134-41" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> left <span class="op">=</span> left <span class="op">-</span> right<span class="op">;</span></span>
<span id="cb134-42"><a href="#cb134-42" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb134-43"><a href="#cb134-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> left<span class="op">;</span></span>
<span id="cb134-44"><a href="#cb134-44" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb134-45"><a href="#cb134-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-46"><a href="#cb134-46" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> eval<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb134-47"><a href="#cb134-47" aria-hidden="true" tabindex="-1"></a>    input <span class="op">=</span> s<span class="op">;</span></span>
<span id="cb134-48"><a href="#cb134-48" aria-hidden="true" tabindex="-1"></a>    pos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb134-49"><a href="#cb134-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> parse_expr<span class="op">();</span></span>
<span id="cb134-50"><a href="#cb134-50" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb134-51"><a href="#cb134-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-52"><a href="#cb134-52" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb134-53"><a href="#cb134-53" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb134-54"><a href="#cb134-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval<span class="op">(</span><span class="st">&quot;42&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">42</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb134-55"><a href="#cb134-55" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval<span class="op">(</span><span class="st">&quot;3 + 5&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">8</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb134-56"><a href="#cb134-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval<span class="op">(</span><span class="st">&quot;3 * 4&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">12</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb134-57"><a href="#cb134-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval<span class="op">(</span><span class="st">&quot;2 + 3 * 4&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">14</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb134-58"><a href="#cb134-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval<span class="op">(</span><span class="st">&quot;2 * 3 + 4&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">10</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb134-59"><a href="#cb134-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval<span class="op">(</span><span class="st">&quot;10 - 2 * 3&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">4</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb134-60"><a href="#cb134-60" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb134-61"><a href="#cb134-61" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.7" id="gÃ©rer-les-parenthÃ¨ses"><span class="header-section-number">1.4.7</span> 2.4 GÃ©rer les
ParenthÃ¨ses</h3>
<div class="sourceCode" id="cb135"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_digit<span class="op">(</span><span class="dt">char</span> c<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> c <span class="op">&gt;=</span> <span class="ch">&#39;0&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;9&#39;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> input<span class="op">;</span></span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> pos<span class="op">;</span></span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-5"><a href="#cb135-5" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> skip<span class="op">()</span> <span class="op">{</span> <span class="cf">while</span> <span class="op">(</span>input<span class="op">[</span>pos<span class="op">]</span> <span class="op">==</span> <span class="ch">&#39; &#39;</span><span class="op">)</span> pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb135-6"><a href="#cb135-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-7"><a href="#cb135-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_expr<span class="op">();</span></span>
<span id="cb135-8"><a href="#cb135-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-9"><a href="#cb135-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_num<span class="op">()</span> <span class="op">{</span></span>
<span id="cb135-10"><a href="#cb135-10" aria-hidden="true" tabindex="-1"></a>    skip<span class="op">();</span></span>
<span id="cb135-11"><a href="#cb135-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> v <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb135-12"><a href="#cb135-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>is_digit<span class="op">(</span>input<span class="op">[</span>pos<span class="op">]))</span> <span class="op">{</span> v <span class="op">=</span> v <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> <span class="op">(</span>input<span class="op">[</span>pos<span class="op">]</span> <span class="op">-</span> <span class="ch">&#39;0&#39;</span><span class="op">);</span> pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb135-13"><a href="#cb135-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> v<span class="op">;</span></span>
<span id="cb135-14"><a href="#cb135-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb135-15"><a href="#cb135-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-16"><a href="#cb135-16" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_factor<span class="op">()</span> <span class="op">{</span></span>
<span id="cb135-17"><a href="#cb135-17" aria-hidden="true" tabindex="-1"></a>    skip<span class="op">();</span></span>
<span id="cb135-18"><a href="#cb135-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>input<span class="op">[</span>pos<span class="op">]</span> <span class="op">==</span> <span class="ch">&#39;(&#39;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb135-19"><a href="#cb135-19" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb135-20"><a href="#cb135-20" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> v <span class="op">=</span> parse_expr<span class="op">();</span></span>
<span id="cb135-21"><a href="#cb135-21" aria-hidden="true" tabindex="-1"></a>        skip<span class="op">();</span></span>
<span id="cb135-22"><a href="#cb135-22" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span>  <span class="co">// &#39;)&#39;</span></span>
<span id="cb135-23"><a href="#cb135-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> v<span class="op">;</span></span>
<span id="cb135-24"><a href="#cb135-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb135-25"><a href="#cb135-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> parse_num<span class="op">();</span></span>
<span id="cb135-26"><a href="#cb135-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb135-27"><a href="#cb135-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-28"><a href="#cb135-28" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_term<span class="op">()</span> <span class="op">{</span></span>
<span id="cb135-29"><a href="#cb135-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> left <span class="op">=</span> parse_factor<span class="op">();</span></span>
<span id="cb135-30"><a href="#cb135-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb135-31"><a href="#cb135-31" aria-hidden="true" tabindex="-1"></a>        skip<span class="op">();</span></span>
<span id="cb135-32"><a href="#cb135-32" aria-hidden="true" tabindex="-1"></a>        <span class="dt">char</span> op <span class="op">=</span> input<span class="op">[</span>pos<span class="op">];</span></span>
<span id="cb135-33"><a href="#cb135-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op <span class="op">!=</span> <span class="ch">&#39;*&#39;</span> <span class="op">&amp;&amp;</span> op <span class="op">!=</span> <span class="ch">&#39;/&#39;</span><span class="op">)</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb135-34"><a href="#cb135-34" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb135-35"><a href="#cb135-35" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> right <span class="op">=</span> parse_factor<span class="op">();</span></span>
<span id="cb135-36"><a href="#cb135-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;*&#39;</span><span class="op">)</span> left <span class="op">=</span> left <span class="op">*</span> right<span class="op">;</span></span>
<span id="cb135-37"><a href="#cb135-37" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> left <span class="op">=</span> left <span class="op">/</span> right<span class="op">;</span></span>
<span id="cb135-38"><a href="#cb135-38" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb135-39"><a href="#cb135-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> left<span class="op">;</span></span>
<span id="cb135-40"><a href="#cb135-40" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb135-41"><a href="#cb135-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-42"><a href="#cb135-42" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_expr<span class="op">()</span> <span class="op">{</span></span>
<span id="cb135-43"><a href="#cb135-43" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> left <span class="op">=</span> parse_term<span class="op">();</span></span>
<span id="cb135-44"><a href="#cb135-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb135-45"><a href="#cb135-45" aria-hidden="true" tabindex="-1"></a>        skip<span class="op">();</span></span>
<span id="cb135-46"><a href="#cb135-46" aria-hidden="true" tabindex="-1"></a>        <span class="dt">char</span> op <span class="op">=</span> input<span class="op">[</span>pos<span class="op">];</span></span>
<span id="cb135-47"><a href="#cb135-47" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op <span class="op">!=</span> <span class="ch">&#39;+&#39;</span> <span class="op">&amp;&amp;</span> op <span class="op">!=</span> <span class="ch">&#39;-&#39;</span><span class="op">)</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb135-48"><a href="#cb135-48" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb135-49"><a href="#cb135-49" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> right <span class="op">=</span> parse_term<span class="op">();</span></span>
<span id="cb135-50"><a href="#cb135-50" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;+&#39;</span><span class="op">)</span> left <span class="op">=</span> left <span class="op">+</span> right<span class="op">;</span></span>
<span id="cb135-51"><a href="#cb135-51" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> left <span class="op">=</span> left <span class="op">-</span> right<span class="op">;</span></span>
<span id="cb135-52"><a href="#cb135-52" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb135-53"><a href="#cb135-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> left<span class="op">;</span></span>
<span id="cb135-54"><a href="#cb135-54" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb135-55"><a href="#cb135-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-56"><a href="#cb135-56" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> eval<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> input <span class="op">=</span> s<span class="op">;</span> pos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">return</span> parse_expr<span class="op">();</span> <span class="op">}</span></span>
<span id="cb135-57"><a href="#cb135-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-58"><a href="#cb135-58" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb135-59"><a href="#cb135-59" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb135-60"><a href="#cb135-60" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval<span class="op">(</span><span class="st">&quot;(5)&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">5</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb135-61"><a href="#cb135-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval<span class="op">(</span><span class="st">&quot;(2 + 3)&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">5</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb135-62"><a href="#cb135-62" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval<span class="op">(</span><span class="st">&quot;(2 + 3) * 4&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">20</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb135-63"><a href="#cb135-63" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval<span class="op">(</span><span class="st">&quot;2 * (3 + 4)&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">14</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb135-64"><a href="#cb135-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval<span class="op">(</span><span class="st">&quot;(1 + 2) * (3 + 4)&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">21</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb135-65"><a href="#cb135-65" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>eval<span class="op">(</span><span class="st">&quot;((2))&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb135-66"><a href="#cb135-66" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb135-67"><a href="#cb135-67" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.8" id="Ã©mettre-mov"><span class="header-section-number">1.4.8</span> 3.1 Ã‰mettre MOV</h3>
<div class="sourceCode" id="cb136"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> strlen<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>i<span class="op">])</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="cf">return</span> i<span class="op">;</span> <span class="op">}</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> strlen<span class="op">(</span>buf<span class="op">);</span></span>
<span id="cb136-5"><a href="#cb136-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb136-6"><a href="#cb136-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>j<span class="op">])</span> <span class="op">{</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> s<span class="op">[</span>j<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb136-7"><a href="#cb136-7" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb136-8"><a href="#cb136-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb136-9"><a href="#cb136-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-10"><a href="#cb136-10" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-11"><a href="#cb136-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tmp<span class="op">[</span><span class="dv">12</span><span class="op">];</span></span>
<span id="cb136-12"><a href="#cb136-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb136-13"><a href="#cb136-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;0&#39;</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb136-14"><a href="#cb136-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb136-15"><a href="#cb136-15" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> rev<span class="op">[</span><span class="dv">12</span><span class="op">];</span> <span class="dt">int</span> r <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb136-16"><a href="#cb136-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> rev<span class="op">[</span>r<span class="op">]</span> <span class="op">=</span> n <span class="op">%</span> <span class="dv">10</span><span class="op">;</span> r <span class="op">=</span> r <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb136-17"><a href="#cb136-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>r <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> r <span class="op">=</span> r <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;0&#39;</span> <span class="op">+</span> rev<span class="op">[</span>r<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb136-18"><a href="#cb136-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb136-19"><a href="#cb136-19" aria-hidden="true" tabindex="-1"></a>    tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb136-20"><a href="#cb136-20" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> tmp<span class="op">);</span></span>
<span id="cb136-21"><a href="#cb136-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb136-22"><a href="#cb136-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-23"><a href="#cb136-23" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_mov<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">,</span> <span class="dt">int</span> val<span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-24"><a href="#cb136-24" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R&quot;</span><span class="op">);</span></span>
<span id="cb136-25"><a href="#cb136-25" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span></span>
<span id="cb136-26"><a href="#cb136-26" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, #&quot;</span><span class="op">);</span></span>
<span id="cb136-27"><a href="#cb136-27" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> val<span class="op">);</span></span>
<span id="cb136-28"><a href="#cb136-28" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb136-29"><a href="#cb136-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb136-30"><a href="#cb136-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-31"><a href="#cb136-31" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> check<span class="op">(</span><span class="dt">char</span><span class="op">*</span> a<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-32"><a href="#cb136-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb136-33"><a href="#cb136-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">&amp;&amp;</span> b<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span> <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> b<span class="op">[</span>i<span class="op">])</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb136-34"><a href="#cb136-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a<span class="op">[</span>i<span class="op">]</span> <span class="op">==</span> b<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb136-35"><a href="#cb136-35" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb136-36"><a href="#cb136-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-37"><a href="#cb136-37" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb136-38"><a href="#cb136-38" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb136-39"><a href="#cb136-39" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb136-40"><a href="#cb136-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-41"><a href="#cb136-41" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb136-42"><a href="#cb136-42" aria-hidden="true" tabindex="-1"></a>    emit_mov<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">42</span><span class="op">);</span></span>
<span id="cb136-43"><a href="#cb136-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R0, #42</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb136-44"><a href="#cb136-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-45"><a href="#cb136-45" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb136-46"><a href="#cb136-46" aria-hidden="true" tabindex="-1"></a>    emit_mov<span class="op">(</span>buf<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb136-47"><a href="#cb136-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R1, #5</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb136-48"><a href="#cb136-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-49"><a href="#cb136-49" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb136-50"><a href="#cb136-50" aria-hidden="true" tabindex="-1"></a>    emit_mov<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb136-51"><a href="#cb136-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R0, #0</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb136-52"><a href="#cb136-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-53"><a href="#cb136-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb136-54"><a href="#cb136-54" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.9" id="Ã©mettre-addsubmul"><span class="header-section-number">1.4.9</span> 3.2 Ã‰mettre ADD/SUB/MUL</h3>
<div class="sourceCode" id="cb137"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> strlen<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>i<span class="op">])</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="cf">return</span> i<span class="op">;</span> <span class="op">}</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> strlen<span class="op">(</span>buf<span class="op">);</span> <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>j<span class="op">])</span> <span class="op">{</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> s<span class="op">[</span>j<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb137-5"><a href="#cb137-5" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb137-6"><a href="#cb137-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb137-7"><a href="#cb137-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb137-8"><a href="#cb137-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;0&quot;</span><span class="op">);</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb137-9"><a href="#cb137-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tmp<span class="op">[</span><span class="dv">12</span><span class="op">];</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">11</span><span class="op">;</span> tmp<span class="op">[</span><span class="dv">11</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb137-10"><a href="#cb137-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> i <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;0&#39;</span> <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span> n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb137-11"><a href="#cb137-11" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> tmp <span class="op">+</span> i<span class="op">);</span></span>
<span id="cb137-12"><a href="#cb137-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb137-13"><a href="#cb137-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-14"><a href="#cb137-14" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_op<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span> op<span class="op">,</span> <span class="dt">int</span> rd<span class="op">,</span> <span class="dt">int</span> rn<span class="op">,</span> <span class="dt">int</span> rm<span class="op">)</span> <span class="op">{</span></span>
<span id="cb137-15"><a href="#cb137-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;+&#39;</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;ADD R&quot;</span><span class="op">);</span></span>
<span id="cb137-16"><a href="#cb137-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;-&#39;</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;SUB R&quot;</span><span class="op">);</span></span>
<span id="cb137-17"><a href="#cb137-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;*&#39;</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MUL R&quot;</span><span class="op">);</span></span>
<span id="cb137-18"><a href="#cb137-18" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> rd<span class="op">);</span></span>
<span id="cb137-19"><a href="#cb137-19" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, R&quot;</span><span class="op">);</span></span>
<span id="cb137-20"><a href="#cb137-20" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> rn<span class="op">);</span></span>
<span id="cb137-21"><a href="#cb137-21" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, R&quot;</span><span class="op">);</span></span>
<span id="cb137-22"><a href="#cb137-22" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> rm<span class="op">);</span></span>
<span id="cb137-23"><a href="#cb137-23" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb137-24"><a href="#cb137-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb137-25"><a href="#cb137-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-26"><a href="#cb137-26" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> check<span class="op">(</span><span class="dt">char</span><span class="op">*</span> a<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb137-27"><a href="#cb137-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb137-28"><a href="#cb137-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">&amp;&amp;</span> b<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span> <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> b<span class="op">[</span>i<span class="op">])</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb137-29"><a href="#cb137-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a<span class="op">[</span>i<span class="op">]</span> <span class="op">==</span> b<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb137-30"><a href="#cb137-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb137-31"><a href="#cb137-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-32"><a href="#cb137-32" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb137-33"><a href="#cb137-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb137-34"><a href="#cb137-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb137-35"><a href="#cb137-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-36"><a href="#cb137-36" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb137-37"><a href="#cb137-37" aria-hidden="true" tabindex="-1"></a>    emit_op<span class="op">(</span>buf<span class="op">,</span> <span class="ch">&#39;+&#39;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb137-38"><a href="#cb137-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;ADD R0, R1, R2</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb137-39"><a href="#cb137-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-40"><a href="#cb137-40" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb137-41"><a href="#cb137-41" aria-hidden="true" tabindex="-1"></a>    emit_op<span class="op">(</span>buf<span class="op">,</span> <span class="ch">&#39;-&#39;</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb137-42"><a href="#cb137-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;SUB R0, R0, R1</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb137-43"><a href="#cb137-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-44"><a href="#cb137-44" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb137-45"><a href="#cb137-45" aria-hidden="true" tabindex="-1"></a>    emit_op<span class="op">(</span>buf<span class="op">,</span> <span class="ch">&#39;*&#39;</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb137-46"><a href="#cb137-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MUL R2, R3, R4</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb137-47"><a href="#cb137-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-48"><a href="#cb137-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb137-49"><a href="#cb137-49" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.10" id="Ã©mettre-pushpop"><span class="header-section-number">1.4.10</span> 3.3 Ã‰mettre PUSH/POP</h3>
<div class="sourceCode" id="cb138"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> strlen<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>i<span class="op">])</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="cf">return</span> i<span class="op">;</span> <span class="op">}</span></span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> strlen<span class="op">(</span>buf<span class="op">);</span> <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>j<span class="op">])</span> <span class="op">{</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> s<span class="op">[</span>j<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb138-5"><a href="#cb138-5" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb138-6"><a href="#cb138-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb138-7"><a href="#cb138-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb138-8"><a href="#cb138-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;0&quot;</span><span class="op">);</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb138-9"><a href="#cb138-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tmp<span class="op">[</span><span class="dv">12</span><span class="op">];</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">11</span><span class="op">;</span> tmp<span class="op">[</span><span class="dv">11</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb138-10"><a href="#cb138-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> i <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;0&#39;</span> <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span> n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb138-11"><a href="#cb138-11" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> tmp <span class="op">+</span> i<span class="op">);</span></span>
<span id="cb138-12"><a href="#cb138-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb138-13"><a href="#cb138-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-14"><a href="#cb138-14" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_push<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">)</span> <span class="op">{</span></span>
<span id="cb138-15"><a href="#cb138-15" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;STR R&quot;</span><span class="op">);</span></span>
<span id="cb138-16"><a href="#cb138-16" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span></span>
<span id="cb138-17"><a href="#cb138-17" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, [SP, #-4]!</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb138-18"><a href="#cb138-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb138-19"><a href="#cb138-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-20"><a href="#cb138-20" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_pop<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">)</span> <span class="op">{</span></span>
<span id="cb138-21"><a href="#cb138-21" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;LDR R&quot;</span><span class="op">);</span></span>
<span id="cb138-22"><a href="#cb138-22" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span></span>
<span id="cb138-23"><a href="#cb138-23" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, [SP], #4</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb138-24"><a href="#cb138-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb138-25"><a href="#cb138-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-26"><a href="#cb138-26" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> check<span class="op">(</span><span class="dt">char</span><span class="op">*</span> a<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb138-27"><a href="#cb138-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb138-28"><a href="#cb138-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">&amp;&amp;</span> b<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span> <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> b<span class="op">[</span>i<span class="op">])</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb138-29"><a href="#cb138-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a<span class="op">[</span>i<span class="op">]</span> <span class="op">==</span> b<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb138-30"><a href="#cb138-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb138-31"><a href="#cb138-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-32"><a href="#cb138-32" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb138-33"><a href="#cb138-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb138-34"><a href="#cb138-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb138-35"><a href="#cb138-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-36"><a href="#cb138-36" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb138-37"><a href="#cb138-37" aria-hidden="true" tabindex="-1"></a>    emit_push<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb138-38"><a href="#cb138-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;STR R0, [SP, #-4]!</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb138-39"><a href="#cb138-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-40"><a href="#cb138-40" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb138-41"><a href="#cb138-41" aria-hidden="true" tabindex="-1"></a>    emit_pop<span class="op">(</span>buf<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb138-42"><a href="#cb138-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;LDR R1, [SP], #4</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb138-43"><a href="#cb138-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-44"><a href="#cb138-44" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb138-45"><a href="#cb138-45" aria-hidden="true" tabindex="-1"></a>    emit_push<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb138-46"><a href="#cb138-46" aria-hidden="true" tabindex="-1"></a>    emit_pop<span class="op">(</span>buf<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb138-47"><a href="#cb138-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;STR R0, [SP, #-4]!</span><span class="sc">\\</span><span class="st">nLDR R1, [SP], #4</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb138-48"><a href="#cb138-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-49"><a href="#cb138-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb138-50"><a href="#cb138-50" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.11" id="compiler-une-constante"><span class="header-section-number">1.4.11</span> 4.1 Compiler une
Constante</h3>
<div class="sourceCode" id="cb139"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> strlen<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>i<span class="op">])</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="cf">return</span> i<span class="op">;</span> <span class="op">}</span></span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> strlen<span class="op">(</span>buf<span class="op">);</span> <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb139-4"><a href="#cb139-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>j<span class="op">])</span> <span class="op">{</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> s<span class="op">[</span>j<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb139-5"><a href="#cb139-5" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb139-6"><a href="#cb139-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb139-7"><a href="#cb139-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-8"><a href="#cb139-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;0&quot;</span><span class="op">);</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb139-9"><a href="#cb139-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tmp<span class="op">[</span><span class="dv">12</span><span class="op">];</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">11</span><span class="op">;</span> tmp<span class="op">[</span><span class="dv">11</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb139-10"><a href="#cb139-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> i <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;0&#39;</span> <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span> n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb139-11"><a href="#cb139-11" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> tmp <span class="op">+</span> i<span class="op">);</span></span>
<span id="cb139-12"><a href="#cb139-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb139-13"><a href="#cb139-13" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_mov<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">,</span> <span class="dt">int</span> val<span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-14"><a href="#cb139-14" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span></span>
<span id="cb139-15"><a href="#cb139-15" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, #&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> val<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb139-16"><a href="#cb139-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb139-17"><a href="#cb139-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-18"><a href="#cb139-18" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_digit<span class="op">(</span><span class="dt">char</span> c<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> c <span class="op">&gt;=</span> <span class="ch">&#39;0&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;9&#39;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb139-19"><a href="#cb139-19" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> input<span class="op">;</span></span>
<span id="cb139-20"><a href="#cb139-20" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> pos<span class="op">;</span></span>
<span id="cb139-21"><a href="#cb139-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-22"><a href="#cb139-22" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_num<span class="op">()</span> <span class="op">{</span></span>
<span id="cb139-23"><a href="#cb139-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> v <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb139-24"><a href="#cb139-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>is_digit<span class="op">(</span>input<span class="op">[</span>pos<span class="op">]))</span> <span class="op">{</span> v <span class="op">=</span> v <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> <span class="op">(</span>input<span class="op">[</span>pos<span class="op">]</span> <span class="op">-</span> <span class="ch">&#39;0&#39;</span><span class="op">);</span> pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb139-25"><a href="#cb139-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> v<span class="op">;</span></span>
<span id="cb139-26"><a href="#cb139-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb139-27"><a href="#cb139-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-28"><a href="#cb139-28" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> codegen_const<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-29"><a href="#cb139-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n <span class="op">=</span> parse_num<span class="op">();</span></span>
<span id="cb139-30"><a href="#cb139-30" aria-hidden="true" tabindex="-1"></a>    emit_mov<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> n<span class="op">);</span></span>
<span id="cb139-31"><a href="#cb139-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb139-32"><a href="#cb139-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-33"><a href="#cb139-33" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> check<span class="op">(</span><span class="dt">char</span><span class="op">*</span> a<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb139-34"><a href="#cb139-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb139-35"><a href="#cb139-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">&amp;&amp;</span> b<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span> <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> b<span class="op">[</span>i<span class="op">])</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb139-36"><a href="#cb139-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a<span class="op">[</span>i<span class="op">]</span> <span class="op">==</span> b<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb139-37"><a href="#cb139-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb139-38"><a href="#cb139-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-39"><a href="#cb139-39" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb139-40"><a href="#cb139-40" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb139-41"><a href="#cb139-41" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb139-42"><a href="#cb139-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-43"><a href="#cb139-43" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> input <span class="op">=</span> <span class="st">&quot;42&quot;</span><span class="op">;</span> pos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb139-44"><a href="#cb139-44" aria-hidden="true" tabindex="-1"></a>    codegen_const<span class="op">(</span>buf<span class="op">);</span></span>
<span id="cb139-45"><a href="#cb139-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R0, #42</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb139-46"><a href="#cb139-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-47"><a href="#cb139-47" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> input <span class="op">=</span> <span class="st">&quot;5&quot;</span><span class="op">;</span> pos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb139-48"><a href="#cb139-48" aria-hidden="true" tabindex="-1"></a>    codegen_const<span class="op">(</span>buf<span class="op">);</span></span>
<span id="cb139-49"><a href="#cb139-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R0, #5</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb139-50"><a href="#cb139-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-51"><a href="#cb139-51" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> input <span class="op">=</span> <span class="st">&quot;123&quot;</span><span class="op">;</span> pos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb139-52"><a href="#cb139-52" aria-hidden="true" tabindex="-1"></a>    codegen_const<span class="op">(</span>buf<span class="op">);</span></span>
<span id="cb139-53"><a href="#cb139-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R0, #123</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb139-54"><a href="#cb139-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-55"><a href="#cb139-55" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb139-56"><a href="#cb139-56" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.12" id="compiler-a-b"><span class="header-section-number">1.4.12</span> 4.2 Compiler a + b</h3>
<div class="sourceCode" id="cb140"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> strlen<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>i<span class="op">])</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="cf">return</span> i<span class="op">;</span> <span class="op">}</span></span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> strlen<span class="op">(</span>buf<span class="op">);</span> <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb140-4"><a href="#cb140-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>j<span class="op">])</span> <span class="op">{</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> s<span class="op">[</span>j<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb140-5"><a href="#cb140-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb140-6"><a href="#cb140-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb140-7"><a href="#cb140-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;0&quot;</span><span class="op">);</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb140-8"><a href="#cb140-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tmp<span class="op">[</span><span class="dv">12</span><span class="op">];</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">11</span><span class="op">;</span> tmp<span class="op">[</span><span class="dv">11</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb140-9"><a href="#cb140-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> i <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;0&#39;</span> <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span> n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb140-10"><a href="#cb140-10" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> tmp <span class="op">+</span> i<span class="op">);</span></span>
<span id="cb140-11"><a href="#cb140-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb140-12"><a href="#cb140-12" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_mov<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">,</span> <span class="dt">int</span> val<span class="op">)</span> <span class="op">{</span></span>
<span id="cb140-13"><a href="#cb140-13" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span></span>
<span id="cb140-14"><a href="#cb140-14" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, #&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> val<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb140-15"><a href="#cb140-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb140-16"><a href="#cb140-16" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_push<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">)</span> <span class="op">{</span></span>
<span id="cb140-17"><a href="#cb140-17" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;STR R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, [SP, #-4]!</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb140-18"><a href="#cb140-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb140-19"><a href="#cb140-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_pop<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">)</span> <span class="op">{</span></span>
<span id="cb140-20"><a href="#cb140-20" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;LDR R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, [SP], #4</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb140-21"><a href="#cb140-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb140-22"><a href="#cb140-22" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_op<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span> op<span class="op">,</span> <span class="dt">int</span> rd<span class="op">,</span> <span class="dt">int</span> rn<span class="op">,</span> <span class="dt">int</span> rm<span class="op">)</span> <span class="op">{</span></span>
<span id="cb140-23"><a href="#cb140-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;+&#39;</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;ADD R&quot;</span><span class="op">);</span></span>
<span id="cb140-24"><a href="#cb140-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;-&#39;</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;SUB R&quot;</span><span class="op">);</span></span>
<span id="cb140-25"><a href="#cb140-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;*&#39;</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MUL R&quot;</span><span class="op">);</span></span>
<span id="cb140-26"><a href="#cb140-26" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> rd<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> rn<span class="op">);</span></span>
<span id="cb140-27"><a href="#cb140-27" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> rm<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb140-28"><a href="#cb140-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb140-29"><a href="#cb140-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-30"><a href="#cb140-30" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_digit<span class="op">(</span><span class="dt">char</span> c<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> c <span class="op">&gt;=</span> <span class="ch">&#39;0&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;9&#39;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb140-31"><a href="#cb140-31" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> input<span class="op">;</span></span>
<span id="cb140-32"><a href="#cb140-32" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> pos<span class="op">;</span></span>
<span id="cb140-33"><a href="#cb140-33" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> skip<span class="op">()</span> <span class="op">{</span> <span class="cf">while</span> <span class="op">(</span>input<span class="op">[</span>pos<span class="op">]</span> <span class="op">==</span> <span class="ch">&#39; &#39;</span><span class="op">)</span> pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb140-34"><a href="#cb140-34" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> parse_num<span class="op">()</span> <span class="op">{</span></span>
<span id="cb140-35"><a href="#cb140-35" aria-hidden="true" tabindex="-1"></a>    skip<span class="op">();</span></span>
<span id="cb140-36"><a href="#cb140-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> v <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb140-37"><a href="#cb140-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>is_digit<span class="op">(</span>input<span class="op">[</span>pos<span class="op">]))</span> <span class="op">{</span> v <span class="op">=</span> v <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> <span class="op">(</span>input<span class="op">[</span>pos<span class="op">]</span> <span class="op">-</span> <span class="ch">&#39;0&#39;</span><span class="op">);</span> pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb140-38"><a href="#cb140-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> v<span class="op">;</span></span>
<span id="cb140-39"><a href="#cb140-39" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb140-40"><a href="#cb140-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-41"><a href="#cb140-41" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> codegen_binop<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">)</span> <span class="op">{</span></span>
<span id="cb140-42"><a href="#cb140-42" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a <span class="op">=</span> parse_num<span class="op">();</span></span>
<span id="cb140-43"><a href="#cb140-43" aria-hidden="true" tabindex="-1"></a>    emit_mov<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> a<span class="op">);</span></span>
<span id="cb140-44"><a href="#cb140-44" aria-hidden="true" tabindex="-1"></a>    emit_push<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb140-45"><a href="#cb140-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-46"><a href="#cb140-46" aria-hidden="true" tabindex="-1"></a>    skip<span class="op">();</span></span>
<span id="cb140-47"><a href="#cb140-47" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> op <span class="op">=</span> input<span class="op">[</span>pos<span class="op">];</span></span>
<span id="cb140-48"><a href="#cb140-48" aria-hidden="true" tabindex="-1"></a>    pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb140-49"><a href="#cb140-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-50"><a href="#cb140-50" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> b <span class="op">=</span> parse_num<span class="op">();</span></span>
<span id="cb140-51"><a href="#cb140-51" aria-hidden="true" tabindex="-1"></a>    emit_mov<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> b<span class="op">);</span></span>
<span id="cb140-52"><a href="#cb140-52" aria-hidden="true" tabindex="-1"></a>    emit_pop<span class="op">(</span>buf<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb140-53"><a href="#cb140-53" aria-hidden="true" tabindex="-1"></a>    emit_op<span class="op">(</span>buf<span class="op">,</span> op<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb140-54"><a href="#cb140-54" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb140-55"><a href="#cb140-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-56"><a href="#cb140-56" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> contains<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> sub<span class="op">)</span> <span class="op">{</span></span>
<span id="cb140-57"><a href="#cb140-57" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb140-58"><a href="#cb140-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>buf<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span></span>
<span id="cb140-59"><a href="#cb140-59" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb140-60"><a href="#cb140-60" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">&amp;&amp;</span> buf<span class="op">[</span>i<span class="op">+</span>j<span class="op">]</span> <span class="op">==</span> sub<span class="op">[</span>j<span class="op">])</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb140-61"><a href="#cb140-61" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb140-62"><a href="#cb140-62" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb140-63"><a href="#cb140-63" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb140-64"><a href="#cb140-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb140-65"><a href="#cb140-65" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb140-66"><a href="#cb140-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-67"><a href="#cb140-67" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb140-68"><a href="#cb140-68" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">200</span><span class="op">];</span></span>
<span id="cb140-69"><a href="#cb140-69" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb140-70"><a href="#cb140-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-71"><a href="#cb140-71" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> input <span class="op">=</span> <span class="st">&quot;3 + 5&quot;</span><span class="op">;</span> pos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb140-72"><a href="#cb140-72" aria-hidden="true" tabindex="-1"></a>    codegen_binop<span class="op">(</span>buf<span class="op">);</span></span>
<span id="cb140-73"><a href="#cb140-73" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R0, #3&quot;</span><span class="op">)</span> <span class="op">&amp;&amp;</span> contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R0, #5&quot;</span><span class="op">)</span> <span class="op">&amp;&amp;</span></span>
<span id="cb140-74"><a href="#cb140-74" aria-hidden="true" tabindex="-1"></a>        contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;ADD R0&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb140-75"><a href="#cb140-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-76"><a href="#cb140-76" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> input <span class="op">=</span> <span class="st">&quot;10 - 4&quot;</span><span class="op">;</span> pos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb140-77"><a href="#cb140-77" aria-hidden="true" tabindex="-1"></a>    codegen_binop<span class="op">(</span>buf<span class="op">);</span></span>
<span id="cb140-78"><a href="#cb140-78" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R0, #10&quot;</span><span class="op">)</span> <span class="op">&amp;&amp;</span> contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;SUB R0&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb140-79"><a href="#cb140-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-80"><a href="#cb140-80" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> input <span class="op">=</span> <span class="st">&quot;6 * 7&quot;</span><span class="op">;</span> pos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb140-81"><a href="#cb140-81" aria-hidden="true" tabindex="-1"></a>    codegen_binop<span class="op">(</span>buf<span class="op">);</span></span>
<span id="cb140-82"><a href="#cb140-82" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MUL R0&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb140-83"><a href="#cb140-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-84"><a href="#cb140-84" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb140-85"><a href="#cb140-85" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.13" id="compiler-expressions-complÃ¨tes"><span class="header-section-number">1.4.13</span> 4.3 Compiler Expressions
ComplÃ¨tes</h3>
<div class="sourceCode" id="cb141"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> strlen<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>i<span class="op">])</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="cf">return</span> i<span class="op">;</span> <span class="op">}</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> strlen<span class="op">(</span>buf<span class="op">);</span> <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>j<span class="op">])</span> <span class="op">{</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> s<span class="op">[</span>j<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb141-5"><a href="#cb141-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb141-6"><a href="#cb141-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-7"><a href="#cb141-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;0&quot;</span><span class="op">);</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb141-8"><a href="#cb141-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tmp<span class="op">[</span><span class="dv">12</span><span class="op">];</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">11</span><span class="op">;</span> tmp<span class="op">[</span><span class="dv">11</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb141-9"><a href="#cb141-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> i <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;0&#39;</span> <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span> n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb141-10"><a href="#cb141-10" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> tmp <span class="op">+</span> i<span class="op">);</span></span>
<span id="cb141-11"><a href="#cb141-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb141-12"><a href="#cb141-12" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_mov<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">,</span> <span class="dt">int</span> val<span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-13"><a href="#cb141-13" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span></span>
<span id="cb141-14"><a href="#cb141-14" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, #&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> val<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb141-15"><a href="#cb141-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb141-16"><a href="#cb141-16" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_push<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-17"><a href="#cb141-17" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;STR R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, [SP, #-4]!</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb141-18"><a href="#cb141-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb141-19"><a href="#cb141-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_pop<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-20"><a href="#cb141-20" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;LDR R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, [SP], #4</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb141-21"><a href="#cb141-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb141-22"><a href="#cb141-22" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_op<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span> op<span class="op">,</span> <span class="dt">int</span> rd<span class="op">,</span> <span class="dt">int</span> rn<span class="op">,</span> <span class="dt">int</span> rm<span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-23"><a href="#cb141-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;+&#39;</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;ADD R&quot;</span><span class="op">);</span></span>
<span id="cb141-24"><a href="#cb141-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;-&#39;</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;SUB R&quot;</span><span class="op">);</span></span>
<span id="cb141-25"><a href="#cb141-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;*&#39;</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MUL R&quot;</span><span class="op">);</span></span>
<span id="cb141-26"><a href="#cb141-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;/&#39;</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;SDIV R&quot;</span><span class="op">);</span></span>
<span id="cb141-27"><a href="#cb141-27" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> rd<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> rn<span class="op">);</span></span>
<span id="cb141-28"><a href="#cb141-28" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> rm<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb141-29"><a href="#cb141-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb141-30"><a href="#cb141-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-31"><a href="#cb141-31" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_digit<span class="op">(</span><span class="dt">char</span> c<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> c <span class="op">&gt;=</span> <span class="ch">&#39;0&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;9&#39;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb141-32"><a href="#cb141-32" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> input<span class="op">;</span></span>
<span id="cb141-33"><a href="#cb141-33" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> pos<span class="op">;</span></span>
<span id="cb141-34"><a href="#cb141-34" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> out<span class="op">;</span></span>
<span id="cb141-35"><a href="#cb141-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-36"><a href="#cb141-36" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> skip<span class="op">()</span> <span class="op">{</span> <span class="cf">while</span> <span class="op">(</span>input<span class="op">[</span>pos<span class="op">]</span> <span class="op">==</span> <span class="ch">&#39; &#39;</span><span class="op">)</span> pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb141-37"><a href="#cb141-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-38"><a href="#cb141-38" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> codegen_expr<span class="op">();</span></span>
<span id="cb141-39"><a href="#cb141-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-40"><a href="#cb141-40" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> codegen_factor<span class="op">()</span> <span class="op">{</span></span>
<span id="cb141-41"><a href="#cb141-41" aria-hidden="true" tabindex="-1"></a>    skip<span class="op">();</span></span>
<span id="cb141-42"><a href="#cb141-42" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> v <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb141-43"><a href="#cb141-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>is_digit<span class="op">(</span>input<span class="op">[</span>pos<span class="op">]))</span> <span class="op">{</span> v <span class="op">=</span> v <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> <span class="op">(</span>input<span class="op">[</span>pos<span class="op">]</span> <span class="op">-</span> <span class="ch">&#39;0&#39;</span><span class="op">);</span> pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb141-44"><a href="#cb141-44" aria-hidden="true" tabindex="-1"></a>    emit_mov<span class="op">(</span>out<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> v<span class="op">);</span></span>
<span id="cb141-45"><a href="#cb141-45" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb141-46"><a href="#cb141-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-47"><a href="#cb141-47" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> codegen_term<span class="op">()</span> <span class="op">{</span></span>
<span id="cb141-48"><a href="#cb141-48" aria-hidden="true" tabindex="-1"></a>    codegen_factor<span class="op">();</span></span>
<span id="cb141-49"><a href="#cb141-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-50"><a href="#cb141-50" aria-hidden="true" tabindex="-1"></a>        skip<span class="op">();</span></span>
<span id="cb141-51"><a href="#cb141-51" aria-hidden="true" tabindex="-1"></a>        <span class="dt">char</span> op <span class="op">=</span> input<span class="op">[</span>pos<span class="op">];</span></span>
<span id="cb141-52"><a href="#cb141-52" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op <span class="op">!=</span> <span class="ch">&#39;*&#39;</span> <span class="op">&amp;&amp;</span> op <span class="op">!=</span> <span class="ch">&#39;/&#39;</span><span class="op">)</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb141-53"><a href="#cb141-53" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb141-54"><a href="#cb141-54" aria-hidden="true" tabindex="-1"></a>        emit_push<span class="op">(</span>out<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb141-55"><a href="#cb141-55" aria-hidden="true" tabindex="-1"></a>        codegen_factor<span class="op">();</span></span>
<span id="cb141-56"><a href="#cb141-56" aria-hidden="true" tabindex="-1"></a>        emit_pop<span class="op">(</span>out<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb141-57"><a href="#cb141-57" aria-hidden="true" tabindex="-1"></a>        emit_op<span class="op">(</span>out<span class="op">,</span> op<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb141-58"><a href="#cb141-58" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb141-59"><a href="#cb141-59" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb141-60"><a href="#cb141-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-61"><a href="#cb141-61" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> codegen_expr<span class="op">()</span> <span class="op">{</span></span>
<span id="cb141-62"><a href="#cb141-62" aria-hidden="true" tabindex="-1"></a>    codegen_term<span class="op">();</span></span>
<span id="cb141-63"><a href="#cb141-63" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-64"><a href="#cb141-64" aria-hidden="true" tabindex="-1"></a>        skip<span class="op">();</span></span>
<span id="cb141-65"><a href="#cb141-65" aria-hidden="true" tabindex="-1"></a>        <span class="dt">char</span> op <span class="op">=</span> input<span class="op">[</span>pos<span class="op">];</span></span>
<span id="cb141-66"><a href="#cb141-66" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op <span class="op">!=</span> <span class="ch">&#39;+&#39;</span> <span class="op">&amp;&amp;</span> op <span class="op">!=</span> <span class="ch">&#39;-&#39;</span><span class="op">)</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb141-67"><a href="#cb141-67" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb141-68"><a href="#cb141-68" aria-hidden="true" tabindex="-1"></a>        emit_push<span class="op">(</span>out<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb141-69"><a href="#cb141-69" aria-hidden="true" tabindex="-1"></a>        codegen_term<span class="op">();</span></span>
<span id="cb141-70"><a href="#cb141-70" aria-hidden="true" tabindex="-1"></a>        emit_pop<span class="op">(</span>out<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb141-71"><a href="#cb141-71" aria-hidden="true" tabindex="-1"></a>        emit_op<span class="op">(</span>out<span class="op">,</span> op<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb141-72"><a href="#cb141-72" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb141-73"><a href="#cb141-73" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb141-74"><a href="#cb141-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-75"><a href="#cb141-75" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> compile<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> src<span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-76"><a href="#cb141-76" aria-hidden="true" tabindex="-1"></a>    out <span class="op">=</span> buf<span class="op">;</span></span>
<span id="cb141-77"><a href="#cb141-77" aria-hidden="true" tabindex="-1"></a>    input <span class="op">=</span> src<span class="op">;</span></span>
<span id="cb141-78"><a href="#cb141-78" aria-hidden="true" tabindex="-1"></a>    pos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb141-79"><a href="#cb141-79" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb141-80"><a href="#cb141-80" aria-hidden="true" tabindex="-1"></a>    codegen_expr<span class="op">();</span></span>
<span id="cb141-81"><a href="#cb141-81" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb141-82"><a href="#cb141-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-83"><a href="#cb141-83" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> contains<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> sub<span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-84"><a href="#cb141-84" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb141-85"><a href="#cb141-85" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>buf<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span></span>
<span id="cb141-86"><a href="#cb141-86" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">&amp;&amp;</span> buf<span class="op">[</span>i<span class="op">+</span>j<span class="op">]</span> <span class="op">==</span> sub<span class="op">[</span>j<span class="op">])</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb141-87"><a href="#cb141-87" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb141-88"><a href="#cb141-88" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb141-89"><a href="#cb141-89" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb141-90"><a href="#cb141-90" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb141-91"><a href="#cb141-91" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb141-92"><a href="#cb141-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-93"><a href="#cb141-93" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> count<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> sub<span class="op">)</span> <span class="op">{</span></span>
<span id="cb141-94"><a href="#cb141-94" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> c <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb141-95"><a href="#cb141-95" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>buf<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span></span>
<span id="cb141-96"><a href="#cb141-96" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">&amp;&amp;</span> buf<span class="op">[</span>i<span class="op">+</span>j<span class="op">]</span> <span class="op">==</span> sub<span class="op">[</span>j<span class="op">])</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb141-97"><a href="#cb141-97" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> c <span class="op">=</span> c <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb141-98"><a href="#cb141-98" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb141-99"><a href="#cb141-99" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb141-100"><a href="#cb141-100" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> c<span class="op">;</span></span>
<span id="cb141-101"><a href="#cb141-101" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb141-102"><a href="#cb141-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-103"><a href="#cb141-103" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb141-104"><a href="#cb141-104" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">500</span><span class="op">];</span></span>
<span id="cb141-105"><a href="#cb141-105" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb141-106"><a href="#cb141-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-107"><a href="#cb141-107" aria-hidden="true" tabindex="-1"></a>    compile<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;42&quot;</span><span class="op">);</span></span>
<span id="cb141-108"><a href="#cb141-108" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R0, #42&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb141-109"><a href="#cb141-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-110"><a href="#cb141-110" aria-hidden="true" tabindex="-1"></a>    compile<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;3 + 5&quot;</span><span class="op">);</span></span>
<span id="cb141-111"><a href="#cb141-111" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;ADD R0&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb141-112"><a href="#cb141-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-113"><a href="#cb141-113" aria-hidden="true" tabindex="-1"></a>    compile<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;2 + 3 * 4&quot;</span><span class="op">);</span></span>
<span id="cb141-114"><a href="#cb141-114" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MUL R0&quot;</span><span class="op">)</span> <span class="op">&amp;&amp;</span> contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;ADD R0&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb141-115"><a href="#cb141-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-116"><a href="#cb141-116" aria-hidden="true" tabindex="-1"></a>    compile<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;1 + 2 + 3&quot;</span><span class="op">);</span></span>
<span id="cb141-117"><a href="#cb141-117" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>count<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;ADD R0&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb141-118"><a href="#cb141-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-119"><a href="#cb141-119" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb141-120"><a href="#cb141-120" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.14" id="gÃ©nÃ©rer-des-labels"><span class="header-section-number">1.4.14</span> 5.1 GÃ©nÃ©rer des Labels</h3>
<div class="sourceCode" id="cb142"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> strlen<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>i<span class="op">])</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="cf">return</span> i<span class="op">;</span> <span class="op">}</span></span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> strlen<span class="op">(</span>buf<span class="op">);</span> <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb142-4"><a href="#cb142-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>j<span class="op">])</span> <span class="op">{</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> s<span class="op">[</span>j<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb142-5"><a href="#cb142-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb142-6"><a href="#cb142-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb142-7"><a href="#cb142-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;0&quot;</span><span class="op">);</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb142-8"><a href="#cb142-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tmp<span class="op">[</span><span class="dv">12</span><span class="op">];</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">11</span><span class="op">;</span> tmp<span class="op">[</span><span class="dv">11</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb142-9"><a href="#cb142-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> i <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;0&#39;</span> <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span> n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb142-10"><a href="#cb142-10" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> tmp <span class="op">+</span> i<span class="op">);</span></span>
<span id="cb142-11"><a href="#cb142-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb142-12"><a href="#cb142-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-13"><a href="#cb142-13" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_label<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> prefix<span class="op">,</span> <span class="dt">int</span> num<span class="op">)</span> <span class="op">{</span></span>
<span id="cb142-14"><a href="#cb142-14" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;.L&quot;</span><span class="op">);</span></span>
<span id="cb142-15"><a href="#cb142-15" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> prefix<span class="op">);</span></span>
<span id="cb142-16"><a href="#cb142-16" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;_&quot;</span><span class="op">);</span></span>
<span id="cb142-17"><a href="#cb142-17" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> num<span class="op">);</span></span>
<span id="cb142-18"><a href="#cb142-18" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;:</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb142-19"><a href="#cb142-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb142-20"><a href="#cb142-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-21"><a href="#cb142-21" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_branch<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> cond<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> prefix<span class="op">,</span> <span class="dt">int</span> num<span class="op">)</span> <span class="op">{</span></span>
<span id="cb142-22"><a href="#cb142-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>cond <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;B .L&quot;</span><span class="op">);</span></span>
<span id="cb142-23"><a href="#cb142-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>cond <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BEQ .L&quot;</span><span class="op">);</span></span>
<span id="cb142-24"><a href="#cb142-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>cond <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BNE .L&quot;</span><span class="op">);</span></span>
<span id="cb142-25"><a href="#cb142-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>cond <span class="op">==</span> <span class="dv">3</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BLT .L&quot;</span><span class="op">);</span></span>
<span id="cb142-26"><a href="#cb142-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>cond <span class="op">==</span> <span class="dv">4</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BGE .L&quot;</span><span class="op">);</span></span>
<span id="cb142-27"><a href="#cb142-27" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> prefix<span class="op">);</span></span>
<span id="cb142-28"><a href="#cb142-28" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;_&quot;</span><span class="op">);</span></span>
<span id="cb142-29"><a href="#cb142-29" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> num<span class="op">);</span></span>
<span id="cb142-30"><a href="#cb142-30" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb142-31"><a href="#cb142-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb142-32"><a href="#cb142-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-33"><a href="#cb142-33" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> check<span class="op">(</span><span class="dt">char</span><span class="op">*</span> a<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb142-34"><a href="#cb142-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb142-35"><a href="#cb142-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">&amp;&amp;</span> b<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span> <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> b<span class="op">[</span>i<span class="op">])</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb142-36"><a href="#cb142-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a<span class="op">[</span>i<span class="op">]</span> <span class="op">==</span> b<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb142-37"><a href="#cb142-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb142-38"><a href="#cb142-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-39"><a href="#cb142-39" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb142-40"><a href="#cb142-40" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb142-41"><a href="#cb142-41" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb142-42"><a href="#cb142-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-43"><a href="#cb142-43" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb142-44"><a href="#cb142-44" aria-hidden="true" tabindex="-1"></a>    emit_label<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;if&quot;</span><span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb142-45"><a href="#cb142-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;.Lif_1:</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb142-46"><a href="#cb142-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-47"><a href="#cb142-47" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb142-48"><a href="#cb142-48" aria-hidden="true" tabindex="-1"></a>    emit_branch<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="st">&quot;end&quot;</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb142-49"><a href="#cb142-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;B .Lend_2</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb142-50"><a href="#cb142-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-51"><a href="#cb142-51" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb142-52"><a href="#cb142-52" aria-hidden="true" tabindex="-1"></a>    emit_branch<span class="op">(</span>buf<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="st">&quot;else&quot;</span><span class="op">,</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb142-53"><a href="#cb142-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BEQ .Lelse_3</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb142-54"><a href="#cb142-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-55"><a href="#cb142-55" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb142-56"><a href="#cb142-56" aria-hidden="true" tabindex="-1"></a>    emit_branch<span class="op">(</span>buf<span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="st">&quot;loop&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb142-57"><a href="#cb142-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BLT .Lloop_0</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb142-58"><a href="#cb142-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-59"><a href="#cb142-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb142-60"><a href="#cb142-60" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.15" id="gÃ©nÃ©rer-comparaisons"><span class="header-section-number">1.4.15</span> 5.2 GÃ©nÃ©rer
Comparaisons</h3>
<div class="sourceCode" id="cb143"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> strlen<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>i<span class="op">])</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="cf">return</span> i<span class="op">;</span> <span class="op">}</span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> strlen<span class="op">(</span>buf<span class="op">);</span> <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb143-4"><a href="#cb143-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>j<span class="op">])</span> <span class="op">{</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> s<span class="op">[</span>j<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb143-5"><a href="#cb143-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb143-6"><a href="#cb143-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb143-7"><a href="#cb143-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;0&quot;</span><span class="op">);</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb143-8"><a href="#cb143-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tmp<span class="op">[</span><span class="dv">12</span><span class="op">];</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">11</span><span class="op">;</span> tmp<span class="op">[</span><span class="dv">11</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb143-9"><a href="#cb143-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> i <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;0&#39;</span> <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span> n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb143-10"><a href="#cb143-10" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> tmp <span class="op">+</span> i<span class="op">);</span></span>
<span id="cb143-11"><a href="#cb143-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb143-12"><a href="#cb143-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-13"><a href="#cb143-13" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_cmp<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> rn<span class="op">,</span> <span class="dt">int</span> rm<span class="op">)</span> <span class="op">{</span></span>
<span id="cb143-14"><a href="#cb143-14" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;CMP R&quot;</span><span class="op">);</span></span>
<span id="cb143-15"><a href="#cb143-15" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> rn<span class="op">);</span></span>
<span id="cb143-16"><a href="#cb143-16" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, R&quot;</span><span class="op">);</span></span>
<span id="cb143-17"><a href="#cb143-17" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> rm<span class="op">);</span></span>
<span id="cb143-18"><a href="#cb143-18" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb143-19"><a href="#cb143-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb143-20"><a href="#cb143-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-21"><a href="#cb143-21" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> get_branch_cond<span class="op">(</span><span class="dt">char</span> op<span class="op">)</span> <span class="op">{</span></span>
<span id="cb143-22"><a href="#cb143-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;&lt;&#39;</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">4</span><span class="op">;</span>  <span class="co">// BGE</span></span>
<span id="cb143-23"><a href="#cb143-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;&gt;&#39;</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">3</span><span class="op">;</span>  <span class="co">// BLT (simplifiÃ©, &gt;= aussi)</span></span>
<span id="cb143-24"><a href="#cb143-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;=&#39;</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">2</span><span class="op">;</span>  <span class="co">// BNE</span></span>
<span id="cb143-25"><a href="#cb143-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;!&#39;</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span>  <span class="co">// BEQ</span></span>
<span id="cb143-26"><a href="#cb143-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb143-27"><a href="#cb143-27" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb143-28"><a href="#cb143-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-29"><a href="#cb143-29" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> check<span class="op">(</span><span class="dt">char</span><span class="op">*</span> a<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb143-30"><a href="#cb143-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb143-31"><a href="#cb143-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">&amp;&amp;</span> b<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span> <span class="cf">if</span> <span class="op">(</span>a<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> b<span class="op">[</span>i<span class="op">])</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb143-32"><a href="#cb143-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a<span class="op">[</span>i<span class="op">]</span> <span class="op">==</span> b<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb143-33"><a href="#cb143-33" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb143-34"><a href="#cb143-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-35"><a href="#cb143-35" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb143-36"><a href="#cb143-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb143-37"><a href="#cb143-37" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb143-38"><a href="#cb143-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-39"><a href="#cb143-39" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb143-40"><a href="#cb143-40" aria-hidden="true" tabindex="-1"></a>    emit_cmp<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb143-41"><a href="#cb143-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>check<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;CMP R0, R1</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb143-42"><a href="#cb143-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-43"><a href="#cb143-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>get_branch_cond<span class="op">(</span><span class="ch">&#39;&lt;&#39;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">4</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb143-44"><a href="#cb143-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>get_branch_cond<span class="op">(</span><span class="ch">&#39;=&#39;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb143-45"><a href="#cb143-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>get_branch_cond<span class="op">(</span><span class="ch">&#39;!&#39;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb143-46"><a href="#cb143-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>get_branch_cond<span class="op">(</span><span class="ch">&#39;&gt;&#39;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">3</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb143-47"><a href="#cb143-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-48"><a href="#cb143-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb143-49"><a href="#cb143-49" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.16" id="compiler-ifelse"><span class="header-section-number">1.4.16</span> 5.3 Compiler if/else</h3>
<div class="sourceCode" id="cb144"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> strlen<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>i<span class="op">])</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="cf">return</span> i<span class="op">;</span> <span class="op">}</span></span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb144-3"><a href="#cb144-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> strlen<span class="op">(</span>buf<span class="op">);</span> <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb144-4"><a href="#cb144-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>j<span class="op">])</span> <span class="op">{</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> s<span class="op">[</span>j<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb144-5"><a href="#cb144-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb144-6"><a href="#cb144-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb144-7"><a href="#cb144-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;0&quot;</span><span class="op">);</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb144-8"><a href="#cb144-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tmp<span class="op">[</span><span class="dv">12</span><span class="op">];</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">11</span><span class="op">;</span> tmp<span class="op">[</span><span class="dv">11</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb144-9"><a href="#cb144-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> i <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;0&#39;</span> <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span> n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb144-10"><a href="#cb144-10" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> tmp <span class="op">+</span> i<span class="op">);</span></span>
<span id="cb144-11"><a href="#cb144-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb144-12"><a href="#cb144-12" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_cmp<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> rn<span class="op">,</span> <span class="dt">int</span> rm<span class="op">)</span> <span class="op">{</span></span>
<span id="cb144-13"><a href="#cb144-13" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;CMP R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> rn<span class="op">);</span></span>
<span id="cb144-14"><a href="#cb144-14" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> rm<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb144-15"><a href="#cb144-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb144-16"><a href="#cb144-16" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_label<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> prefix<span class="op">,</span> <span class="dt">int</span> num<span class="op">)</span> <span class="op">{</span></span>
<span id="cb144-17"><a href="#cb144-17" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;.L&quot;</span><span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> prefix<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;_&quot;</span><span class="op">);</span></span>
<span id="cb144-18"><a href="#cb144-18" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> num<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;:</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb144-19"><a href="#cb144-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb144-20"><a href="#cb144-20" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_branch<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> cond<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> prefix<span class="op">,</span> <span class="dt">int</span> num<span class="op">)</span> <span class="op">{</span></span>
<span id="cb144-21"><a href="#cb144-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>cond <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;B .L&quot;</span><span class="op">);</span></span>
<span id="cb144-22"><a href="#cb144-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>cond <span class="op">==</span> <span class="dv">4</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BGE .L&quot;</span><span class="op">);</span></span>
<span id="cb144-23"><a href="#cb144-23" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> prefix<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;_&quot;</span><span class="op">);</span></span>
<span id="cb144-24"><a href="#cb144-24" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> num<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb144-25"><a href="#cb144-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb144-26"><a href="#cb144-26" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_mov<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">,</span> <span class="dt">int</span> val<span class="op">)</span> <span class="op">{</span></span>
<span id="cb144-27"><a href="#cb144-27" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span></span>
<span id="cb144-28"><a href="#cb144-28" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, #&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> val<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb144-29"><a href="#cb144-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb144-30"><a href="#cb144-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-31"><a href="#cb144-31" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> codegen_if<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb144-32"><a href="#cb144-32" aria-hidden="true" tabindex="-1"></a>    emit_cmp<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb144-33"><a href="#cb144-33" aria-hidden="true" tabindex="-1"></a>    emit_branch<span class="op">(</span>buf<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="st">&quot;else&quot;</span><span class="op">,</span> n<span class="op">);</span></span>
<span id="cb144-34"><a href="#cb144-34" aria-hidden="true" tabindex="-1"></a>    emit_mov<span class="op">(</span>buf<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb144-35"><a href="#cb144-35" aria-hidden="true" tabindex="-1"></a>    emit_branch<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="st">&quot;end&quot;</span><span class="op">,</span> n<span class="op">);</span></span>
<span id="cb144-36"><a href="#cb144-36" aria-hidden="true" tabindex="-1"></a>    emit_label<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;else&quot;</span><span class="op">,</span> n<span class="op">);</span></span>
<span id="cb144-37"><a href="#cb144-37" aria-hidden="true" tabindex="-1"></a>    emit_mov<span class="op">(</span>buf<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb144-38"><a href="#cb144-38" aria-hidden="true" tabindex="-1"></a>    emit_label<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;end&quot;</span><span class="op">,</span> n<span class="op">);</span></span>
<span id="cb144-39"><a href="#cb144-39" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb144-40"><a href="#cb144-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-41"><a href="#cb144-41" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> contains<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> sub<span class="op">)</span> <span class="op">{</span></span>
<span id="cb144-42"><a href="#cb144-42" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb144-43"><a href="#cb144-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>buf<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span></span>
<span id="cb144-44"><a href="#cb144-44" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">&amp;&amp;</span> buf<span class="op">[</span>i<span class="op">+</span>j<span class="op">]</span> <span class="op">==</span> sub<span class="op">[</span>j<span class="op">])</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb144-45"><a href="#cb144-45" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb144-46"><a href="#cb144-46" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb144-47"><a href="#cb144-47" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb144-48"><a href="#cb144-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb144-49"><a href="#cb144-49" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb144-50"><a href="#cb144-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-51"><a href="#cb144-51" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb144-52"><a href="#cb144-52" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">300</span><span class="op">];</span></span>
<span id="cb144-53"><a href="#cb144-53" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb144-54"><a href="#cb144-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-55"><a href="#cb144-55" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb144-56"><a href="#cb144-56" aria-hidden="true" tabindex="-1"></a>    codegen_if<span class="op">(</span>buf<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb144-57"><a href="#cb144-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-58"><a href="#cb144-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;CMP R0, R1&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb144-59"><a href="#cb144-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BGE .Lelse_1&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb144-60"><a href="#cb144-60" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;B .Lend_1&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb144-61"><a href="#cb144-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;.Lelse_1:&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb144-62"><a href="#cb144-62" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;.Lend_1:&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb144-63"><a href="#cb144-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-64"><a href="#cb144-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb144-65"><a href="#cb144-65" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.17" id="compiler-while"><span class="header-section-number">1.4.17</span> 5.4 Compiler while</h3>
<div class="sourceCode" id="cb145"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> strlen<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>i<span class="op">])</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="cf">return</span> i<span class="op">;</span> <span class="op">}</span></span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> strlen<span class="op">(</span>buf<span class="op">);</span> <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb145-4"><a href="#cb145-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>j<span class="op">])</span> <span class="op">{</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> s<span class="op">[</span>j<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb145-5"><a href="#cb145-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb145-6"><a href="#cb145-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb145-7"><a href="#cb145-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;0&quot;</span><span class="op">);</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb145-8"><a href="#cb145-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tmp<span class="op">[</span><span class="dv">12</span><span class="op">];</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">11</span><span class="op">;</span> tmp<span class="op">[</span><span class="dv">11</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb145-9"><a href="#cb145-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> i <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;0&#39;</span> <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span> n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb145-10"><a href="#cb145-10" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> tmp <span class="op">+</span> i<span class="op">);</span></span>
<span id="cb145-11"><a href="#cb145-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb145-12"><a href="#cb145-12" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_cmp<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> rn<span class="op">,</span> <span class="dt">int</span> rm<span class="op">)</span> <span class="op">{</span></span>
<span id="cb145-13"><a href="#cb145-13" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;CMP R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> rn<span class="op">);</span></span>
<span id="cb145-14"><a href="#cb145-14" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> rm<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb145-15"><a href="#cb145-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb145-16"><a href="#cb145-16" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_label<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> prefix<span class="op">,</span> <span class="dt">int</span> num<span class="op">)</span> <span class="op">{</span></span>
<span id="cb145-17"><a href="#cb145-17" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;.L&quot;</span><span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> prefix<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;_&quot;</span><span class="op">);</span></span>
<span id="cb145-18"><a href="#cb145-18" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> num<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;:</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb145-19"><a href="#cb145-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb145-20"><a href="#cb145-20" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_branch<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> cond<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> prefix<span class="op">,</span> <span class="dt">int</span> num<span class="op">)</span> <span class="op">{</span></span>
<span id="cb145-21"><a href="#cb145-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>cond <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;B .L&quot;</span><span class="op">);</span></span>
<span id="cb145-22"><a href="#cb145-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>cond <span class="op">==</span> <span class="dv">4</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BGE .L&quot;</span><span class="op">);</span></span>
<span id="cb145-23"><a href="#cb145-23" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> prefix<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;_&quot;</span><span class="op">);</span></span>
<span id="cb145-24"><a href="#cb145-24" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> num<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb145-25"><a href="#cb145-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb145-26"><a href="#cb145-26" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_add_imm<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> rd<span class="op">,</span> <span class="dt">int</span> rn<span class="op">,</span> <span class="dt">int</span> imm<span class="op">)</span> <span class="op">{</span></span>
<span id="cb145-27"><a href="#cb145-27" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;ADD R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> rd<span class="op">);</span></span>
<span id="cb145-28"><a href="#cb145-28" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> rn<span class="op">);</span></span>
<span id="cb145-29"><a href="#cb145-29" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, #&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> imm<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb145-30"><a href="#cb145-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb145-31"><a href="#cb145-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-32"><a href="#cb145-32" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> codegen_while<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb145-33"><a href="#cb145-33" aria-hidden="true" tabindex="-1"></a>    emit_label<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;while&quot;</span><span class="op">,</span> n<span class="op">);</span></span>
<span id="cb145-34"><a href="#cb145-34" aria-hidden="true" tabindex="-1"></a>    emit_cmp<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb145-35"><a href="#cb145-35" aria-hidden="true" tabindex="-1"></a>    emit_branch<span class="op">(</span>buf<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="st">&quot;end&quot;</span><span class="op">,</span> n<span class="op">);</span></span>
<span id="cb145-36"><a href="#cb145-36" aria-hidden="true" tabindex="-1"></a>    emit_add_imm<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb145-37"><a href="#cb145-37" aria-hidden="true" tabindex="-1"></a>    emit_branch<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="st">&quot;while&quot;</span><span class="op">,</span> n<span class="op">);</span></span>
<span id="cb145-38"><a href="#cb145-38" aria-hidden="true" tabindex="-1"></a>    emit_label<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;end&quot;</span><span class="op">,</span> n<span class="op">);</span></span>
<span id="cb145-39"><a href="#cb145-39" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb145-40"><a href="#cb145-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-41"><a href="#cb145-41" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> contains<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> sub<span class="op">)</span> <span class="op">{</span></span>
<span id="cb145-42"><a href="#cb145-42" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb145-43"><a href="#cb145-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>buf<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span></span>
<span id="cb145-44"><a href="#cb145-44" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">&amp;&amp;</span> buf<span class="op">[</span>i<span class="op">+</span>j<span class="op">]</span> <span class="op">==</span> sub<span class="op">[</span>j<span class="op">])</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb145-45"><a href="#cb145-45" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb145-46"><a href="#cb145-46" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb145-47"><a href="#cb145-47" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb145-48"><a href="#cb145-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb145-49"><a href="#cb145-49" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb145-50"><a href="#cb145-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-51"><a href="#cb145-51" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb145-52"><a href="#cb145-52" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">300</span><span class="op">];</span></span>
<span id="cb145-53"><a href="#cb145-53" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb145-54"><a href="#cb145-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-55"><a href="#cb145-55" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb145-56"><a href="#cb145-56" aria-hidden="true" tabindex="-1"></a>    codegen_while<span class="op">(</span>buf<span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb145-57"><a href="#cb145-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-58"><a href="#cb145-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;.Lwhile_2:&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb145-59"><a href="#cb145-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;CMP R0, R1&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb145-60"><a href="#cb145-60" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BGE .Lend_2&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb145-61"><a href="#cb145-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;B .Lwhile_2&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb145-62"><a href="#cb145-62" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;.Lend_2:&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb145-63"><a href="#cb145-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-64"><a href="#cb145-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb145-65"><a href="#cb145-65" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.18" id="prologue-et-Ã©pilogue"><span class="header-section-number">1.4.18</span> 6.1 Prologue et
Ã‰pilogue</h3>
<div class="sourceCode" id="cb146"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> strlen<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>i<span class="op">])</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="cf">return</span> i<span class="op">;</span> <span class="op">}</span></span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> strlen<span class="op">(</span>buf<span class="op">);</span> <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb146-4"><a href="#cb146-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>j<span class="op">])</span> <span class="op">{</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> s<span class="op">[</span>j<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb146-5"><a href="#cb146-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb146-6"><a href="#cb146-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-7"><a href="#cb146-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_prologue<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> name<span class="op">)</span> <span class="op">{</span></span>
<span id="cb146-8"><a href="#cb146-8" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> name<span class="op">);</span></span>
<span id="cb146-9"><a href="#cb146-9" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;:</span><span class="sc">\\</span><span class="st">n    STR LR, [SP, #-4]!</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb146-10"><a href="#cb146-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb146-11"><a href="#cb146-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-12"><a href="#cb146-12" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_epilogue<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">)</span> <span class="op">{</span></span>
<span id="cb146-13"><a href="#cb146-13" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;    LDR LR, [SP], #4</span><span class="sc">\\</span><span class="st">n    BX LR</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb146-14"><a href="#cb146-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb146-15"><a href="#cb146-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-16"><a href="#cb146-16" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> contains<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> sub<span class="op">)</span> <span class="op">{</span></span>
<span id="cb146-17"><a href="#cb146-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb146-18"><a href="#cb146-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>buf<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span></span>
<span id="cb146-19"><a href="#cb146-19" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">&amp;&amp;</span> buf<span class="op">[</span>i<span class="op">+</span>j<span class="op">]</span> <span class="op">==</span> sub<span class="op">[</span>j<span class="op">])</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb146-20"><a href="#cb146-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb146-21"><a href="#cb146-21" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb146-22"><a href="#cb146-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb146-23"><a href="#cb146-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb146-24"><a href="#cb146-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb146-25"><a href="#cb146-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-26"><a href="#cb146-26" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb146-27"><a href="#cb146-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">200</span><span class="op">];</span></span>
<span id="cb146-28"><a href="#cb146-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb146-29"><a href="#cb146-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-30"><a href="#cb146-30" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb146-31"><a href="#cb146-31" aria-hidden="true" tabindex="-1"></a>    emit_prologue<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;add&quot;</span><span class="op">);</span></span>
<span id="cb146-32"><a href="#cb146-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;add:&quot;</span><span class="op">)</span> <span class="op">&amp;&amp;</span> contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;STR LR&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb146-33"><a href="#cb146-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-34"><a href="#cb146-34" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb146-35"><a href="#cb146-35" aria-hidden="true" tabindex="-1"></a>    emit_epilogue<span class="op">(</span>buf<span class="op">);</span></span>
<span id="cb146-36"><a href="#cb146-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;LDR LR&quot;</span><span class="op">)</span> <span class="op">&amp;&amp;</span> contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BX LR&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb146-37"><a href="#cb146-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-38"><a href="#cb146-38" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb146-39"><a href="#cb146-39" aria-hidden="true" tabindex="-1"></a>    emit_prologue<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;main&quot;</span><span class="op">);</span></span>
<span id="cb146-40"><a href="#cb146-40" aria-hidden="true" tabindex="-1"></a>    emit_epilogue<span class="op">(</span>buf<span class="op">);</span></span>
<span id="cb146-41"><a href="#cb146-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;main:&quot;</span><span class="op">)</span> <span class="op">&amp;&amp;</span> contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BX LR&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb146-42"><a href="#cb146-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-43"><a href="#cb146-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb146-44"><a href="#cb146-44" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.19" id="appels-de-fonction"><span class="header-section-number">1.4.19</span> 6.2 Appels de Fonction</h3>
<div class="sourceCode" id="cb147"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> strlen<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>i<span class="op">])</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="cf">return</span> i<span class="op">;</span> <span class="op">}</span></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> strlen<span class="op">(</span>buf<span class="op">);</span> <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb147-4"><a href="#cb147-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>j<span class="op">])</span> <span class="op">{</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> s<span class="op">[</span>j<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb147-5"><a href="#cb147-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb147-6"><a href="#cb147-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb147-7"><a href="#cb147-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;0&quot;</span><span class="op">);</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb147-8"><a href="#cb147-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tmp<span class="op">[</span><span class="dv">12</span><span class="op">];</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">11</span><span class="op">;</span> tmp<span class="op">[</span><span class="dv">11</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb147-9"><a href="#cb147-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> i <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;0&#39;</span> <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span> n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb147-10"><a href="#cb147-10" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> tmp <span class="op">+</span> i<span class="op">);</span></span>
<span id="cb147-11"><a href="#cb147-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb147-12"><a href="#cb147-12" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_mov<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">,</span> <span class="dt">int</span> val<span class="op">)</span> <span class="op">{</span></span>
<span id="cb147-13"><a href="#cb147-13" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span></span>
<span id="cb147-14"><a href="#cb147-14" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, #&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> val<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb147-15"><a href="#cb147-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb147-16"><a href="#cb147-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-17"><a href="#cb147-17" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_call<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> name<span class="op">)</span> <span class="op">{</span></span>
<span id="cb147-18"><a href="#cb147-18" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BL &quot;</span><span class="op">);</span></span>
<span id="cb147-19"><a href="#cb147-19" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> name<span class="op">);</span></span>
<span id="cb147-20"><a href="#cb147-20" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb147-21"><a href="#cb147-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb147-22"><a href="#cb147-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-23"><a href="#cb147-23" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> contains<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> sub<span class="op">)</span> <span class="op">{</span></span>
<span id="cb147-24"><a href="#cb147-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb147-25"><a href="#cb147-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>buf<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span></span>
<span id="cb147-26"><a href="#cb147-26" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">&amp;&amp;</span> buf<span class="op">[</span>i<span class="op">+</span>j<span class="op">]</span> <span class="op">==</span> sub<span class="op">[</span>j<span class="op">])</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb147-27"><a href="#cb147-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb147-28"><a href="#cb147-28" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb147-29"><a href="#cb147-29" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb147-30"><a href="#cb147-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb147-31"><a href="#cb147-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb147-32"><a href="#cb147-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-33"><a href="#cb147-33" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb147-34"><a href="#cb147-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">200</span><span class="op">];</span></span>
<span id="cb147-35"><a href="#cb147-35" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb147-36"><a href="#cb147-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-37"><a href="#cb147-37" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb147-38"><a href="#cb147-38" aria-hidden="true" tabindex="-1"></a>    emit_call<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;putchar&quot;</span><span class="op">);</span></span>
<span id="cb147-39"><a href="#cb147-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BL putchar&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb147-40"><a href="#cb147-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-41"><a href="#cb147-41" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb147-42"><a href="#cb147-42" aria-hidden="true" tabindex="-1"></a>    emit_mov<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">65</span><span class="op">);</span></span>
<span id="cb147-43"><a href="#cb147-43" aria-hidden="true" tabindex="-1"></a>    emit_call<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;putchar&quot;</span><span class="op">);</span></span>
<span id="cb147-44"><a href="#cb147-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R0, #65&quot;</span><span class="op">)</span> <span class="op">&amp;&amp;</span> contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BL putchar&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb147-45"><a href="#cb147-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-46"><a href="#cb147-46" aria-hidden="true" tabindex="-1"></a>    buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb147-47"><a href="#cb147-47" aria-hidden="true" tabindex="-1"></a>    emit_mov<span class="op">(</span>buf<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb147-48"><a href="#cb147-48" aria-hidden="true" tabindex="-1"></a>    emit_mov<span class="op">(</span>buf<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb147-49"><a href="#cb147-49" aria-hidden="true" tabindex="-1"></a>    emit_call<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;add&quot;</span><span class="op">);</span></span>
<span id="cb147-50"><a href="#cb147-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R0, #3&quot;</span><span class="op">)</span> <span class="op">&amp;&amp;</span> contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R1, #5&quot;</span><span class="op">)</span> <span class="op">&amp;&amp;</span></span>
<span id="cb147-51"><a href="#cb147-51" aria-hidden="true" tabindex="-1"></a>        contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;BL add&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb147-52"><a href="#cb147-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-53"><a href="#cb147-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb147-54"><a href="#cb147-54" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.4.20" id="mini-compilateur-complet"><span class="header-section-number">1.4.20</span> 7.1 Mini-Compilateur
Complet</h3>
<div class="sourceCode" id="cb148"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="co">// === UTILITAIRES ===</span></span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> strlen<span class="op">(</span><span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>i<span class="op">])</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="cf">return</span> i<span class="op">;</span> <span class="op">}</span></span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> s<span class="op">)</span> <span class="op">{</span></span>
<span id="cb148-4"><a href="#cb148-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> strlen<span class="op">(</span>buf<span class="op">);</span> <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb148-5"><a href="#cb148-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>s<span class="op">[</span>j<span class="op">])</span> <span class="op">{</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> s<span class="op">[</span>j<span class="op">];</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span> buf<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb148-6"><a href="#cb148-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb148-7"><a href="#cb148-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> append_num<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> n<span class="op">)</span> <span class="op">{</span></span>
<span id="cb148-8"><a href="#cb148-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;0&quot;</span><span class="op">);</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb148-9"><a href="#cb148-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tmp<span class="op">[</span><span class="dv">12</span><span class="op">];</span> <span class="dt">int</span> i <span class="op">=</span> <span class="dv">11</span><span class="op">;</span> tmp<span class="op">[</span><span class="dv">11</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb148-10"><a href="#cb148-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>n <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> i <span class="op">=</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> tmp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;0&#39;</span> <span class="op">+</span> <span class="op">(</span>n <span class="op">%</span> <span class="dv">10</span><span class="op">);</span> n <span class="op">=</span> n <span class="op">/</span> <span class="dv">10</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb148-11"><a href="#cb148-11" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> tmp <span class="op">+</span> i<span class="op">);</span></span>
<span id="cb148-12"><a href="#cb148-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb148-13"><a href="#cb148-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-14"><a href="#cb148-14" aria-hidden="true" tabindex="-1"></a><span class="co">// === Ã‰METTEURS ===</span></span>
<span id="cb148-15"><a href="#cb148-15" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_mov<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">,</span> <span class="dt">int</span> val<span class="op">)</span> <span class="op">{</span></span>
<span id="cb148-16"><a href="#cb148-16" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span></span>
<span id="cb148-17"><a href="#cb148-17" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, #&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> val<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb148-18"><a href="#cb148-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb148-19"><a href="#cb148-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_push<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">)</span> <span class="op">{</span></span>
<span id="cb148-20"><a href="#cb148-20" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;STR R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, [SP, #-4]!</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb148-21"><a href="#cb148-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb148-22"><a href="#cb148-22" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_pop<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">int</span> reg<span class="op">)</span> <span class="op">{</span></span>
<span id="cb148-23"><a href="#cb148-23" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;LDR R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> reg<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, [SP], #4</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb148-24"><a href="#cb148-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb148-25"><a href="#cb148-25" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> emit_op<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span> op<span class="op">,</span> <span class="dt">int</span> rd<span class="op">,</span> <span class="dt">int</span> rn<span class="op">,</span> <span class="dt">int</span> rm<span class="op">)</span> <span class="op">{</span></span>
<span id="cb148-26"><a href="#cb148-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;+&#39;</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;ADD R&quot;</span><span class="op">);</span></span>
<span id="cb148-27"><a href="#cb148-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;-&#39;</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;SUB R&quot;</span><span class="op">);</span></span>
<span id="cb148-28"><a href="#cb148-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="ch">&#39;*&#39;</span><span class="op">)</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MUL R&quot;</span><span class="op">);</span></span>
<span id="cb148-29"><a href="#cb148-29" aria-hidden="true" tabindex="-1"></a>    append_num<span class="op">(</span>buf<span class="op">,</span> rd<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> rn<span class="op">);</span></span>
<span id="cb148-30"><a href="#cb148-30" aria-hidden="true" tabindex="-1"></a>    append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;, R&quot;</span><span class="op">);</span> append_num<span class="op">(</span>buf<span class="op">,</span> rm<span class="op">);</span> append<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">n&quot;</span><span class="op">);</span></span>
<span id="cb148-31"><a href="#cb148-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb148-32"><a href="#cb148-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-33"><a href="#cb148-33" aria-hidden="true" tabindex="-1"></a><span class="co">// === PARSER + CODEGEN ===</span></span>
<span id="cb148-34"><a href="#cb148-34" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_digit<span class="op">(</span><span class="dt">char</span> c<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> c <span class="op">&gt;=</span> <span class="ch">&#39;0&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;9&#39;</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb148-35"><a href="#cb148-35" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> input<span class="op">;</span></span>
<span id="cb148-36"><a href="#cb148-36" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> pos<span class="op">;</span></span>
<span id="cb148-37"><a href="#cb148-37" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> out<span class="op">;</span></span>
<span id="cb148-38"><a href="#cb148-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-39"><a href="#cb148-39" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> skip<span class="op">()</span> <span class="op">{</span> <span class="cf">while</span> <span class="op">(</span>input<span class="op">[</span>pos<span class="op">]</span> <span class="op">==</span> <span class="ch">&#39; &#39;</span><span class="op">)</span> pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb148-40"><a href="#cb148-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-41"><a href="#cb148-41" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> codegen_expr<span class="op">();</span></span>
<span id="cb148-42"><a href="#cb148-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-43"><a href="#cb148-43" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> codegen_factor<span class="op">()</span> <span class="op">{</span></span>
<span id="cb148-44"><a href="#cb148-44" aria-hidden="true" tabindex="-1"></a>    skip<span class="op">();</span></span>
<span id="cb148-45"><a href="#cb148-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>input<span class="op">[</span>pos<span class="op">]</span> <span class="op">==</span> <span class="ch">&#39;(&#39;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb148-46"><a href="#cb148-46" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb148-47"><a href="#cb148-47" aria-hidden="true" tabindex="-1"></a>        codegen_expr<span class="op">();</span></span>
<span id="cb148-48"><a href="#cb148-48" aria-hidden="true" tabindex="-1"></a>        skip<span class="op">();</span></span>
<span id="cb148-49"><a href="#cb148-49" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span>  <span class="co">// &#39;)&#39;</span></span>
<span id="cb148-50"><a href="#cb148-50" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb148-51"><a href="#cb148-51" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> v <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb148-52"><a href="#cb148-52" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span>is_digit<span class="op">(</span>input<span class="op">[</span>pos<span class="op">]))</span> <span class="op">{</span></span>
<span id="cb148-53"><a href="#cb148-53" aria-hidden="true" tabindex="-1"></a>            v <span class="op">=</span> v <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> <span class="op">(</span>input<span class="op">[</span>pos<span class="op">]</span> <span class="op">-</span> <span class="ch">&#39;0&#39;</span><span class="op">);</span></span>
<span id="cb148-54"><a href="#cb148-54" aria-hidden="true" tabindex="-1"></a>            pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb148-55"><a href="#cb148-55" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb148-56"><a href="#cb148-56" aria-hidden="true" tabindex="-1"></a>        emit_mov<span class="op">(</span>out<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> v<span class="op">);</span></span>
<span id="cb148-57"><a href="#cb148-57" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb148-58"><a href="#cb148-58" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb148-59"><a href="#cb148-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-60"><a href="#cb148-60" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> codegen_term<span class="op">()</span> <span class="op">{</span></span>
<span id="cb148-61"><a href="#cb148-61" aria-hidden="true" tabindex="-1"></a>    codegen_factor<span class="op">();</span></span>
<span id="cb148-62"><a href="#cb148-62" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb148-63"><a href="#cb148-63" aria-hidden="true" tabindex="-1"></a>        skip<span class="op">();</span></span>
<span id="cb148-64"><a href="#cb148-64" aria-hidden="true" tabindex="-1"></a>        <span class="dt">char</span> op <span class="op">=</span> input<span class="op">[</span>pos<span class="op">];</span></span>
<span id="cb148-65"><a href="#cb148-65" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op <span class="op">!=</span> <span class="ch">&#39;*&#39;</span> <span class="op">&amp;&amp;</span> op <span class="op">!=</span> <span class="ch">&#39;/&#39;</span><span class="op">)</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb148-66"><a href="#cb148-66" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb148-67"><a href="#cb148-67" aria-hidden="true" tabindex="-1"></a>        emit_push<span class="op">(</span>out<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb148-68"><a href="#cb148-68" aria-hidden="true" tabindex="-1"></a>        codegen_factor<span class="op">();</span></span>
<span id="cb148-69"><a href="#cb148-69" aria-hidden="true" tabindex="-1"></a>        emit_pop<span class="op">(</span>out<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb148-70"><a href="#cb148-70" aria-hidden="true" tabindex="-1"></a>        emit_op<span class="op">(</span>out<span class="op">,</span> op<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb148-71"><a href="#cb148-71" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb148-72"><a href="#cb148-72" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb148-73"><a href="#cb148-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-74"><a href="#cb148-74" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> codegen_expr<span class="op">()</span> <span class="op">{</span></span>
<span id="cb148-75"><a href="#cb148-75" aria-hidden="true" tabindex="-1"></a>    codegen_term<span class="op">();</span></span>
<span id="cb148-76"><a href="#cb148-76" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb148-77"><a href="#cb148-77" aria-hidden="true" tabindex="-1"></a>        skip<span class="op">();</span></span>
<span id="cb148-78"><a href="#cb148-78" aria-hidden="true" tabindex="-1"></a>        <span class="dt">char</span> op <span class="op">=</span> input<span class="op">[</span>pos<span class="op">];</span></span>
<span id="cb148-79"><a href="#cb148-79" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op <span class="op">!=</span> <span class="ch">&#39;+&#39;</span> <span class="op">&amp;&amp;</span> op <span class="op">!=</span> <span class="ch">&#39;-&#39;</span><span class="op">)</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb148-80"><a href="#cb148-80" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> pos <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb148-81"><a href="#cb148-81" aria-hidden="true" tabindex="-1"></a>        emit_push<span class="op">(</span>out<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb148-82"><a href="#cb148-82" aria-hidden="true" tabindex="-1"></a>        codegen_term<span class="op">();</span></span>
<span id="cb148-83"><a href="#cb148-83" aria-hidden="true" tabindex="-1"></a>        emit_pop<span class="op">(</span>out<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb148-84"><a href="#cb148-84" aria-hidden="true" tabindex="-1"></a>        emit_op<span class="op">(</span>out<span class="op">,</span> op<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb148-85"><a href="#cb148-85" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb148-86"><a href="#cb148-86" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb148-87"><a href="#cb148-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-88"><a href="#cb148-88" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> compile<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> src<span class="op">)</span> <span class="op">{</span></span>
<span id="cb148-89"><a href="#cb148-89" aria-hidden="true" tabindex="-1"></a>    out <span class="op">=</span> buf<span class="op">;</span> input <span class="op">=</span> src<span class="op">;</span> pos <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> buf<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb148-90"><a href="#cb148-90" aria-hidden="true" tabindex="-1"></a>    codegen_expr<span class="op">();</span></span>
<span id="cb148-91"><a href="#cb148-91" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb148-92"><a href="#cb148-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-93"><a href="#cb148-93" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> contains<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> sub<span class="op">)</span> <span class="op">{</span></span>
<span id="cb148-94"><a href="#cb148-94" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb148-95"><a href="#cb148-95" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>buf<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span></span>
<span id="cb148-96"><a href="#cb148-96" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">&amp;&amp;</span> buf<span class="op">[</span>i<span class="op">+</span>j<span class="op">]</span> <span class="op">==</span> sub<span class="op">[</span>j<span class="op">])</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb148-97"><a href="#cb148-97" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb148-98"><a href="#cb148-98" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb148-99"><a href="#cb148-99" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb148-100"><a href="#cb148-100" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb148-101"><a href="#cb148-101" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb148-102"><a href="#cb148-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-103"><a href="#cb148-103" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> count<span class="op">(</span><span class="dt">char</span><span class="op">*</span> buf<span class="op">,</span> <span class="dt">char</span><span class="op">*</span> sub<span class="op">)</span> <span class="op">{</span></span>
<span id="cb148-104"><a href="#cb148-104" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> c <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb148-105"><a href="#cb148-105" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>buf<span class="op">[</span>i<span class="op">])</span> <span class="op">{</span></span>
<span id="cb148-106"><a href="#cb148-106" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">while</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">&amp;&amp;</span> buf<span class="op">[</span>i<span class="op">+</span>j<span class="op">]</span> <span class="op">==</span> sub<span class="op">[</span>j<span class="op">])</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb148-107"><a href="#cb148-107" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>sub<span class="op">[</span>j<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> c <span class="op">=</span> c <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb148-108"><a href="#cb148-108" aria-hidden="true" tabindex="-1"></a>        i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb148-109"><a href="#cb148-109" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb148-110"><a href="#cb148-110" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> c<span class="op">;</span></span>
<span id="cb148-111"><a href="#cb148-111" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb148-112"><a href="#cb148-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-113"><a href="#cb148-113" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb148-114"><a href="#cb148-114" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buf<span class="op">[</span><span class="dv">500</span><span class="op">];</span></span>
<span id="cb148-115"><a href="#cb148-115" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb148-116"><a href="#cb148-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-117"><a href="#cb148-117" aria-hidden="true" tabindex="-1"></a>    compile<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;42&quot;</span><span class="op">);</span></span>
<span id="cb148-118"><a href="#cb148-118" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R0, #42&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb148-119"><a href="#cb148-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-120"><a href="#cb148-120" aria-hidden="true" tabindex="-1"></a>    compile<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;(5)&quot;</span><span class="op">);</span></span>
<span id="cb148-121"><a href="#cb148-121" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MOV R0, #5&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb148-122"><a href="#cb148-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-123"><a href="#cb148-123" aria-hidden="true" tabindex="-1"></a>    compile<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;2 + 3 * 4&quot;</span><span class="op">);</span></span>
<span id="cb148-124"><a href="#cb148-124" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MUL&quot;</span><span class="op">)</span> <span class="op">&amp;&amp;</span> contains<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;ADD&quot;</span><span class="op">))</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb148-125"><a href="#cb148-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-126"><a href="#cb148-126" aria-hidden="true" tabindex="-1"></a>    compile<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;(2 + 3) * 4&quot;</span><span class="op">);</span></span>
<span id="cb148-127"><a href="#cb148-127" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>count<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;ADD&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> count<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MUL&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb148-128"><a href="#cb148-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-129"><a href="#cb148-129" aria-hidden="true" tabindex="-1"></a>    compile<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;(1 + 2) * (3 + 4)&quot;</span><span class="op">);</span></span>
<span id="cb148-130"><a href="#cb148-130" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>count<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;ADD&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">2</span> <span class="op">&amp;&amp;</span> count<span class="op">(</span>buf<span class="op">,</span> <span class="st">&quot;MUL&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> score <span class="op">=</span> score <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb148-131"><a href="#cb148-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-132"><a href="#cb148-132" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> score<span class="op">;</span></span>
<span id="cb148-133"><a href="#cb148-133" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h2 data-number="1.5" id="e.-solutions-systeme-dexploitation"><span class="header-section-number">1.5</span> E. Solutions Systeme
dâ€™Exploitation</h2>
<h3 data-number="1.5.1" id="bootstrap"><span class="header-section-number">1.5.1</span> Bootstrap</h3>
<div class="sourceCode" id="cb149"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Bootstrap - Solution</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> bss_start <span class="op">=</span> <span class="bn">0x00402800</span><span class="op">;</span></span>
<span id="cb149-4"><a href="#cb149-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> bss_end <span class="op">=</span> <span class="bn">0x00403000</span><span class="op">;</span></span>
<span id="cb149-5"><a href="#cb149-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-6"><a href="#cb149-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb149-7"><a href="#cb149-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">42</span><span class="op">;</span></span>
<span id="cb149-8"><a href="#cb149-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb149-9"><a href="#cb149-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-10"><a href="#cb149-10" aria-hidden="true" tabindex="-1"></a><span class="co">// Note: En vrai, _start serait en ASM</span></span>
<span id="cb149-11"><a href="#cb149-11" aria-hidden="true" tabindex="-1"></a><span class="co">// Ici on simule le concept</span></span>
<span id="cb149-12"><a href="#cb149-12" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> _start<span class="op">()</span> <span class="op">{</span></span>
<span id="cb149-13"><a href="#cb149-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> ptr<span class="op">;</span></span>
<span id="cb149-14"><a href="#cb149-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result<span class="op">;</span></span>
<span id="cb149-15"><a href="#cb149-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-16"><a href="#cb149-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Effacer BSS (simulation)</span></span>
<span id="cb149-17"><a href="#cb149-17" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> bss_start<span class="op">;</span></span>
<span id="cb149-18"><a href="#cb149-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>ptr <span class="op">&lt;</span> bss_end<span class="op">)</span> <span class="op">{</span></span>
<span id="cb149-19"><a href="#cb149-19" aria-hidden="true" tabindex="-1"></a>        <span class="co">// En vrai: *((int*)ptr) = 0;</span></span>
<span id="cb149-20"><a href="#cb149-20" aria-hidden="true" tabindex="-1"></a>        ptr <span class="op">=</span> ptr <span class="op">+</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb149-21"><a href="#cb149-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb149-22"><a href="#cb149-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-23"><a href="#cb149-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Appeler main</span></span>
<span id="cb149-24"><a href="#cb149-24" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> main<span class="op">();</span></span>
<span id="cb149-25"><a href="#cb149-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-26"><a href="#cb149-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb149-27"><a href="#cb149-27" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.2" id="bump-allocator"><span class="header-section-number">1.5.2</span> Bump Allocator</h3>
<div class="sourceCode" id="cb150"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Bump Allocator - Solution</span></span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> heap_start <span class="op">=</span> <span class="bn">0x00403000</span><span class="op">;</span></span>
<span id="cb150-4"><a href="#cb150-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> heap_end <span class="op">=</span> <span class="bn">0x00410000</span><span class="op">;</span></span>
<span id="cb150-5"><a href="#cb150-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> next_free <span class="op">=</span> <span class="bn">0x00403000</span><span class="op">;</span></span>
<span id="cb150-6"><a href="#cb150-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-7"><a href="#cb150-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> bump_alloc<span class="op">(</span><span class="dt">int</span> size<span class="op">)</span> <span class="op">{</span></span>
<span id="cb150-8"><a href="#cb150-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> addr<span class="op">;</span></span>
<span id="cb150-9"><a href="#cb150-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-10"><a href="#cb150-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">// VÃ©rifier qu&#39;il reste de la place</span></span>
<span id="cb150-11"><a href="#cb150-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>next_free <span class="op">+</span> size <span class="op">&gt;</span> heap_end<span class="op">)</span> <span class="op">{</span></span>
<span id="cb150-12"><a href="#cb150-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb150-13"><a href="#cb150-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb150-14"><a href="#cb150-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-15"><a href="#cb150-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Sauvegarder l&#39;adresse actuelle</span></span>
<span id="cb150-16"><a href="#cb150-16" aria-hidden="true" tabindex="-1"></a>    addr <span class="op">=</span> next_free<span class="op">;</span></span>
<span id="cb150-17"><a href="#cb150-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-18"><a href="#cb150-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Avancer le pointeur</span></span>
<span id="cb150-19"><a href="#cb150-19" aria-hidden="true" tabindex="-1"></a>    next_free <span class="op">=</span> next_free <span class="op">+</span> size<span class="op">;</span></span>
<span id="cb150-20"><a href="#cb150-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-21"><a href="#cb150-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> addr<span class="op">;</span></span>
<span id="cb150-22"><a href="#cb150-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb150-23"><a href="#cb150-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-24"><a href="#cb150-24" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb150-25"><a href="#cb150-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> ptr1<span class="op">;</span></span>
<span id="cb150-26"><a href="#cb150-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> ptr2<span class="op">;</span></span>
<span id="cb150-27"><a href="#cb150-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-28"><a href="#cb150-28" aria-hidden="true" tabindex="-1"></a>    ptr1 <span class="op">=</span> bump_alloc<span class="op">(</span><span class="dv">100</span><span class="op">);</span></span>
<span id="cb150-29"><a href="#cb150-29" aria-hidden="true" tabindex="-1"></a>    ptr2 <span class="op">=</span> bump_alloc<span class="op">(</span><span class="dv">200</span><span class="op">);</span></span>
<span id="cb150-30"><a href="#cb150-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-31"><a href="#cb150-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> ptr2 <span class="op">-</span> ptr1<span class="op">;</span></span>
<span id="cb150-32"><a href="#cb150-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.3" id="free-list"><span class="header-section-number">1.5.3</span> Free List</h3>
<div class="sourceCode" id="cb151"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Free List - Solution simplifiÃ©e</span></span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Note: Version conceptuelle, pas de vrais pointeurs</span></span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-4"><a href="#cb151-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> heap_start <span class="op">=</span> <span class="bn">0x00403000</span><span class="op">;</span></span>
<span id="cb151-5"><a href="#cb151-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> heap_size <span class="op">=</span> <span class="bn">0x1000</span><span class="op">;</span></span>
<span id="cb151-6"><a href="#cb151-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> alloc1 <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb151-7"><a href="#cb151-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> alloc2 <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb151-8"><a href="#cb151-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> freed1 <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb151-9"><a href="#cb151-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-10"><a href="#cb151-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> my_malloc<span class="op">(</span><span class="dt">int</span> size<span class="op">)</span> <span class="op">{</span></span>
<span id="cb151-11"><a href="#cb151-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>alloc1 <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb151-12"><a href="#cb151-12" aria-hidden="true" tabindex="-1"></a>        alloc1 <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb151-13"><a href="#cb151-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> heap_start <span class="op">+</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb151-14"><a href="#cb151-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb151-15"><a href="#cb151-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>alloc2 <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb151-16"><a href="#cb151-16" aria-hidden="true" tabindex="-1"></a>        alloc2 <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb151-17"><a href="#cb151-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> heap_start <span class="op">+</span> <span class="dv">200</span><span class="op">;</span></span>
<span id="cb151-18"><a href="#cb151-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb151-19"><a href="#cb151-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>freed1 <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb151-20"><a href="#cb151-20" aria-hidden="true" tabindex="-1"></a>        freed1 <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb151-21"><a href="#cb151-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> heap_start <span class="op">+</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb151-22"><a href="#cb151-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb151-23"><a href="#cb151-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb151-24"><a href="#cb151-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb151-25"><a href="#cb151-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-26"><a href="#cb151-26" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> my_free<span class="op">(</span><span class="dt">int</span> ptr<span class="op">)</span> <span class="op">{</span></span>
<span id="cb151-27"><a href="#cb151-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>ptr <span class="op">==</span> heap_start <span class="op">+</span> <span class="dv">100</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb151-28"><a href="#cb151-28" aria-hidden="true" tabindex="-1"></a>        freed1 <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb151-29"><a href="#cb151-29" aria-hidden="true" tabindex="-1"></a>        alloc1 <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb151-30"><a href="#cb151-30" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb151-31"><a href="#cb151-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb151-32"><a href="#cb151-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-33"><a href="#cb151-33" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb151-34"><a href="#cb151-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> p1<span class="op">;</span></span>
<span id="cb151-35"><a href="#cb151-35" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> p2<span class="op">;</span></span>
<span id="cb151-36"><a href="#cb151-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> p3<span class="op">;</span></span>
<span id="cb151-37"><a href="#cb151-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-38"><a href="#cb151-38" aria-hidden="true" tabindex="-1"></a>    p1 <span class="op">=</span> my_malloc<span class="op">(</span><span class="dv">50</span><span class="op">);</span></span>
<span id="cb151-39"><a href="#cb151-39" aria-hidden="true" tabindex="-1"></a>    p2 <span class="op">=</span> my_malloc<span class="op">(</span><span class="dv">50</span><span class="op">);</span></span>
<span id="cb151-40"><a href="#cb151-40" aria-hidden="true" tabindex="-1"></a>    my_free<span class="op">(</span>p1<span class="op">);</span></span>
<span id="cb151-41"><a href="#cb151-41" aria-hidden="true" tabindex="-1"></a>    p3 <span class="op">=</span> my_malloc<span class="op">(</span><span class="dv">30</span><span class="op">);</span></span>
<span id="cb151-42"><a href="#cb151-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-43"><a href="#cb151-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>p3 <span class="op">==</span> p1<span class="op">)</span> <span class="op">{</span></span>
<span id="cb151-44"><a href="#cb151-44" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb151-45"><a href="#cb151-45" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb151-46"><a href="#cb151-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb151-47"><a href="#cb151-47" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.4" id="driver-Ã©cran"><span class="header-section-number">1.5.4</span> Driver Ã‰cran</h3>
<div class="sourceCode" id="cb152"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Driver Ã‰cran - Solution (optimisÃ©)</span></span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-3"><a href="#cb152-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>SCREEN <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb152-4"><a href="#cb152-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-5"><a href="#cb152-5" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessiner une ligne horizontale (optimisÃ©: un seul calcul de row)</span></span>
<span id="cb152-6"><a href="#cb152-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> hline<span class="op">(</span><span class="dt">int</span> x1<span class="op">,</span> <span class="dt">int</span> x2<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb152-7"><a href="#cb152-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> row_base<span class="op">;</span></span>
<span id="cb152-8"><a href="#cb152-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x<span class="op">;</span></span>
<span id="cb152-9"><a href="#cb152-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> byte_idx<span class="op">;</span></span>
<span id="cb152-10"><a href="#cb152-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb152-11"><a href="#cb152-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb152-12"><a href="#cb152-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> val<span class="op">;</span></span>
<span id="cb152-13"><a href="#cb152-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-14"><a href="#cb152-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">// y * 10 calculÃ© une seule fois</span></span>
<span id="cb152-15"><a href="#cb152-15" aria-hidden="true" tabindex="-1"></a>    row_base <span class="op">=</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">);</span>  <span class="co">// y*8 + y*2 = y*10</span></span>
<span id="cb152-16"><a href="#cb152-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-17"><a href="#cb152-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>x <span class="op">=</span> x1<span class="op">;</span> x <span class="op">&lt;=</span> x2<span class="op">;</span> x <span class="op">=</span> x <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb152-18"><a href="#cb152-18" aria-hidden="true" tabindex="-1"></a>        ptr <span class="op">=</span> SCREEN <span class="op">+</span> row_base <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb152-19"><a href="#cb152-19" aria-hidden="true" tabindex="-1"></a>        byte_idx <span class="op">=</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb152-20"><a href="#cb152-20" aria-hidden="true" tabindex="-1"></a>        bit_pos <span class="op">=</span> byte_idx <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb152-21"><a href="#cb152-21" aria-hidden="true" tabindex="-1"></a>        val <span class="op">=</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb152-22"><a href="#cb152-22" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>ptr <span class="op">=</span> val <span class="op">|</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">);</span></span>
<span id="cb152-23"><a href="#cb152-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb152-24"><a href="#cb152-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb152-25"><a href="#cb152-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-26"><a href="#cb152-26" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessiner une ligne verticale</span></span>
<span id="cb152-27"><a href="#cb152-27" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> vline<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y1<span class="op">,</span> <span class="dt">int</span> y2<span class="op">)</span> <span class="op">{</span></span>
<span id="cb152-28"><a href="#cb152-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> y<span class="op">;</span></span>
<span id="cb152-29"><a href="#cb152-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> row_base<span class="op">;</span></span>
<span id="cb152-30"><a href="#cb152-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> byte_idx<span class="op">;</span></span>
<span id="cb152-31"><a href="#cb152-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb152-32"><a href="#cb152-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb152-33"><a href="#cb152-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> val<span class="op">;</span></span>
<span id="cb152-34"><a href="#cb152-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> mask<span class="op">;</span></span>
<span id="cb152-35"><a href="#cb152-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-36"><a href="#cb152-36" aria-hidden="true" tabindex="-1"></a>    byte_idx <span class="op">=</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb152-37"><a href="#cb152-37" aria-hidden="true" tabindex="-1"></a>    bit_pos <span class="op">=</span> byte_idx <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb152-38"><a href="#cb152-38" aria-hidden="true" tabindex="-1"></a>    mask <span class="op">=</span> <span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">;</span></span>
<span id="cb152-39"><a href="#cb152-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-40"><a href="#cb152-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>y <span class="op">=</span> y1<span class="op">;</span> y <span class="op">&lt;=</span> y2<span class="op">;</span> y <span class="op">=</span> y <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb152-41"><a href="#cb152-41" aria-hidden="true" tabindex="-1"></a>        row_base <span class="op">=</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb152-42"><a href="#cb152-42" aria-hidden="true" tabindex="-1"></a>        ptr <span class="op">=</span> SCREEN <span class="op">+</span> row_base <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb152-43"><a href="#cb152-43" aria-hidden="true" tabindex="-1"></a>        val <span class="op">=</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb152-44"><a href="#cb152-44" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>ptr <span class="op">=</span> val <span class="op">|</span> mask<span class="op">;</span></span>
<span id="cb152-45"><a href="#cb152-45" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb152-46"><a href="#cb152-46" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb152-47"><a href="#cb152-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-48"><a href="#cb152-48" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb152-49"><a href="#cb152-49" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Dessiner les 4 coins</span></span>
<span id="cb152-50"><a href="#cb152-50" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb152-51"><a href="#cb152-51" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN<span class="op">;</span></span>
<span id="cb152-52"><a href="#cb152-52" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="bn">0xE0E0E0</span><span class="op">;</span>           <span class="co">// Coin haut-gauche (3x3)</span></span>
<span id="cb152-53"><a href="#cb152-53" aria-hidden="true" tabindex="-1"></a>    <span class="op">*(</span>ptr <span class="op">+</span> <span class="dv">10</span><span class="op">)</span> <span class="op">=</span> <span class="bn">0xE0E0E0</span><span class="op">;</span></span>
<span id="cb152-54"><a href="#cb152-54" aria-hidden="true" tabindex="-1"></a>    <span class="op">*(</span>ptr <span class="op">+</span> <span class="dv">20</span><span class="op">)</span> <span class="op">=</span> <span class="bn">0xE0E0E0</span><span class="op">;</span></span>
<span id="cb152-55"><a href="#cb152-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-56"><a href="#cb152-56" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="dv">9</span><span class="op">;</span></span>
<span id="cb152-57"><a href="#cb152-57" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="bn">0x07070700</span><span class="op">;</span>         <span class="co">// Coin haut-droit</span></span>
<span id="cb152-58"><a href="#cb152-58" aria-hidden="true" tabindex="-1"></a>    <span class="op">*(</span>ptr <span class="op">+</span> <span class="dv">10</span><span class="op">)</span> <span class="op">=</span> <span class="bn">0x07070700</span><span class="op">;</span></span>
<span id="cb152-59"><a href="#cb152-59" aria-hidden="true" tabindex="-1"></a>    <span class="op">*(</span>ptr <span class="op">+</span> <span class="dv">20</span><span class="op">)</span> <span class="op">=</span> <span class="bn">0x07070700</span><span class="op">;</span></span>
<span id="cb152-60"><a href="#cb152-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-61"><a href="#cb152-61" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="dv">2370</span><span class="op">;</span>       <span class="co">// Ligne 237</span></span>
<span id="cb152-62"><a href="#cb152-62" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="bn">0xE0E0E0</span><span class="op">;</span>           <span class="co">// Coin bas-gauche</span></span>
<span id="cb152-63"><a href="#cb152-63" aria-hidden="true" tabindex="-1"></a>    <span class="op">*(</span>ptr <span class="op">+</span> <span class="dv">10</span><span class="op">)</span> <span class="op">=</span> <span class="bn">0xE0E0E0</span><span class="op">;</span></span>
<span id="cb152-64"><a href="#cb152-64" aria-hidden="true" tabindex="-1"></a>    <span class="op">*(</span>ptr <span class="op">+</span> <span class="dv">20</span><span class="op">)</span> <span class="op">=</span> <span class="bn">0xE0E0E0</span><span class="op">;</span></span>
<span id="cb152-65"><a href="#cb152-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-66"><a href="#cb152-66" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="dv">2379</span><span class="op">;</span></span>
<span id="cb152-67"><a href="#cb152-67" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="bn">0x07070700</span><span class="op">;</span>         <span class="co">// Coin bas-droit</span></span>
<span id="cb152-68"><a href="#cb152-68" aria-hidden="true" tabindex="-1"></a>    <span class="op">*(</span>ptr <span class="op">+</span> <span class="dv">10</span><span class="op">)</span> <span class="op">=</span> <span class="bn">0x07070700</span><span class="op">;</span></span>
<span id="cb152-69"><a href="#cb152-69" aria-hidden="true" tabindex="-1"></a>    <span class="op">*(</span>ptr <span class="op">+</span> <span class="dv">20</span><span class="op">)</span> <span class="op">=</span> <span class="bn">0x07070700</span><span class="op">;</span></span>
<span id="cb152-70"><a href="#cb152-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-71"><a href="#cb152-71" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Croix au centre</span></span>
<span id="cb152-72"><a href="#cb152-72" aria-hidden="true" tabindex="-1"></a>    hline<span class="op">(</span><span class="dv">120</span><span class="op">,</span> <span class="dv">200</span><span class="op">,</span> <span class="dv">120</span><span class="op">);</span>      <span class="co">// Ligne horizontale</span></span>
<span id="cb152-73"><a href="#cb152-73" aria-hidden="true" tabindex="-1"></a>    vline<span class="op">(</span><span class="dv">160</span><span class="op">,</span> <span class="dv">80</span><span class="op">,</span> <span class="dv">160</span><span class="op">);</span>       <span class="co">// Ligne verticale</span></span>
<span id="cb152-74"><a href="#cb152-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-75"><a href="#cb152-75" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb152-76"><a href="#cb152-76" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.5" id="police-bitmap"><span class="header-section-number">1.5.5</span> Police Bitmap</h3>
<div class="sourceCode" id="cb153"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Police Bitmap - Solution (affichage rÃ©el)</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a><span class="co">//</span></span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a><span class="co">// Table des caractÃ¨res ASCII 8x8 (hex: ligne0-ligne7)</span></span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a><span class="co">// ====================================================</span></span>
<span id="cb153-5"><a href="#cb153-5" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39; &#39; (32): 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00</span></span>
<span id="cb153-6"><a href="#cb153-6" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;!&#39; (33): 0x18,0x18,0x18,0x18,0x18,0x00,0x18,0x00</span></span>
<span id="cb153-7"><a href="#cb153-7" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;&quot;&#39; (34): 0x6C,0x6C,0x00,0x00,0x00,0x00,0x00,0x00</span></span>
<span id="cb153-8"><a href="#cb153-8" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;#&#39; (35): 0x24,0x7E,0x24,0x24,0x7E,0x24,0x00,0x00</span></span>
<span id="cb153-9"><a href="#cb153-9" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;$&#39; (36): 0x18,0x3E,0x58,0x3C,0x1A,0x7C,0x18,0x00</span></span>
<span id="cb153-10"><a href="#cb153-10" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;%&#39; (37): 0x62,0x64,0x08,0x10,0x26,0x46,0x00,0x00</span></span>
<span id="cb153-11"><a href="#cb153-11" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;&amp;&#39; (38): 0x30,0x48,0x30,0x56,0x88,0x76,0x00,0x00</span></span>
<span id="cb153-12"><a href="#cb153-12" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;&#39;&#39; (39): 0x18,0x18,0x30,0x00,0x00,0x00,0x00,0x00</span></span>
<span id="cb153-13"><a href="#cb153-13" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;(&#39; (40): 0x0C,0x18,0x30,0x30,0x30,0x18,0x0C,0x00</span></span>
<span id="cb153-14"><a href="#cb153-14" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;)&#39; (41): 0x30,0x18,0x0C,0x0C,0x0C,0x18,0x30,0x00</span></span>
<span id="cb153-15"><a href="#cb153-15" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;*&#39; (42): 0x00,0x24,0x18,0x7E,0x18,0x24,0x00,0x00</span></span>
<span id="cb153-16"><a href="#cb153-16" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;+&#39; (43): 0x00,0x18,0x18,0x7E,0x18,0x18,0x00,0x00</span></span>
<span id="cb153-17"><a href="#cb153-17" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;,&#39; (44): 0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x30</span></span>
<span id="cb153-18"><a href="#cb153-18" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;-&#39; (45): 0x00,0x00,0x00,0x7E,0x00,0x00,0x00,0x00</span></span>
<span id="cb153-19"><a href="#cb153-19" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;.&#39; (46): 0x00,0x00,0x00,0x00,0x00,0x18,0x18,0x00</span></span>
<span id="cb153-20"><a href="#cb153-20" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;/&#39; (47): 0x02,0x04,0x08,0x10,0x20,0x40,0x80,0x00</span></span>
<span id="cb153-21"><a href="#cb153-21" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;0&#39; (48): 0x3C,0x46,0x4A,0x52,0x62,0x3C,0x00,0x00</span></span>
<span id="cb153-22"><a href="#cb153-22" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;1&#39; (49): 0x18,0x38,0x18,0x18,0x18,0x3C,0x00,0x00</span></span>
<span id="cb153-23"><a href="#cb153-23" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;2&#39; (50): 0x3C,0x42,0x02,0x1C,0x20,0x7E,0x00,0x00</span></span>
<span id="cb153-24"><a href="#cb153-24" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;3&#39; (51): 0x3C,0x42,0x0C,0x02,0x42,0x3C,0x00,0x00</span></span>
<span id="cb153-25"><a href="#cb153-25" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;4&#39; (52): 0x04,0x0C,0x14,0x24,0x7E,0x04,0x00,0x00</span></span>
<span id="cb153-26"><a href="#cb153-26" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;5&#39; (53): 0x7E,0x40,0x7C,0x02,0x42,0x3C,0x00,0x00</span></span>
<span id="cb153-27"><a href="#cb153-27" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;6&#39; (54): 0x1C,0x20,0x7C,0x42,0x42,0x3C,0x00,0x00</span></span>
<span id="cb153-28"><a href="#cb153-28" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;7&#39; (55): 0x7E,0x02,0x04,0x08,0x10,0x10,0x00,0x00</span></span>
<span id="cb153-29"><a href="#cb153-29" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;8&#39; (56): 0x3C,0x42,0x3C,0x42,0x42,0x3C,0x00,0x00</span></span>
<span id="cb153-30"><a href="#cb153-30" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;9&#39; (57): 0x3C,0x42,0x42,0x3E,0x04,0x38,0x00,0x00</span></span>
<span id="cb153-31"><a href="#cb153-31" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;:&#39; (58): 0x00,0x18,0x18,0x00,0x18,0x18,0x00,0x00</span></span>
<span id="cb153-32"><a href="#cb153-32" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;;&#39; (59): 0x00,0x18,0x18,0x00,0x18,0x18,0x30,0x00</span></span>
<span id="cb153-33"><a href="#cb153-33" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;&lt;&#39; (60): 0x06,0x18,0x60,0x60,0x18,0x06,0x00,0x00</span></span>
<span id="cb153-34"><a href="#cb153-34" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;=&#39; (61): 0x00,0x00,0x7E,0x00,0x7E,0x00,0x00,0x00</span></span>
<span id="cb153-35"><a href="#cb153-35" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;&gt;&#39; (62): 0x60,0x18,0x06,0x06,0x18,0x60,0x00,0x00</span></span>
<span id="cb153-36"><a href="#cb153-36" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;?&#39; (63): 0x3C,0x42,0x04,0x08,0x00,0x08,0x00,0x00</span></span>
<span id="cb153-37"><a href="#cb153-37" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;@&#39; (64): 0x3C,0x42,0x5E,0x5E,0x40,0x3C,0x00,0x00</span></span>
<span id="cb153-38"><a href="#cb153-38" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;A&#39; (65): 0x18,0x24,0x42,0x7E,0x42,0x42,0x42,0x00</span></span>
<span id="cb153-39"><a href="#cb153-39" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;B&#39; (66): 0x7C,0x42,0x7C,0x42,0x42,0x7C,0x00,0x00</span></span>
<span id="cb153-40"><a href="#cb153-40" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;C&#39; (67): 0x3C,0x42,0x40,0x40,0x42,0x3C,0x00,0x00</span></span>
<span id="cb153-41"><a href="#cb153-41" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;D&#39; (68): 0x78,0x44,0x42,0x42,0x44,0x78,0x00,0x00</span></span>
<span id="cb153-42"><a href="#cb153-42" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;E&#39; (69): 0x7E,0x40,0x7C,0x40,0x40,0x7E,0x00,0x00</span></span>
<span id="cb153-43"><a href="#cb153-43" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;F&#39; (70): 0x7E,0x40,0x7C,0x40,0x40,0x40,0x00,0x00</span></span>
<span id="cb153-44"><a href="#cb153-44" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;G&#39; (71): 0x3C,0x42,0x40,0x4E,0x42,0x3C,0x00,0x00</span></span>
<span id="cb153-45"><a href="#cb153-45" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;H&#39; (72): 0x42,0x42,0x7E,0x42,0x42,0x42,0x00,0x00</span></span>
<span id="cb153-46"><a href="#cb153-46" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;I&#39; (73): 0x3E,0x08,0x08,0x08,0x08,0x3E,0x00,0x00</span></span>
<span id="cb153-47"><a href="#cb153-47" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;J&#39; (74): 0x1E,0x04,0x04,0x04,0x44,0x38,0x00,0x00</span></span>
<span id="cb153-48"><a href="#cb153-48" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;K&#39; (75): 0x42,0x44,0x78,0x48,0x44,0x42,0x00,0x00</span></span>
<span id="cb153-49"><a href="#cb153-49" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;L&#39; (76): 0x40,0x40,0x40,0x40,0x40,0x7E,0x00,0x00</span></span>
<span id="cb153-50"><a href="#cb153-50" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;M&#39; (77): 0x42,0x66,0x5A,0x42,0x42,0x42,0x00,0x00</span></span>
<span id="cb153-51"><a href="#cb153-51" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;N&#39; (78): 0x42,0x62,0x52,0x4A,0x46,0x42,0x00,0x00</span></span>
<span id="cb153-52"><a href="#cb153-52" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;O&#39; (79): 0x3C,0x42,0x42,0x42,0x42,0x3C,0x00,0x00</span></span>
<span id="cb153-53"><a href="#cb153-53" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;P&#39; (80): 0x7C,0x42,0x7C,0x40,0x40,0x40,0x00,0x00</span></span>
<span id="cb153-54"><a href="#cb153-54" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;Q&#39; (81): 0x3C,0x42,0x42,0x4A,0x44,0x3A,0x00,0x00</span></span>
<span id="cb153-55"><a href="#cb153-55" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;R&#39; (82): 0x7C,0x42,0x7C,0x48,0x44,0x42,0x00,0x00</span></span>
<span id="cb153-56"><a href="#cb153-56" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;S&#39; (83): 0x3C,0x40,0x3C,0x02,0x42,0x3C,0x00,0x00</span></span>
<span id="cb153-57"><a href="#cb153-57" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;T&#39; (84): 0x7E,0x18,0x18,0x18,0x18,0x18,0x00,0x00</span></span>
<span id="cb153-58"><a href="#cb153-58" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;U&#39; (85): 0x42,0x42,0x42,0x42,0x42,0x3C,0x00,0x00</span></span>
<span id="cb153-59"><a href="#cb153-59" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;V&#39; (86): 0x42,0x42,0x42,0x42,0x24,0x18,0x00,0x00</span></span>
<span id="cb153-60"><a href="#cb153-60" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;W&#39; (87): 0x42,0x42,0x42,0x5A,0x66,0x42,0x00,0x00</span></span>
<span id="cb153-61"><a href="#cb153-61" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;X&#39; (88): 0x42,0x24,0x18,0x18,0x24,0x42,0x00,0x00</span></span>
<span id="cb153-62"><a href="#cb153-62" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;Y&#39; (89): 0x42,0x42,0x24,0x18,0x18,0x18,0x00,0x00</span></span>
<span id="cb153-63"><a href="#cb153-63" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;Z&#39; (90): 0x7E,0x04,0x08,0x10,0x20,0x7E,0x00,0x00</span></span>
<span id="cb153-64"><a href="#cb153-64" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;[&#39; (91): 0x3C,0x30,0x30,0x30,0x30,0x3C,0x00,0x00</span></span>
<span id="cb153-65"><a href="#cb153-65" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;\\&#39; (92): 0x80,0x40,0x20,0x10,0x08,0x04,0x02,0x00</span></span>
<span id="cb153-66"><a href="#cb153-66" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;]&#39; (93): 0x3C,0x0C,0x0C,0x0C,0x0C,0x3C,0x00,0x00</span></span>
<span id="cb153-67"><a href="#cb153-67" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;^&#39; (94): 0x18,0x24,0x00,0x00,0x00,0x00,0x00,0x00</span></span>
<span id="cb153-68"><a href="#cb153-68" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;_&#39; (95): 0x00,0x00,0x00,0x00,0x00,0x00,0x7E,0x00</span></span>
<span id="cb153-69"><a href="#cb153-69" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;a&#39; (97): 0x00,0x3C,0x02,0x3E,0x42,0x3E,0x00,0x00</span></span>
<span id="cb153-70"><a href="#cb153-70" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;b&#39; (98): 0x40,0x40,0x7C,0x42,0x42,0x7C,0x00,0x00</span></span>
<span id="cb153-71"><a href="#cb153-71" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;c&#39; (99): 0x00,0x3C,0x40,0x40,0x40,0x3C,0x00,0x00</span></span>
<span id="cb153-72"><a href="#cb153-72" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;d&#39;(100): 0x02,0x02,0x3E,0x42,0x42,0x3E,0x00,0x00</span></span>
<span id="cb153-73"><a href="#cb153-73" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;e&#39;(101): 0x00,0x3C,0x42,0x7E,0x40,0x3C,0x00,0x00</span></span>
<span id="cb153-74"><a href="#cb153-74" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;f&#39;(102): 0x0C,0x10,0x3C,0x10,0x10,0x10,0x00,0x00</span></span>
<span id="cb153-75"><a href="#cb153-75" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;g&#39;(103): 0x00,0x3E,0x42,0x3E,0x02,0x3C,0x00,0x00</span></span>
<span id="cb153-76"><a href="#cb153-76" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;h&#39;(104): 0x40,0x40,0x7C,0x42,0x42,0x42,0x00,0x00</span></span>
<span id="cb153-77"><a href="#cb153-77" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;i&#39;(105): 0x18,0x00,0x38,0x18,0x18,0x3C,0x00,0x00</span></span>
<span id="cb153-78"><a href="#cb153-78" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;j&#39;(106): 0x04,0x00,0x04,0x04,0x04,0x44,0x38,0x00</span></span>
<span id="cb153-79"><a href="#cb153-79" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;k&#39;(107): 0x40,0x44,0x48,0x70,0x48,0x44,0x00,0x00</span></span>
<span id="cb153-80"><a href="#cb153-80" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;l&#39;(108): 0x38,0x18,0x18,0x18,0x18,0x3C,0x00,0x00</span></span>
<span id="cb153-81"><a href="#cb153-81" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;m&#39;(109): 0x00,0x76,0x5A,0x5A,0x42,0x42,0x00,0x00</span></span>
<span id="cb153-82"><a href="#cb153-82" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;n&#39;(110): 0x00,0x7C,0x42,0x42,0x42,0x42,0x00,0x00</span></span>
<span id="cb153-83"><a href="#cb153-83" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;o&#39;(111): 0x00,0x3C,0x42,0x42,0x42,0x3C,0x00,0x00</span></span>
<span id="cb153-84"><a href="#cb153-84" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;p&#39;(112): 0x00,0x7C,0x42,0x7C,0x40,0x40,0x00,0x00</span></span>
<span id="cb153-85"><a href="#cb153-85" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;q&#39;(113): 0x00,0x3E,0x42,0x3E,0x02,0x02,0x00,0x00</span></span>
<span id="cb153-86"><a href="#cb153-86" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;r&#39;(114): 0x00,0x5C,0x60,0x40,0x40,0x40,0x00,0x00</span></span>
<span id="cb153-87"><a href="#cb153-87" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;s&#39;(115): 0x00,0x3E,0x40,0x3C,0x02,0x7C,0x00,0x00</span></span>
<span id="cb153-88"><a href="#cb153-88" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;t&#39;(116): 0x10,0x3C,0x10,0x10,0x10,0x0C,0x00,0x00</span></span>
<span id="cb153-89"><a href="#cb153-89" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;u&#39;(117): 0x00,0x42,0x42,0x42,0x42,0x3E,0x00,0x00</span></span>
<span id="cb153-90"><a href="#cb153-90" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;v&#39;(118): 0x00,0x42,0x42,0x42,0x24,0x18,0x00,0x00</span></span>
<span id="cb153-91"><a href="#cb153-91" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;w&#39;(119): 0x00,0x42,0x42,0x5A,0x5A,0x66,0x00,0x00</span></span>
<span id="cb153-92"><a href="#cb153-92" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;x&#39;(120): 0x00,0x42,0x24,0x18,0x24,0x42,0x00,0x00</span></span>
<span id="cb153-93"><a href="#cb153-93" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;y&#39;(121): 0x00,0x42,0x42,0x3E,0x02,0x3C,0x00,0x00</span></span>
<span id="cb153-94"><a href="#cb153-94" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;z&#39;(122): 0x00,0x7E,0x04,0x18,0x20,0x7E,0x00,0x00</span></span>
<span id="cb153-95"><a href="#cb153-95" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;{&#39;(123): 0x0E,0x18,0x30,0x18,0x18,0x0E,0x00,0x00</span></span>
<span id="cb153-96"><a href="#cb153-96" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;|&#39;(124): 0x18,0x18,0x18,0x18,0x18,0x18,0x00,0x00</span></span>
<span id="cb153-97"><a href="#cb153-97" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;}&#39;(125): 0x70,0x18,0x0C,0x18,0x18,0x70,0x00,0x00</span></span>
<span id="cb153-98"><a href="#cb153-98" aria-hidden="true" tabindex="-1"></a><span class="co">// &#39;~&#39;(126): 0x00,0x32,0x4C,0x00,0x00,0x00,0x00,0x00</span></span>
<span id="cb153-99"><a href="#cb153-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-100"><a href="#cb153-100" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>SCREEN <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb153-101"><a href="#cb153-101" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> pixels_drawn <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb153-102"><a href="#cb153-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-103"><a href="#cb153-103" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_pixel<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb153-104"><a href="#cb153-104" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> row_base<span class="op">;</span></span>
<span id="cb153-105"><a href="#cb153-105" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> byte_idx<span class="op">;</span></span>
<span id="cb153-106"><a href="#cb153-106" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb153-107"><a href="#cb153-107" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb153-108"><a href="#cb153-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-109"><a href="#cb153-109" aria-hidden="true" tabindex="-1"></a>    row_base <span class="op">=</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">);</span>  <span class="co">// y * 10</span></span>
<span id="cb153-110"><a href="#cb153-110" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> row_base <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb153-111"><a href="#cb153-111" aria-hidden="true" tabindex="-1"></a>    byte_idx <span class="op">=</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb153-112"><a href="#cb153-112" aria-hidden="true" tabindex="-1"></a>    bit_pos <span class="op">=</span> byte_idx <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb153-113"><a href="#cb153-113" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">|</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">);</span></span>
<span id="cb153-114"><a href="#cb153-114" aria-hidden="true" tabindex="-1"></a>    pixels_drawn <span class="op">=</span> pixels_drawn <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb153-115"><a href="#cb153-115" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb153-116"><a href="#cb153-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-117"><a href="#cb153-117" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_line<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> line_data<span class="op">)</span> <span class="op">{</span></span>
<span id="cb153-118"><a href="#cb153-118" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> bit<span class="op">;</span></span>
<span id="cb153-119"><a href="#cb153-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-120"><a href="#cb153-120" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>bit <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> bit <span class="op">&lt;</span> <span class="dv">8</span><span class="op">;</span> bit <span class="op">=</span> bit <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb153-121"><a href="#cb153-121" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">((</span>line_data <span class="op">&gt;&gt;</span> <span class="op">(</span><span class="dv">7</span> <span class="op">-</span> bit<span class="op">))</span> <span class="op">&amp;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb153-122"><a href="#cb153-122" aria-hidden="true" tabindex="-1"></a>            set_pixel<span class="op">(</span>x <span class="op">+</span> bit<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb153-123"><a href="#cb153-123" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb153-124"><a href="#cb153-124" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb153-125"><a href="#cb153-125" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb153-126"><a href="#cb153-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-127"><a href="#cb153-127" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_char<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> line0<span class="op">,</span> <span class="dt">int</span> line1<span class="op">,</span> <span class="dt">int</span> line2<span class="op">,</span> <span class="dt">int</span> line3<span class="op">,</span></span>
<span id="cb153-128"><a href="#cb153-128" aria-hidden="true" tabindex="-1"></a>               <span class="dt">int</span> line4<span class="op">,</span> <span class="dt">int</span> line5<span class="op">,</span> <span class="dt">int</span> line6<span class="op">,</span> <span class="dt">int</span> line7<span class="op">)</span> <span class="op">{</span></span>
<span id="cb153-129"><a href="#cb153-129" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> line0<span class="op">);</span></span>
<span id="cb153-130"><a href="#cb153-130" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> line1<span class="op">);</span></span>
<span id="cb153-131"><a href="#cb153-131" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> line2<span class="op">);</span></span>
<span id="cb153-132"><a href="#cb153-132" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> line3<span class="op">);</span></span>
<span id="cb153-133"><a href="#cb153-133" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> line4<span class="op">);</span></span>
<span id="cb153-134"><a href="#cb153-134" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">5</span><span class="op">,</span> line5<span class="op">);</span></span>
<span id="cb153-135"><a href="#cb153-135" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">6</span><span class="op">,</span> line6<span class="op">);</span></span>
<span id="cb153-136"><a href="#cb153-136" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">7</span><span class="op">,</span> line7<span class="op">);</span></span>
<span id="cb153-137"><a href="#cb153-137" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb153-138"><a href="#cb153-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-139"><a href="#cb153-139" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb153-140"><a href="#cb153-140" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Dessiner &quot;HI&quot; en grand (position centrale)</span></span>
<span id="cb153-141"><a href="#cb153-141" aria-hidden="true" tabindex="-1"></a>    <span class="co">// H: lignes verticales + barre horizontale</span></span>
<span id="cb153-142"><a href="#cb153-142" aria-hidden="true" tabindex="-1"></a>    draw_char<span class="op">(</span><span class="dv">100</span><span class="op">,</span> <span class="dv">100</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">,</span> <span class="bn">0x7E</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">,</span> <span class="bn">0x00</span><span class="op">);</span></span>
<span id="cb153-143"><a href="#cb153-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-144"><a href="#cb153-144" aria-hidden="true" tabindex="-1"></a>    <span class="co">// I: barre verticale centrÃ©e</span></span>
<span id="cb153-145"><a href="#cb153-145" aria-hidden="true" tabindex="-1"></a>    draw_char<span class="op">(</span><span class="dv">112</span><span class="op">,</span> <span class="dv">100</span><span class="op">,</span> <span class="bn">0x3E</span><span class="op">,</span> <span class="bn">0x08</span><span class="op">,</span> <span class="bn">0x08</span><span class="op">,</span> <span class="bn">0x08</span><span class="op">,</span> <span class="bn">0x08</span><span class="op">,</span> <span class="bn">0x08</span><span class="op">,</span> <span class="bn">0x3E</span><span class="op">,</span> <span class="bn">0x00</span><span class="op">);</span></span>
<span id="cb153-146"><a href="#cb153-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-147"><a href="#cb153-147" aria-hidden="true" tabindex="-1"></a>    <span class="co">// A</span></span>
<span id="cb153-148"><a href="#cb153-148" aria-hidden="true" tabindex="-1"></a>    draw_char<span class="op">(</span><span class="dv">124</span><span class="op">,</span> <span class="dv">100</span><span class="op">,</span> <span class="bn">0x18</span><span class="op">,</span> <span class="bn">0x24</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">,</span> <span class="bn">0x7E</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">,</span> <span class="bn">0x00</span><span class="op">);</span></span>
<span id="cb153-149"><a href="#cb153-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb153-150"><a href="#cb153-150" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pixels_drawn<span class="op">;</span></span>
<span id="cb153-151"><a href="#cb153-151" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.6" id="console"><span class="header-section-number">1.5.6</span> Console</h3>
<div class="sourceCode" id="cb154"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Console - Solution (affichage rÃ©el optimisÃ©)</span></span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>SCREEN <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb154-4"><a href="#cb154-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> cursor_x <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb154-5"><a href="#cb154-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> cursor_y <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb154-6"><a href="#cb154-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-7"><a href="#cb154-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_pixel<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb154-8"><a href="#cb154-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> row_base<span class="op">;</span></span>
<span id="cb154-9"><a href="#cb154-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb154-10"><a href="#cb154-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb154-11"><a href="#cb154-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-12"><a href="#cb154-12" aria-hidden="true" tabindex="-1"></a>    row_base <span class="op">=</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb154-13"><a href="#cb154-13" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> row_base <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb154-14"><a href="#cb154-14" aria-hidden="true" tabindex="-1"></a>    bit_pos <span class="op">=</span> <span class="op">((</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb154-15"><a href="#cb154-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">|</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">);</span></span>
<span id="cb154-16"><a href="#cb154-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb154-17"><a href="#cb154-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-18"><a href="#cb154-18" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine une ligne de 8 pixels</span></span>
<span id="cb154-19"><a href="#cb154-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_line<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> data<span class="op">)</span> <span class="op">{</span></span>
<span id="cb154-20"><a href="#cb154-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x80</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb154-21"><a href="#cb154-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x40</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb154-22"><a href="#cb154-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x20</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb154-23"><a href="#cb154-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x10</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb154-24"><a href="#cb154-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x08</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb154-25"><a href="#cb154-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x04</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">5</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb154-26"><a href="#cb154-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x02</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">6</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb154-27"><a href="#cb154-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x01</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">7</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb154-28"><a href="#cb154-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb154-29"><a href="#cb154-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-30"><a href="#cb154-30" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine H Ã  (x, y)</span></span>
<span id="cb154-31"><a href="#cb154-31" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_H<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb154-32"><a href="#cb154-32" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb154-33"><a href="#cb154-33" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb154-34"><a href="#cb154-34" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x7E</span><span class="op">);</span></span>
<span id="cb154-35"><a href="#cb154-35" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb154-36"><a href="#cb154-36" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb154-37"><a href="#cb154-37" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb154-38"><a href="#cb154-38" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb154-39"><a href="#cb154-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-40"><a href="#cb154-40" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine e Ã  (x, y)</span></span>
<span id="cb154-41"><a href="#cb154-41" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_e<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb154-42"><a href="#cb154-42" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span></span>
<span id="cb154-43"><a href="#cb154-43" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb154-44"><a href="#cb154-44" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x7E</span><span class="op">);</span></span>
<span id="cb154-45"><a href="#cb154-45" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x40</span><span class="op">);</span></span>
<span id="cb154-46"><a href="#cb154-46" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">6</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span></span>
<span id="cb154-47"><a href="#cb154-47" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb154-48"><a href="#cb154-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-49"><a href="#cb154-49" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine l Ã  (x, y)</span></span>
<span id="cb154-50"><a href="#cb154-50" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_l<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb154-51"><a href="#cb154-51" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> <span class="bn">0x38</span><span class="op">);</span></span>
<span id="cb154-52"><a href="#cb154-52" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x18</span><span class="op">);</span></span>
<span id="cb154-53"><a href="#cb154-53" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x18</span><span class="op">);</span></span>
<span id="cb154-54"><a href="#cb154-54" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x18</span><span class="op">);</span></span>
<span id="cb154-55"><a href="#cb154-55" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x18</span><span class="op">);</span></span>
<span id="cb154-56"><a href="#cb154-56" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span></span>
<span id="cb154-57"><a href="#cb154-57" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb154-58"><a href="#cb154-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-59"><a href="#cb154-59" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine o Ã  (x, y)</span></span>
<span id="cb154-60"><a href="#cb154-60" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_o<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb154-61"><a href="#cb154-61" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span></span>
<span id="cb154-62"><a href="#cb154-62" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb154-63"><a href="#cb154-63" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb154-64"><a href="#cb154-64" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb154-65"><a href="#cb154-65" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">6</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span></span>
<span id="cb154-66"><a href="#cb154-66" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb154-67"><a href="#cb154-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-68"><a href="#cb154-68" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine W Ã  (x, y)</span></span>
<span id="cb154-69"><a href="#cb154-69" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_W<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb154-70"><a href="#cb154-70" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb154-71"><a href="#cb154-71" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb154-72"><a href="#cb154-72" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb154-73"><a href="#cb154-73" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x5A</span><span class="op">);</span></span>
<span id="cb154-74"><a href="#cb154-74" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x66</span><span class="op">);</span></span>
<span id="cb154-75"><a href="#cb154-75" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb154-76"><a href="#cb154-76" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb154-77"><a href="#cb154-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-78"><a href="#cb154-78" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine r Ã  (x, y)</span></span>
<span id="cb154-79"><a href="#cb154-79" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_r<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb154-80"><a href="#cb154-80" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x5C</span><span class="op">);</span></span>
<span id="cb154-81"><a href="#cb154-81" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x60</span><span class="op">);</span></span>
<span id="cb154-82"><a href="#cb154-82" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x40</span><span class="op">);</span></span>
<span id="cb154-83"><a href="#cb154-83" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x40</span><span class="op">);</span></span>
<span id="cb154-84"><a href="#cb154-84" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">6</span><span class="op">,</span> <span class="bn">0x40</span><span class="op">);</span></span>
<span id="cb154-85"><a href="#cb154-85" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb154-86"><a href="#cb154-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-87"><a href="#cb154-87" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine d Ã  (x, y)</span></span>
<span id="cb154-88"><a href="#cb154-88" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_d<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb154-89"><a href="#cb154-89" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> <span class="bn">0x02</span><span class="op">);</span></span>
<span id="cb154-90"><a href="#cb154-90" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x02</span><span class="op">);</span></span>
<span id="cb154-91"><a href="#cb154-91" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x3E</span><span class="op">);</span></span>
<span id="cb154-92"><a href="#cb154-92" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb154-93"><a href="#cb154-93" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb154-94"><a href="#cb154-94" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x3E</span><span class="op">);</span></span>
<span id="cb154-95"><a href="#cb154-95" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb154-96"><a href="#cb154-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-97"><a href="#cb154-97" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb154-98"><a href="#cb154-98" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Hello (ligne 0, y=0)</span></span>
<span id="cb154-99"><a href="#cb154-99" aria-hidden="true" tabindex="-1"></a>    draw_H<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb154-100"><a href="#cb154-100" aria-hidden="true" tabindex="-1"></a>    draw_e<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb154-101"><a href="#cb154-101" aria-hidden="true" tabindex="-1"></a>    draw_l<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb154-102"><a href="#cb154-102" aria-hidden="true" tabindex="-1"></a>    draw_l<span class="op">(</span><span class="dv">24</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb154-103"><a href="#cb154-103" aria-hidden="true" tabindex="-1"></a>    draw_o<span class="op">(</span><span class="dv">32</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb154-104"><a href="#cb154-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-105"><a href="#cb154-105" aria-hidden="true" tabindex="-1"></a>    <span class="co">// World (ligne 1, y=8)</span></span>
<span id="cb154-106"><a href="#cb154-106" aria-hidden="true" tabindex="-1"></a>    draw_W<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb154-107"><a href="#cb154-107" aria-hidden="true" tabindex="-1"></a>    draw_o<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb154-108"><a href="#cb154-108" aria-hidden="true" tabindex="-1"></a>    draw_r<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb154-109"><a href="#cb154-109" aria-hidden="true" tabindex="-1"></a>    draw_l<span class="op">(</span><span class="dv">24</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb154-110"><a href="#cb154-110" aria-hidden="true" tabindex="-1"></a>    draw_d<span class="op">(</span><span class="dv">32</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb154-111"><a href="#cb154-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-112"><a href="#cb154-112" aria-hidden="true" tabindex="-1"></a>    cursor_y <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb154-113"><a href="#cb154-113" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> cursor_y<span class="op">;</span></span>
<span id="cb154-114"><a href="#cb154-114" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.7" id="driver-clavier"><span class="header-section-number">1.5.7</span> Driver Clavier</h3>
<div class="sourceCode" id="cb155"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Driver Clavier - Solution Interactive</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Activez &quot;Capturer clavier&quot; et appuyez sur des touches!</span></span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-4"><a href="#cb155-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>SCREEN <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb155-5"><a href="#cb155-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>KEYBOARD <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00402600</span><span class="op">;</span></span>
<span id="cb155-6"><a href="#cb155-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> key_count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb155-7"><a href="#cb155-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> cursor_x <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb155-8"><a href="#cb155-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-9"><a href="#cb155-9" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_pixel<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb155-10"><a href="#cb155-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> row_base<span class="op">;</span></span>
<span id="cb155-11"><a href="#cb155-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb155-12"><a href="#cb155-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb155-13"><a href="#cb155-13" aria-hidden="true" tabindex="-1"></a>    row_base <span class="op">=</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb155-14"><a href="#cb155-14" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> row_base <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb155-15"><a href="#cb155-15" aria-hidden="true" tabindex="-1"></a>    bit_pos <span class="op">=</span> <span class="op">((</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb155-16"><a href="#cb155-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">|</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">);</span></span>
<span id="cb155-17"><a href="#cb155-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb155-18"><a href="#cb155-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-19"><a href="#cb155-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_line<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> data<span class="op">)</span> <span class="op">{</span></span>
<span id="cb155-20"><a href="#cb155-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x80</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb155-21"><a href="#cb155-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x40</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb155-22"><a href="#cb155-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x20</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb155-23"><a href="#cb155-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x10</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb155-24"><a href="#cb155-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x08</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb155-25"><a href="#cb155-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x04</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">5</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb155-26"><a href="#cb155-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x02</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">6</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb155-27"><a href="#cb155-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x01</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">7</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb155-28"><a href="#cb155-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb155-29"><a href="#cb155-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-30"><a href="#cb155-30" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine un caractÃ¨re gÃ©nÃ©rique (carrÃ© avec le code)</span></span>
<span id="cb155-31"><a href="#cb155-31" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_key<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> key<span class="op">)</span> <span class="op">{</span></span>
<span id="cb155-32"><a href="#cb155-32" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Dessiner un petit carrÃ© pour indiquer la touche</span></span>
<span id="cb155-33"><a href="#cb155-33" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> <span class="bn">0xFF</span><span class="op">);</span></span>
<span id="cb155-34"><a href="#cb155-34" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x81</span><span class="op">);</span></span>
<span id="cb155-35"><a href="#cb155-35" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x81</span><span class="op">);</span></span>
<span id="cb155-36"><a href="#cb155-36" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x81</span><span class="op">);</span></span>
<span id="cb155-37"><a href="#cb155-37" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x81</span><span class="op">);</span></span>
<span id="cb155-38"><a href="#cb155-38" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x81</span><span class="op">);</span></span>
<span id="cb155-39"><a href="#cb155-39" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">6</span><span class="op">,</span> <span class="bn">0x81</span><span class="op">);</span></span>
<span id="cb155-40"><a href="#cb155-40" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> <span class="dv">7</span><span class="op">,</span> <span class="bn">0xFF</span><span class="op">);</span></span>
<span id="cb155-41"><a href="#cb155-41" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Afficher une marque au centre basÃ©e sur le code</span></span>
<span id="cb155-42"><a href="#cb155-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>key <span class="op">&amp;</span> <span class="dv">1</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb155-43"><a href="#cb155-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>key <span class="op">&amp;</span> <span class="dv">2</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb155-44"><a href="#cb155-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>key <span class="op">&amp;</span> <span class="dv">4</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb155-45"><a href="#cb155-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>key <span class="op">&amp;</span> <span class="dv">8</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb155-46"><a href="#cb155-46" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb155-47"><a href="#cb155-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-48"><a href="#cb155-48" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> read_key<span class="op">()</span> <span class="op">{</span></span>
<span id="cb155-49"><a href="#cb155-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">*</span>KEYBOARD<span class="op">;</span></span>
<span id="cb155-50"><a href="#cb155-50" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb155-51"><a href="#cb155-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-52"><a href="#cb155-52" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb155-53"><a href="#cb155-53" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> key<span class="op">;</span></span>
<span id="cb155-54"><a href="#cb155-54" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> last_key<span class="op">;</span></span>
<span id="cb155-55"><a href="#cb155-55" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> timeout<span class="op">;</span></span>
<span id="cb155-56"><a href="#cb155-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-57"><a href="#cb155-57" aria-hidden="true" tabindex="-1"></a>    last_key <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb155-58"><a href="#cb155-58" aria-hidden="true" tabindex="-1"></a>    timeout <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb155-59"><a href="#cb155-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-60"><a href="#cb155-60" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Afficher 5 indicateurs en haut</span></span>
<span id="cb155-61"><a href="#cb155-61" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0xFF</span><span class="op">);</span></span>
<span id="cb155-62"><a href="#cb155-62" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="bn">0xFF</span><span class="op">);</span></span>
<span id="cb155-63"><a href="#cb155-63" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0xFF</span><span class="op">);</span></span>
<span id="cb155-64"><a href="#cb155-64" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="bn">0xFF</span><span class="op">);</span></span>
<span id="cb155-65"><a href="#cb155-65" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0xFF</span><span class="op">);</span></span>
<span id="cb155-66"><a href="#cb155-66" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="bn">0xFF</span><span class="op">);</span></span>
<span id="cb155-67"><a href="#cb155-67" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">30</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0xFF</span><span class="op">);</span></span>
<span id="cb155-68"><a href="#cb155-68" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">30</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="bn">0xFF</span><span class="op">);</span></span>
<span id="cb155-69"><a href="#cb155-69" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">40</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0xFF</span><span class="op">);</span></span>
<span id="cb155-70"><a href="#cb155-70" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">40</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="bn">0xFF</span><span class="op">);</span></span>
<span id="cb155-71"><a href="#cb155-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-72"><a href="#cb155-72" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Boucle principale: attendre 5 touches (avec timeout)</span></span>
<span id="cb155-73"><a href="#cb155-73" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>key_count <span class="op">&lt;</span> <span class="dv">5</span> <span class="op">&amp;&amp;</span> timeout <span class="op">&lt;</span> <span class="dv">100000</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb155-74"><a href="#cb155-74" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> read_key<span class="op">();</span></span>
<span id="cb155-75"><a href="#cb155-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-76"><a href="#cb155-76" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Nouvelle touche pressÃ©e?</span></span>
<span id="cb155-77"><a href="#cb155-77" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>key <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> key <span class="op">!=</span> last_key<span class="op">)</span> <span class="op">{</span></span>
<span id="cb155-78"><a href="#cb155-78" aria-hidden="true" tabindex="-1"></a>            draw_key<span class="op">(</span>cursor_x<span class="op">,</span> <span class="dv">16</span><span class="op">,</span> key<span class="op">);</span></span>
<span id="cb155-79"><a href="#cb155-79" aria-hidden="true" tabindex="-1"></a>            cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb155-80"><a href="#cb155-80" aria-hidden="true" tabindex="-1"></a>            key_count <span class="op">=</span> key_count <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb155-81"><a href="#cb155-81" aria-hidden="true" tabindex="-1"></a>            timeout <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>  <span class="co">// Reset timeout quand touche pressÃ©e</span></span>
<span id="cb155-82"><a href="#cb155-82" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb155-83"><a href="#cb155-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-84"><a href="#cb155-84" aria-hidden="true" tabindex="-1"></a>        last_key <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb155-85"><a href="#cb155-85" aria-hidden="true" tabindex="-1"></a>        timeout <span class="op">=</span> timeout <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb155-86"><a href="#cb155-86" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb155-87"><a href="#cb155-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-88"><a href="#cb155-88" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Si timeout atteint sans 5 touches, retourner quand mÃªme key_count</span></span>
<span id="cb155-89"><a href="#cb155-89" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span>  <span class="co">// Test visuel uniquement</span></span>
<span id="cb155-90"><a href="#cb155-90" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.8" id="shell"><span class="header-section-number">1.5.8</span> Shell</h3>
<div class="sourceCode" id="cb156"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Shell Interactif - Solution</span></span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Cochez &quot;Capturer clavier&quot; et tapez des chiffres!</span></span>
<span id="cb156-3"><a href="#cb156-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-4"><a href="#cb156-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>SCREEN <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb156-5"><a href="#cb156-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>KEYBOARD <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00402600</span><span class="op">;</span></span>
<span id="cb156-6"><a href="#cb156-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> number <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb156-7"><a href="#cb156-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> cursor_x <span class="op">=</span> <span class="dv">16</span><span class="op">;</span></span>
<span id="cb156-8"><a href="#cb156-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-9"><a href="#cb156-9" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_pixel<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb156-10"><a href="#cb156-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> row_base<span class="op">;</span></span>
<span id="cb156-11"><a href="#cb156-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb156-12"><a href="#cb156-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb156-13"><a href="#cb156-13" aria-hidden="true" tabindex="-1"></a>    row_base <span class="op">=</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb156-14"><a href="#cb156-14" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> row_base <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb156-15"><a href="#cb156-15" aria-hidden="true" tabindex="-1"></a>    bit_pos <span class="op">=</span> <span class="op">((</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb156-16"><a href="#cb156-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">|</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">);</span></span>
<span id="cb156-17"><a href="#cb156-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb156-18"><a href="#cb156-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-19"><a href="#cb156-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_line<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> data<span class="op">)</span> <span class="op">{</span></span>
<span id="cb156-20"><a href="#cb156-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x80</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb156-21"><a href="#cb156-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x40</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb156-22"><a href="#cb156-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x20</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb156-23"><a href="#cb156-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x10</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">3</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb156-24"><a href="#cb156-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x08</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb156-25"><a href="#cb156-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x04</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">5</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb156-26"><a href="#cb156-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x02</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">6</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb156-27"><a href="#cb156-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>data <span class="op">&amp;</span> <span class="bn">0x01</span><span class="op">)</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">7</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb156-28"><a href="#cb156-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb156-29"><a href="#cb156-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-30"><a href="#cb156-30" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine &quot;&gt;&quot; prompt</span></span>
<span id="cb156-31"><a href="#cb156-31" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> show_prompt<span class="op">()</span> <span class="op">{</span></span>
<span id="cb156-32"><a href="#cb156-32" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0x40</span><span class="op">);</span></span>
<span id="cb156-33"><a href="#cb156-33" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x20</span><span class="op">);</span></span>
<span id="cb156-34"><a href="#cb156-34" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x10</span><span class="op">);</span></span>
<span id="cb156-35"><a href="#cb156-35" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x20</span><span class="op">);</span></span>
<span id="cb156-36"><a href="#cb156-36" aria-hidden="true" tabindex="-1"></a>    draw_line<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x40</span><span class="op">);</span></span>
<span id="cb156-37"><a href="#cb156-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb156-38"><a href="#cb156-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-39"><a href="#cb156-39" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine un chiffre simplifiÃ©</span></span>
<span id="cb156-40"><a href="#cb156-40" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_digit<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> d<span class="op">)</span> <span class="op">{</span></span>
<span id="cb156-41"><a href="#cb156-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb156-42"><a href="#cb156-42" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb156-43"><a href="#cb156-43" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb156-44"><a href="#cb156-44" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span></span>
<span id="cb156-45"><a href="#cb156-45" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-46"><a href="#cb156-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb156-47"><a href="#cb156-47" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0x18</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x38</span><span class="op">);</span></span>
<span id="cb156-48"><a href="#cb156-48" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x18</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x18</span><span class="op">);</span></span>
<span id="cb156-49"><a href="#cb156-49" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x18</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span></span>
<span id="cb156-50"><a href="#cb156-50" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-51"><a href="#cb156-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb156-52"><a href="#cb156-52" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb156-53"><a href="#cb156-53" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x04</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x18</span><span class="op">);</span></span>
<span id="cb156-54"><a href="#cb156-54" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x20</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x7E</span><span class="op">);</span></span>
<span id="cb156-55"><a href="#cb156-55" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-56"><a href="#cb156-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">3</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb156-57"><a href="#cb156-57" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb156-58"><a href="#cb156-58" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x0C</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x02</span><span class="op">);</span></span>
<span id="cb156-59"><a href="#cb156-59" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span></span>
<span id="cb156-60"><a href="#cb156-60" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-61"><a href="#cb156-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">4</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb156-62"><a href="#cb156-62" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0x04</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x0C</span><span class="op">);</span></span>
<span id="cb156-63"><a href="#cb156-63" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x14</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x24</span><span class="op">);</span></span>
<span id="cb156-64"><a href="#cb156-64" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x7E</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x04</span><span class="op">);</span></span>
<span id="cb156-65"><a href="#cb156-65" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-66"><a href="#cb156-66" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">5</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb156-67"><a href="#cb156-67" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0x7E</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x40</span><span class="op">);</span></span>
<span id="cb156-68"><a href="#cb156-68" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x7C</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x02</span><span class="op">);</span></span>
<span id="cb156-69"><a href="#cb156-69" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span></span>
<span id="cb156-70"><a href="#cb156-70" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-71"><a href="#cb156-71" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">6</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb156-72"><a href="#cb156-72" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0x1C</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x20</span><span class="op">);</span></span>
<span id="cb156-73"><a href="#cb156-73" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x7C</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb156-74"><a href="#cb156-74" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span></span>
<span id="cb156-75"><a href="#cb156-75" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-76"><a href="#cb156-76" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb156-77"><a href="#cb156-77" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0x7E</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x02</span><span class="op">);</span></span>
<span id="cb156-78"><a href="#cb156-78" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x04</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x08</span><span class="op">);</span></span>
<span id="cb156-79"><a href="#cb156-79" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x10</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x10</span><span class="op">);</span></span>
<span id="cb156-80"><a href="#cb156-80" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-81"><a href="#cb156-81" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">8</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb156-82"><a href="#cb156-82" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb156-83"><a href="#cb156-83" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb156-84"><a href="#cb156-84" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span></span>
<span id="cb156-85"><a href="#cb156-85" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-86"><a href="#cb156-86" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">9</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb156-87"><a href="#cb156-87" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="bn">0x3C</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span></span>
<span id="cb156-88"><a href="#cb156-88" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="bn">0x3E</span><span class="op">);</span></span>
<span id="cb156-89"><a href="#cb156-89" aria-hidden="true" tabindex="-1"></a>        draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="bn">0x04</span><span class="op">);</span> draw_line<span class="op">(</span>x<span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="bn">0x38</span><span class="op">);</span></span>
<span id="cb156-90"><a href="#cb156-90" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-91"><a href="#cb156-91" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb156-92"><a href="#cb156-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-93"><a href="#cb156-93" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> read_key<span class="op">()</span> <span class="op">{</span></span>
<span id="cb156-94"><a href="#cb156-94" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">*</span>KEYBOARD<span class="op">;</span></span>
<span id="cb156-95"><a href="#cb156-95" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb156-96"><a href="#cb156-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-97"><a href="#cb156-97" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb156-98"><a href="#cb156-98" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> key<span class="op">;</span></span>
<span id="cb156-99"><a href="#cb156-99" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> last_key<span class="op">;</span></span>
<span id="cb156-100"><a href="#cb156-100" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> timeout<span class="op">;</span></span>
<span id="cb156-101"><a href="#cb156-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-102"><a href="#cb156-102" aria-hidden="true" tabindex="-1"></a>    last_key <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb156-103"><a href="#cb156-103" aria-hidden="true" tabindex="-1"></a>    timeout <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb156-104"><a href="#cb156-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-105"><a href="#cb156-105" aria-hidden="true" tabindex="-1"></a>    show_prompt<span class="op">();</span></span>
<span id="cb156-106"><a href="#cb156-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-107"><a href="#cb156-107" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>timeout <span class="op">&lt;</span> <span class="dv">50000</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb156-108"><a href="#cb156-108" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> read_key<span class="op">();</span></span>
<span id="cb156-109"><a href="#cb156-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-110"><a href="#cb156-110" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>key <span class="op">!=</span> last_key <span class="op">&amp;&amp;</span> key <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb156-111"><a href="#cb156-111" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Esc (27) = quitter</span></span>
<span id="cb156-112"><a href="#cb156-112" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">27</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb156-113"><a href="#cb156-113" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> number<span class="op">;</span></span>
<span id="cb156-114"><a href="#cb156-114" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb156-115"><a href="#cb156-115" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Enter (13) = terminer</span></span>
<span id="cb156-116"><a href="#cb156-116" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">13</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb156-117"><a href="#cb156-117" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> number<span class="op">;</span></span>
<span id="cb156-118"><a href="#cb156-118" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb156-119"><a href="#cb156-119" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Chiffres 0-9 (48-57)</span></span>
<span id="cb156-120"><a href="#cb156-120" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">&gt;=</span> <span class="dv">48</span> <span class="op">&amp;&amp;</span> key <span class="op">&lt;=</span> <span class="dv">57</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb156-121"><a href="#cb156-121" aria-hidden="true" tabindex="-1"></a>                draw_digit<span class="op">(</span>cursor_x<span class="op">,</span> key <span class="op">-</span> <span class="dv">48</span><span class="op">);</span></span>
<span id="cb156-122"><a href="#cb156-122" aria-hidden="true" tabindex="-1"></a>                cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb156-123"><a href="#cb156-123" aria-hidden="true" tabindex="-1"></a>                number <span class="op">=</span> number <span class="op">*</span> <span class="dv">10</span> <span class="op">+</span> <span class="op">(</span>key <span class="op">-</span> <span class="dv">48</span><span class="op">);</span></span>
<span id="cb156-124"><a href="#cb156-124" aria-hidden="true" tabindex="-1"></a>                timeout <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb156-125"><a href="#cb156-125" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb156-126"><a href="#cb156-126" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb156-127"><a href="#cb156-127" aria-hidden="true" tabindex="-1"></a>        last_key <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb156-128"><a href="#cb156-128" aria-hidden="true" tabindex="-1"></a>        timeout <span class="op">=</span> timeout <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb156-129"><a href="#cb156-129" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-130"><a href="#cb156-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-131"><a href="#cb156-131" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> number<span class="op">;</span></span>
<span id="cb156-132"><a href="#cb156-132" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.9" id="calculatrice"><span class="header-section-number">1.5.9</span> Calculatrice</h3>
<div class="sourceCode" id="cb157"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Calculatrice Interactive - Solution</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Cochez &quot;Capturer clavier&quot;, tapez: 3+5 Enter</span></span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-4"><a href="#cb157-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>SCREEN <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb157-5"><a href="#cb157-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>KEYBOARD <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00402600</span><span class="op">;</span></span>
<span id="cb157-6"><a href="#cb157-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> cursor_x <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb157-7"><a href="#cb157-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-8"><a href="#cb157-8" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_pixel<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb157-9"><a href="#cb157-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb157-10"><a href="#cb157-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb157-11"><a href="#cb157-11" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb157-12"><a href="#cb157-12" aria-hidden="true" tabindex="-1"></a>    bit_pos <span class="op">=</span> <span class="op">((</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb157-13"><a href="#cb157-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">|</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">);</span></span>
<span id="cb157-14"><a href="#cb157-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb157-15"><a href="#cb157-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-16"><a href="#cb157-16" aria-hidden="true" tabindex="-1"></a><span class="co">// Chiffre 3x5 pixels</span></span>
<span id="cb157-17"><a href="#cb157-17" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_digit<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> d<span class="op">)</span> <span class="op">{</span></span>
<span id="cb157-18"><a href="#cb157-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span> <span class="op">}</span></span>
<span id="cb157-19"><a href="#cb157-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">4</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">5</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">9</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb157-20"><a href="#cb157-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">5</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">6</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb157-21"><a href="#cb157-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb157-22"><a href="#cb157-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">2</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb157-23"><a href="#cb157-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb157-24"><a href="#cb157-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb157-25"><a href="#cb157-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb157-26"><a href="#cb157-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span> <span class="op">}</span></span>
<span id="cb157-27"><a href="#cb157-27" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb157-28"><a href="#cb157-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-29"><a href="#cb157-29" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_plus<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb157-30"><a href="#cb157-30" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb157-31"><a href="#cb157-31" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb157-32"><a href="#cb157-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb157-33"><a href="#cb157-33" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_minus<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb157-34"><a href="#cb157-34" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_times<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb157-35"><a href="#cb157-35" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_equal<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb157-36"><a href="#cb157-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-37"><a href="#cb157-37" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb157-38"><a href="#cb157-38" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> key<span class="op">;</span> <span class="dt">int</span> lk<span class="op">;</span> <span class="dt">int</span> a<span class="op">;</span> <span class="dt">int</span> b<span class="op">;</span> <span class="dt">int</span> op<span class="op">;</span> <span class="dt">int</span> st<span class="op">;</span> <span class="dt">int</span> r<span class="op">;</span> <span class="dt">int</span> t<span class="op">;</span> <span class="dt">int</span> tens<span class="op">;</span> <span class="dt">int</span> u<span class="op">;</span></span>
<span id="cb157-39"><a href="#cb157-39" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> b <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> op <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> st <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> lk <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> t <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb157-40"><a href="#cb157-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-41"><a href="#cb157-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>t <span class="op">&lt;</span> <span class="dv">50000</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb157-42"><a href="#cb157-42" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> <span class="op">*</span>KEYBOARD<span class="op">;</span></span>
<span id="cb157-43"><a href="#cb157-43" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>key <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> key <span class="op">!=</span> lk<span class="op">)</span> <span class="op">{</span></span>
<span id="cb157-44"><a href="#cb157-44" aria-hidden="true" tabindex="-1"></a>            t <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb157-45"><a href="#cb157-45" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">13</span> <span class="op">&amp;&amp;</span> st <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb157-46"><a href="#cb157-46" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> r <span class="op">=</span> a <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb157-47"><a href="#cb157-47" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> r <span class="op">=</span> a <span class="op">-</span> b<span class="op">;</span></span>
<span id="cb157-48"><a href="#cb157-48" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="op">(</span>op <span class="op">==</span> <span class="dv">3</span><span class="op">)</span> r <span class="op">=</span> a <span class="op">*</span> b<span class="op">;</span></span>
<span id="cb157-49"><a href="#cb157-49" aria-hidden="true" tabindex="-1"></a>                draw_equal<span class="op">(</span>cursor_x<span class="op">,</span> <span class="dv">10</span><span class="op">);</span> cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb157-50"><a href="#cb157-50" aria-hidden="true" tabindex="-1"></a>                tens <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> u <span class="op">=</span> r<span class="op">;</span></span>
<span id="cb157-51"><a href="#cb157-51" aria-hidden="true" tabindex="-1"></a>                <span class="cf">while</span> <span class="op">(</span>u <span class="op">&gt;=</span> <span class="dv">10</span><span class="op">)</span> <span class="op">{</span> u <span class="op">=</span> u <span class="op">-</span> <span class="dv">10</span><span class="op">;</span> tens <span class="op">=</span> tens <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb157-52"><a href="#cb157-52" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="op">(</span>tens <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> draw_digit<span class="op">(</span>cursor_x<span class="op">,</span> <span class="dv">10</span><span class="op">,</span> tens<span class="op">);</span> cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">5</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb157-53"><a href="#cb157-53" aria-hidden="true" tabindex="-1"></a>                draw_digit<span class="op">(</span>cursor_x<span class="op">,</span> <span class="dv">10</span><span class="op">,</span> u<span class="op">);</span></span>
<span id="cb157-54"><a href="#cb157-54" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> r<span class="op">;</span></span>
<span id="cb157-55"><a href="#cb157-55" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb157-56"><a href="#cb157-56" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">&gt;=</span> <span class="dv">48</span> <span class="op">&amp;&amp;</span> key <span class="op">&lt;=</span> <span class="dv">57</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb157-57"><a href="#cb157-57" aria-hidden="true" tabindex="-1"></a>                draw_digit<span class="op">(</span>cursor_x<span class="op">,</span> <span class="dv">10</span><span class="op">,</span> key <span class="op">-</span> <span class="dv">48</span><span class="op">);</span></span>
<span id="cb157-58"><a href="#cb157-58" aria-hidden="true" tabindex="-1"></a>                cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb157-59"><a href="#cb157-59" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="op">(</span>st <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> a <span class="op">=</span> key <span class="op">-</span> <span class="dv">48</span><span class="op">;</span> st <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb157-60"><a href="#cb157-60" aria-hidden="true" tabindex="-1"></a>                <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>st <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span> b <span class="op">=</span> key <span class="op">-</span> <span class="dv">48</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb157-61"><a href="#cb157-61" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb157-62"><a href="#cb157-62" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">43</span> <span class="op">&amp;&amp;</span> st <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> draw_plus<span class="op">(</span>cursor_x<span class="op">,</span> <span class="dv">10</span><span class="op">);</span> cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">5</span><span class="op">;</span> op <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> st <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb157-63"><a href="#cb157-63" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">45</span> <span class="op">&amp;&amp;</span> st <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> draw_minus<span class="op">(</span>cursor_x<span class="op">,</span> <span class="dv">10</span><span class="op">);</span> cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">5</span><span class="op">;</span> op <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> st <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb157-64"><a href="#cb157-64" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">42</span> <span class="op">&amp;&amp;</span> st <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> draw_times<span class="op">(</span>cursor_x<span class="op">,</span> <span class="dv">10</span><span class="op">);</span> cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">5</span><span class="op">;</span> op <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> st <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb157-65"><a href="#cb157-65" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb157-66"><a href="#cb157-66" aria-hidden="true" tabindex="-1"></a>        lk <span class="op">=</span> key<span class="op">;</span> t <span class="op">=</span> t <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb157-67"><a href="#cb157-67" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb157-68"><a href="#cb157-68" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb157-69"><a href="#cb157-69" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.10" id="variables-shell"><span class="header-section-number">1.5.10</span> Variables Shell</h3>
<div class="sourceCode" id="cb158"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Variables Shell Interactive - Solution</span></span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Cochez &quot;Capturer clavier&quot;, tapez: a=5 b=3 Enter</span></span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-4"><a href="#cb158-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>SCREEN <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb158-5"><a href="#cb158-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>KEYBOARD <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00402600</span><span class="op">;</span></span>
<span id="cb158-6"><a href="#cb158-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> cursor_x <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb158-7"><a href="#cb158-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-8"><a href="#cb158-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> var_names<span class="op">[</span><span class="dv">8</span><span class="op">];</span></span>
<span id="cb158-9"><a href="#cb158-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> var_values<span class="op">[</span><span class="dv">8</span><span class="op">];</span></span>
<span id="cb158-10"><a href="#cb158-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> var_count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb158-11"><a href="#cb158-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-12"><a href="#cb158-12" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_pixel<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb158-13"><a href="#cb158-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb158-14"><a href="#cb158-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb158-15"><a href="#cb158-15" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb158-16"><a href="#cb158-16" aria-hidden="true" tabindex="-1"></a>    bit_pos <span class="op">=</span> <span class="op">((</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb158-17"><a href="#cb158-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">|</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">);</span></span>
<span id="cb158-18"><a href="#cb158-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb158-19"><a href="#cb158-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-20"><a href="#cb158-20" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_char<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> c<span class="op">)</span> <span class="op">{</span></span>
<span id="cb158-21"><a href="#cb158-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb158-22"><a href="#cb158-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Lettre = ligne verticale + petit trait</span></span>
<span id="cb158-23"><a href="#cb158-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">&gt;=</span> <span class="dv">97</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="dv">122</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb158-24"><a href="#cb158-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> i<span class="op">);</span> <span class="op">}</span></span>
<span id="cb158-25"><a href="#cb158-25" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb158-26"><a href="#cb158-26" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> y <span class="op">+</span> <span class="op">(</span>c <span class="op">-</span> <span class="dv">97</span><span class="op">)</span> <span class="op">%</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb158-27"><a href="#cb158-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb158-28"><a href="#cb158-28" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Chiffre 3x5</span></span>
<span id="cb158-29"><a href="#cb158-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">&gt;=</span> <span class="dv">48</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="dv">57</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb158-30"><a href="#cb158-30" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> d<span class="op">;</span></span>
<span id="cb158-31"><a href="#cb158-31" aria-hidden="true" tabindex="-1"></a>        d <span class="op">=</span> c <span class="op">-</span> <span class="dv">48</span><span class="op">;</span></span>
<span id="cb158-32"><a href="#cb158-32" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span> <span class="op">}</span></span>
<span id="cb158-33"><a href="#cb158-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">4</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">5</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">9</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb158-34"><a href="#cb158-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">5</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">6</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb158-35"><a href="#cb158-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb158-36"><a href="#cb158-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">2</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb158-37"><a href="#cb158-37" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb158-38"><a href="#cb158-38" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb158-39"><a href="#cb158-39" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb158-40"><a href="#cb158-40" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb158-41"><a href="#cb158-41" aria-hidden="true" tabindex="-1"></a>    <span class="co">// = sign</span></span>
<span id="cb158-42"><a href="#cb158-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">==</span> <span class="dv">61</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb158-43"><a href="#cb158-43" aria-hidden="true" tabindex="-1"></a>    <span class="co">// + sign</span></span>
<span id="cb158-44"><a href="#cb158-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">==</span> <span class="dv">43</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb158-45"><a href="#cb158-45" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb158-46"><a href="#cb158-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-47"><a href="#cb158-47" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> find_var<span class="op">(</span><span class="dt">int</span> name<span class="op">)</span> <span class="op">{</span></span>
<span id="cb158-48"><a href="#cb158-48" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb158-49"><a href="#cb158-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> var_count<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb158-50"><a href="#cb158-50" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>var_names<span class="op">[</span>i<span class="op">]</span> <span class="op">==</span> name<span class="op">)</span> <span class="cf">return</span> i<span class="op">;</span></span>
<span id="cb158-51"><a href="#cb158-51" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb158-52"><a href="#cb158-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span> <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb158-53"><a href="#cb158-53" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb158-54"><a href="#cb158-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-55"><a href="#cb158-55" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_var<span class="op">(</span><span class="dt">int</span> name<span class="op">,</span> <span class="dt">int</span> value<span class="op">)</span> <span class="op">{</span></span>
<span id="cb158-56"><a href="#cb158-56" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> idx<span class="op">;</span></span>
<span id="cb158-57"><a href="#cb158-57" aria-hidden="true" tabindex="-1"></a>    idx <span class="op">=</span> find_var<span class="op">(</span>name<span class="op">);</span></span>
<span id="cb158-58"><a href="#cb158-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>idx <span class="op">&gt;=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> var_values<span class="op">[</span>idx<span class="op">]</span> <span class="op">=</span> value<span class="op">;</span> <span class="cf">return</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb158-59"><a href="#cb158-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>var_count <span class="op">&lt;</span> <span class="dv">8</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb158-60"><a href="#cb158-60" aria-hidden="true" tabindex="-1"></a>        var_names<span class="op">[</span>var_count<span class="op">]</span> <span class="op">=</span> name<span class="op">;</span></span>
<span id="cb158-61"><a href="#cb158-61" aria-hidden="true" tabindex="-1"></a>        var_values<span class="op">[</span>var_count<span class="op">]</span> <span class="op">=</span> value<span class="op">;</span></span>
<span id="cb158-62"><a href="#cb158-62" aria-hidden="true" tabindex="-1"></a>        var_count <span class="op">=</span> var_count <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb158-63"><a href="#cb158-63" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb158-64"><a href="#cb158-64" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb158-65"><a href="#cb158-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-66"><a href="#cb158-66" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> get_var<span class="op">(</span><span class="dt">int</span> name<span class="op">)</span> <span class="op">{</span></span>
<span id="cb158-67"><a href="#cb158-67" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> idx<span class="op">;</span></span>
<span id="cb158-68"><a href="#cb158-68" aria-hidden="true" tabindex="-1"></a>    idx <span class="op">=</span> find_var<span class="op">(</span>name<span class="op">);</span></span>
<span id="cb158-69"><a href="#cb158-69" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>idx <span class="op">&gt;=</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> var_values<span class="op">[</span>idx<span class="op">];</span></span>
<span id="cb158-70"><a href="#cb158-70" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb158-71"><a href="#cb158-71" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb158-72"><a href="#cb158-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-73"><a href="#cb158-73" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb158-74"><a href="#cb158-74" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> key<span class="op">;</span> <span class="dt">int</span> lk<span class="op">;</span> <span class="dt">int</span> t<span class="op">;</span> <span class="dt">int</span> st<span class="op">;</span> <span class="dt">int</span> cur_name<span class="op">;</span> <span class="dt">int</span> result<span class="op">;</span></span>
<span id="cb158-75"><a href="#cb158-75" aria-hidden="true" tabindex="-1"></a>    lk <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> t <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> st <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> cur_name <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> result <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb158-76"><a href="#cb158-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-77"><a href="#cb158-77" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>t <span class="op">&lt;</span> <span class="dv">50000</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb158-78"><a href="#cb158-78" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> <span class="op">*</span>KEYBOARD<span class="op">;</span></span>
<span id="cb158-79"><a href="#cb158-79" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>key <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> key <span class="op">!=</span> lk<span class="op">)</span> <span class="op">{</span></span>
<span id="cb158-80"><a href="#cb158-80" aria-hidden="true" tabindex="-1"></a>            t <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb158-81"><a href="#cb158-81" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Enter = calculer rÃ©sultat</span></span>
<span id="cb158-82"><a href="#cb158-82" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">13</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb158-83"><a href="#cb158-83" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="op">(</span>var_count <span class="op">&gt;=</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb158-84"><a href="#cb158-84" aria-hidden="true" tabindex="-1"></a>                    result <span class="op">=</span> var_values<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">+</span> var_values<span class="op">[</span><span class="dv">1</span><span class="op">];</span></span>
<span id="cb158-85"><a href="#cb158-85" aria-hidden="true" tabindex="-1"></a>                    draw_char<span class="op">(</span>cursor_x<span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">61</span><span class="op">);</span> cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb158-86"><a href="#cb158-86" aria-hidden="true" tabindex="-1"></a>                    draw_char<span class="op">(</span>cursor_x<span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">48</span> <span class="op">+</span> result<span class="op">);</span> cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb158-87"><a href="#cb158-87" aria-hidden="true" tabindex="-1"></a>                <span class="op">}</span></span>
<span id="cb158-88"><a href="#cb158-88" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb158-89"><a href="#cb158-89" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb158-90"><a href="#cb158-90" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Lettre a-z</span></span>
<span id="cb158-91"><a href="#cb158-91" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">&gt;=</span> <span class="dv">97</span> <span class="op">&amp;&amp;</span> key <span class="op">&lt;=</span> <span class="dv">122</span> <span class="op">&amp;&amp;</span> st <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb158-92"><a href="#cb158-92" aria-hidden="true" tabindex="-1"></a>                draw_char<span class="op">(</span>cursor_x<span class="op">,</span> <span class="dv">10</span><span class="op">,</span> key<span class="op">);</span> cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb158-93"><a href="#cb158-93" aria-hidden="true" tabindex="-1"></a>                cur_name <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb158-94"><a href="#cb158-94" aria-hidden="true" tabindex="-1"></a>                st <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb158-95"><a href="#cb158-95" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb158-96"><a href="#cb158-96" aria-hidden="true" tabindex="-1"></a>            <span class="co">// = aprÃ¨s lettre</span></span>
<span id="cb158-97"><a href="#cb158-97" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">61</span> <span class="op">&amp;&amp;</span> st <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb158-98"><a href="#cb158-98" aria-hidden="true" tabindex="-1"></a>                draw_char<span class="op">(</span>cursor_x<span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">61</span><span class="op">);</span> cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb158-99"><a href="#cb158-99" aria-hidden="true" tabindex="-1"></a>                st <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb158-100"><a href="#cb158-100" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb158-101"><a href="#cb158-101" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Chiffre aprÃ¨s =</span></span>
<span id="cb158-102"><a href="#cb158-102" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">&gt;=</span> <span class="dv">48</span> <span class="op">&amp;&amp;</span> key <span class="op">&lt;=</span> <span class="dv">57</span> <span class="op">&amp;&amp;</span> st <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb158-103"><a href="#cb158-103" aria-hidden="true" tabindex="-1"></a>                draw_char<span class="op">(</span>cursor_x<span class="op">,</span> <span class="dv">10</span><span class="op">,</span> key<span class="op">);</span> cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb158-104"><a href="#cb158-104" aria-hidden="true" tabindex="-1"></a>                set_var<span class="op">(</span>cur_name<span class="op">,</span> key <span class="op">-</span> <span class="dv">48</span><span class="op">);</span></span>
<span id="cb158-105"><a href="#cb158-105" aria-hidden="true" tabindex="-1"></a>                st <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb158-106"><a href="#cb158-106" aria-hidden="true" tabindex="-1"></a>                cursor_x <span class="op">=</span> cursor_x <span class="op">+</span> <span class="dv">3</span><span class="op">;</span> <span class="co">// espace</span></span>
<span id="cb158-107"><a href="#cb158-107" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb158-108"><a href="#cb158-108" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb158-109"><a href="#cb158-109" aria-hidden="true" tabindex="-1"></a>        lk <span class="op">=</span> key<span class="op">;</span> t <span class="op">=</span> t <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb158-110"><a href="#cb158-110" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb158-111"><a href="#cb158-111" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb158-112"><a href="#cb158-112" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.11" id="compte-Ã -rebours"><span class="header-section-number">1.5.11</span> Compte Ã  Rebours</h3>
<div class="sourceCode" id="cb159"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Compte Ã  Rebours Interactif - Solution</span></span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Cochez &quot;Capturer clavier&quot;, tapez 3 pour 3 secondes</span></span>
<span id="cb159-3"><a href="#cb159-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-4"><a href="#cb159-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>SCREEN <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb159-5"><a href="#cb159-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>KEYBOARD <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00402600</span><span class="op">;</span></span>
<span id="cb159-6"><a href="#cb159-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-7"><a href="#cb159-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_pixel<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb159-8"><a href="#cb159-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb159-9"><a href="#cb159-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb159-10"><a href="#cb159-10" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb159-11"><a href="#cb159-11" aria-hidden="true" tabindex="-1"></a>    bit_pos <span class="op">=</span> <span class="op">((</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb159-12"><a href="#cb159-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">|</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">);</span></span>
<span id="cb159-13"><a href="#cb159-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb159-14"><a href="#cb159-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-15"><a href="#cb159-15" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine chiffre 3x5</span></span>
<span id="cb159-16"><a href="#cb159-16" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_digit<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> d<span class="op">,</span> <span class="dt">int</span> on<span class="op">)</span> <span class="op">{</span></span>
<span id="cb159-17"><a href="#cb159-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> j<span class="op">;</span> <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span> <span class="dt">int</span> bit_pos<span class="op">;</span> <span class="dt">int</span> px<span class="op">;</span> <span class="dt">int</span> py<span class="op">;</span></span>
<span id="cb159-18"><a href="#cb159-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Efface d&#39;abord la zone</span></span>
<span id="cb159-19"><a href="#cb159-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb159-20"><a href="#cb159-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">6</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb159-21"><a href="#cb159-21" aria-hidden="true" tabindex="-1"></a>            px <span class="op">=</span> x <span class="op">+</span> i<span class="op">;</span> py <span class="op">=</span> y <span class="op">+</span> j<span class="op">;</span></span>
<span id="cb159-22"><a href="#cb159-22" aria-hidden="true" tabindex="-1"></a>            ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>py <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>py <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>px <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb159-23"><a href="#cb159-23" aria-hidden="true" tabindex="-1"></a>            bit_pos <span class="op">=</span> <span class="op">((</span>px <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>px <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb159-24"><a href="#cb159-24" aria-hidden="true" tabindex="-1"></a>            <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">&amp;</span> <span class="op">(</span><span class="bn">0xFFFFFFFF</span> <span class="op">^</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">));</span></span>
<span id="cb159-25"><a href="#cb159-25" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb159-26"><a href="#cb159-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb159-27"><a href="#cb159-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>on <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb159-28"><a href="#cb159-28" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Dessine le chiffre</span></span>
<span id="cb159-29"><a href="#cb159-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span> <span class="op">}</span></span>
<span id="cb159-30"><a href="#cb159-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">4</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">5</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">9</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb159-31"><a href="#cb159-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">5</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">6</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb159-32"><a href="#cb159-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb159-33"><a href="#cb159-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">2</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb159-34"><a href="#cb159-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb159-35"><a href="#cb159-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb159-36"><a href="#cb159-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb159-37"><a href="#cb159-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb159-38"><a href="#cb159-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-39"><a href="#cb159-39" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine barre horizontale</span></span>
<span id="cb159-40"><a href="#cb159-40" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_hbar<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">)</span> <span class="op">{</span></span>
<span id="cb159-41"><a href="#cb159-41" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> j<span class="op">;</span></span>
<span id="cb159-42"><a href="#cb159-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb159-43"><a href="#cb159-43" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb159-44"><a href="#cb159-44" aria-hidden="true" tabindex="-1"></a>            set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y <span class="op">+</span> j<span class="op">);</span></span>
<span id="cb159-45"><a href="#cb159-45" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb159-46"><a href="#cb159-46" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb159-47"><a href="#cb159-47" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb159-48"><a href="#cb159-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-49"><a href="#cb159-49" aria-hidden="true" tabindex="-1"></a><span class="co">// Efface colonne de barre (XOR avec 0xFFFFFFFF au lieu de ~)</span></span>
<span id="cb159-50"><a href="#cb159-50" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> clear_col<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb159-51"><a href="#cb159-51" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> j<span class="op">;</span> <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span> <span class="dt">int</span> bit_pos<span class="op">;</span> <span class="dt">int</span> py<span class="op">;</span></span>
<span id="cb159-52"><a href="#cb159-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb159-53"><a href="#cb159-53" aria-hidden="true" tabindex="-1"></a>        py <span class="op">=</span> y <span class="op">+</span> j<span class="op">;</span></span>
<span id="cb159-54"><a href="#cb159-54" aria-hidden="true" tabindex="-1"></a>        ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>py <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>py <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb159-55"><a href="#cb159-55" aria-hidden="true" tabindex="-1"></a>        bit_pos <span class="op">=</span> <span class="op">((</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb159-56"><a href="#cb159-56" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">&amp;</span> <span class="op">(</span><span class="bn">0xFFFFFFFF</span> <span class="op">^</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">));</span></span>
<span id="cb159-57"><a href="#cb159-57" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb159-58"><a href="#cb159-58" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb159-59"><a href="#cb159-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-60"><a href="#cb159-60" aria-hidden="true" tabindex="-1"></a><span class="co">// Flash rectangle</span></span>
<span id="cb159-61"><a href="#cb159-61" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> flash<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb159-62"><a href="#cb159-62" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> j<span class="op">;</span></span>
<span id="cb159-63"><a href="#cb159-63" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb159-64"><a href="#cb159-64" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> h<span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb159-65"><a href="#cb159-65" aria-hidden="true" tabindex="-1"></a>            set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y <span class="op">+</span> j<span class="op">);</span></span>
<span id="cb159-66"><a href="#cb159-66" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb159-67"><a href="#cb159-67" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb159-68"><a href="#cb159-68" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb159-69"><a href="#cb159-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-70"><a href="#cb159-70" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> state <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb159-71"><a href="#cb159-71" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> secs <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb159-72"><a href="#cb159-72" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> bar_x <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb159-73"><a href="#cb159-73" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> step <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb159-74"><a href="#cb159-74" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> tick <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb159-75"><a href="#cb159-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-76"><a href="#cb159-76" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb159-77"><a href="#cb159-77" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> key<span class="op">;</span> <span class="dt">int</span> lk<span class="op">;</span> <span class="dt">int</span> t<span class="op">;</span> <span class="dt">int</span> bar_w<span class="op">;</span></span>
<span id="cb159-78"><a href="#cb159-78" aria-hidden="true" tabindex="-1"></a>    lk <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> t <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb159-79"><a href="#cb159-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-80"><a href="#cb159-80" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>t <span class="op">&lt;</span> <span class="dv">500000</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb159-81"><a href="#cb159-81" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> <span class="op">*</span>KEYBOARD<span class="op">;</span></span>
<span id="cb159-82"><a href="#cb159-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-83"><a href="#cb159-83" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>state <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb159-84"><a href="#cb159-84" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">&gt;=</span> <span class="dv">49</span> <span class="op">&amp;&amp;</span> key <span class="op">&lt;=</span> <span class="dv">57</span> <span class="op">&amp;&amp;</span> key <span class="op">!=</span> lk<span class="op">)</span> <span class="op">{</span></span>
<span id="cb159-85"><a href="#cb159-85" aria-hidden="true" tabindex="-1"></a>                secs <span class="op">=</span> key <span class="op">-</span> <span class="dv">48</span><span class="op">;</span></span>
<span id="cb159-86"><a href="#cb159-86" aria-hidden="true" tabindex="-1"></a>                draw_digit<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> secs<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb159-87"><a href="#cb159-87" aria-hidden="true" tabindex="-1"></a>                bar_w <span class="op">=</span> secs <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb159-88"><a href="#cb159-88" aria-hidden="true" tabindex="-1"></a>                draw_hbar<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">15</span><span class="op">,</span> bar_w<span class="op">);</span></span>
<span id="cb159-89"><a href="#cb159-89" aria-hidden="true" tabindex="-1"></a>                bar_x <span class="op">=</span> <span class="dv">3</span> <span class="op">+</span> bar_w<span class="op">;</span></span>
<span id="cb159-90"><a href="#cb159-90" aria-hidden="true" tabindex="-1"></a>                step <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb159-91"><a href="#cb159-91" aria-hidden="true" tabindex="-1"></a>                tick <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb159-92"><a href="#cb159-92" aria-hidden="true" tabindex="-1"></a>                state <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb159-93"><a href="#cb159-93" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb159-94"><a href="#cb159-94" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb159-95"><a href="#cb159-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-96"><a href="#cb159-96" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>state <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb159-97"><a href="#cb159-97" aria-hidden="true" tabindex="-1"></a>            tick <span class="op">=</span> tick <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb159-98"><a href="#cb159-98" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>tick <span class="op">&gt;=</span> <span class="dv">800</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb159-99"><a href="#cb159-99" aria-hidden="true" tabindex="-1"></a>                tick <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb159-100"><a href="#cb159-100" aria-hidden="true" tabindex="-1"></a>                clear_col<span class="op">(</span>bar_x<span class="op">,</span> <span class="dv">15</span><span class="op">);</span></span>
<span id="cb159-101"><a href="#cb159-101" aria-hidden="true" tabindex="-1"></a>                bar_x <span class="op">=</span> bar_x <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb159-102"><a href="#cb159-102" aria-hidden="true" tabindex="-1"></a>                step <span class="op">=</span> step <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb159-103"><a href="#cb159-103" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="op">(</span>step <span class="op">&gt;=</span> <span class="dv">8</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb159-104"><a href="#cb159-104" aria-hidden="true" tabindex="-1"></a>                    step <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb159-105"><a href="#cb159-105" aria-hidden="true" tabindex="-1"></a>                    secs <span class="op">=</span> secs <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb159-106"><a href="#cb159-106" aria-hidden="true" tabindex="-1"></a>                    draw_digit<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> secs<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb159-107"><a href="#cb159-107" aria-hidden="true" tabindex="-1"></a>                    <span class="cf">if</span> <span class="op">(</span>secs <span class="op">&lt;=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb159-108"><a href="#cb159-108" aria-hidden="true" tabindex="-1"></a>                        state <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb159-109"><a href="#cb159-109" aria-hidden="true" tabindex="-1"></a>                    <span class="op">}</span></span>
<span id="cb159-110"><a href="#cb159-110" aria-hidden="true" tabindex="-1"></a>                <span class="op">}</span></span>
<span id="cb159-111"><a href="#cb159-111" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb159-112"><a href="#cb159-112" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb159-113"><a href="#cb159-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-114"><a href="#cb159-114" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>state <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb159-115"><a href="#cb159-115" aria-hidden="true" tabindex="-1"></a>            flash<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">60</span><span class="op">,</span> <span class="dv">20</span><span class="op">);</span></span>
<span id="cb159-116"><a href="#cb159-116" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb159-117"><a href="#cb159-117" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb159-118"><a href="#cb159-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-119"><a href="#cb159-119" aria-hidden="true" tabindex="-1"></a>        lk <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb159-120"><a href="#cb159-120" aria-hidden="true" tabindex="-1"></a>        t <span class="op">=</span> t <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb159-121"><a href="#cb159-121" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb159-122"><a href="#cb159-122" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb159-123"><a href="#cb159-123" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.12" id="interruptions"><span class="header-section-number">1.5.12</span> Interruptions</h3>
<div class="sourceCode" id="cb160"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Interruptions Visuelles - Solution</span></span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Cochez &quot;Capturer clavier&quot;, appuyez T/K/S puis Enter</span></span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-4"><a href="#cb160-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>SCREEN <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb160-5"><a href="#cb160-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>KEYBOARD <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00402600</span><span class="op">;</span></span>
<span id="cb160-6"><a href="#cb160-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-7"><a href="#cb160-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> irq_count<span class="op">[</span><span class="dv">3</span><span class="op">];</span></span>
<span id="cb160-8"><a href="#cb160-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-9"><a href="#cb160-9" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_pixel<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb160-10"><a href="#cb160-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span> <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb160-11"><a href="#cb160-11" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb160-12"><a href="#cb160-12" aria-hidden="true" tabindex="-1"></a>    bit_pos <span class="op">=</span> <span class="op">((</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb160-13"><a href="#cb160-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">|</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">);</span></span>
<span id="cb160-14"><a href="#cb160-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb160-15"><a href="#cb160-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-16"><a href="#cb160-16" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> clear_rect<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb160-17"><a href="#cb160-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> j<span class="op">;</span> <span class="dt">int</span> px<span class="op">;</span> <span class="dt">int</span> py<span class="op">;</span> <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span> <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb160-18"><a href="#cb160-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb160-19"><a href="#cb160-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> h<span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb160-20"><a href="#cb160-20" aria-hidden="true" tabindex="-1"></a>            px <span class="op">=</span> x <span class="op">+</span> i<span class="op">;</span> py <span class="op">=</span> y <span class="op">+</span> j<span class="op">;</span></span>
<span id="cb160-21"><a href="#cb160-21" aria-hidden="true" tabindex="-1"></a>            ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>py <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>py <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>px <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb160-22"><a href="#cb160-22" aria-hidden="true" tabindex="-1"></a>            bit_pos <span class="op">=</span> <span class="op">((</span>px <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>px <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb160-23"><a href="#cb160-23" aria-hidden="true" tabindex="-1"></a>            <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">&amp;</span> <span class="op">(</span><span class="bn">0xFFFFFFFF</span> <span class="op">^</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">));</span></span>
<span id="cb160-24"><a href="#cb160-24" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb160-25"><a href="#cb160-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb160-26"><a href="#cb160-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb160-27"><a href="#cb160-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-28"><a href="#cb160-28" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> fill_rect<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb160-29"><a href="#cb160-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> j<span class="op">;</span></span>
<span id="cb160-30"><a href="#cb160-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb160-31"><a href="#cb160-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> h<span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb160-32"><a href="#cb160-32" aria-hidden="true" tabindex="-1"></a>            set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y <span class="op">+</span> j<span class="op">);</span></span>
<span id="cb160-33"><a href="#cb160-33" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb160-34"><a href="#cb160-34" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb160-35"><a href="#cb160-35" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb160-36"><a href="#cb160-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-37"><a href="#cb160-37" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_box<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb160-38"><a href="#cb160-38" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb160-39"><a href="#cb160-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y <span class="op">+</span> h <span class="op">-</span> <span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb160-40"><a href="#cb160-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> h<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> i<span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> w <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> y <span class="op">+</span> i<span class="op">);</span> <span class="op">}</span></span>
<span id="cb160-41"><a href="#cb160-41" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb160-42"><a href="#cb160-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-43"><a href="#cb160-43" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_digit<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> d<span class="op">)</span> <span class="op">{</span></span>
<span id="cb160-44"><a href="#cb160-44" aria-hidden="true" tabindex="-1"></a>    clear_rect<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb160-45"><a href="#cb160-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span> <span class="op">}</span></span>
<span id="cb160-46"><a href="#cb160-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">4</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">5</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">9</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb160-47"><a href="#cb160-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">5</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">6</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb160-48"><a href="#cb160-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb160-49"><a href="#cb160-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">2</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb160-50"><a href="#cb160-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">2</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb160-51"><a href="#cb160-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb160-52"><a href="#cb160-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb160-53"><a href="#cb160-53" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb160-54"><a href="#cb160-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-55"><a href="#cb160-55" aria-hidden="true" tabindex="-1"></a><span class="co">// Dessine lettre T, K ou S</span></span>
<span id="cb160-56"><a href="#cb160-56" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_letter<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> c<span class="op">)</span> <span class="op">{</span></span>
<span id="cb160-57"><a href="#cb160-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">==</span> <span class="dv">84</span><span class="op">)</span> <span class="op">{</span> <span class="co">// T</span></span>
<span id="cb160-58"><a href="#cb160-58" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">);</span></span>
<span id="cb160-59"><a href="#cb160-59" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">4</span><span class="op">);</span></span>
<span id="cb160-60"><a href="#cb160-60" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb160-61"><a href="#cb160-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">==</span> <span class="dv">75</span><span class="op">)</span> <span class="op">{</span> <span class="co">// K</span></span>
<span id="cb160-62"><a href="#cb160-62" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">+</span><span class="dv">4</span><span class="op">);</span></span>
<span id="cb160-63"><a href="#cb160-63" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">+</span><span class="dv">4</span><span class="op">);</span></span>
<span id="cb160-64"><a href="#cb160-64" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb160-65"><a href="#cb160-65" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb160-66"><a href="#cb160-66" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">==</span> <span class="dv">83</span><span class="op">)</span> <span class="op">{</span> <span class="co">// S</span></span>
<span id="cb160-67"><a href="#cb160-67" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">);</span></span>
<span id="cb160-68"><a href="#cb160-68" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb160-69"><a href="#cb160-69" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">+</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb160-70"><a href="#cb160-70" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb160-71"><a href="#cb160-71" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x<span class="op">,</span>y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span>y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span>y<span class="op">+</span><span class="dv">4</span><span class="op">);</span></span>
<span id="cb160-72"><a href="#cb160-72" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb160-73"><a href="#cb160-73" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb160-74"><a href="#cb160-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-75"><a href="#cb160-75" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_device<span class="op">(</span><span class="dt">int</span> idx<span class="op">)</span> <span class="op">{</span></span>
<span id="cb160-76"><a href="#cb160-76" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x<span class="op">;</span></span>
<span id="cb160-77"><a href="#cb160-77" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> idx <span class="op">*</span> <span class="dv">25</span> <span class="op">+</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb160-78"><a href="#cb160-78" aria-hidden="true" tabindex="-1"></a>    draw_box<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">15</span><span class="op">);</span></span>
<span id="cb160-79"><a href="#cb160-79" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>idx <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> draw_letter<span class="op">(</span>x <span class="op">+</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">84</span><span class="op">);</span></span>
<span id="cb160-80"><a href="#cb160-80" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>idx <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> draw_letter<span class="op">(</span>x <span class="op">+</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">75</span><span class="op">);</span></span>
<span id="cb160-81"><a href="#cb160-81" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>idx <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> draw_letter<span class="op">(</span>x <span class="op">+</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">83</span><span class="op">);</span></span>
<span id="cb160-82"><a href="#cb160-82" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span>x <span class="op">+</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">13</span><span class="op">,</span> irq_count<span class="op">[</span>idx<span class="op">]);</span></span>
<span id="cb160-83"><a href="#cb160-83" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb160-84"><a href="#cb160-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-85"><a href="#cb160-85" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> flash_device<span class="op">(</span><span class="dt">int</span> idx<span class="op">)</span> <span class="op">{</span></span>
<span id="cb160-86"><a href="#cb160-86" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x<span class="op">;</span> <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb160-87"><a href="#cb160-87" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> idx <span class="op">*</span> <span class="dv">25</span> <span class="op">+</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb160-88"><a href="#cb160-88" aria-hidden="true" tabindex="-1"></a>    fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">18</span><span class="op">,</span> <span class="dv">13</span><span class="op">);</span></span>
<span id="cb160-89"><a href="#cb160-89" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Petit delai</span></span>
<span id="cb160-90"><a href="#cb160-90" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">500</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> <span class="op">}</span></span>
<span id="cb160-91"><a href="#cb160-91" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb160-92"><a href="#cb160-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-93"><a href="#cb160-93" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> irq_handler<span class="op">(</span><span class="dt">int</span> type<span class="op">)</span> <span class="op">{</span></span>
<span id="cb160-94"><a href="#cb160-94" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>type <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> type <span class="op">&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb160-95"><a href="#cb160-95" aria-hidden="true" tabindex="-1"></a>        irq_count<span class="op">[</span>type<span class="op">]</span> <span class="op">=</span> irq_count<span class="op">[</span>type<span class="op">]</span> <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb160-96"><a href="#cb160-96" aria-hidden="true" tabindex="-1"></a>        flash_device<span class="op">(</span>type<span class="op">);</span></span>
<span id="cb160-97"><a href="#cb160-97" aria-hidden="true" tabindex="-1"></a>        draw_device<span class="op">(</span>type<span class="op">);</span></span>
<span id="cb160-98"><a href="#cb160-98" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb160-99"><a href="#cb160-99" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb160-100"><a href="#cb160-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-101"><a href="#cb160-101" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb160-102"><a href="#cb160-102" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> key<span class="op">;</span> <span class="dt">int</span> lk<span class="op">;</span> <span class="dt">int</span> t<span class="op">;</span> <span class="dt">int</span> total<span class="op">;</span></span>
<span id="cb160-103"><a href="#cb160-103" aria-hidden="true" tabindex="-1"></a>    lk <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> t <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb160-104"><a href="#cb160-104" aria-hidden="true" tabindex="-1"></a>    irq_count<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> irq_count<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> irq_count<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb160-105"><a href="#cb160-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-106"><a href="#cb160-106" aria-hidden="true" tabindex="-1"></a>    draw_device<span class="op">(</span><span class="dv">0</span><span class="op">);</span></span>
<span id="cb160-107"><a href="#cb160-107" aria-hidden="true" tabindex="-1"></a>    draw_device<span class="op">(</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb160-108"><a href="#cb160-108" aria-hidden="true" tabindex="-1"></a>    draw_device<span class="op">(</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb160-109"><a href="#cb160-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-110"><a href="#cb160-110" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>t <span class="op">&lt;</span> <span class="dv">100000</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb160-111"><a href="#cb160-111" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> <span class="op">*</span>KEYBOARD<span class="op">;</span></span>
<span id="cb160-112"><a href="#cb160-112" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>key <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> key <span class="op">!=</span> lk<span class="op">)</span> <span class="op">{</span></span>
<span id="cb160-113"><a href="#cb160-113" aria-hidden="true" tabindex="-1"></a>            t <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb160-114"><a href="#cb160-114" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">13</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb160-115"><a href="#cb160-115" aria-hidden="true" tabindex="-1"></a>                total <span class="op">=</span> irq_count<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">+</span> irq_count<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">+</span> irq_count<span class="op">[</span><span class="dv">2</span><span class="op">];</span></span>
<span id="cb160-116"><a href="#cb160-116" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> total<span class="op">;</span></span>
<span id="cb160-117"><a href="#cb160-117" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb160-118"><a href="#cb160-118" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">116</span> <span class="op">||</span> key <span class="op">==</span> <span class="dv">84</span><span class="op">)</span> irq_handler<span class="op">(</span><span class="dv">0</span><span class="op">);</span></span>
<span id="cb160-119"><a href="#cb160-119" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">107</span> <span class="op">||</span> key <span class="op">==</span> <span class="dv">75</span><span class="op">)</span> irq_handler<span class="op">(</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb160-120"><a href="#cb160-120" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">115</span> <span class="op">||</span> key <span class="op">==</span> <span class="dv">83</span><span class="op">)</span> irq_handler<span class="op">(</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb160-121"><a href="#cb160-121" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb160-122"><a href="#cb160-122" aria-hidden="true" tabindex="-1"></a>        lk <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb160-123"><a href="#cb160-123" aria-hidden="true" tabindex="-1"></a>        t <span class="op">=</span> t <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb160-124"><a href="#cb160-124" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb160-125"><a href="#cb160-125" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb160-126"><a href="#cb160-126" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.13" id="coroutines"><span class="header-section-number">1.5.13</span> Coroutines</h3>
<div class="sourceCode" id="cb161"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Coroutines Visuelles - Solution</span></span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Cochez &quot;Capturer clavier&quot;, appuyez Espace pour chaque step</span></span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-4"><a href="#cb161-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>SCREEN <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb161-5"><a href="#cb161-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>KEYBOARD <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00402600</span><span class="op">;</span></span>
<span id="cb161-6"><a href="#cb161-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-7"><a href="#cb161-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> current_task <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb161-8"><a href="#cb161-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> task_a_val <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb161-9"><a href="#cb161-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> task_b_val <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb161-10"><a href="#cb161-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> steps <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb161-11"><a href="#cb161-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-12"><a href="#cb161-12" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_pixel<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb161-13"><a href="#cb161-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span> <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb161-14"><a href="#cb161-14" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb161-15"><a href="#cb161-15" aria-hidden="true" tabindex="-1"></a>    bit_pos <span class="op">=</span> <span class="op">((</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb161-16"><a href="#cb161-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">|</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">);</span></span>
<span id="cb161-17"><a href="#cb161-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb161-18"><a href="#cb161-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-19"><a href="#cb161-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> clear_rect<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb161-20"><a href="#cb161-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> j<span class="op">;</span> <span class="dt">int</span> px<span class="op">;</span> <span class="dt">int</span> py<span class="op">;</span> <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span> <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb161-21"><a href="#cb161-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb161-22"><a href="#cb161-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> h<span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb161-23"><a href="#cb161-23" aria-hidden="true" tabindex="-1"></a>            px <span class="op">=</span> x <span class="op">+</span> i<span class="op">;</span> py <span class="op">=</span> y <span class="op">+</span> j<span class="op">;</span></span>
<span id="cb161-24"><a href="#cb161-24" aria-hidden="true" tabindex="-1"></a>            ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>py <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>py <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>px <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb161-25"><a href="#cb161-25" aria-hidden="true" tabindex="-1"></a>            bit_pos <span class="op">=</span> <span class="op">((</span>px <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>px <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb161-26"><a href="#cb161-26" aria-hidden="true" tabindex="-1"></a>            <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">&amp;</span> <span class="op">(</span><span class="bn">0xFFFFFFFF</span> <span class="op">^</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">));</span></span>
<span id="cb161-27"><a href="#cb161-27" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb161-28"><a href="#cb161-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb161-29"><a href="#cb161-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb161-30"><a href="#cb161-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-31"><a href="#cb161-31" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> fill_rect<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb161-32"><a href="#cb161-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> j<span class="op">;</span></span>
<span id="cb161-33"><a href="#cb161-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb161-34"><a href="#cb161-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> h<span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb161-35"><a href="#cb161-35" aria-hidden="true" tabindex="-1"></a>            set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y <span class="op">+</span> j<span class="op">);</span></span>
<span id="cb161-36"><a href="#cb161-36" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb161-37"><a href="#cb161-37" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb161-38"><a href="#cb161-38" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb161-39"><a href="#cb161-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-40"><a href="#cb161-40" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_box<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb161-41"><a href="#cb161-41" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb161-42"><a href="#cb161-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y <span class="op">+</span> h <span class="op">-</span> <span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb161-43"><a href="#cb161-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> h<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> i<span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> w <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> y <span class="op">+</span> i<span class="op">);</span> <span class="op">}</span></span>
<span id="cb161-44"><a href="#cb161-44" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb161-45"><a href="#cb161-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-46"><a href="#cb161-46" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_digit<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> d<span class="op">)</span> <span class="op">{</span></span>
<span id="cb161-47"><a href="#cb161-47" aria-hidden="true" tabindex="-1"></a>    clear_rect<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb161-48"><a href="#cb161-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span> <span class="op">}</span></span>
<span id="cb161-49"><a href="#cb161-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">4</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">5</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">9</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb161-50"><a href="#cb161-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">5</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">6</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb161-51"><a href="#cb161-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb161-52"><a href="#cb161-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">2</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb161-53"><a href="#cb161-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">2</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb161-54"><a href="#cb161-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb161-55"><a href="#cb161-55" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb161-56"><a href="#cb161-56" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb161-57"><a href="#cb161-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-58"><a href="#cb161-58" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_letter_A<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb161-59"><a href="#cb161-59" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb161-60"><a href="#cb161-60" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb161-61"><a href="#cb161-61" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb161-62"><a href="#cb161-62" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb161-63"><a href="#cb161-63" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span></span>
<span id="cb161-64"><a href="#cb161-64" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb161-65"><a href="#cb161-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-66"><a href="#cb161-66" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_letter_B<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb161-67"><a href="#cb161-67" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb161-68"><a href="#cb161-68" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb161-69"><a href="#cb161-69" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb161-70"><a href="#cb161-70" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb161-71"><a href="#cb161-71" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span></span>
<span id="cb161-72"><a href="#cb161-72" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb161-73"><a href="#cb161-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-74"><a href="#cb161-74" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_arrow<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb161-75"><a href="#cb161-75" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb161-76"><a href="#cb161-76" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb161-77"><a href="#cb161-77" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span></span>
<span id="cb161-78"><a href="#cb161-78" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">3</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">3</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">3</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb161-79"><a href="#cb161-79" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">4</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb161-80"><a href="#cb161-80" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb161-81"><a href="#cb161-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-82"><a href="#cb161-82" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_task<span class="op">(</span><span class="dt">int</span> idx<span class="op">,</span> <span class="dt">int</span> active<span class="op">)</span> <span class="op">{</span></span>
<span id="cb161-83"><a href="#cb161-83" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x<span class="op">;</span></span>
<span id="cb161-84"><a href="#cb161-84" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> idx <span class="op">*</span> <span class="dv">35</span> <span class="op">+</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb161-85"><a href="#cb161-85" aria-hidden="true" tabindex="-1"></a>    clear_rect<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">20</span><span class="op">);</span></span>
<span id="cb161-86"><a href="#cb161-86" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>active<span class="op">)</span> <span class="op">{</span></span>
<span id="cb161-87"><a href="#cb161-87" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">20</span><span class="op">);</span></span>
<span id="cb161-88"><a href="#cb161-88" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Dessiner en inverse (effacer les pixels pour la lettre/chiffre)</span></span>
<span id="cb161-89"><a href="#cb161-89" aria-hidden="true" tabindex="-1"></a>        clear_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb161-90"><a href="#cb161-90" aria-hidden="true" tabindex="-1"></a>        clear_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">15</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb161-91"><a href="#cb161-91" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb161-92"><a href="#cb161-92" aria-hidden="true" tabindex="-1"></a>        draw_box<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">20</span><span class="op">);</span></span>
<span id="cb161-93"><a href="#cb161-93" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb161-94"><a href="#cb161-94" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>idx <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb161-95"><a href="#cb161-95" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>active<span class="op">)</span> clear_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">13</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb161-96"><a href="#cb161-96" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> draw_letter_A<span class="op">(</span>x <span class="op">+</span> <span class="dv">13</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb161-97"><a href="#cb161-97" aria-hidden="true" tabindex="-1"></a>        draw_digit<span class="op">(</span>x <span class="op">+</span> <span class="dv">13</span><span class="op">,</span> <span class="dv">15</span><span class="op">,</span> task_a_val<span class="op">);</span></span>
<span id="cb161-98"><a href="#cb161-98" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb161-99"><a href="#cb161-99" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>active<span class="op">)</span> clear_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">13</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb161-100"><a href="#cb161-100" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> draw_letter_B<span class="op">(</span>x <span class="op">+</span> <span class="dv">13</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb161-101"><a href="#cb161-101" aria-hidden="true" tabindex="-1"></a>        draw_digit<span class="op">(</span>x <span class="op">+</span> <span class="dv">13</span><span class="op">,</span> <span class="dv">15</span><span class="op">,</span> task_b_val<span class="op">);</span></span>
<span id="cb161-102"><a href="#cb161-102" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb161-103"><a href="#cb161-103" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb161-104"><a href="#cb161-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-105"><a href="#cb161-105" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_all<span class="op">()</span> <span class="op">{</span></span>
<span id="cb161-106"><a href="#cb161-106" aria-hidden="true" tabindex="-1"></a>    draw_task<span class="op">(</span><span class="dv">0</span><span class="op">,</span> current_task <span class="op">==</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb161-107"><a href="#cb161-107" aria-hidden="true" tabindex="-1"></a>    draw_task<span class="op">(</span><span class="dv">1</span><span class="op">,</span> current_task <span class="op">==</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb161-108"><a href="#cb161-108" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Fleche entre les taches</span></span>
<span id="cb161-109"><a href="#cb161-109" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>current_task <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb161-110"><a href="#cb161-110" aria-hidden="true" tabindex="-1"></a>        clear_rect<span class="op">(</span><span class="dv">32</span><span class="op">,</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb161-111"><a href="#cb161-111" aria-hidden="true" tabindex="-1"></a>        draw_arrow<span class="op">(</span><span class="dv">32</span><span class="op">,</span> <span class="dv">12</span><span class="op">);</span></span>
<span id="cb161-112"><a href="#cb161-112" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb161-113"><a href="#cb161-113" aria-hidden="true" tabindex="-1"></a>        clear_rect<span class="op">(</span><span class="dv">32</span><span class="op">,</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb161-114"><a href="#cb161-114" aria-hidden="true" tabindex="-1"></a>        <span class="co">// Fleche inversee</span></span>
<span id="cb161-115"><a href="#cb161-115" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span><span class="dv">36</span><span class="op">,</span> <span class="dv">14</span><span class="op">);</span></span>
<span id="cb161-116"><a href="#cb161-116" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span><span class="dv">35</span><span class="op">,</span> <span class="dv">13</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">35</span><span class="op">,</span> <span class="dv">14</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">35</span><span class="op">,</span> <span class="dv">15</span><span class="op">);</span></span>
<span id="cb161-117"><a href="#cb161-117" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span><span class="dv">34</span><span class="op">,</span> <span class="dv">12</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">34</span><span class="op">,</span> <span class="dv">14</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">34</span><span class="op">,</span> <span class="dv">16</span><span class="op">);</span></span>
<span id="cb161-118"><a href="#cb161-118" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span><span class="dv">33</span><span class="op">,</span> <span class="dv">13</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">33</span><span class="op">,</span> <span class="dv">14</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">33</span><span class="op">,</span> <span class="dv">15</span><span class="op">);</span></span>
<span id="cb161-119"><a href="#cb161-119" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span><span class="dv">32</span><span class="op">,</span> <span class="dv">14</span><span class="op">);</span></span>
<span id="cb161-120"><a href="#cb161-120" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb161-121"><a href="#cb161-121" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb161-122"><a href="#cb161-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-123"><a href="#cb161-123" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> step<span class="op">()</span> <span class="op">{</span></span>
<span id="cb161-124"><a href="#cb161-124" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>current_task <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb161-125"><a href="#cb161-125" aria-hidden="true" tabindex="-1"></a>        task_a_val <span class="op">=</span> task_a_val <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb161-126"><a href="#cb161-126" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>task_a_val <span class="op">&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb161-127"><a href="#cb161-127" aria-hidden="true" tabindex="-1"></a>        current_task <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb161-128"><a href="#cb161-128" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb161-129"><a href="#cb161-129" aria-hidden="true" tabindex="-1"></a>        task_b_val <span class="op">=</span> task_b_val <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb161-130"><a href="#cb161-130" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>task_b_val <span class="op">&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb161-131"><a href="#cb161-131" aria-hidden="true" tabindex="-1"></a>        current_task <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb161-132"><a href="#cb161-132" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb161-133"><a href="#cb161-133" aria-hidden="true" tabindex="-1"></a>    steps <span class="op">=</span> steps <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb161-134"><a href="#cb161-134" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb161-135"><a href="#cb161-135" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb161-136"><a href="#cb161-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-137"><a href="#cb161-137" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb161-138"><a href="#cb161-138" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> key<span class="op">;</span> <span class="dt">int</span> lk<span class="op">;</span> <span class="dt">int</span> t<span class="op">;</span> <span class="dt">int</span> running<span class="op">;</span></span>
<span id="cb161-139"><a href="#cb161-139" aria-hidden="true" tabindex="-1"></a>    lk <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> t <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> running <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb161-140"><a href="#cb161-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-141"><a href="#cb161-141" aria-hidden="true" tabindex="-1"></a>    draw_all<span class="op">();</span></span>
<span id="cb161-142"><a href="#cb161-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-143"><a href="#cb161-143" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>t <span class="op">&lt;</span> <span class="dv">100000</span> <span class="op">&amp;&amp;</span> running<span class="op">)</span> <span class="op">{</span></span>
<span id="cb161-144"><a href="#cb161-144" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> <span class="op">*</span>KEYBOARD<span class="op">;</span></span>
<span id="cb161-145"><a href="#cb161-145" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>key <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> key <span class="op">!=</span> lk<span class="op">)</span> <span class="op">{</span></span>
<span id="cb161-146"><a href="#cb161-146" aria-hidden="true" tabindex="-1"></a>            t <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb161-147"><a href="#cb161-147" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">32</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb161-148"><a href="#cb161-148" aria-hidden="true" tabindex="-1"></a>                running <span class="op">=</span> step<span class="op">();</span></span>
<span id="cb161-149"><a href="#cb161-149" aria-hidden="true" tabindex="-1"></a>                draw_all<span class="op">();</span></span>
<span id="cb161-150"><a href="#cb161-150" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb161-151"><a href="#cb161-151" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">13</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb161-152"><a href="#cb161-152" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> steps<span class="op">;</span></span>
<span id="cb161-153"><a href="#cb161-153" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb161-154"><a href="#cb161-154" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb161-155"><a href="#cb161-155" aria-hidden="true" tabindex="-1"></a>        lk <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb161-156"><a href="#cb161-156" aria-hidden="true" tabindex="-1"></a>        t <span class="op">=</span> t <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb161-157"><a href="#cb161-157" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb161-158"><a href="#cb161-158" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Flash final</span></span>
<span id="cb161-159"><a href="#cb161-159" aria-hidden="true" tabindex="-1"></a>    fill_rect<span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">80</span><span class="op">,</span> <span class="dv">30</span><span class="op">);</span></span>
<span id="cb161-160"><a href="#cb161-160" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> steps<span class="op">;</span></span>
<span id="cb161-161"><a href="#cb161-161" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.14" id="scheduler"><span class="header-section-number">1.5.14</span> Scheduler</h3>
<div class="sourceCode" id="cb162"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Scheduler Round-Robin Visuel - Solution</span></span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Cochez &quot;Capturer clavier&quot;, Espace pour chaque tick</span></span>
<span id="cb162-3"><a href="#cb162-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-4"><a href="#cb162-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>SCREEN <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb162-5"><a href="#cb162-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>KEYBOARD <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00402600</span><span class="op">;</span></span>
<span id="cb162-6"><a href="#cb162-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-7"><a href="#cb162-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> proc_time<span class="op">[</span><span class="dv">3</span><span class="op">];</span></span>
<span id="cb162-8"><a href="#cb162-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> proc_state<span class="op">[</span><span class="dv">3</span><span class="op">];</span></span>
<span id="cb162-9"><a href="#cb162-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> current_proc <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb162-10"><a href="#cb162-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> quantum_left <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb162-11"><a href="#cb162-11" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> switches <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb162-12"><a href="#cb162-12" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> ticks <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb162-13"><a href="#cb162-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-14"><a href="#cb162-14" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_pixel<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-15"><a href="#cb162-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span> <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb162-16"><a href="#cb162-16" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb162-17"><a href="#cb162-17" aria-hidden="true" tabindex="-1"></a>    bit_pos <span class="op">=</span> <span class="op">((</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb162-18"><a href="#cb162-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">|</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">);</span></span>
<span id="cb162-19"><a href="#cb162-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb162-20"><a href="#cb162-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-21"><a href="#cb162-21" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> clear_rect<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-22"><a href="#cb162-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> j<span class="op">;</span> <span class="dt">int</span> px<span class="op">;</span> <span class="dt">int</span> py<span class="op">;</span> <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span> <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb162-23"><a href="#cb162-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-24"><a href="#cb162-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> h<span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-25"><a href="#cb162-25" aria-hidden="true" tabindex="-1"></a>            px <span class="op">=</span> x <span class="op">+</span> i<span class="op">;</span> py <span class="op">=</span> y <span class="op">+</span> j<span class="op">;</span></span>
<span id="cb162-26"><a href="#cb162-26" aria-hidden="true" tabindex="-1"></a>            ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>py <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>py <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>px <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb162-27"><a href="#cb162-27" aria-hidden="true" tabindex="-1"></a>            bit_pos <span class="op">=</span> <span class="op">((</span>px <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>px <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb162-28"><a href="#cb162-28" aria-hidden="true" tabindex="-1"></a>            <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">&amp;</span> <span class="op">(</span><span class="bn">0xFFFFFFFF</span> <span class="op">^</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">));</span></span>
<span id="cb162-29"><a href="#cb162-29" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb162-30"><a href="#cb162-30" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb162-31"><a href="#cb162-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb162-32"><a href="#cb162-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-33"><a href="#cb162-33" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> fill_rect<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-34"><a href="#cb162-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> j<span class="op">;</span></span>
<span id="cb162-35"><a href="#cb162-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-36"><a href="#cb162-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> h<span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-37"><a href="#cb162-37" aria-hidden="true" tabindex="-1"></a>            set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y <span class="op">+</span> j<span class="op">);</span></span>
<span id="cb162-38"><a href="#cb162-38" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb162-39"><a href="#cb162-39" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb162-40"><a href="#cb162-40" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb162-41"><a href="#cb162-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-42"><a href="#cb162-42" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_box<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-43"><a href="#cb162-43" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb162-44"><a href="#cb162-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y <span class="op">+</span> h <span class="op">-</span> <span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb162-45"><a href="#cb162-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> h<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> i<span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> w <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> y <span class="op">+</span> i<span class="op">);</span> <span class="op">}</span></span>
<span id="cb162-46"><a href="#cb162-46" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb162-47"><a href="#cb162-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-48"><a href="#cb162-48" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_digit<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> d<span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-49"><a href="#cb162-49" aria-hidden="true" tabindex="-1"></a>    clear_rect<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb162-50"><a href="#cb162-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span> <span class="op">}</span></span>
<span id="cb162-51"><a href="#cb162-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">4</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">5</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">9</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb162-52"><a href="#cb162-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">5</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">6</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb162-53"><a href="#cb162-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb162-54"><a href="#cb162-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">2</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb162-55"><a href="#cb162-55" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">2</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb162-56"><a href="#cb162-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb162-57"><a href="#cb162-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb162-58"><a href="#cb162-58" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb162-59"><a href="#cb162-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-60"><a href="#cb162-60" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_P<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-61"><a href="#cb162-61" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb162-62"><a href="#cb162-62" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb162-63"><a href="#cb162-63" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb162-64"><a href="#cb162-64" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span></span>
<span id="cb162-65"><a href="#cb162-65" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb162-66"><a href="#cb162-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-67"><a href="#cb162-67" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_proc<span class="op">(</span><span class="dt">int</span> idx<span class="op">,</span> <span class="dt">int</span> active<span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-68"><a href="#cb162-68" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x<span class="op">;</span> <span class="dt">int</span> y<span class="op">;</span> <span class="dt">int</span> t<span class="op">;</span> <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb162-69"><a href="#cb162-69" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> idx <span class="op">*</span> <span class="dv">32</span> <span class="op">+</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb162-70"><a href="#cb162-70" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb162-71"><a href="#cb162-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-72"><a href="#cb162-72" aria-hidden="true" tabindex="-1"></a>    clear_rect<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> <span class="dv">28</span><span class="op">,</span> <span class="dv">24</span><span class="op">);</span></span>
<span id="cb162-73"><a href="#cb162-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-74"><a href="#cb162-74" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>active<span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-75"><a href="#cb162-75" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> <span class="dv">28</span><span class="op">,</span> <span class="dv">24</span><span class="op">);</span></span>
<span id="cb162-76"><a href="#cb162-76" aria-hidden="true" tabindex="-1"></a>        clear_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">24</span><span class="op">,</span> <span class="dv">20</span><span class="op">);</span></span>
<span id="cb162-77"><a href="#cb162-77" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb162-78"><a href="#cb162-78" aria-hidden="true" tabindex="-1"></a>        draw_box<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> <span class="dv">28</span><span class="op">,</span> <span class="dv">24</span><span class="op">);</span></span>
<span id="cb162-79"><a href="#cb162-79" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb162-80"><a href="#cb162-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-81"><a href="#cb162-81" aria-hidden="true" tabindex="-1"></a>    <span class="co">// P et numero</span></span>
<span id="cb162-82"><a href="#cb162-82" aria-hidden="true" tabindex="-1"></a>    draw_P<span class="op">(</span>x <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb162-83"><a href="#cb162-83" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span>x <span class="op">+</span> <span class="dv">10</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">4</span><span class="op">,</span> idx<span class="op">);</span></span>
<span id="cb162-84"><a href="#cb162-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-85"><a href="#cb162-85" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Barre de temps restant</span></span>
<span id="cb162-86"><a href="#cb162-86" aria-hidden="true" tabindex="-1"></a>    t <span class="op">=</span> proc_time<span class="op">[</span>idx<span class="op">];</span></span>
<span id="cb162-87"><a href="#cb162-87" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>t <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-88"><a href="#cb162-88" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> t<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-89"><a href="#cb162-89" aria-hidden="true" tabindex="-1"></a>            fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">4</span> <span class="op">+</span> i <span class="op">*</span> <span class="dv">5</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb162-90"><a href="#cb162-90" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb162-91"><a href="#cb162-91" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb162-92"><a href="#cb162-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-93"><a href="#cb162-93" aria-hidden="true" tabindex="-1"></a>    <span class="co">// X si termine</span></span>
<span id="cb162-94"><a href="#cb162-94" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span>idx<span class="op">]</span> <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-95"><a href="#cb162-95" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">8</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">14</span><span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">12</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">14</span><span class="op">);</span></span>
<span id="cb162-96"><a href="#cb162-96" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">9</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">15</span><span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">11</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">15</span><span class="op">);</span></span>
<span id="cb162-97"><a href="#cb162-97" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">10</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">16</span><span class="op">);</span></span>
<span id="cb162-98"><a href="#cb162-98" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">9</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">17</span><span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">11</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">17</span><span class="op">);</span></span>
<span id="cb162-99"><a href="#cb162-99" aria-hidden="true" tabindex="-1"></a>        set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">8</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">18</span><span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> <span class="dv">12</span><span class="op">,</span> y <span class="op">+</span> <span class="dv">18</span><span class="op">);</span></span>
<span id="cb162-100"><a href="#cb162-100" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb162-101"><a href="#cb162-101" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb162-102"><a href="#cb162-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-103"><a href="#cb162-103" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_all<span class="op">()</span> <span class="op">{</span></span>
<span id="cb162-104"><a href="#cb162-104" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb162-105"><a href="#cb162-105" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-106"><a href="#cb162-106" aria-hidden="true" tabindex="-1"></a>        draw_proc<span class="op">(</span>i<span class="op">,</span> i <span class="op">==</span> current_proc <span class="op">&amp;&amp;</span> proc_state<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb162-107"><a href="#cb162-107" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb162-108"><a href="#cb162-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-109"><a href="#cb162-109" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Quantum: Q=N</span></span>
<span id="cb162-110"><a href="#cb162-110" aria-hidden="true" tabindex="-1"></a>    clear_rect<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">32</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb162-111"><a href="#cb162-111" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Q</span></span>
<span id="cb162-112"><a href="#cb162-112" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">6</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">7</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span></span>
<span id="cb162-113"><a href="#cb162-113" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">33</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">33</span><span class="op">);</span></span>
<span id="cb162-114"><a href="#cb162-114" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">34</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">34</span><span class="op">);</span></span>
<span id="cb162-115"><a href="#cb162-115" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">35</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">6</span><span class="op">,</span> <span class="dv">35</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">35</span><span class="op">);</span></span>
<span id="cb162-116"><a href="#cb162-116" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">36</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">6</span><span class="op">,</span> <span class="dv">36</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">36</span><span class="op">);</span></span>
<span id="cb162-117"><a href="#cb162-117" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span><span class="dv">12</span><span class="op">,</span> <span class="dv">32</span><span class="op">,</span> quantum_left<span class="op">);</span></span>
<span id="cb162-118"><a href="#cb162-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-119"><a href="#cb162-119" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Switches: SW=N</span></span>
<span id="cb162-120"><a href="#cb162-120" aria-hidden="true" tabindex="-1"></a>    clear_rect<span class="op">(</span><span class="dv">30</span><span class="op">,</span> <span class="dv">32</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb162-121"><a href="#cb162-121" aria-hidden="true" tabindex="-1"></a>    <span class="co">// S</span></span>
<span id="cb162-122"><a href="#cb162-122" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">31</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">32</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">33</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span></span>
<span id="cb162-123"><a href="#cb162-123" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">30</span><span class="op">,</span> <span class="dv">33</span><span class="op">);</span></span>
<span id="cb162-124"><a href="#cb162-124" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">31</span><span class="op">,</span> <span class="dv">34</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">32</span><span class="op">,</span> <span class="dv">34</span><span class="op">);</span></span>
<span id="cb162-125"><a href="#cb162-125" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">33</span><span class="op">,</span> <span class="dv">35</span><span class="op">);</span></span>
<span id="cb162-126"><a href="#cb162-126" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">30</span><span class="op">,</span> <span class="dv">36</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">31</span><span class="op">,</span> <span class="dv">36</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">32</span><span class="op">,</span> <span class="dv">36</span><span class="op">);</span></span>
<span id="cb162-127"><a href="#cb162-127" aria-hidden="true" tabindex="-1"></a>    <span class="co">// W</span></span>
<span id="cb162-128"><a href="#cb162-128" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">36</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">40</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span></span>
<span id="cb162-129"><a href="#cb162-129" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">36</span><span class="op">,</span> <span class="dv">33</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">40</span><span class="op">,</span> <span class="dv">33</span><span class="op">);</span></span>
<span id="cb162-130"><a href="#cb162-130" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">36</span><span class="op">,</span> <span class="dv">34</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">38</span><span class="op">,</span> <span class="dv">34</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">40</span><span class="op">,</span> <span class="dv">34</span><span class="op">);</span></span>
<span id="cb162-131"><a href="#cb162-131" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">36</span><span class="op">,</span> <span class="dv">35</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">38</span><span class="op">,</span> <span class="dv">35</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">40</span><span class="op">,</span> <span class="dv">35</span><span class="op">);</span></span>
<span id="cb162-132"><a href="#cb162-132" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">37</span><span class="op">,</span> <span class="dv">36</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">39</span><span class="op">,</span> <span class="dv">36</span><span class="op">);</span></span>
<span id="cb162-133"><a href="#cb162-133" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span><span class="dv">44</span><span class="op">,</span> <span class="dv">32</span><span class="op">,</span> switches<span class="op">);</span></span>
<span id="cb162-134"><a href="#cb162-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-135"><a href="#cb162-135" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Ticks: T=N</span></span>
<span id="cb162-136"><a href="#cb162-136" aria-hidden="true" tabindex="-1"></a>    clear_rect<span class="op">(</span><span class="dv">60</span><span class="op">,</span> <span class="dv">32</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb162-137"><a href="#cb162-137" aria-hidden="true" tabindex="-1"></a>    <span class="co">// T</span></span>
<span id="cb162-138"><a href="#cb162-138" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">60</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">61</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">62</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span></span>
<span id="cb162-139"><a href="#cb162-139" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">61</span><span class="op">,</span> <span class="dv">33</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">61</span><span class="op">,</span> <span class="dv">34</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">61</span><span class="op">,</span> <span class="dv">35</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">61</span><span class="op">,</span> <span class="dv">36</span><span class="op">);</span></span>
<span id="cb162-140"><a href="#cb162-140" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span><span class="dv">66</span><span class="op">,</span> <span class="dv">32</span><span class="op">,</span> ticks<span class="op">);</span></span>
<span id="cb162-141"><a href="#cb162-141" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb162-142"><a href="#cb162-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-143"><a href="#cb162-143" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> find_next<span class="op">(</span><span class="dt">int</span> from<span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-144"><a href="#cb162-144" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> next<span class="op">;</span></span>
<span id="cb162-145"><a href="#cb162-145" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">3</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-146"><a href="#cb162-146" aria-hidden="true" tabindex="-1"></a>        next <span class="op">=</span> <span class="op">(</span>from <span class="op">+</span> i<span class="op">)</span> <span class="op">%</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb162-147"><a href="#cb162-147" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span>next<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> proc_time<span class="op">[</span>next<span class="op">]</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> next<span class="op">;</span></span>
<span id="cb162-148"><a href="#cb162-148" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb162-149"><a href="#cb162-149" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> from<span class="op">;</span></span>
<span id="cb162-150"><a href="#cb162-150" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb162-151"><a href="#cb162-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-152"><a href="#cb162-152" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> tick<span class="op">()</span> <span class="op">{</span></span>
<span id="cb162-153"><a href="#cb162-153" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> next<span class="op">;</span> <span class="dt">int</span> all_done<span class="op">;</span></span>
<span id="cb162-154"><a href="#cb162-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-155"><a href="#cb162-155" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Verifier si tous termines</span></span>
<span id="cb162-156"><a href="#cb162-156" aria-hidden="true" tabindex="-1"></a>    all_done <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb162-157"><a href="#cb162-157" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">!=</span> <span class="dv">2</span><span class="op">)</span> all_done <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb162-158"><a href="#cb162-158" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">!=</span> <span class="dv">2</span><span class="op">)</span> all_done <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb162-159"><a href="#cb162-159" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">!=</span> <span class="dv">2</span><span class="op">)</span> all_done <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb162-160"><a href="#cb162-160" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>all_done<span class="op">)</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb162-161"><a href="#cb162-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-162"><a href="#cb162-162" aria-hidden="true" tabindex="-1"></a>    ticks <span class="op">=</span> ticks <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb162-163"><a href="#cb162-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-164"><a href="#cb162-164" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Executer processus courant</span></span>
<span id="cb162-165"><a href="#cb162-165" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>proc_time<span class="op">[</span>current_proc<span class="op">]</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-166"><a href="#cb162-166" aria-hidden="true" tabindex="-1"></a>        proc_time<span class="op">[</span>current_proc<span class="op">]</span> <span class="op">=</span> proc_time<span class="op">[</span>current_proc<span class="op">]</span> <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb162-167"><a href="#cb162-167" aria-hidden="true" tabindex="-1"></a>        quantum_left <span class="op">=</span> quantum_left <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb162-168"><a href="#cb162-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-169"><a href="#cb162-169" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>proc_time<span class="op">[</span>current_proc<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-170"><a href="#cb162-170" aria-hidden="true" tabindex="-1"></a>            proc_state<span class="op">[</span>current_proc<span class="op">]</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb162-171"><a href="#cb162-171" aria-hidden="true" tabindex="-1"></a>            quantum_left <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb162-172"><a href="#cb162-172" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb162-173"><a href="#cb162-173" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb162-174"><a href="#cb162-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-175"><a href="#cb162-175" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Context switch si quantum epuise</span></span>
<span id="cb162-176"><a href="#cb162-176" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>quantum_left <span class="op">&lt;=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-177"><a href="#cb162-177" aria-hidden="true" tabindex="-1"></a>        next <span class="op">=</span> find_next<span class="op">(</span>current_proc<span class="op">);</span></span>
<span id="cb162-178"><a href="#cb162-178" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>next <span class="op">!=</span> current_proc<span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-179"><a href="#cb162-179" aria-hidden="true" tabindex="-1"></a>            current_proc <span class="op">=</span> next<span class="op">;</span></span>
<span id="cb162-180"><a href="#cb162-180" aria-hidden="true" tabindex="-1"></a>            switches <span class="op">=</span> switches <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb162-181"><a href="#cb162-181" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb162-182"><a href="#cb162-182" aria-hidden="true" tabindex="-1"></a>        quantum_left <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb162-183"><a href="#cb162-183" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb162-184"><a href="#cb162-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-185"><a href="#cb162-185" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb162-186"><a href="#cb162-186" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb162-187"><a href="#cb162-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-188"><a href="#cb162-188" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb162-189"><a href="#cb162-189" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> key<span class="op">;</span> <span class="dt">int</span> lk<span class="op">;</span> <span class="dt">int</span> t<span class="op">;</span> <span class="dt">int</span> running<span class="op">;</span></span>
<span id="cb162-190"><a href="#cb162-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-191"><a href="#cb162-191" aria-hidden="true" tabindex="-1"></a>    proc_time<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> proc_time<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> proc_time<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb162-192"><a href="#cb162-192" aria-hidden="true" tabindex="-1"></a>    proc_state<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> proc_state<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> proc_state<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb162-193"><a href="#cb162-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-194"><a href="#cb162-194" aria-hidden="true" tabindex="-1"></a>    lk <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> t <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> running <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb162-195"><a href="#cb162-195" aria-hidden="true" tabindex="-1"></a>    draw_all<span class="op">();</span></span>
<span id="cb162-196"><a href="#cb162-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-197"><a href="#cb162-197" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>t <span class="op">&lt;</span> <span class="dv">100000</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-198"><a href="#cb162-198" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> <span class="op">*</span>KEYBOARD<span class="op">;</span></span>
<span id="cb162-199"><a href="#cb162-199" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>key <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> key <span class="op">!=</span> lk<span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-200"><a href="#cb162-200" aria-hidden="true" tabindex="-1"></a>            t <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb162-201"><a href="#cb162-201" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">32</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-202"><a href="#cb162-202" aria-hidden="true" tabindex="-1"></a>                running <span class="op">=</span> tick<span class="op">();</span></span>
<span id="cb162-203"><a href="#cb162-203" aria-hidden="true" tabindex="-1"></a>                draw_all<span class="op">();</span></span>
<span id="cb162-204"><a href="#cb162-204" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb162-205"><a href="#cb162-205" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">13</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-206"><a href="#cb162-206" aria-hidden="true" tabindex="-1"></a>                <span class="cf">return</span> switches<span class="op">;</span></span>
<span id="cb162-207"><a href="#cb162-207" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb162-208"><a href="#cb162-208" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb162-209"><a href="#cb162-209" aria-hidden="true" tabindex="-1"></a>        lk <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb162-210"><a href="#cb162-210" aria-hidden="true" tabindex="-1"></a>        t <span class="op">=</span> t <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb162-211"><a href="#cb162-211" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb162-212"><a href="#cb162-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-213"><a href="#cb162-213" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> switches<span class="op">;</span></span>
<span id="cb162-214"><a href="#cb162-214" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.15" id="projet-1-mini-os-shell"><span class="header-section-number">1.5.15</span> Projet 1: Mini-OS Shell</h3>
<div class="sourceCode" id="cb163"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Mini-OS Shell - Solution</span></span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Cochez &quot;Capturer clavier&quot;</span></span>
<span id="cb163-3"><a href="#cb163-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-4"><a href="#cb163-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>SCREEN <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb163-5"><a href="#cb163-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>KEYBOARD <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00402600</span><span class="op">;</span></span>
<span id="cb163-6"><a href="#cb163-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-7"><a href="#cb163-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_pixel<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb163-8"><a href="#cb163-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span> <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb163-9"><a href="#cb163-9" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb163-10"><a href="#cb163-10" aria-hidden="true" tabindex="-1"></a>    bit_pos <span class="op">=</span> <span class="op">((</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb163-11"><a href="#cb163-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">|</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">);</span></span>
<span id="cb163-12"><a href="#cb163-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb163-13"><a href="#cb163-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-14"><a href="#cb163-14" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> clear_screen<span class="op">()</span> <span class="op">{</span></span>
<span id="cb163-15"><a href="#cb163-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb163-16"><a href="#cb163-16" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN<span class="op">;</span></span>
<span id="cb163-17"><a href="#cb163-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">2400</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb163-18"><a href="#cb163-18" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>ptr <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb163-19"><a href="#cb163-19" aria-hidden="true" tabindex="-1"></a>        ptr <span class="op">=</span> ptr <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb163-20"><a href="#cb163-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb163-21"><a href="#cb163-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb163-22"><a href="#cb163-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-23"><a href="#cb163-23" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_digit<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> d<span class="op">)</span> <span class="op">{</span></span>
<span id="cb163-24"><a href="#cb163-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span> <span class="op">}</span></span>
<span id="cb163-25"><a href="#cb163-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">4</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">5</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">9</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb163-26"><a href="#cb163-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">5</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">6</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb163-27"><a href="#cb163-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb163-28"><a href="#cb163-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">2</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb163-29"><a href="#cb163-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">2</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb163-30"><a href="#cb163-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb163-31"><a href="#cb163-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb163-32"><a href="#cb163-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb163-33"><a href="#cb163-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-34"><a href="#cb163-34" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_plus<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb163-35"><a href="#cb163-35" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb163-36"><a href="#cb163-36" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb163-37"><a href="#cb163-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-38"><a href="#cb163-38" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_equal<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb163-39"><a href="#cb163-39" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb163-40"><a href="#cb163-40" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb163-41"><a href="#cb163-41" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb163-42"><a href="#cb163-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-43"><a href="#cb163-43" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_H<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb163-44"><a href="#cb163-44" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span></span>
<span id="cb163-45"><a href="#cb163-45" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span></span>
<span id="cb163-46"><a href="#cb163-46" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span></span>
<span id="cb163-47"><a href="#cb163-47" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb163-48"><a href="#cb163-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-49"><a href="#cb163-49" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_I<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb163-50"><a href="#cb163-50" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span></span>
<span id="cb163-51"><a href="#cb163-51" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb163-52"><a href="#cb163-52" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span></span>
<span id="cb163-53"><a href="#cb163-53" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb163-54"><a href="#cb163-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-55"><a href="#cb163-55" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_box<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb163-56"><a href="#cb163-56" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb163-57"><a href="#cb163-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y <span class="op">+</span> h <span class="op">-</span> <span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb163-58"><a href="#cb163-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> h<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> i<span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> w <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> y <span class="op">+</span> i<span class="op">);</span> <span class="op">}</span></span>
<span id="cb163-59"><a href="#cb163-59" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb163-60"><a href="#cb163-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-61"><a href="#cb163-61" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_menu<span class="op">()</span> <span class="op">{</span></span>
<span id="cb163-62"><a href="#cb163-62" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Titre: MENU</span></span>
<span id="cb163-63"><a href="#cb163-63" aria-hidden="true" tabindex="-1"></a>    <span class="co">// M</span></span>
<span id="cb163-64"><a href="#cb163-64" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb163-65"><a href="#cb163-65" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">6</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">7</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb163-66"><a href="#cb163-66" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb163-67"><a href="#cb163-67" aria-hidden="true" tabindex="-1"></a>    <span class="co">// E</span></span>
<span id="cb163-68"><a href="#cb163-68" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">11</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">12</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">13</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb163-69"><a href="#cb163-69" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">11</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">11</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">12</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">11</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb163-70"><a href="#cb163-70" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">11</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">12</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">13</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb163-71"><a href="#cb163-71" aria-hidden="true" tabindex="-1"></a>    <span class="co">// N</span></span>
<span id="cb163-72"><a href="#cb163-72" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb163-73"><a href="#cb163-73" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">17</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">18</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">19</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb163-74"><a href="#cb163-74" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb163-75"><a href="#cb163-75" aria-hidden="true" tabindex="-1"></a>    <span class="co">// U</span></span>
<span id="cb163-76"><a href="#cb163-76" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">23</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">23</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">23</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">23</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb163-77"><a href="#cb163-77" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">24</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">25</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb163-78"><a href="#cb163-78" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">26</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">26</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">26</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">26</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb163-79"><a href="#cb163-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-80"><a href="#cb163-80" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Option 1: CALC</span></span>
<span id="cb163-81"><a href="#cb163-81" aria-hidden="true" tabindex="-1"></a>    draw_box<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">12</span><span class="op">);</span></span>
<span id="cb163-82"><a href="#cb163-82" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">17</span><span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb163-83"><a href="#cb163-83" aria-hidden="true" tabindex="-1"></a>    <span class="co">// C</span></span>
<span id="cb163-84"><a href="#cb163-84" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">17</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">17</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">17</span><span class="op">,</span> <span class="dv">17</span><span class="op">);</span></span>
<span id="cb163-85"><a href="#cb163-85" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">18</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">19</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">20</span><span class="op">);</span></span>
<span id="cb163-86"><a href="#cb163-86" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">21</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">21</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">17</span><span class="op">,</span> <span class="dv">21</span><span class="op">);</span></span>
<span id="cb163-87"><a href="#cb163-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-88"><a href="#cb163-88" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Option 2: COUNT</span></span>
<span id="cb163-89"><a href="#cb163-89" aria-hidden="true" tabindex="-1"></a>    draw_box<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">28</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">12</span><span class="op">);</span></span>
<span id="cb163-90"><a href="#cb163-90" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">31</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb163-91"><a href="#cb163-91" aria-hidden="true" tabindex="-1"></a>    <span class="co">// #</span></span>
<span id="cb163-92"><a href="#cb163-92" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">31</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">17</span><span class="op">,</span> <span class="dv">31</span><span class="op">);</span></span>
<span id="cb163-93"><a href="#cb163-93" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">17</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">18</span><span class="op">,</span> <span class="dv">32</span><span class="op">);</span></span>
<span id="cb163-94"><a href="#cb163-94" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">33</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">17</span><span class="op">,</span> <span class="dv">33</span><span class="op">);</span></span>
<span id="cb163-95"><a href="#cb163-95" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">34</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">34</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">34</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">17</span><span class="op">,</span> <span class="dv">34</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">18</span><span class="op">,</span> <span class="dv">34</span><span class="op">);</span></span>
<span id="cb163-96"><a href="#cb163-96" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">35</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">17</span><span class="op">,</span> <span class="dv">35</span><span class="op">);</span></span>
<span id="cb163-97"><a href="#cb163-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-98"><a href="#cb163-98" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Option 3: MSG</span></span>
<span id="cb163-99"><a href="#cb163-99" aria-hidden="true" tabindex="-1"></a>    draw_box<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">42</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">12</span><span class="op">);</span></span>
<span id="cb163-100"><a href="#cb163-100" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">45</span><span class="op">,</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb163-101"><a href="#cb163-101" aria-hidden="true" tabindex="-1"></a>    draw_H<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">45</span><span class="op">);</span></span>
<span id="cb163-102"><a href="#cb163-102" aria-hidden="true" tabindex="-1"></a>    draw_I<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">45</span><span class="op">);</span></span>
<span id="cb163-103"><a href="#cb163-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-104"><a href="#cb163-104" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Option 0: QUIT</span></span>
<span id="cb163-105"><a href="#cb163-105" aria-hidden="true" tabindex="-1"></a>    draw_box<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">56</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">12</span><span class="op">);</span></span>
<span id="cb163-106"><a href="#cb163-106" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">59</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb163-107"><a href="#cb163-107" aria-hidden="true" tabindex="-1"></a>    <span class="co">// X</span></span>
<span id="cb163-108"><a href="#cb163-108" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">59</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">19</span><span class="op">,</span> <span class="dv">59</span><span class="op">);</span></span>
<span id="cb163-109"><a href="#cb163-109" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">60</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">18</span><span class="op">,</span> <span class="dv">60</span><span class="op">);</span></span>
<span id="cb163-110"><a href="#cb163-110" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">17</span><span class="op">,</span> <span class="dv">61</span><span class="op">);</span></span>
<span id="cb163-111"><a href="#cb163-111" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">62</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">18</span><span class="op">,</span> <span class="dv">62</span><span class="op">);</span></span>
<span id="cb163-112"><a href="#cb163-112" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">63</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">19</span><span class="op">,</span> <span class="dv">63</span><span class="op">);</span></span>
<span id="cb163-113"><a href="#cb163-113" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb163-114"><a href="#cb163-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-115"><a href="#cb163-115" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> delay<span class="op">()</span> <span class="op">{</span></span>
<span id="cb163-116"><a href="#cb163-116" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb163-117"><a href="#cb163-117" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">50000</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> <span class="op">}</span></span>
<span id="cb163-118"><a href="#cb163-118" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb163-119"><a href="#cb163-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-120"><a href="#cb163-120" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> wait_key<span class="op">()</span> <span class="op">{</span></span>
<span id="cb163-121"><a href="#cb163-121" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> k<span class="op">;</span></span>
<span id="cb163-122"><a href="#cb163-122" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb163-123"><a href="#cb163-123" aria-hidden="true" tabindex="-1"></a>        k <span class="op">=</span> <span class="op">*</span>KEYBOARD<span class="op">;</span></span>
<span id="cb163-124"><a href="#cb163-124" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>k <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb163-125"><a href="#cb163-125" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb163-126"><a href="#cb163-126" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb163-127"><a href="#cb163-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-128"><a href="#cb163-128" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> app_calc<span class="op">()</span> <span class="op">{</span></span>
<span id="cb163-129"><a href="#cb163-129" aria-hidden="true" tabindex="-1"></a>    clear_screen<span class="op">();</span></span>
<span id="cb163-130"><a href="#cb163-130" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Titre</span></span>
<span id="cb163-131"><a href="#cb163-131" aria-hidden="true" tabindex="-1"></a>    <span class="co">// C</span></span>
<span id="cb163-132"><a href="#cb163-132" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">6</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">7</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb163-133"><a href="#cb163-133" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb163-134"><a href="#cb163-134" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">6</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">7</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb163-135"><a href="#cb163-135" aria-hidden="true" tabindex="-1"></a>    <span class="co">// A</span></span>
<span id="cb163-136"><a href="#cb163-136" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">11</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">12</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb163-137"><a href="#cb163-137" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">11</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">12</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb163-138"><a href="#cb163-138" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">12</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">12</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb163-139"><a href="#cb163-139" aria-hidden="true" tabindex="-1"></a>    <span class="co">// L</span></span>
<span id="cb163-140"><a href="#cb163-140" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb163-141"><a href="#cb163-141" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">17</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb163-142"><a href="#cb163-142" aria-hidden="true" tabindex="-1"></a>    <span class="co">// C</span></span>
<span id="cb163-143"><a href="#cb163-143" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">21</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">22</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">23</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb163-144"><a href="#cb163-144" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb163-145"><a href="#cb163-145" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">21</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">22</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">23</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb163-146"><a href="#cb163-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-147"><a href="#cb163-147" aria-hidden="true" tabindex="-1"></a>    <span class="co">// 3 + 5 = 8</span></span>
<span id="cb163-148"><a href="#cb163-148" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb163-149"><a href="#cb163-149" aria-hidden="true" tabindex="-1"></a>    draw_plus<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">20</span><span class="op">);</span></span>
<span id="cb163-150"><a href="#cb163-150" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span><span class="dv">22</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb163-151"><a href="#cb163-151" aria-hidden="true" tabindex="-1"></a>    draw_equal<span class="op">(</span><span class="dv">28</span><span class="op">,</span> <span class="dv">20</span><span class="op">);</span></span>
<span id="cb163-152"><a href="#cb163-152" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span><span class="dv">34</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb163-153"><a href="#cb163-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-154"><a href="#cb163-154" aria-hidden="true" tabindex="-1"></a>    wait_key<span class="op">();</span></span>
<span id="cb163-155"><a href="#cb163-155" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb163-156"><a href="#cb163-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-157"><a href="#cb163-157" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> app_count<span class="op">()</span> <span class="op">{</span></span>
<span id="cb163-158"><a href="#cb163-158" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb163-159"><a href="#cb163-159" aria-hidden="true" tabindex="-1"></a>    clear_screen<span class="op">();</span></span>
<span id="cb163-160"><a href="#cb163-160" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Titre: COUNT</span></span>
<span id="cb163-161"><a href="#cb163-161" aria-hidden="true" tabindex="-1"></a>    <span class="co">// #</span></span>
<span id="cb163-162"><a href="#cb163-162" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">7</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb163-163"><a href="#cb163-163" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">6</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">7</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb163-164"><a href="#cb163-164" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">7</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb163-165"><a href="#cb163-165" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">6</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">7</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb163-166"><a href="#cb163-166" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">7</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb163-167"><a href="#cb163-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-168"><a href="#cb163-168" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">6</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb163-169"><a href="#cb163-169" aria-hidden="true" tabindex="-1"></a>        draw_digit<span class="op">(</span><span class="dv">10</span> <span class="op">+</span> i <span class="op">*</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb163-170"><a href="#cb163-170" aria-hidden="true" tabindex="-1"></a>        delay<span class="op">();</span></span>
<span id="cb163-171"><a href="#cb163-171" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb163-172"><a href="#cb163-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-173"><a href="#cb163-173" aria-hidden="true" tabindex="-1"></a>    wait_key<span class="op">();</span></span>
<span id="cb163-174"><a href="#cb163-174" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb163-175"><a href="#cb163-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-176"><a href="#cb163-176" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> app_msg<span class="op">()</span> <span class="op">{</span></span>
<span id="cb163-177"><a href="#cb163-177" aria-hidden="true" tabindex="-1"></a>    clear_screen<span class="op">();</span></span>
<span id="cb163-178"><a href="#cb163-178" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Titre: MSG</span></span>
<span id="cb163-179"><a href="#cb163-179" aria-hidden="true" tabindex="-1"></a>    <span class="co">// M</span></span>
<span id="cb163-180"><a href="#cb163-180" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb163-181"><a href="#cb163-181" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">6</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">7</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb163-182"><a href="#cb163-182" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb163-183"><a href="#cb163-183" aria-hidden="true" tabindex="-1"></a>    <span class="co">// S</span></span>
<span id="cb163-184"><a href="#cb163-184" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">12</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">13</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">11</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb163-185"><a href="#cb163-185" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">12</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">13</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb163-186"><a href="#cb163-186" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">11</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">12</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb163-187"><a href="#cb163-187" aria-hidden="true" tabindex="-1"></a>    <span class="co">// G</span></span>
<span id="cb163-188"><a href="#cb163-188" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">17</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">18</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">19</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb163-189"><a href="#cb163-189" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">18</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">19</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb163-190"><a href="#cb163-190" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">19</span><span class="op">,</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb163-191"><a href="#cb163-191" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">17</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">18</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">19</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb163-192"><a href="#cb163-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-193"><a href="#cb163-193" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Grand HI</span></span>
<span id="cb163-194"><a href="#cb163-194" aria-hidden="true" tabindex="-1"></a>    <span class="co">// H</span></span>
<span id="cb163-195"><a href="#cb163-195" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">18</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">19</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">21</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">22</span><span class="op">);</span></span>
<span id="cb163-196"><a href="#cb163-196" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">23</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">24</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">25</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">26</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">27</span><span class="op">);</span></span>
<span id="cb163-197"><a href="#cb163-197" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">11</span><span class="op">,</span> <span class="dv">22</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">12</span><span class="op">,</span> <span class="dv">22</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">13</span><span class="op">,</span> <span class="dv">22</span><span class="op">);</span></span>
<span id="cb163-198"><a href="#cb163-198" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">18</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">19</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">20</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">21</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">22</span><span class="op">);</span></span>
<span id="cb163-199"><a href="#cb163-199" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">23</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">24</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">25</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">26</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">14</span><span class="op">,</span> <span class="dv">27</span><span class="op">);</span></span>
<span id="cb163-200"><a href="#cb163-200" aria-hidden="true" tabindex="-1"></a>    <span class="co">// I</span></span>
<span id="cb163-201"><a href="#cb163-201" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">18</span><span class="op">,</span> <span class="dv">18</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">19</span><span class="op">,</span> <span class="dv">18</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">18</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">21</span><span class="op">,</span> <span class="dv">18</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">22</span><span class="op">,</span> <span class="dv">18</span><span class="op">);</span></span>
<span id="cb163-202"><a href="#cb163-202" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">19</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">20</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">21</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">22</span><span class="op">);</span></span>
<span id="cb163-203"><a href="#cb163-203" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">23</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">24</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">25</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">26</span><span class="op">);</span></span>
<span id="cb163-204"><a href="#cb163-204" aria-hidden="true" tabindex="-1"></a>    set_pixel<span class="op">(</span><span class="dv">18</span><span class="op">,</span> <span class="dv">27</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">19</span><span class="op">,</span> <span class="dv">27</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">27</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">21</span><span class="op">,</span> <span class="dv">27</span><span class="op">);</span> set_pixel<span class="op">(</span><span class="dv">22</span><span class="op">,</span> <span class="dv">27</span><span class="op">);</span></span>
<span id="cb163-205"><a href="#cb163-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-206"><a href="#cb163-206" aria-hidden="true" tabindex="-1"></a>    wait_key<span class="op">();</span></span>
<span id="cb163-207"><a href="#cb163-207" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb163-208"><a href="#cb163-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-209"><a href="#cb163-209" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb163-210"><a href="#cb163-210" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> key<span class="op">;</span> <span class="dt">int</span> lk<span class="op">;</span> <span class="dt">int</span> running<span class="op">;</span></span>
<span id="cb163-211"><a href="#cb163-211" aria-hidden="true" tabindex="-1"></a>    running <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb163-212"><a href="#cb163-212" aria-hidden="true" tabindex="-1"></a>    lk <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb163-213"><a href="#cb163-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-214"><a href="#cb163-214" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>running<span class="op">)</span> <span class="op">{</span></span>
<span id="cb163-215"><a href="#cb163-215" aria-hidden="true" tabindex="-1"></a>        clear_screen<span class="op">();</span></span>
<span id="cb163-216"><a href="#cb163-216" aria-hidden="true" tabindex="-1"></a>        draw_menu<span class="op">();</span></span>
<span id="cb163-217"><a href="#cb163-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-218"><a href="#cb163-218" aria-hidden="true" tabindex="-1"></a>        <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb163-219"><a href="#cb163-219" aria-hidden="true" tabindex="-1"></a>            key <span class="op">=</span> <span class="op">*</span>KEYBOARD<span class="op">;</span></span>
<span id="cb163-220"><a href="#cb163-220" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> key <span class="op">!=</span> lk<span class="op">)</span> <span class="op">{</span></span>
<span id="cb163-221"><a href="#cb163-221" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">49</span><span class="op">)</span> <span class="op">{</span> app_calc<span class="op">();</span> <span class="cf">break</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb163-222"><a href="#cb163-222" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">50</span><span class="op">)</span> <span class="op">{</span> app_count<span class="op">();</span> <span class="cf">break</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb163-223"><a href="#cb163-223" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">51</span><span class="op">)</span> <span class="op">{</span> app_msg<span class="op">();</span> <span class="cf">break</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb163-224"><a href="#cb163-224" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">48</span><span class="op">)</span> <span class="op">{</span> running <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> <span class="cf">break</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb163-225"><a href="#cb163-225" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb163-226"><a href="#cb163-226" aria-hidden="true" tabindex="-1"></a>            lk <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb163-227"><a href="#cb163-227" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb163-228"><a href="#cb163-228" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb163-229"><a href="#cb163-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-230"><a href="#cb163-230" aria-hidden="true" tabindex="-1"></a>    clear_screen<span class="op">();</span></span>
<span id="cb163-231"><a href="#cb163-231" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb163-232"><a href="#cb163-232" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h3 data-number="1.5.16" id="projet-2-task-manager"><span class="header-section-number">1.5.16</span> Projet 2: Task Manager</h3>
<div class="sourceCode" id="cb164"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="co">// Gestionnaire de TÃ¢ches - Solution</span></span>
<span id="cb164-2"><a href="#cb164-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Cochez &quot;Capturer clavier&quot;</span></span>
<span id="cb164-3"><a href="#cb164-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-4"><a href="#cb164-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>SCREEN <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00400000</span><span class="op">;</span></span>
<span id="cb164-5"><a href="#cb164-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>KEYBOARD <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span><span class="bn">0x00402600</span><span class="op">;</span></span>
<span id="cb164-6"><a href="#cb164-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-7"><a href="#cb164-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> proc_work<span class="op">[</span><span class="dv">4</span><span class="op">];</span></span>
<span id="cb164-8"><a href="#cb164-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> proc_state<span class="op">[</span><span class="dv">4</span><span class="op">];</span></span>
<span id="cb164-9"><a href="#cb164-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> proc_done<span class="op">[</span><span class="dv">4</span><span class="op">];</span></span>
<span id="cb164-10"><a href="#cb164-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> current <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb164-11"><a href="#cb164-11" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> quantum_left <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb164-12"><a href="#cb164-12" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> switches <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb164-13"><a href="#cb164-13" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> ticks <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb164-14"><a href="#cb164-14" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> auto_run <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb164-15"><a href="#cb164-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-16"><a href="#cb164-16" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_pixel<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-17"><a href="#cb164-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span> <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb164-18"><a href="#cb164-18" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>y <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>x <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb164-19"><a href="#cb164-19" aria-hidden="true" tabindex="-1"></a>    bit_pos <span class="op">=</span> <span class="op">((</span>x <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>x <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb164-20"><a href="#cb164-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">|</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">);</span></span>
<span id="cb164-21"><a href="#cb164-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb164-22"><a href="#cb164-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-23"><a href="#cb164-23" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> clear_rect<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-24"><a href="#cb164-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> j<span class="op">;</span> <span class="dt">int</span> px<span class="op">;</span> <span class="dt">int</span> py<span class="op">;</span> <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span> <span class="dt">int</span> bit_pos<span class="op">;</span></span>
<span id="cb164-25"><a href="#cb164-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-26"><a href="#cb164-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> h<span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-27"><a href="#cb164-27" aria-hidden="true" tabindex="-1"></a>            px <span class="op">=</span> x <span class="op">+</span> i<span class="op">;</span> py <span class="op">=</span> y <span class="op">+</span> j<span class="op">;</span></span>
<span id="cb164-28"><a href="#cb164-28" aria-hidden="true" tabindex="-1"></a>            ptr <span class="op">=</span> SCREEN <span class="op">+</span> <span class="op">(</span>py <span class="op">&lt;&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>py <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span>px <span class="op">&gt;&gt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb164-29"><a href="#cb164-29" aria-hidden="true" tabindex="-1"></a>            bit_pos <span class="op">=</span> <span class="op">((</span>px <span class="op">&gt;&gt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">8</span> <span class="op">+</span> <span class="dv">7</span> <span class="op">-</span> <span class="op">(</span>px <span class="op">&amp;</span> <span class="dv">7</span><span class="op">);</span></span>
<span id="cb164-30"><a href="#cb164-30" aria-hidden="true" tabindex="-1"></a>            <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr <span class="op">&amp;</span> <span class="op">(</span><span class="bn">0xFFFFFFFF</span> <span class="op">^</span> <span class="op">(</span><span class="dv">1</span> <span class="op">&lt;&lt;</span> bit_pos<span class="op">));</span></span>
<span id="cb164-31"><a href="#cb164-31" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb164-32"><a href="#cb164-32" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb164-33"><a href="#cb164-33" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb164-34"><a href="#cb164-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-35"><a href="#cb164-35" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> fill_rect<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-36"><a href="#cb164-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> j<span class="op">;</span></span>
<span id="cb164-37"><a href="#cb164-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-38"><a href="#cb164-38" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> h<span class="op">;</span> j <span class="op">=</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-39"><a href="#cb164-39" aria-hidden="true" tabindex="-1"></a>            set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y <span class="op">+</span> j<span class="op">);</span></span>
<span id="cb164-40"><a href="#cb164-40" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb164-41"><a href="#cb164-41" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb164-42"><a href="#cb164-42" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb164-43"><a href="#cb164-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-44"><a href="#cb164-44" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_box<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> w<span class="op">,</span> <span class="dt">int</span> h<span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-45"><a href="#cb164-45" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb164-46"><a href="#cb164-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> w<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> i<span class="op">,</span> y <span class="op">+</span> h <span class="op">-</span> <span class="dv">1</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb164-47"><a href="#cb164-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> h<span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y <span class="op">+</span> i<span class="op">);</span> set_pixel<span class="op">(</span>x <span class="op">+</span> w <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> y <span class="op">+</span> i<span class="op">);</span> <span class="op">}</span></span>
<span id="cb164-48"><a href="#cb164-48" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb164-49"><a href="#cb164-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-50"><a href="#cb164-50" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_digit<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> d<span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-51"><a href="#cb164-51" aria-hidden="true" tabindex="-1"></a>    clear_rect<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb164-52"><a href="#cb164-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">);</span> <span class="op">}</span></span>
<span id="cb164-53"><a href="#cb164-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">4</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">5</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">9</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb164-54"><a href="#cb164-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">5</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">6</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb164-55"><a href="#cb164-55" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb164-56"><a href="#cb164-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">2</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">6</span> <span class="op">||</span> d <span class="op">==</span> <span class="dv">8</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb164-57"><a href="#cb164-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">2</span><span class="op">)</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb164-58"><a href="#cb164-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">!=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">4</span> <span class="op">&amp;&amp;</span> d <span class="op">!=</span> <span class="dv">7</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">2</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb164-59"><a href="#cb164-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">1</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">2</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">3</span><span class="op">);</span> set_pixel<span class="op">(</span>x<span class="op">+</span><span class="dv">1</span><span class="op">,</span> y<span class="op">+</span><span class="dv">4</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb164-60"><a href="#cb164-60" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb164-61"><a href="#cb164-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-62"><a href="#cb164-62" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_proc<span class="op">(</span><span class="dt">int</span> idx<span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-63"><a href="#cb164-63" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x<span class="op">;</span> <span class="dt">int</span> w<span class="op">;</span> <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> active<span class="op">;</span></span>
<span id="cb164-64"><a href="#cb164-64" aria-hidden="true" tabindex="-1"></a>    x <span class="op">=</span> idx <span class="op">*</span> <span class="dv">40</span> <span class="op">+</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb164-65"><a href="#cb164-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-66"><a href="#cb164-66" aria-hidden="true" tabindex="-1"></a>    clear_rect<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">36</span><span class="op">,</span> <span class="dv">55</span><span class="op">);</span></span>
<span id="cb164-67"><a href="#cb164-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-68"><a href="#cb164-68" aria-hidden="true" tabindex="-1"></a>    active <span class="op">=</span> <span class="op">(</span>idx <span class="op">==</span> current <span class="op">&amp;&amp;</span> proc_state<span class="op">[</span>idx<span class="op">]</span> <span class="op">==</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb164-69"><a href="#cb164-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-70"><a href="#cb164-70" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Cadre - double si running</span></span>
<span id="cb164-71"><a href="#cb164-71" aria-hidden="true" tabindex="-1"></a>    draw_box<span class="op">(</span>x<span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">36</span><span class="op">,</span> <span class="dv">55</span><span class="op">);</span></span>
<span id="cb164-72"><a href="#cb164-72" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>active<span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-73"><a href="#cb164-73" aria-hidden="true" tabindex="-1"></a>        draw_box<span class="op">(</span>x <span class="op">+</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">32</span><span class="op">,</span> <span class="dv">51</span><span class="op">);</span></span>
<span id="cb164-74"><a href="#cb164-74" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb164-75"><a href="#cb164-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-76"><a href="#cb164-76" aria-hidden="true" tabindex="-1"></a>    <span class="co">// P et numero (grand)</span></span>
<span id="cb164-77"><a href="#cb164-77" aria-hidden="true" tabindex="-1"></a>    fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">9</span><span class="op">);</span></span>
<span id="cb164-78"><a href="#cb164-78" aria-hidden="true" tabindex="-1"></a>    fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb164-79"><a href="#cb164-79" aria-hidden="true" tabindex="-1"></a>    fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb164-80"><a href="#cb164-80" aria-hidden="true" tabindex="-1"></a>    fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb164-81"><a href="#cb164-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-82"><a href="#cb164-82" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span>x <span class="op">+</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">12</span><span class="op">,</span> idx<span class="op">);</span></span>
<span id="cb164-83"><a href="#cb164-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-84"><a href="#cb164-84" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Etat: R=Ready *=Run B=Block X=Done</span></span>
<span id="cb164-85"><a href="#cb164-85" aria-hidden="true" tabindex="-1"></a>    clear_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">24</span><span class="op">,</span> <span class="dv">16</span><span class="op">,</span> <span class="dv">10</span><span class="op">);</span></span>
<span id="cb164-86"><a href="#cb164-86" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span>idx<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-87"><a href="#cb164-87" aria-hidden="true" tabindex="-1"></a>        <span class="co">// R</span></span>
<span id="cb164-88"><a href="#cb164-88" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb164-89"><a href="#cb164-89" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb164-90"><a href="#cb164-90" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">18</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb164-91"><a href="#cb164-91" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">28</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb164-92"><a href="#cb164-92" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">16</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb164-93"><a href="#cb164-93" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb164-94"><a href="#cb164-94" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span>idx<span class="op">]</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-95"><a href="#cb164-95" aria-hidden="true" tabindex="-1"></a>        <span class="co">// * etoile</span></span>
<span id="cb164-96"><a href="#cb164-96" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">26</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb164-97"><a href="#cb164-97" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">28</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb164-98"><a href="#cb164-98" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb164-99"><a href="#cb164-99" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span>idx<span class="op">]</span> <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-100"><a href="#cb164-100" aria-hidden="true" tabindex="-1"></a>        <span class="co">// B</span></span>
<span id="cb164-101"><a href="#cb164-101" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb164-102"><a href="#cb164-102" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb164-103"><a href="#cb164-103" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">28</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb164-104"><a href="#cb164-104" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">31</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb164-105"><a href="#cb164-105" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">18</span><span class="op">,</span> <span class="dv">26</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb164-106"><a href="#cb164-106" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">18</span><span class="op">,</span> <span class="dv">29</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb164-107"><a href="#cb164-107" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb164-108"><a href="#cb164-108" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span>idx<span class="op">]</span> <span class="op">==</span> <span class="dv">3</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-109"><a href="#cb164-109" aria-hidden="true" tabindex="-1"></a>        <span class="co">// X</span></span>
<span id="cb164-110"><a href="#cb164-110" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span> fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">18</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb164-111"><a href="#cb164-111" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">27</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span> fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">16</span><span class="op">,</span> <span class="dv">27</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb164-112"><a href="#cb164-112" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">29</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb164-113"><a href="#cb164-113" aria-hidden="true" tabindex="-1"></a>        fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">31</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span> fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">18</span><span class="op">,</span> <span class="dv">31</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb164-114"><a href="#cb164-114" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb164-115"><a href="#cb164-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-116"><a href="#cb164-116" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Barre travail restant</span></span>
<span id="cb164-117"><a href="#cb164-117" aria-hidden="true" tabindex="-1"></a>    w <span class="op">=</span> proc_work<span class="op">[</span>idx<span class="op">];</span></span>
<span id="cb164-118"><a href="#cb164-118" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-119"><a href="#cb164-119" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>i <span class="op">&lt;</span> w<span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-120"><a href="#cb164-120" aria-hidden="true" tabindex="-1"></a>            fill_rect<span class="op">(</span>x <span class="op">+</span> <span class="dv">6</span> <span class="op">+</span> i <span class="op">*</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">38</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb164-121"><a href="#cb164-121" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb164-122"><a href="#cb164-122" aria-hidden="true" tabindex="-1"></a>            draw_box<span class="op">(</span>x <span class="op">+</span> <span class="dv">6</span> <span class="op">+</span> i <span class="op">*</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">38</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">);</span></span>
<span id="cb164-123"><a href="#cb164-123" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb164-124"><a href="#cb164-124" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb164-125"><a href="#cb164-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-126"><a href="#cb164-126" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Compteur</span></span>
<span id="cb164-127"><a href="#cb164-127" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span>x <span class="op">+</span> <span class="dv">15</span><span class="op">,</span> <span class="dv">50</span><span class="op">,</span> proc_done<span class="op">[</span>idx<span class="op">]</span> <span class="op">%</span> <span class="dv">10</span><span class="op">);</span></span>
<span id="cb164-128"><a href="#cb164-128" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb164-129"><a href="#cb164-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-130"><a href="#cb164-130" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_info<span class="op">()</span> <span class="op">{</span></span>
<span id="cb164-131"><a href="#cb164-131" aria-hidden="true" tabindex="-1"></a>    clear_rect<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">62</span><span class="op">,</span> <span class="dv">156</span><span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb164-132"><a href="#cb164-132" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Q:</span></span>
<span id="cb164-133"><a href="#cb164-133" aria-hidden="true" tabindex="-1"></a>    fill_rect<span class="op">(</span><span class="dv">6</span><span class="op">,</span> <span class="dv">63</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span> fill_rect<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">63</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span> fill_rect<span class="op">(</span><span class="dv">11</span><span class="op">,</span> <span class="dv">63</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb164-134"><a href="#cb164-134" aria-hidden="true" tabindex="-1"></a>    fill_rect<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">66</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span> fill_rect<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">67</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb164-135"><a href="#cb164-135" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span><span class="dv">16</span><span class="op">,</span> <span class="dv">63</span><span class="op">,</span> quantum_left<span class="op">);</span></span>
<span id="cb164-136"><a href="#cb164-136" aria-hidden="true" tabindex="-1"></a>    <span class="co">// S:</span></span>
<span id="cb164-137"><a href="#cb164-137" aria-hidden="true" tabindex="-1"></a>    fill_rect<span class="op">(</span><span class="dv">30</span><span class="op">,</span> <span class="dv">63</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span> fill_rect<span class="op">(</span><span class="dv">28</span><span class="op">,</span> <span class="dv">65</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb164-138"><a href="#cb164-138" aria-hidden="true" tabindex="-1"></a>    fill_rect<span class="op">(</span><span class="dv">30</span><span class="op">,</span> <span class="dv">66</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span> fill_rect<span class="op">(</span><span class="dv">33</span><span class="op">,</span> <span class="dv">67</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb164-139"><a href="#cb164-139" aria-hidden="true" tabindex="-1"></a>    fill_rect<span class="op">(</span><span class="dv">28</span><span class="op">,</span> <span class="dv">68</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb164-140"><a href="#cb164-140" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span><span class="dv">38</span><span class="op">,</span> <span class="dv">63</span><span class="op">,</span> switches <span class="op">%</span> <span class="dv">10</span><span class="op">);</span></span>
<span id="cb164-141"><a href="#cb164-141" aria-hidden="true" tabindex="-1"></a>    <span class="co">// T:</span></span>
<span id="cb164-142"><a href="#cb164-142" aria-hidden="true" tabindex="-1"></a>    fill_rect<span class="op">(</span><span class="dv">52</span><span class="op">,</span> <span class="dv">63</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">2</span><span class="op">);</span> fill_rect<span class="op">(</span><span class="dv">54</span><span class="op">,</span> <span class="dv">65</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb164-143"><a href="#cb164-143" aria-hidden="true" tabindex="-1"></a>    draw_digit<span class="op">(</span><span class="dv">62</span><span class="op">,</span> <span class="dv">63</span><span class="op">,</span> ticks <span class="op">%</span> <span class="dv">10</span><span class="op">);</span></span>
<span id="cb164-144"><a href="#cb164-144" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb164-145"><a href="#cb164-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-146"><a href="#cb164-146" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> find_next<span class="op">(</span><span class="dt">int</span> from<span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-147"><a href="#cb164-147" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span> <span class="dt">int</span> next<span class="op">;</span></span>
<span id="cb164-148"><a href="#cb164-148" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">4</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-149"><a href="#cb164-149" aria-hidden="true" tabindex="-1"></a>        next <span class="op">=</span> <span class="op">(</span>from <span class="op">+</span> i<span class="op">)</span> <span class="op">%</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb164-150"><a href="#cb164-150" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span>next<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> proc_work<span class="op">[</span>next<span class="op">]</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> next<span class="op">;</span></span>
<span id="cb164-151"><a href="#cb164-151" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb164-152"><a href="#cb164-152" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> from<span class="op">;</span></span>
<span id="cb164-153"><a href="#cb164-153" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb164-154"><a href="#cb164-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-155"><a href="#cb164-155" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> all_done<span class="op">()</span> <span class="op">{</span></span>
<span id="cb164-156"><a href="#cb164-156" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb164-157"><a href="#cb164-157" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-158"><a href="#cb164-158" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> <span class="dv">3</span> <span class="op">&amp;&amp;</span> proc_state<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-159"><a href="#cb164-159" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>proc_work<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb164-160"><a href="#cb164-160" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb164-161"><a href="#cb164-161" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb164-162"><a href="#cb164-162" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb164-163"><a href="#cb164-163" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb164-164"><a href="#cb164-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-165"><a href="#cb164-165" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> do_tick<span class="op">()</span> <span class="op">{</span></span>
<span id="cb164-166"><a href="#cb164-166" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> next<span class="op">;</span></span>
<span id="cb164-167"><a href="#cb164-167" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>all_done<span class="op">())</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb164-168"><a href="#cb164-168" aria-hidden="true" tabindex="-1"></a>    ticks <span class="op">=</span> ticks <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb164-169"><a href="#cb164-169" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span>current<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> proc_state<span class="op">[</span>current<span class="op">]</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb164-170"><a href="#cb164-170" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span>current<span class="op">]</span> <span class="op">==</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> proc_work<span class="op">[</span>current<span class="op">]</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-171"><a href="#cb164-171" aria-hidden="true" tabindex="-1"></a>        proc_work<span class="op">[</span>current<span class="op">]</span> <span class="op">=</span> proc_work<span class="op">[</span>current<span class="op">]</span> <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb164-172"><a href="#cb164-172" aria-hidden="true" tabindex="-1"></a>        proc_done<span class="op">[</span>current<span class="op">]</span> <span class="op">=</span> proc_done<span class="op">[</span>current<span class="op">]</span> <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb164-173"><a href="#cb164-173" aria-hidden="true" tabindex="-1"></a>        quantum_left <span class="op">=</span> quantum_left <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb164-174"><a href="#cb164-174" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>proc_work<span class="op">[</span>current<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-175"><a href="#cb164-175" aria-hidden="true" tabindex="-1"></a>            proc_state<span class="op">[</span>current<span class="op">]</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb164-176"><a href="#cb164-176" aria-hidden="true" tabindex="-1"></a>            quantum_left <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb164-177"><a href="#cb164-177" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb164-178"><a href="#cb164-178" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb164-179"><a href="#cb164-179" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>quantum_left <span class="op">&lt;=</span> <span class="dv">0</span> <span class="op">||</span> proc_state<span class="op">[</span>current<span class="op">]</span> <span class="op">==</span> <span class="dv">2</span> <span class="op">||</span> proc_state<span class="op">[</span>current<span class="op">]</span> <span class="op">==</span> <span class="dv">3</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-180"><a href="#cb164-180" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span>current<span class="op">]</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> proc_state<span class="op">[</span>current<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb164-181"><a href="#cb164-181" aria-hidden="true" tabindex="-1"></a>        next <span class="op">=</span> find_next<span class="op">(</span>current<span class="op">);</span></span>
<span id="cb164-182"><a href="#cb164-182" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>next <span class="op">!=</span> current<span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-183"><a href="#cb164-183" aria-hidden="true" tabindex="-1"></a>            current <span class="op">=</span> next<span class="op">;</span></span>
<span id="cb164-184"><a href="#cb164-184" aria-hidden="true" tabindex="-1"></a>            switches <span class="op">=</span> switches <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb164-185"><a href="#cb164-185" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb164-186"><a href="#cb164-186" aria-hidden="true" tabindex="-1"></a>        quantum_left <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb164-187"><a href="#cb164-187" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb164-188"><a href="#cb164-188" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb164-189"><a href="#cb164-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-190"><a href="#cb164-190" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> toggle_block<span class="op">(</span><span class="dt">int</span> idx<span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-191"><a href="#cb164-191" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span>idx<span class="op">]</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> proc_state<span class="op">[</span>idx<span class="op">]</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-192"><a href="#cb164-192" aria-hidden="true" tabindex="-1"></a>        proc_state<span class="op">[</span>idx<span class="op">]</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb164-193"><a href="#cb164-193" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>idx <span class="op">==</span> current<span class="op">)</span> quantum_left <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb164-194"><a href="#cb164-194" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>proc_state<span class="op">[</span>idx<span class="op">]</span> <span class="op">==</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-195"><a href="#cb164-195" aria-hidden="true" tabindex="-1"></a>        proc_state<span class="op">[</span>idx<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb164-196"><a href="#cb164-196" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb164-197"><a href="#cb164-197" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb164-198"><a href="#cb164-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-199"><a href="#cb164-199" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> draw_all<span class="op">()</span> <span class="op">{</span></span>
<span id="cb164-200"><a href="#cb164-200" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb164-201"><a href="#cb164-201" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> draw_proc<span class="op">(</span>i<span class="op">);</span></span>
<span id="cb164-202"><a href="#cb164-202" aria-hidden="true" tabindex="-1"></a>    draw_info<span class="op">();</span></span>
<span id="cb164-203"><a href="#cb164-203" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb164-204"><a href="#cb164-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-205"><a href="#cb164-205" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb164-206"><a href="#cb164-206" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> key<span class="op">;</span> <span class="dt">int</span> lk<span class="op">;</span> <span class="dt">int</span> delay<span class="op">;</span></span>
<span id="cb164-207"><a href="#cb164-207" aria-hidden="true" tabindex="-1"></a>    proc_work<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> proc_work<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> proc_work<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">4</span><span class="op">;</span> proc_work<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb164-208"><a href="#cb164-208" aria-hidden="true" tabindex="-1"></a>    proc_state<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> proc_state<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> proc_state<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> proc_state<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb164-209"><a href="#cb164-209" aria-hidden="true" tabindex="-1"></a>    proc_done<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> proc_done<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> proc_done<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> proc_done<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb164-210"><a href="#cb164-210" aria-hidden="true" tabindex="-1"></a>    lk <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> delay <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb164-211"><a href="#cb164-211" aria-hidden="true" tabindex="-1"></a>    draw_all<span class="op">();</span></span>
<span id="cb164-212"><a href="#cb164-212" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-213"><a href="#cb164-213" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> <span class="op">*</span>KEYBOARD<span class="op">;</span></span>
<span id="cb164-214"><a href="#cb164-214" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>key <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> key <span class="op">!=</span> lk<span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-215"><a href="#cb164-215" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">32</span><span class="op">)</span> <span class="op">{</span> do_tick<span class="op">();</span> draw_all<span class="op">();</span> <span class="op">}</span></span>
<span id="cb164-216"><a href="#cb164-216" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">65</span><span class="op">)</span> <span class="op">{</span> auto_run <span class="op">=</span> <span class="dv">1</span> <span class="op">-</span> auto_run<span class="op">;</span> <span class="op">}</span></span>
<span id="cb164-217"><a href="#cb164-217" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">48</span><span class="op">)</span> <span class="op">{</span> toggle_block<span class="op">(</span><span class="dv">0</span><span class="op">);</span> draw_all<span class="op">();</span> <span class="op">}</span></span>
<span id="cb164-218"><a href="#cb164-218" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">49</span><span class="op">)</span> <span class="op">{</span> toggle_block<span class="op">(</span><span class="dv">1</span><span class="op">);</span> draw_all<span class="op">();</span> <span class="op">}</span></span>
<span id="cb164-219"><a href="#cb164-219" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">50</span><span class="op">)</span> <span class="op">{</span> toggle_block<span class="op">(</span><span class="dv">2</span><span class="op">);</span> draw_all<span class="op">();</span> <span class="op">}</span></span>
<span id="cb164-220"><a href="#cb164-220" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">51</span><span class="op">)</span> <span class="op">{</span> toggle_block<span class="op">(</span><span class="dv">3</span><span class="op">);</span> draw_all<span class="op">();</span> <span class="op">}</span></span>
<span id="cb164-221"><a href="#cb164-221" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>key <span class="op">==</span> <span class="dv">13</span><span class="op">)</span> <span class="cf">return</span> switches<span class="op">;</span></span>
<span id="cb164-222"><a href="#cb164-222" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb164-223"><a href="#cb164-223" aria-hidden="true" tabindex="-1"></a>        lk <span class="op">=</span> key<span class="op">;</span></span>
<span id="cb164-224"><a href="#cb164-224" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>auto_run<span class="op">)</span> <span class="op">{</span></span>
<span id="cb164-225"><a href="#cb164-225" aria-hidden="true" tabindex="-1"></a>            delay <span class="op">=</span> delay <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb164-226"><a href="#cb164-226" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>delay <span class="op">&gt;</span> <span class="dv">3000</span><span class="op">)</span> <span class="op">{</span> delay <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> do_tick<span class="op">();</span> draw_all<span class="op">();</span> <span class="op">}</span></span>
<span id="cb164-227"><a href="#cb164-227" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb164-228"><a href="#cb164-228" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb164-229"><a href="#cb164-229" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> switches<span class="op">;</span></span>
<span id="cb164-230"><a href="#cb164-230" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
</body>
</html>
