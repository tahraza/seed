<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 320" width="600" height="320">
  <defs>
    <style>
      .box { stroke: #374151; stroke-width: 1.5; rx: 4; }
      .title-box { stroke: #7c3aed; stroke-width: 2; fill: #f3e8ff; rx: 6; }
      .block { stroke: #7c3aed; stroke-width: 2; }
      .cell { stroke: #374151; stroke-width: 1; }
      .label { font-family: sans-serif; font-size: 10px; fill: #1f2937; }
      .title { font-family: sans-serif; font-size: 12px; font-weight: bold; fill: #7c3aed; }
      .mono { font-family: monospace; font-size: 9px; fill: #1f2937; }
      .arrow { stroke: #374151; stroke-width: 2; fill: none; }
    </style>
    <marker id="arr" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#374151"/>
    </marker>
  </defs>

  <!-- Title -->
  <rect class="title-box" x="20" y="10" width="560" height="30"/>
  <text class="title" x="300" y="30" text-anchor="middle">TECHNIQUE DE BLOCKING</text>

  <text class="label" x="30" y="60">Au lieu de parcourir toute la matrice, on traite par BLOCS qui tiennent dans le cache.</text>

  <!-- Matrix divided into blocks -->
  <text class="label" x="30" y="90" font-weight="bold">Matrice 4x4 divisee en blocs 2x2:</text>

  <!-- Block 0 -->
  <rect x="40" y="105" width="70" height="70" fill="none" class="block" stroke-dasharray="none"/>
  <rect x="45" y="110" width="28" height="28" fill="#e0e7ff" class="cell"/>
  <text class="mono" x="59" y="128" text-anchor="middle">0</text>
  <rect x="75" y="110" width="28" height="28" fill="#e0e7ff" class="cell"/>
  <text class="mono" x="89" y="128" text-anchor="middle">1</text>
  <rect x="45" y="140" width="28" height="28" fill="#e0e7ff" class="cell"/>
  <text class="mono" x="59" y="158" text-anchor="middle">4</text>
  <rect x="75" y="140" width="28" height="28" fill="#e0e7ff" class="cell"/>
  <text class="mono" x="89" y="158" text-anchor="middle">5</text>

  <!-- Block 1 -->
  <rect x="115" y="105" width="70" height="70" fill="none" class="block"/>
  <rect x="120" y="110" width="28" height="28" fill="#dcfce7" class="cell"/>
  <text class="mono" x="134" y="128" text-anchor="middle">2</text>
  <rect x="150" y="110" width="28" height="28" fill="#dcfce7" class="cell"/>
  <text class="mono" x="164" y="128" text-anchor="middle">3</text>
  <rect x="120" y="140" width="28" height="28" fill="#dcfce7" class="cell"/>
  <text class="mono" x="134" y="158" text-anchor="middle">6</text>
  <rect x="150" y="140" width="28" height="28" fill="#dcfce7" class="cell"/>
  <text class="mono" x="164" y="158" text-anchor="middle">7</text>

  <!-- Block 2 -->
  <rect x="40" y="180" width="70" height="70" fill="none" class="block"/>
  <rect x="45" y="185" width="28" height="28" fill="#fef3c7" class="cell"/>
  <text class="mono" x="59" y="203" text-anchor="middle">8</text>
  <rect x="75" y="185" width="28" height="28" fill="#fef3c7" class="cell"/>
  <text class="mono" x="89" y="203" text-anchor="middle">9</text>
  <rect x="45" y="215" width="28" height="28" fill="#fef3c7" class="cell"/>
  <text class="mono" x="59" y="233" text-anchor="middle">12</text>
  <rect x="75" y="215" width="28" height="28" fill="#fef3c7" class="cell"/>
  <text class="mono" x="89" y="233" text-anchor="middle">13</text>

  <!-- Block 3 -->
  <rect x="115" y="180" width="70" height="70" fill="none" class="block"/>
  <rect x="120" y="185" width="28" height="28" fill="#fce7f3" class="cell"/>
  <text class="mono" x="134" y="203" text-anchor="middle">10</text>
  <rect x="150" y="185" width="28" height="28" fill="#fce7f3" class="cell"/>
  <text class="mono" x="164" y="203" text-anchor="middle">11</text>
  <rect x="120" y="215" width="28" height="28" fill="#fce7f3" class="cell"/>
  <text class="mono" x="134" y="233" text-anchor="middle">14</text>
  <rect x="150" y="215" width="28" height="28" fill="#fce7f3" class="cell"/>
  <text class="mono" x="164" y="233" text-anchor="middle">15</text>

  <!-- Order of processing -->
  <text class="label" x="220" y="120" font-weight="bold">Ordre de traitement:</text>

  <rect x="220" y="135" width="50" height="40" fill="#e0e7ff" class="box"/>
  <text class="mono" x="245" y="160" text-anchor="middle">1</text>
  <text class="mono" x="245" y="175" text-anchor="middle">Bloc 0</text>

  <line class="arrow" x1="275" y1="155" x2="295" y2="155" marker-end="url(#arr)"/>

  <rect x="300" y="135" width="50" height="40" fill="#dcfce7" class="box"/>
  <text class="mono" x="325" y="160" text-anchor="middle">2</text>
  <text class="mono" x="325" y="175" text-anchor="middle">Bloc 1</text>

  <line class="arrow" x1="355" y1="155" x2="375" y2="155" marker-end="url(#arr)"/>

  <rect x="380" y="135" width="50" height="40" fill="#fef3c7" class="box"/>
  <text class="mono" x="405" y="160" text-anchor="middle">3</text>
  <text class="mono" x="405" y="175" text-anchor="middle">Bloc 2</text>

  <line class="arrow" x1="435" y1="155" x2="455" y2="155" marker-end="url(#arr)"/>

  <rect x="460" y="135" width="50" height="40" fill="#fce7f3" class="box"/>
  <text class="mono" x="485" y="160" text-anchor="middle">4</text>
  <text class="mono" x="485" y="175" text-anchor="middle">Bloc 3</text>

  <!-- Explanation -->
  <rect x="220" y="200" width="350" height="50" fill="#d1fae5" class="box" stroke="#059679"/>
  <text class="label" x="395" y="220" text-anchor="middle" fill="#059679" font-weight="bold">Chaque bloc tient dans le cache</text>
  <text class="label" x="395" y="238" text-anchor="middle" fill="#059679">â†’ Excellente localite spatiale et temporelle!</text>

  <!-- Note -->
  <text class="label" x="30" y="290">Note: Le blocking est utilise dans les bibliotheques d'algebre lineaire</text>
  <text class="label" x="30" y="305">(BLAS, LAPACK) pour optimiser les multiplications de matrices.</text>
</svg>
