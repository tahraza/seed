<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 650 420" width="650" height="420">
  <defs>
    <style>
      .box { stroke: #374151; stroke-width: 1.5; rx: 4; }
      .module { stroke: #2563eb; stroke-width: 2; fill: #dbeafe; rx: 6; }
      .component { stroke: #374151; stroke-width: 1.5; fill: #f3f4f6; rx: 4; }
      .label { font-family: sans-serif; font-size: 9px; fill: #1f2937; }
      .title { font-family: sans-serif; font-size: 12px; font-weight: bold; fill: #1e40af; }
      .mono { font-family: monospace; font-size: 8px; fill: #374151; }
      .arrow { stroke: #374151; stroke-width: 1.5; fill: none; }
    </style>
    <marker id="arr" markerWidth="6" markerHeight="5" refX="6" refY="2.5" orient="auto">
      <polygon points="0 0, 6 2.5, 0 5" fill="#374151"/>
    </marker>
  </defs>

  <!-- Title -->
  <rect x="20" y="10" width="610" height="30" fill="#dbeafe" stroke="#2563eb" stroke-width="2" rx="6"/>
  <text class="title" x="325" y="30" text-anchor="middle">ARCHITECTURE DU CACHE (HDL)</text>

  <!-- Main module border -->
  <rect class="module" x="30" y="50" width="590" height="350"/>
  <text class="title" x="325" y="75" text-anchor="middle">CACHE MODULE</text>

  <!-- Address input -->
  <text class="label" x="40" y="110">Adresse</text>
  <line class="arrow" x1="85" y1="107" x2="130" y2="107" marker-end="url(#arr)"/>

  <!-- Address decoder -->
  <rect class="component" x="135" y="90" width="100" height="60"/>
  <text class="label" x="185" y="110" text-anchor="middle" font-weight="bold">Decodeur</text>
  <text class="label" x="185" y="122" text-anchor="middle">d'adresse</text>

  <!-- Decoder outputs -->
  <line class="arrow" x1="235" y1="100" x2="280" y2="100" marker-end="url(#arr)"/>
  <text class="mono" x="290" y="103">Index (6b)</text>

  <line class="arrow" x1="235" y1="120" x2="280" y2="120" marker-end="url(#arr)"/>
  <text class="mono" x="290" y="123">Tag (22b)</text>

  <line class="arrow" x1="235" y1="140" x2="280" y2="140" marker-end="url(#arr)"/>
  <text class="mono" x="290" y="143">Offset (4b)</text>

  <!-- Cache Lines -->
  <rect class="component" x="135" y="170" width="350" height="80"/>
  <text class="label" x="310" y="190" text-anchor="middle" font-weight="bold">Cache Lines (x64)</text>

  <!-- Cache line structure -->
  <rect x="150" y="200" width="50" height="35" fill="#dcfce7" stroke="#374151"/>
  <text class="mono" x="175" y="215" text-anchor="middle">Valid</text>
  <text class="mono" x="175" y="228" text-anchor="middle">(1)</text>

  <rect x="205" y="200" width="80" height="35" fill="#dbeafe" stroke="#374151"/>
  <text class="mono" x="245" y="215" text-anchor="middle">Tag</text>
  <text class="mono" x="245" y="228" text-anchor="middle">(22)</text>

  <rect x="290" y="200" width="180" height="35" fill="#fef3c7" stroke="#374151"/>
  <text class="mono" x="380" y="215" text-anchor="middle">Data</text>
  <text class="mono" x="380" y="228" text-anchor="middle">(128)</text>

  <!-- Arrows down from cache lines -->
  <line class="arrow" x1="175" y1="250" x2="175" y2="280" marker-end="url(#arr)"/>
  <line class="arrow" x1="245" y1="250" x2="245" y2="280" marker-end="url(#arr)"/>
  <line class="arrow" x1="380" y1="250" x2="380" y2="280" marker-end="url(#arr)"/>

  <!-- Processing components -->
  <rect class="component" x="135" y="285" width="80" height="40"/>
  <text class="label" x="175" y="302" text-anchor="middle">TagCompare</text>
  <text class="mono" x="175" y="317" text-anchor="middle">hit/miss</text>

  <rect class="component" x="230" y="285" width="80" height="40"/>
  <text class="label" x="270" y="302" text-anchor="middle">WordSelect</text>
  <text class="mono" x="270" y="317" text-anchor="middle">4:1 mux</text>

  <rect class="component" x="325" y="285" width="80" height="40"/>
  <text class="label" x="365" y="302" text-anchor="middle">Mux Data</text>
  <text class="mono" x="365" y="317" text-anchor="middle">out data</text>

  <!-- Merge arrows -->
  <line class="arrow" x1="175" y1="325" x2="175" y2="340"/>
  <line class="arrow" x1="270" y1="325" x2="270" y2="340"/>
  <line class="arrow" x1="365" y1="325" x2="365" y2="340"/>
  <line x1="175" y1="340" x2="365" y2="340" class="arrow"/>
  <line class="arrow" x1="270" y1="340" x2="270" y2="355" marker-end="url(#arr)"/>

  <!-- Cache Controller -->
  <rect class="component" x="180" y="360" width="180" height="30"/>
  <text class="label" x="270" y="380" text-anchor="middle" font-weight="bold">CacheController</text>

  <!-- State machine mini diagram -->
  <rect x="440" y="285" width="160" height="90" fill="#f3e8ff" stroke="#7c3aed" stroke-width="1.5" rx="4"/>
  <text class="label" x="520" y="302" text-anchor="middle" font-weight="bold">Machine a Etats</text>

  <rect x="455" y="315" width="40" height="20" fill="#dcfce7" stroke="#374151" rx="2"/>
  <text class="mono" x="475" y="328" text-anchor="middle">IDLE</text>

  <rect x="505" y="315" width="45" height="20" fill="#fef3c7" stroke="#374151" rx="2"/>
  <text class="mono" x="528" y="328" text-anchor="middle">FETCH</text>

  <rect x="560" y="315" width="30" height="20" fill="#fee2e2" stroke="#374151" rx="2"/>
  <text class="mono" x="575" y="328" text-anchor="middle">WB</text>

  <line class="arrow" x1="495" y1="325" x2="505" y2="325"/>
  <line class="arrow" x1="550" y1="325" x2="560" y2="325"/>
</svg>
