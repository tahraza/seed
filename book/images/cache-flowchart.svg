<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 520" width="600" height="520">
  <defs>
    <style>
      .process { stroke: #374151; stroke-width: 1.5; fill: #f3f4f6; rx: 4; }
      .decision { stroke: #374151; stroke-width: 1.5; fill: #fef3c7; }
      .hit { stroke: #059669; stroke-width: 2; fill: #d1fae5; rx: 4; }
      .miss { stroke: #dc2626; stroke-width: 2; fill: #fee2e2; rx: 4; }
      .label { font-family: sans-serif; font-size: 10px; fill: #1f2937; }
      .decision-label { font-family: sans-serif; font-size: 9px; fill: #6b7280; font-weight: bold; }
      .title { font-family: sans-serif; font-size: 14px; font-weight: bold; fill: #1e3a8a; }
      .arrow { stroke: #374151; stroke-width: 1.5; fill: none; }
    </style>
    <marker id="arr" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#374151"/>
    </marker>
  </defs>

  <!-- Title -->
  <rect x="20" y="10" width="560" height="30" fill="#dbeafe" stroke="#2563eb" stroke-width="2" rx="4"/>
  <text class="title" x="300" y="30" text-anchor="middle">ALGORITHME DE LECTURE CACHE</text>

  <!-- Start: CPU demande -->
  <rect class="process" x="215" y="55" width="170" height="40"/>
  <text class="label" x="300" y="72" text-anchor="middle">CPU demande</text>
  <text class="label" x="300" y="86" text-anchor="middle">adresse A</text>

  <line class="arrow" x1="300" y1="95" x2="300" y2="115" marker-end="url(#arr)"/>

  <!-- Extract fields -->
  <rect class="process" x="195" y="120" width="210" height="40"/>
  <text class="label" x="300" y="137" text-anchor="middle">Extraire Tag, Index,</text>
  <text class="label" x="300" y="151" text-anchor="middle">Offset de A</text>

  <line class="arrow" x1="300" y1="160" x2="300" y2="180" marker-end="url(#arr)"/>

  <!-- Read line -->
  <rect class="process" x="210" y="185" width="180" height="35"/>
  <text class="label" x="300" y="207" text-anchor="middle">Lire ligne[Index]</text>

  <line class="arrow" x1="300" y1="220" x2="300" y2="240" marker-end="url(#arr)"/>

  <!-- Decision: Valid? -->
  <polygon class="decision" points="300,245 380,280 300,315 220,280"/>
  <text class="label" x="300" y="278" text-anchor="middle">Valid = 1 ?</text>

  <!-- NON branch (left) -->
  <line class="arrow" x1="220" y1="280" x2="100" y2="280"/>
  <line class="arrow" x1="100" y1="280" x2="100" y2="360" marker-end="url(#arr)"/>
  <text class="decision-label" x="150" y="273">NON</text>

  <!-- OUI branch (right) -->
  <line class="arrow" x1="380" y1="280" x2="450" y2="280"/>
  <line class="arrow" x1="450" y1="280" x2="450" y2="310" marker-end="url(#arr)"/>
  <text class="decision-label" x="410" y="273">OUI</text>

  <!-- Decision: Tag match? -->
  <polygon class="decision" points="450,315 530,350 450,385 370,350"/>
  <text class="label" x="450" y="345" text-anchor="middle">Tag</text>
  <text class="label" x="450" y="358" text-anchor="middle">match ?</text>

  <!-- NON branch from Tag (middle) -->
  <line class="arrow" x1="370" y1="350" x2="250" y2="350"/>
  <line class="arrow" x1="250" y1="350" x2="250" y2="370" marker-end="url(#arr)"/>
  <text class="decision-label" x="295" y="343">NON</text>

  <!-- OUI branch from Tag (right) -->
  <line class="arrow" x1="530" y1="350" x2="550" y2="350"/>
  <line class="arrow" x1="550" y1="350" x2="550" y2="395" marker-end="url(#arr)"/>
  <text class="decision-label" x="535" y="343">OUI</text>

  <!-- MISS: Ligne vide -->
  <rect class="miss" x="40" y="365" width="120" height="45"/>
  <text class="label" x="100" y="385" text-anchor="middle" fill="#dc2626" font-weight="bold">MISS</text>
  <text class="label" x="100" y="400" text-anchor="middle">Ligne vide</text>

  <!-- MISS: Mauvais tag -->
  <rect class="miss" x="190" y="375" width="120" height="45"/>
  <text class="label" x="250" y="395" text-anchor="middle" fill="#dc2626" font-weight="bold">MISS</text>
  <text class="label" x="250" y="410" text-anchor="middle">Mauvais tag</text>

  <!-- HIT -->
  <rect class="hit" x="490" y="400" width="100" height="45"/>
  <text class="label" x="540" y="420" text-anchor="middle" fill="#059669" font-weight="bold">HIT</text>
  <text class="label" x="540" y="435" text-anchor="middle">Succes !</text>

  <!-- Merge MISS paths -->
  <line class="arrow" x1="100" y1="410" x2="100" y2="430"/>
  <line class="arrow" x1="250" y1="420" x2="250" y2="430"/>
  <line x1="100" y1="430" x2="250" y2="430" class="arrow"/>
  <line class="arrow" x1="175" y1="430" x2="175" y2="450" marker-end="url(#arr)"/>

  <!-- Final boxes -->
  <rect class="miss" x="80" y="455" width="190" height="50" rx="4"/>
  <text class="label" x="175" y="472" text-anchor="middle">Charger depuis RAM</text>
  <text class="label" x="175" y="486" text-anchor="middle">Stocker dans cache (~100 ns)</text>

  <!-- HIT result -->
  <line class="arrow" x1="540" y1="445" x2="540" y2="470" marker-end="url(#arr)"/>
  <rect class="hit" x="445" y="455" width="190" height="50" rx="4"/>
  <text class="label" x="540" y="472" text-anchor="middle">Retourner donnee</text>
  <text class="label" x="540" y="486" text-anchor="middle">depuis le cache (~1 ns)</text>
</svg>
