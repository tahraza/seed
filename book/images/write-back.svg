<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 340" width="600" height="340">
  <defs>
    <style>
      .box { stroke: #374151; stroke-width: 1.5; rx: 4; }
      .title-box { stroke: #9333ea; stroke-width: 2; fill: #f3e8ff; rx: 6; }
      .label { font-family: sans-serif; font-size: 10px; fill: #1f2937; }
      .title { font-family: sans-serif; font-size: 14px; font-weight: bold; fill: #7c3aed; }
      .step { font-family: sans-serif; font-size: 11px; fill: #1f2937; font-weight: bold; }
      .mono { font-family: monospace; font-size: 10px; fill: #1f2937; }
      .arrow { stroke: #374151; stroke-width: 2; fill: none; }
      .good { font-family: sans-serif; font-size: 10px; fill: #059669; }
      .bad { font-family: sans-serif; font-size: 10px; fill: #dc2626; }
    </style>
    <marker id="arr" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#374151"/>
    </marker>
  </defs>

  <!-- Title -->
  <rect class="title-box" x="20" y="10" width="560" height="35"/>
  <text class="title" x="300" y="33" text-anchor="middle">WRITE-BACK (Ecriture Differee)</text>

  <!-- Step 1 -->
  <text class="step" x="30" y="70">Etape 1: CPU ecrit 42</text>

  <!-- CPU Box -->
  <rect x="60" y="85" width="80" height="45" fill="#e0e7ff" class="box"/>
  <text class="label" x="100" y="105" text-anchor="middle" font-weight="bold">CPU</text>
  <text class="mono" x="100" y="120" text-anchor="middle">write(42)</text>

  <!-- Arrow to Cache only -->
  <line class="arrow" x1="140" y1="107" x2="200" y2="107" marker-end="url(#arr)"/>

  <!-- Cache Box Step 1 -->
  <rect x="210" y="80" width="130" height="55" fill="#dcfce7" class="box"/>
  <text class="label" x="275" y="98" text-anchor="middle" font-weight="bold">Cache</text>
  <text class="mono" x="275" y="113" text-anchor="middle" fill="#059669">42 OK</text>
  <text class="mono" x="275" y="128" text-anchor="middle" fill="#9333ea">dirty=1</text>

  <!-- Dirty note -->
  <text class="label" x="350" y="113" fill="#9333ea">Marque "modifie"</text>

  <!-- Step 2 -->
  <text class="step" x="30" y="170">Etape 2: Plus tard, quand la ligne doit etre remplacee</text>

  <!-- Cache Box Step 2 -->
  <rect x="100" y="185" width="130" height="55" fill="#dcfce7" class="box"/>
  <text class="label" x="165" y="203" text-anchor="middle" font-weight="bold">Cache</text>
  <text class="mono" x="165" y="218" text-anchor="middle" fill="#9333ea">dirty=1</text>
  <text class="mono" x="165" y="233" text-anchor="middle" fill="#059669">â†’ dirty=0</text>

  <!-- Arrow to RAM -->
  <line class="arrow" x1="230" y1="212" x2="320" y2="212" marker-end="url(#arr)"/>
  <text class="label" x="250" y="200">ecriture</text>

  <!-- RAM Box -->
  <rect x="330" y="185" width="130" height="55" fill="#fef3c7" class="box"/>
  <text class="label" x="395" y="203" text-anchor="middle" font-weight="bold">RAM</text>
  <text class="mono" x="395" y="218" text-anchor="middle" fill="#059679">42 OK</text>

  <!-- Pros/Cons -->
  <text class="good" x="30" y="280">+ Ecritures rapides (seulement dans le cache)</text>
  <text class="bad" x="30" y="298">- Plus complexe (bit dirty necessaire)</text>
  <text class="bad" x="30" y="316">- Cache et RAM peuvent etre desynchronises</text>
</svg>
